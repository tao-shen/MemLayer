# Architecture Documentation

## System Overview

Agent Memory Platform is a microservices-based system for managing AI agent memories with support for multiple memory types, vector search, knowledge graphs, and advanced retrieval mechanisms.

## Architecture Layers

### 1. Client Layer
- AI Agent applications
- Web applications
- Third-party integrations

### 2. API Gateway Layer
- Authentication (JWT)
- Authorization (RBAC)
- Rate limiting
- Request routing
- API versioning

### 3. Service Layer
- **Memory Service**: Core memory coordination
- **Embedding Service**: Vector generation
- **Retrieval Service**: Search and RAG
- **Reflection Service**: Insight generation
- **Management Service**: Lifecycle management

### 4. Engine Layer
- **STM Engine**: Short-term memory (Redis)
- **Episodic Memory Engine**: Event-based memories
- **Semantic Memory Engine**: Knowledge management

### 5. Storage Layer
- **PostgreSQL**: Metadata and indexes
- **Qdrant**: Vector embeddings
- **Neo4j**: Knowledge graph
- **Redis**: Cache and STM

## Data Flow

1. Client sends request to API Gateway
2. Gateway authenticates and routes to service
3. Service coordinates with engines
4. Engines interact with storage
5. Response flows back through layers

## Memory Types

### Short-Term Memory
- Stored in Redis
- Session-scoped
- FIFO eviction
- Fast access

### Episodic Memory
- Stored in Qdrant + PostgreSQL
- Time-stamped events
- Three-component retrieval (recency, importance, relevance)
- Supports reflection

### Semantic Memory
- Stored in Neo4j + Qdrant
- Structured knowledge
- Graph relationships
- Vector similarity

### Reflections
- Generated by LLM
- High importance
- Synthesized insights

## Key Technologies

- **TypeScript**: Type-safe development
- **Express.js**: API framework
- **Prisma**: Database ORM
- **Qdrant**: Vector database
- **Neo4j**: Graph database
- **Redis**: Cache
- **OpenAI**: Embeddings and LLM
- **Docker**: Containerization
- **Prometheus**: Monitoring

## Scalability

- Horizontal scaling of stateless services
- Database sharding by agent_id
- Read replicas for databases
- CDN for static assets
- Load balancing

## Security

- JWT authentication
- RBAC authorization
- Data encryption at rest
- TLS in transit
- Rate limiting
- Input validation
- Audit logging
