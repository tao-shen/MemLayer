(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();function Oc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var nd={exports:{}},Oa={};var Jv;function Jw(){if(Jv)return Oa;Jv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var c in l)c!=="key"&&(u[c]=l[c])}else u=l;return l=u.ref,{$$typeof:s,type:n,key:d,ref:l!==void 0?l:null,props:u}}return Oa.Fragment=t,Oa.jsx=r,Oa.jsxs=r,Oa}var Qv;function Qw(){return Qv||(Qv=1,nd.exports=Jw()),nd.exports}var w=Qw(),ad={exports:{}},Ae={};var Zv;function Zw(){if(Zv)return Ae;Zv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),S=Symbol.iterator;function A(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,p={};function _(L,V,te){this.props=L,this.context=V,this.refs=p,this.updater=te||E}_.prototype.isReactComponent={},_.prototype.setState=function(L,V){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,V,"setState")},_.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function v(){}v.prototype=_.prototype;function y(L,V,te){this.props=L,this.context=V,this.refs=p,this.updater=te||E}var k=y.prototype=new v;k.constructor=y,C(k,_.prototype),k.isPureReactComponent=!0;var T=Array.isArray;function j(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(L,V,te){var oe=te.ref;return{$$typeof:s,type:L,key:V,ref:oe!==void 0?oe:null,props:te}}function U(L,V){return N(L.type,V,L.props)}function F(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function I(L){var V={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(te){return V[te]})}var W=/\/+/g;function Q(L,V){return typeof L=="object"&&L!==null&&L.key!=null?I(""+L.key):V.toString(36)}function se(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(j,j):(L.status="pending",L.then(function(V){L.status==="pending"&&(L.status="fulfilled",L.value=V)},function(V){L.status==="pending"&&(L.status="rejected",L.reason=V)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function $(L,V,te,oe,de){var me=typeof L;(me==="undefined"||me==="boolean")&&(L=null);var B=!1;if(L===null)B=!0;else switch(me){case"bigint":case"string":case"number":B=!0;break;case"object":switch(L.$$typeof){case s:case t:B=!0;break;case x:return B=L._init,$(B(L._payload),V,te,oe,de)}}if(B)return de=de(L),B=oe===""?"."+Q(L,0):oe,T(de)?(te="",B!=null&&(te=B.replace(W,"$&/")+"/"),$(de,V,te,"",function(ce){return ce})):de!=null&&(F(de)&&(de=U(de,te+(de.key==null||L&&L.key===de.key?"":(""+de.key).replace(W,"$&/")+"/")+B)),V.push(de)),1;B=0;var J=oe===""?".":oe+":";if(T(L))for(var ae=0;ae<L.length;ae++)oe=L[ae],me=J+Q(oe,ae),B+=$(oe,V,te,me,de);else if(ae=A(L),typeof ae=="function")for(L=ae.call(L),ae=0;!(oe=L.next()).done;)oe=oe.value,me=J+Q(oe,ae++),B+=$(oe,V,te,me,de);else if(me==="object"){if(typeof L.then=="function")return $(se(L),V,te,oe,de);throw V=String(L),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return B}function Y(L,V,te){if(L==null)return L;var oe=[],de=0;return $(L,oe,"","",function(me){return V.call(te,me,de++)}),oe}function M(L){if(L._status===-1){var V=L._result;V=V(),V.then(function(te){(L._status===0||L._status===-1)&&(L._status=1,L._result=te)},function(te){(L._status===0||L._status===-1)&&(L._status=2,L._result=te)}),L._status===-1&&(L._status=0,L._result=V)}if(L._status===1)return L._result.default;throw L._result}var H=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},z={map:Y,forEach:function(L,V,te){Y(L,function(){V.apply(this,arguments)},te)},count:function(L){var V=0;return Y(L,function(){V++}),V},toArray:function(L){return Y(L,function(V){return V})||[]},only:function(L){if(!F(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ae.Activity=g,Ae.Children=z,Ae.Component=_,Ae.Fragment=r,Ae.Profiler=l,Ae.PureComponent=y,Ae.StrictMode=n,Ae.Suspense=h,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(L){return D.H.useMemoCache(L)}},Ae.cache=function(L){return function(){return L.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(L,V,te){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var oe=C({},L.props),de=L.key;if(V!=null)for(me in V.key!==void 0&&(de=""+V.key),V)!R.call(V,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&V.ref===void 0||(oe[me]=V[me]);var me=arguments.length-2;if(me===1)oe.children=te;else if(1<me){for(var B=Array(me),J=0;J<me;J++)B[J]=arguments[J+2];oe.children=B}return N(L.type,de,oe)},Ae.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Ae.createElement=function(L,V,te){var oe,de={},me=null;if(V!=null)for(oe in V.key!==void 0&&(me=""+V.key),V)R.call(V,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(de[oe]=V[oe]);var B=arguments.length-2;if(B===1)de.children=te;else if(1<B){for(var J=Array(B),ae=0;ae<B;ae++)J[ae]=arguments[ae+2];de.children=J}if(L&&L.defaultProps)for(oe in B=L.defaultProps,B)de[oe]===void 0&&(de[oe]=B[oe]);return N(L,me,de)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(L){return{$$typeof:c,render:L}},Ae.isValidElement=F,Ae.lazy=function(L){return{$$typeof:x,_payload:{_status:-1,_result:L},_init:M}},Ae.memo=function(L,V){return{$$typeof:f,type:L,compare:V===void 0?null:V}},Ae.startTransition=function(L){var V=D.T,te={};D.T=te;try{var oe=L(),de=D.S;de!==null&&de(te,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(j,H)}catch(me){H(me)}finally{V!==null&&te.types!==null&&(V.types=te.types),D.T=V}},Ae.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ae.use=function(L){return D.H.use(L)},Ae.useActionState=function(L,V,te){return D.H.useActionState(L,V,te)},Ae.useCallback=function(L,V){return D.H.useCallback(L,V)},Ae.useContext=function(L){return D.H.useContext(L)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(L,V){return D.H.useDeferredValue(L,V)},Ae.useEffect=function(L,V){return D.H.useEffect(L,V)},Ae.useEffectEvent=function(L){return D.H.useEffectEvent(L)},Ae.useId=function(){return D.H.useId()},Ae.useImperativeHandle=function(L,V,te){return D.H.useImperativeHandle(L,V,te)},Ae.useInsertionEffect=function(L,V){return D.H.useInsertionEffect(L,V)},Ae.useLayoutEffect=function(L,V){return D.H.useLayoutEffect(L,V)},Ae.useMemo=function(L,V){return D.H.useMemo(L,V)},Ae.useOptimistic=function(L,V){return D.H.useOptimistic(L,V)},Ae.useReducer=function(L,V,te){return D.H.useReducer(L,V,te)},Ae.useRef=function(L){return D.H.useRef(L)},Ae.useState=function(L){return D.H.useState(L)},Ae.useSyncExternalStore=function(L,V,te){return D.H.useSyncExternalStore(L,V,te)},Ae.useTransition=function(){return D.H.useTransition()},Ae.version="19.2.4",Ae}var e_;function Af(){return e_||(e_=1,ad.exports=Zw()),ad.exports}var q=Af();const H0=Oc(q);var od={exports:{}},ja={},ld={exports:{}},cd={};var t_;function eS(){return t_||(t_=1,(function(s){function t($,Y){var M=$.length;$.push(Y);e:for(;0<M;){var H=M-1>>>1,z=$[H];if(0<l(z,Y))$[H]=Y,$[M]=z,M=H;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var Y=$[0],M=$.pop();if(M!==Y){$[0]=M;e:for(var H=0,z=$.length,L=z>>>1;H<L;){var V=2*(H+1)-1,te=$[V],oe=V+1,de=$[oe];if(0>l(te,M))oe<z&&0>l(de,te)?($[H]=de,$[oe]=M,H=oe):($[H]=te,$[V]=M,H=V);else if(oe<z&&0>l(de,M))$[H]=de,$[oe]=M,H=oe;else break e}}return Y}function l($,Y){var M=$.sortIndex-Y.sortIndex;return M!==0?M:$.id-Y.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,c=d.now();s.unstable_now=function(){return d.now()-c}}var h=[],f=[],x=1,g=null,S=3,A=!1,E=!1,C=!1,p=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function k($){for(var Y=r(f);Y!==null;){if(Y.callback===null)n(f);else if(Y.startTime<=$)n(f),Y.sortIndex=Y.expirationTime,t(h,Y);else break;Y=r(f)}}function T($){if(C=!1,k($),!E)if(r(h)!==null)E=!0,j||(j=!0,I());else{var Y=r(f);Y!==null&&se(T,Y.startTime-$)}}var j=!1,D=-1,R=5,N=-1;function U(){return p?!0:!(s.unstable_now()-N<R)}function F(){if(p=!1,j){var $=s.unstable_now();N=$;var Y=!0;try{e:{E=!1,C&&(C=!1,v(D),D=-1),A=!0;var M=S;try{t:{for(k($),g=r(h);g!==null&&!(g.expirationTime>$&&U());){var H=g.callback;if(typeof H=="function"){g.callback=null,S=g.priorityLevel;var z=H(g.expirationTime<=$);if($=s.unstable_now(),typeof z=="function"){g.callback=z,k($),Y=!0;break t}g===r(h)&&n(h),k($)}else n(h);g=r(h)}if(g!==null)Y=!0;else{var L=r(f);L!==null&&se(T,L.startTime-$),Y=!1}}break e}finally{g=null,S=M,A=!1}Y=void 0}}finally{Y?I():j=!1}}}var I;if(typeof y=="function")I=function(){y(F)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=F,I=function(){Q.postMessage(null)}}else I=function(){_(F,0)};function se($,Y){D=_(function(){$(s.unstable_now())},Y)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function($){switch(S){case 1:case 2:case 3:var Y=3;break;default:Y=S}var M=S;S=Y;try{return $()}finally{S=M}},s.unstable_requestPaint=function(){p=!0},s.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var M=S;S=$;try{return Y()}finally{S=M}},s.unstable_scheduleCallback=function($,Y,M){var H=s.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?H+M:H):M=H,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=M+z,$={id:x++,callback:Y,priorityLevel:$,startTime:M,expirationTime:z,sortIndex:-1},M>H?($.sortIndex=M,t(f,$),r(h)===null&&$===r(f)&&(C?(v(D),D=-1):C=!0,se(T,M-H))):($.sortIndex=z,t(h,$),E||A||(E=!0,j||(j=!0,I()))),$},s.unstable_shouldYield=U,s.unstable_wrapCallback=function($){var Y=S;return function(){var M=S;S=Y;try{return $.apply(this,arguments)}finally{S=M}}}})(cd)),cd}var i_;function tS(){return i_||(i_=1,ld.exports=eS()),ld.exports}var ud={exports:{}},Pt={};var s_;function iS(){if(s_)return Pt;s_=1;var s=Af();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(h,f,x){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:g==null?null:""+g,children:h,containerInfo:f,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Pt.createPortal=function(h,f){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return u(h,f,null,x)},Pt.flushSync=function(h){var f=d.T,x=n.p;try{if(d.T=null,n.p=2,h)return h()}finally{d.T=f,n.p=x,n.d.f()}},Pt.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(h,f))},Pt.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Pt.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var x=f.as,g=c(x,f.crossOrigin),S=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;x==="style"?n.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:S,fetchPriority:A}):x==="script"&&n.d.X(h,{crossOrigin:g,integrity:S,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Pt.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var x=c(f.as,f.crossOrigin);n.d.M(h,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(h)},Pt.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var x=f.as,g=c(x,f.crossOrigin);n.d.L(h,x,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Pt.preloadModule=function(h,f){if(typeof h=="string")if(f){var x=c(f.as,f.crossOrigin);n.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(h)},Pt.requestFormReset=function(h){n.d.r(h)},Pt.unstable_batchedUpdates=function(h,f){return h(f)},Pt.useFormState=function(h,f,x){return d.H.useFormState(h,f,x)},Pt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Pt.version="19.2.4",Pt}var r_;function sS(){if(r_)return ud.exports;r_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),ud.exports=iS(),ud.exports}var n_;function rS(){if(n_)return ja;n_=1;var s=tS(),t=Af(),r=sS();function n(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function c(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(u(e)!==e)throw Error(n(188))}function f(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(n(188));return i!==e?null:e}for(var a=e,o=i;;){var m=a.return;if(m===null)break;var b=m.alternate;if(b===null){if(o=m.return,o!==null){a=o;continue}break}if(m.child===b.child){for(b=m.child;b;){if(b===a)return h(m),e;if(b===o)return h(m),i;b=b.sibling}throw Error(n(188))}if(a.return!==o.return)a=m,o=b;else{for(var O=!1,P=m.child;P;){if(P===a){O=!0,a=m,o=b;break}if(P===o){O=!0,o=m,a=b;break}P=P.sibling}if(!O){for(P=b.child;P;){if(P===a){O=!0,a=b,o=m;break}if(P===o){O=!0,o=b,a=m;break}P=P.sibling}if(!O)throw Error(n(189))}}if(a.alternate!==o)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?e:i}function x(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=x(e),i!==null)return i;e=e.sibling}return null}var g=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),y=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var W=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===W?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case _:return"Profiler";case p:return"StrictMode";case T:return"Suspense";case j:return"SuspenseList";case N:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case y:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case k:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return i=e.displayName||null,i!==null?i:Q(e.type)||"Memo";case R:i=e._payload,e=e._init;try{return Q(e(i))}catch{}}return null}var se=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},H=[],z=-1;function L(e){return{current:e}}function V(e){0>z||(e.current=H[z],H[z]=null,z--)}function te(e,i){z++,H[z]=e.current,e.current=i}var oe=L(null),de=L(null),me=L(null),B=L(null);function J(e,i){switch(te(me,i),te(de,e),te(oe,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?bv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=bv(i),e=xv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(oe),te(oe,e)}function ae(){V(oe),V(de),V(me)}function ce(e){e.memoizedState!==null&&te(B,e);var i=oe.current,a=xv(i,e.type);i!==a&&(te(de,e),te(oe,a))}function xe(e){de.current===e&&(V(oe),V(de)),B.current===e&&(V(B),ka._currentValue=M)}var pe,Pe;function Ve(e){if(pe===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);pe=i&&i[1]||"",Pe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+e+Pe}var dt=!1;function Qt(e,i){if(!e||dt)return"";dt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ie=re}Reflect.construct(e,[],he)}else{try{he.call()}catch(re){ie=re}e.call(he.prototype)}}else{try{throw Error()}catch(re){ie=re}(he=e())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ie&&typeof re.stack=="string")return[re.stack,ie.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=o.DetermineComponentFrameRoot(),O=b[0],P=b[1];if(O&&P){var K=O.split(`
`),ee=P.split(`
`);for(m=o=0;o<K.length&&!K[o].includes("DetermineComponentFrameRoot");)o++;for(;m<ee.length&&!ee[m].includes("DetermineComponentFrameRoot");)m++;if(o===K.length||m===ee.length)for(o=K.length-1,m=ee.length-1;1<=o&&0<=m&&K[o]!==ee[m];)m--;for(;1<=o&&0<=m;o--,m--)if(K[o]!==ee[m]){if(o!==1||m!==1)do if(o--,m--,0>m||K[o]!==ee[m]){var le=`
`+K[o].replace(" at new "," at ");return e.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",e.displayName)),le}while(1<=o&&0<=m);break}}}finally{dt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ve(a):""}function ke(e,i){switch(e.tag){case 26:case 27:case 5:return Ve(e.type);case 16:return Ve("Lazy");case 13:return e.child!==i&&i!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return Qt(e.type,!1);case 11:return Qt(e.type.render,!1);case 1:return Qt(e.type,!0);case 31:return Ve("Activity");default:return""}}function li(e){try{var i="",a=null;do i+=ke(e,a),a=e,e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ci=Object.prototype.hasOwnProperty,ui=s.unstable_scheduleCallback,Fi=s.unstable_cancelCallback,vs=s.unstable_shouldYield,Bt=s.unstable_requestPaint,fe=s.unstable_now,ve=s.unstable_getCurrentPriorityLevel,qe=s.unstable_ImmediatePriority,tt=s.unstable_UserBlockingPriority,Je=s.unstable_NormalPriority,Ci=s.unstable_LowPriority,Ct=s.unstable_IdlePriority,Ei=s.log,Fe=s.unstable_setDisableYieldValue,ki=null,Et=null;function hi(e){if(typeof Ei=="function"&&Fe(e),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(ki,e)}catch{}}var Rt=Math.clz32?Math.clz32:Kc,Pn=Math.log,Un=Math.LN2;function Kc(e){return e>>>=0,e===0?32:31-(Pn(e)/Un|0)|0}var fo=256,po=262144,mo=4194304;function Ys(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function go(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var m=0,b=e.suspendedLanes,O=e.pingedLanes;e=e.warmLanes;var P=o&134217727;return P!==0?(o=P&~b,o!==0?m=Ys(o):(O&=P,O!==0?m=Ys(O):a||(a=P&~e,a!==0&&(m=Ys(a))))):(P=o&~b,P!==0?m=Ys(P):O!==0?m=Ys(O):a||(a=o&~e,a!==0&&(m=Ys(a)))),m===0?0:i!==0&&i!==m&&(i&b)===0&&(b=m&-m,a=i&-i,b>=a||b===32&&(a&4194048)!==0)?i:m}function Hn(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Ub(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tp(){var e=mo;return mo<<=1,(mo&62914560)===0&&(mo=4194304),e}function Vc(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function In(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Hb(e,i,a,o,m,b){var O=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var P=e.entanglements,K=e.expirationTimes,ee=e.hiddenUpdates;for(a=O&~a;0<a;){var le=31-Rt(a),he=1<<le;P[le]=0,K[le]=-1;var ie=ee[le];if(ie!==null)for(ee[le]=null,le=0;le<ie.length;le++){var re=ie[le];re!==null&&(re.lane&=-536870913)}a&=~he}o!==0&&ip(e,o,0),b!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=b&~(O&~i))}function ip(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Rt(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function sp(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Rt(a),m=1<<o;m&i|e[o]&i&&(e[o]|=i),a&=~m}}function rp(e,i){var a=i&-i;return a=(a&42)!==0?1:Gc(a),(a&(e.suspendedLanes|i))!==0?0:a}function Gc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Yc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function np(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:Fv(e.type))}function ap(e,i){var a=Y.p;try{return Y.p=e,i()}finally{Y.p=a}}var _s=Math.random().toString(36).slice(2),Tt="__reactFiber$"+_s,zt="__reactProps$"+_s,kr="__reactContainer$"+_s,Xc="__reactEvents$"+_s,Ib="__reactListeners$"+_s,zb="__reactHandles$"+_s,op="__reactResources$"+_s,zn="__reactMarker$"+_s;function Jc(e){delete e[Tt],delete e[zt],delete e[Xc],delete e[Ib],delete e[zb]}function Ar(e){var i=e[Tt];if(i)return i;for(var a=e.parentNode;a;){if(i=a[kr]||a[Tt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Rv(e);e!==null;){if(a=e[Tt])return a;e=Rv(e)}return i}e=a,a=e.parentNode}return null}function Rr(e){if(e=e[Tt]||e[kr]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function $n(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(n(33))}function Tr(e){var i=e[op];return i||(i=e[op]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function kt(e){e[zn]=!0}var lp=new Set,cp={};function Xs(e,i){Or(e,i),Or(e+"Capture",i)}function Or(e,i){for(cp[e]=i,e=0;e<i.length;e++)lp.add(i[e])}var $b=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),up={},hp={};function qb(e){return ci.call(hp,e)?!0:ci.call(up,e)?!1:$b.test(e)?hp[e]=!0:(up[e]=!0,!1)}function vo(e,i,a){if(qb(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function _o(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Wi(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}function di(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dp(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fb(e,i,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,b=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return m.call(this)},set:function(O){a=""+O,b.call(this,O)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(O){a=""+O},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Qc(e){if(!e._valueTracker){var i=dp(e)?"checked":"value";e._valueTracker=Fb(e,i,""+e[i])}}function fp(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=dp(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wb=/[\n"\\]/g;function fi(e){return e.replace(Wb,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Zc(e,i,a,o,m,b,O,P){e.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?e.type=O:e.removeAttribute("type"),i!=null?O==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+di(i)):e.value!==""+di(i)&&(e.value=""+di(i)):O!=="submit"&&O!=="reset"||e.removeAttribute("value"),i!=null?eu(e,O,di(i)):a!=null?eu(e,O,di(a)):o!=null&&e.removeAttribute("value"),m==null&&b!=null&&(e.defaultChecked=!!b),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?e.name=""+di(P):e.removeAttribute("name")}function pp(e,i,a,o,m,b,O,P){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.type=b),i!=null||a!=null){if(!(b!=="submit"&&b!=="reset"||i!=null)){Qc(e);return}a=a!=null?""+di(a):"",i=i!=null?""+di(i):a,P||i===e.value||(e.value=i),e.defaultValue=i}o=o??m,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=P?e.checked:!!o,e.defaultChecked=!!o,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(e.name=O),Qc(e)}function eu(e,i,a){i==="number"&&yo(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function jr(e,i,a,o){if(e=e.options,i){i={};for(var m=0;m<a.length;m++)i["$"+a[m]]=!0;for(a=0;a<e.length;a++)m=i.hasOwnProperty("$"+e[a].value),e[a].selected!==m&&(e[a].selected=m),m&&o&&(e[a].defaultSelected=!0)}else{for(a=""+di(a),i=null,m=0;m<e.length;m++){if(e[m].value===a){e[m].selected=!0,o&&(e[m].defaultSelected=!0);return}i!==null||e[m].disabled||(i=e[m])}i!==null&&(i.selected=!0)}}function mp(e,i,a){if(i!=null&&(i=""+di(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+di(a):""}function gp(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(n(92));if(se(o)){if(1<o.length)throw Error(n(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=di(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Qc(e)}function Dr(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Kb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vp(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||Kb.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function _p(e,i,a){if(i!=null&&typeof i!="object")throw Error(n(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var m in i)o=i[m],i.hasOwnProperty(m)&&a[m]!==o&&vp(e,m,o)}else for(var b in i)i.hasOwnProperty(b)&&vp(e,b,i[b])}function tu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bo(e){return Gb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ki(){}var iu=null;function su(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nr=null,Lr=null;function yp(e){var i=Rr(e);if(i&&(e=i.stateNode)){var a=e[zt]||null;e:switch(e=i.stateNode,i.type){case"input":if(Zc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fi(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var m=o[zt]||null;if(!m)throw Error(n(90));Zc(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&fp(o)}break e;case"textarea":mp(e,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&jr(e,!!a.multiple,i,!1)}}}var ru=!1;function bp(e,i,a){if(ru)return e(i,a);ru=!0;try{var o=e(i);return o}finally{if(ru=!1,(Nr!==null||Lr!==null)&&(ol(),Nr&&(i=Nr,e=Lr,Lr=Nr=null,yp(i),e)))for(i=0;i<e.length;i++)yp(e[i])}}function qn(e,i){var a=e.stateNode;if(a===null)return null;var o=a[zt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(n(231,i,typeof a));return a}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nu=!1;if(Vi)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){nu=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{nu=!1}var ys=null,au=null,xo=null;function xp(){if(xo)return xo;var e,i=au,a=i.length,o,m="value"in ys?ys.value:ys.textContent,b=m.length;for(e=0;e<a&&i[e]===m[e];e++);var O=a-e;for(o=1;o<=O&&i[a-o]===m[b-o];o++);return xo=m.slice(e,1<o?1-o:void 0)}function wo(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function So(){return!0}function wp(){return!1}function $t(e){function i(a,o,m,b,O){this._reactName=a,this._targetInst=m,this.type=o,this.nativeEvent=b,this.target=O,this.currentTarget=null;for(var P in e)e.hasOwnProperty(P)&&(a=e[P],this[P]=a?a(b):b[P]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?So:wp,this.isPropagationStopped=wp,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),i}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Co=$t(Js),Wn=g({},Js,{view:0,detail:0}),Yb=$t(Wn),ou,lu,Kn,Eo=g({},Wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kn&&(Kn&&e.type==="mousemove"?(ou=e.screenX-Kn.screenX,lu=e.screenY-Kn.screenY):lu=ou=0,Kn=e),ou)},movementY:function(e){return"movementY"in e?e.movementY:lu}}),Sp=$t(Eo),Xb=g({},Eo,{dataTransfer:0}),Jb=$t(Xb),Qb=g({},Wn,{relatedTarget:0}),cu=$t(Qb),Zb=g({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),ex=$t(Zb),tx=g({},Js,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ix=$t(tx),sx=g({},Js,{data:0}),Cp=$t(sx),rx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ax={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ox(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ax[e])?!!i[e]:!1}function uu(){return ox}var lx=g({},Wn,{key:function(e){if(e.key){var i=rx[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=wo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uu,charCode:function(e){return e.type==="keypress"?wo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cx=$t(lx),ux=g({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ep=$t(ux),hx=g({},Wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uu}),dx=$t(hx),fx=g({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),px=$t(fx),mx=g({},Eo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gx=$t(mx),vx=g({},Js,{newState:0,oldState:0}),_x=$t(vx),yx=[9,13,27,32],hu=Vi&&"CompositionEvent"in window,Vn=null;Vi&&"documentMode"in document&&(Vn=document.documentMode);var bx=Vi&&"TextEvent"in window&&!Vn,kp=Vi&&(!hu||Vn&&8<Vn&&11>=Vn),Ap=" ",Rp=!1;function Tp(e,i){switch(e){case"keyup":return yx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Op(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mr=!1;function xx(e,i){switch(e){case"compositionend":return Op(i);case"keypress":return i.which!==32?null:(Rp=!0,Ap);case"textInput":return e=i.data,e===Ap&&Rp?null:e;default:return null}}function wx(e,i){if(Mr)return e==="compositionend"||!hu&&Tp(e,i)?(e=xp(),xo=au=ys=null,Mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kp&&i.locale!=="ko"?null:i.data;default:return null}}var Sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Sx[e.type]:i==="textarea"}function Dp(e,i,a,o){Nr?Lr?Lr.push(o):Lr=[o]:Nr=o,i=pl(i,"onChange"),0<i.length&&(a=new Co("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Gn=null,Yn=null;function Cx(e){pv(e,0)}function ko(e){var i=$n(e);if(fp(i))return e}function Np(e,i){if(e==="change")return i}var Lp=!1;if(Vi){var du;if(Vi){var fu="oninput"in document;if(!fu){var Mp=document.createElement("div");Mp.setAttribute("oninput","return;"),fu=typeof Mp.oninput=="function"}du=fu}else du=!1;Lp=du&&(!document.documentMode||9<document.documentMode)}function Bp(){Gn&&(Gn.detachEvent("onpropertychange",Pp),Yn=Gn=null)}function Pp(e){if(e.propertyName==="value"&&ko(Yn)){var i=[];Dp(i,Yn,e,su(e)),bp(Cx,i)}}function Ex(e,i,a){e==="focusin"?(Bp(),Gn=i,Yn=a,Gn.attachEvent("onpropertychange",Pp)):e==="focusout"&&Bp()}function kx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ko(Yn)}function Ax(e,i){if(e==="click")return ko(i)}function Rx(e,i){if(e==="input"||e==="change")return ko(i)}function Tx(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Zt=typeof Object.is=="function"?Object.is:Tx;function Xn(e,i){if(Zt(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var m=a[o];if(!ci.call(i,m)||!Zt(e[m],i[m]))return!1}return!0}function Up(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hp(e,i){var a=Up(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Up(a)}}function Ip(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Ip(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function zp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=yo(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=yo(e.document)}return i}function pu(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Ox=Vi&&"documentMode"in document&&11>=document.documentMode,Br=null,mu=null,Jn=null,gu=!1;function $p(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gu||Br==null||Br!==yo(o)||(o=Br,"selectionStart"in o&&pu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Jn&&Xn(Jn,o)||(Jn=o,o=pl(mu,"onSelect"),0<o.length&&(i=new Co("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=Br)))}function Qs(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Pr={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},vu={},qp={};Vi&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Zs(e){if(vu[e])return vu[e];if(!Pr[e])return e;var i=Pr[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in qp)return vu[e]=i[a];return e}var Fp=Zs("animationend"),Wp=Zs("animationiteration"),Kp=Zs("animationstart"),jx=Zs("transitionrun"),Dx=Zs("transitionstart"),Nx=Zs("transitioncancel"),Vp=Zs("transitionend"),Gp=new Map,_u="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_u.push("scrollEnd");function Ai(e,i){Gp.set(e,i),Xs(i,[e])}var Ao=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pi=[],Ur=0,yu=0;function Ro(){for(var e=Ur,i=yu=Ur=0;i<e;){var a=pi[i];pi[i++]=null;var o=pi[i];pi[i++]=null;var m=pi[i];pi[i++]=null;var b=pi[i];if(pi[i++]=null,o!==null&&m!==null){var O=o.pending;O===null?m.next=m:(m.next=O.next,O.next=m),o.pending=m}b!==0&&Yp(a,m,b)}}function To(e,i,a,o){pi[Ur++]=e,pi[Ur++]=i,pi[Ur++]=a,pi[Ur++]=o,yu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function bu(e,i,a,o){return To(e,i,a,o),Oo(e)}function er(e,i){return To(e,null,null,i),Oo(e)}function Yp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var m=!1,b=e.return;b!==null;)b.childLanes|=a,o=b.alternate,o!==null&&(o.childLanes|=a),b.tag===22&&(e=b.stateNode,e===null||e._visibility&1||(m=!0)),e=b,b=b.return;return e.tag===3?(b=e.stateNode,m&&i!==null&&(m=31-Rt(a),e=b.hiddenUpdates,o=e[m],o===null?e[m]=[i]:o.push(i),i.lane=a|536870912),b):null}function Oo(e){if(50<ya)throw ya=0,Th=null,Error(n(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Hr={};function Lx(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(e,i,a,o){return new Lx(e,i,a,o)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gi(e,i){var a=e.alternate;return a===null?(a=ei(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Xp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function jo(e,i,a,o,m,b){var O=0;if(o=e,typeof e=="function")xu(e)&&(O=1);else if(typeof e=="string")O=Hw(e,a,oe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case N:return e=ei(31,a,i,m),e.elementType=N,e.lanes=b,e;case C:return tr(a.children,m,b,i);case p:O=8,m|=24;break;case _:return e=ei(12,a,i,m|2),e.elementType=_,e.lanes=b,e;case T:return e=ei(13,a,i,m),e.elementType=T,e.lanes=b,e;case j:return e=ei(19,a,i,m),e.elementType=j,e.lanes=b,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y:O=10;break e;case v:O=9;break e;case k:O=11;break e;case D:O=14;break e;case R:O=16,o=null;break e}O=29,a=Error(n(130,e===null?"null":typeof e,"")),o=null}return i=ei(O,a,i,m),i.elementType=e,i.type=o,i.lanes=b,i}function tr(e,i,a,o){return e=ei(7,e,o,i),e.lanes=a,e}function wu(e,i,a){return e=ei(6,e,null,i),e.lanes=a,e}function Jp(e){var i=ei(18,null,null,0);return i.stateNode=e,i}function Su(e,i,a){return i=ei(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Qp=new WeakMap;function mi(e,i){if(typeof e=="object"&&e!==null){var a=Qp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:li(i)},Qp.set(e,i),i)}return{value:e,source:i,stack:li(i)}}var Ir=[],zr=0,Do=null,Qn=0,gi=[],vi=0,bs=null,Mi=1,Bi="";function Yi(e,i){Ir[zr++]=Qn,Ir[zr++]=Do,Do=e,Qn=i}function Zp(e,i,a){gi[vi++]=Mi,gi[vi++]=Bi,gi[vi++]=bs,bs=e;var o=Mi;e=Bi;var m=32-Rt(o)-1;o&=~(1<<m),a+=1;var b=32-Rt(i)+m;if(30<b){var O=m-m%5;b=(o&(1<<O)-1).toString(32),o>>=O,m-=O,Mi=1<<32-Rt(i)+m|a<<m|o,Bi=b+e}else Mi=1<<b|a<<m|o,Bi=e}function Cu(e){e.return!==null&&(Yi(e,1),Zp(e,1,0))}function Eu(e){for(;e===Do;)Do=Ir[--zr],Ir[zr]=null,Qn=Ir[--zr],Ir[zr]=null;for(;e===bs;)bs=gi[--vi],gi[vi]=null,Bi=gi[--vi],gi[vi]=null,Mi=gi[--vi],gi[vi]=null}function em(e,i){gi[vi++]=Mi,gi[vi++]=Bi,gi[vi++]=bs,Mi=i.id,Bi=i.overflow,bs=e}var Ot=null,it=null,Ue=!1,xs=null,_i=!1,ku=Error(n(519));function ws(e){var i=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zn(mi(i,e)),ku}function tm(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Tt]=e,i[zt]=o,a){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(a=0;a<xa.length;a++)De(xa[a],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":De("invalid",i),pp(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":De("invalid",i);break;case"textarea":De("invalid",i),gp(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||_v(i.textContent,a)?(o.popover!=null&&(De("beforetoggle",i),De("toggle",i)),o.onScroll!=null&&De("scroll",i),o.onScrollEnd!=null&&De("scrollend",i),o.onClick!=null&&(i.onclick=Ki),i=!0):i=!1,i||ws(e,!0)}function im(e){for(Ot=e.return;Ot;)switch(Ot.tag){case 5:case 31:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:Ot=Ot.return}}function $r(e){if(e!==Ot)return!1;if(!Ue)return im(e),Ue=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Fh(e.type,e.memoizedProps)),a=!a),a&&it&&ws(e),im(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));it=Av(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));it=Av(e)}else i===27?(i=it,Bs(e.type)?(e=Yh,Yh=null,it=e):it=i):it=Ot?bi(e.stateNode.nextSibling):null;return!0}function ir(){it=Ot=null,Ue=!1}function Au(){var e=xs;return e!==null&&(Kt===null?Kt=e:Kt.push.apply(Kt,e),xs=null),e}function Zn(e){xs===null?xs=[e]:xs.push(e)}var Ru=L(null),sr=null,Xi=null;function Ss(e,i,a){te(Ru,i._currentValue),i._currentValue=a}function Ji(e){e._currentValue=Ru.current,V(Ru)}function Tu(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function Ou(e,i,a,o){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var b=m.dependencies;if(b!==null){var O=m.child;b=b.firstContext;e:for(;b!==null;){var P=b;b=m;for(var K=0;K<i.length;K++)if(P.context===i[K]){b.lanes|=a,P=b.alternate,P!==null&&(P.lanes|=a),Tu(b.return,a,e),o||(O=null);break e}b=P.next}}else if(m.tag===18){if(O=m.return,O===null)throw Error(n(341));O.lanes|=a,b=O.alternate,b!==null&&(b.lanes|=a),Tu(O,a,e),O=null}else O=m.child;if(O!==null)O.return=m;else for(O=m;O!==null;){if(O===e){O=null;break}if(m=O.sibling,m!==null){m.return=O.return,O=m;break}O=O.return}m=O}}function qr(e,i,a,o){e=null;for(var m=i,b=!1;m!==null;){if(!b){if((m.flags&524288)!==0)b=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var O=m.alternate;if(O===null)throw Error(n(387));if(O=O.memoizedProps,O!==null){var P=m.type;Zt(m.pendingProps.value,O.value)||(e!==null?e.push(P):e=[P])}}else if(m===B.current){if(O=m.alternate,O===null)throw Error(n(387));O.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(ka):e=[ka])}m=m.return}e!==null&&Ou(i,e,a,o),i.flags|=262144}function No(e){for(e=e.firstContext;e!==null;){if(!Zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function rr(e){sr=e,Xi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function jt(e){return sm(sr,e)}function Lo(e,i){return sr===null&&rr(e),sm(e,i)}function sm(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Xi===null){if(e===null)throw Error(n(308));Xi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Xi=Xi.next=i;return a}var Mx=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},Bx=s.unstable_scheduleCallback,Px=s.unstable_NormalPriority,gt={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ju(){return{controller:new Mx,data:new Map,refCount:0}}function ea(e){e.refCount--,e.refCount===0&&Bx(Px,function(){e.controller.abort()})}var ta=null,Du=0,Fr=0,Wr=null;function Ux(e,i){if(ta===null){var a=ta=[];Du=0,Fr=Mh(),Wr={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Du++,i.then(rm,rm),i}function rm(){if(--Du===0&&ta!==null){Wr!==null&&(Wr.status="fulfilled");var e=ta;ta=null,Fr=0,Wr=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Hx(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var m=0;m<a.length;m++)(0,a[m])(i)},function(m){for(o.status="rejected",o.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),o}var nm=$.S;$.S=function(e,i){$g=fe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Ux(e,i),nm!==null&&nm(e,i)};var nr=L(null);function Nu(){var e=nr.current;return e!==null?e:Qe.pooledCache}function Mo(e,i){i===null?te(nr,nr.current):te(nr,i.pool)}function am(){var e=Nu();return e===null?null:{parent:gt._currentValue,pool:e}}var Kr=Error(n(460)),Lu=Error(n(474)),Bo=Error(n(542)),Po={then:function(){}};function om(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lm(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Ki,Ki),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,um(e),e;default:if(typeof i.status=="string")i.then(Ki,Ki);else{if(e=Qe,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=o}},function(o){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,um(e),e}throw or=i,Kr}}function ar(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(or=a,Kr):a}}var or=null;function cm(){if(or===null)throw Error(n(459));var e=or;return or=null,e}function um(e){if(e===Kr||e===Bo)throw Error(n(483))}var Vr=null,ia=0;function Uo(e){var i=ia;return ia+=1,Vr===null&&(Vr=[]),lm(Vr,e,i)}function sa(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Ho(e,i){throw i.$$typeof===S?Error(n(525)):(e=Object.prototype.toString.call(i),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function hm(e){function i(X,G){if(e){var Z=X.deletions;Z===null?(X.deletions=[G],X.flags|=16):Z.push(G)}}function a(X,G){if(!e)return null;for(;G!==null;)i(X,G),G=G.sibling;return null}function o(X){for(var G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function m(X,G){return X=Gi(X,G),X.index=0,X.sibling=null,X}function b(X,G,Z){return X.index=Z,e?(Z=X.alternate,Z!==null?(Z=Z.index,Z<G?(X.flags|=67108866,G):Z):(X.flags|=67108866,G)):(X.flags|=1048576,G)}function O(X){return e&&X.alternate===null&&(X.flags|=67108866),X}function P(X,G,Z,ue){return G===null||G.tag!==6?(G=wu(Z,X.mode,ue),G.return=X,G):(G=m(G,Z),G.return=X,G)}function K(X,G,Z,ue){var be=Z.type;return be===C?le(X,G,Z.props.children,ue,Z.key):G!==null&&(G.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===R&&ar(be)===G.type)?(G=m(G,Z.props),sa(G,Z),G.return=X,G):(G=jo(Z.type,Z.key,Z.props,null,X.mode,ue),sa(G,Z),G.return=X,G)}function ee(X,G,Z,ue){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=Su(Z,X.mode,ue),G.return=X,G):(G=m(G,Z.children||[]),G.return=X,G)}function le(X,G,Z,ue,be){return G===null||G.tag!==7?(G=tr(Z,X.mode,ue,be),G.return=X,G):(G=m(G,Z),G.return=X,G)}function he(X,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=wu(""+G,X.mode,Z),G.return=X,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return Z=jo(G.type,G.key,G.props,null,X.mode,Z),sa(Z,G),Z.return=X,Z;case E:return G=Su(G,X.mode,Z),G.return=X,G;case R:return G=ar(G),he(X,G,Z)}if(se(G)||I(G))return G=tr(G,X.mode,Z,null),G.return=X,G;if(typeof G.then=="function")return he(X,Uo(G),Z);if(G.$$typeof===y)return he(X,Lo(X,G),Z);Ho(X,G)}return null}function ie(X,G,Z,ue){var be=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return be!==null?null:P(X,G,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===be?K(X,G,Z,ue):null;case E:return Z.key===be?ee(X,G,Z,ue):null;case R:return Z=ar(Z),ie(X,G,Z,ue)}if(se(Z)||I(Z))return be!==null?null:le(X,G,Z,ue,null);if(typeof Z.then=="function")return ie(X,G,Uo(Z),ue);if(Z.$$typeof===y)return ie(X,G,Lo(X,Z),ue);Ho(X,Z)}return null}function re(X,G,Z,ue,be){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return X=X.get(Z)||null,P(G,X,""+ue,be);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case A:return X=X.get(ue.key===null?Z:ue.key)||null,K(G,X,ue,be);case E:return X=X.get(ue.key===null?Z:ue.key)||null,ee(G,X,ue,be);case R:return ue=ar(ue),re(X,G,Z,ue,be)}if(se(ue)||I(ue))return X=X.get(Z)||null,le(G,X,ue,be,null);if(typeof ue.then=="function")return re(X,G,Z,Uo(ue),be);if(ue.$$typeof===y)return re(X,G,Z,Lo(G,ue),be);Ho(G,ue)}return null}function ge(X,G,Z,ue){for(var be=null,Ie=null,_e=G,Te=G=0,Le=null;_e!==null&&Te<Z.length;Te++){_e.index>Te?(Le=_e,_e=null):Le=_e.sibling;var ze=ie(X,_e,Z[Te],ue);if(ze===null){_e===null&&(_e=Le);break}e&&_e&&ze.alternate===null&&i(X,_e),G=b(ze,G,Te),Ie===null?be=ze:Ie.sibling=ze,Ie=ze,_e=Le}if(Te===Z.length)return a(X,_e),Ue&&Yi(X,Te),be;if(_e===null){for(;Te<Z.length;Te++)_e=he(X,Z[Te],ue),_e!==null&&(G=b(_e,G,Te),Ie===null?be=_e:Ie.sibling=_e,Ie=_e);return Ue&&Yi(X,Te),be}for(_e=o(_e);Te<Z.length;Te++)Le=re(_e,X,Te,Z[Te],ue),Le!==null&&(e&&Le.alternate!==null&&_e.delete(Le.key===null?Te:Le.key),G=b(Le,G,Te),Ie===null?be=Le:Ie.sibling=Le,Ie=Le);return e&&_e.forEach(function(zs){return i(X,zs)}),Ue&&Yi(X,Te),be}function we(X,G,Z,ue){if(Z==null)throw Error(n(151));for(var be=null,Ie=null,_e=G,Te=G=0,Le=null,ze=Z.next();_e!==null&&!ze.done;Te++,ze=Z.next()){_e.index>Te?(Le=_e,_e=null):Le=_e.sibling;var zs=ie(X,_e,ze.value,ue);if(zs===null){_e===null&&(_e=Le);break}e&&_e&&zs.alternate===null&&i(X,_e),G=b(zs,G,Te),Ie===null?be=zs:Ie.sibling=zs,Ie=zs,_e=Le}if(ze.done)return a(X,_e),Ue&&Yi(X,Te),be;if(_e===null){for(;!ze.done;Te++,ze=Z.next())ze=he(X,ze.value,ue),ze!==null&&(G=b(ze,G,Te),Ie===null?be=ze:Ie.sibling=ze,Ie=ze);return Ue&&Yi(X,Te),be}for(_e=o(_e);!ze.done;Te++,ze=Z.next())ze=re(_e,X,Te,ze.value,ue),ze!==null&&(e&&ze.alternate!==null&&_e.delete(ze.key===null?Te:ze.key),G=b(ze,G,Te),Ie===null?be=ze:Ie.sibling=ze,Ie=ze);return e&&_e.forEach(function(Xw){return i(X,Xw)}),Ue&&Yi(X,Te),be}function Xe(X,G,Z,ue){if(typeof Z=="object"&&Z!==null&&Z.type===C&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var be=Z.key;G!==null;){if(G.key===be){if(be=Z.type,be===C){if(G.tag===7){a(X,G.sibling),ue=m(G,Z.props.children),ue.return=X,X=ue;break e}}else if(G.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===R&&ar(be)===G.type){a(X,G.sibling),ue=m(G,Z.props),sa(ue,Z),ue.return=X,X=ue;break e}a(X,G);break}else i(X,G);G=G.sibling}Z.type===C?(ue=tr(Z.props.children,X.mode,ue,Z.key),ue.return=X,X=ue):(ue=jo(Z.type,Z.key,Z.props,null,X.mode,ue),sa(ue,Z),ue.return=X,X=ue)}return O(X);case E:e:{for(be=Z.key;G!==null;){if(G.key===be)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){a(X,G.sibling),ue=m(G,Z.children||[]),ue.return=X,X=ue;break e}else{a(X,G);break}else i(X,G);G=G.sibling}ue=Su(Z,X.mode,ue),ue.return=X,X=ue}return O(X);case R:return Z=ar(Z),Xe(X,G,Z,ue)}if(se(Z))return ge(X,G,Z,ue);if(I(Z)){if(be=I(Z),typeof be!="function")throw Error(n(150));return Z=be.call(Z),we(X,G,Z,ue)}if(typeof Z.then=="function")return Xe(X,G,Uo(Z),ue);if(Z.$$typeof===y)return Xe(X,G,Lo(X,Z),ue);Ho(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(a(X,G.sibling),ue=m(G,Z),ue.return=X,X=ue):(a(X,G),ue=wu(Z,X.mode,ue),ue.return=X,X=ue),O(X)):a(X,G)}return function(X,G,Z,ue){try{ia=0;var be=Xe(X,G,Z,ue);return Vr=null,be}catch(_e){if(_e===Kr||_e===Bo)throw _e;var Ie=ei(29,_e,null,X.mode);return Ie.lanes=ue,Ie.return=X,Ie}}}var lr=hm(!0),dm=hm(!1),Cs=!1;function Mu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bu(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Es(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ks(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,($e&2)!==0){var m=o.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),o.pending=i,i=Oo(e),Yp(e,null,a),i}return To(e,o,i,a),Oo(e)}function ra(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,sp(e,a)}}function Pu(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var m=null,b=null;if(a=a.firstBaseUpdate,a!==null){do{var O={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};b===null?m=b=O:b=b.next=O,a=a.next}while(a!==null);b===null?m=b=i:b=b.next=i}else m=b=i;a={baseState:o.baseState,firstBaseUpdate:m,lastBaseUpdate:b,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Uu=!1;function na(){if(Uu){var e=Wr;if(e!==null)throw e}}function aa(e,i,a,o){Uu=!1;var m=e.updateQueue;Cs=!1;var b=m.firstBaseUpdate,O=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var K=P,ee=K.next;K.next=null,O===null?b=ee:O.next=ee,O=K;var le=e.alternate;le!==null&&(le=le.updateQueue,P=le.lastBaseUpdate,P!==O&&(P===null?le.firstBaseUpdate=ee:P.next=ee,le.lastBaseUpdate=K))}if(b!==null){var he=m.baseState;O=0,le=ee=K=null,P=b;do{var ie=P.lane&-536870913,re=ie!==P.lane;if(re?(Ne&ie)===ie:(o&ie)===ie){ie!==0&&ie===Fr&&(Uu=!0),le!==null&&(le=le.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var ge=e,we=P;ie=i;var Xe=a;switch(we.tag){case 1:if(ge=we.payload,typeof ge=="function"){he=ge.call(Xe,he,ie);break e}he=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,ie=typeof ge=="function"?ge.call(Xe,he,ie):ge,ie==null)break e;he=g({},he,ie);break e;case 2:Cs=!0}}ie=P.callback,ie!==null&&(e.flags|=64,re&&(e.flags|=8192),re=m.callbacks,re===null?m.callbacks=[ie]:re.push(ie))}else re={lane:ie,tag:P.tag,payload:P.payload,callback:P.callback,next:null},le===null?(ee=le=re,K=he):le=le.next=re,O|=ie;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;re=P,P=re.next,re.next=null,m.lastBaseUpdate=re,m.shared.pending=null}}while(!0);le===null&&(K=he),m.baseState=K,m.firstBaseUpdate=ee,m.lastBaseUpdate=le,b===null&&(m.shared.lanes=0),js|=O,e.lanes=O,e.memoizedState=he}}function fm(e,i){if(typeof e!="function")throw Error(n(191,e));e.call(i)}function pm(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)fm(a[e],i)}var Gr=L(null),Io=L(0);function mm(e,i){e=as,te(Io,e),te(Gr,i),as=e|i.baseLanes}function Hu(){te(Io,as),te(Gr,Gr.current)}function Iu(){as=Io.current,V(Gr),V(Io)}var ti=L(null),yi=null;function As(e){var i=e.alternate;te(ft,ft.current&1),te(ti,e),yi===null&&(i===null||Gr.current!==null||i.memoizedState!==null)&&(yi=e)}function zu(e){te(ft,ft.current),te(ti,e),yi===null&&(yi=e)}function gm(e){e.tag===22?(te(ft,ft.current),te(ti,e),yi===null&&(yi=e)):Rs()}function Rs(){te(ft,ft.current),te(ti,ti.current)}function ii(e){V(ti),yi===e&&(yi=null),V(ft)}var ft=L(0);function zo(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vh(a)||Gh(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Qi=0,Re=null,Ge=null,vt=null,$o=!1,Yr=!1,cr=!1,qo=0,oa=0,Xr=null,Ix=0;function ct(){throw Error(n(321))}function $u(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Zt(e[a],i[a]))return!1;return!0}function qu(e,i,a,o,m,b){return Qi=b,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=e===null||e.memoizedState===null?Zm:rh,cr=!1,b=a(o,m),cr=!1,Yr&&(b=_m(i,a,o,m)),vm(e),b}function vm(e){$.H=ua;var i=Ge!==null&&Ge.next!==null;if(Qi=0,vt=Ge=Re=null,$o=!1,oa=0,Xr=null,i)throw Error(n(300));e===null||_t||(e=e.dependencies,e!==null&&No(e)&&(_t=!0))}function _m(e,i,a,o){Re=e;var m=0;do{if(Yr&&(Xr=null),oa=0,Yr=!1,25<=m)throw Error(n(301));if(m+=1,vt=Ge=null,e.updateQueue!=null){var b=e.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=eg,b=i(a,o)}while(Yr);return b}function zx(){var e=$.H,i=e.useState()[0];return i=typeof i.then=="function"?la(i):i,e=e.useState()[0],(Ge!==null?Ge.memoizedState:null)!==e&&(Re.flags|=1024),i}function Fu(){var e=qo!==0;return qo=0,e}function Wu(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Ku(e){if($o){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}$o=!1}Qi=0,vt=Ge=Re=null,Yr=!1,oa=qo=0,Xr=null}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Re.memoizedState=vt=e:vt=vt.next=e,vt}function pt(){if(Ge===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var i=vt===null?Re.memoizedState:vt.next;if(i!==null)vt=i,Ge=e;else{if(e===null)throw Re.alternate===null?Error(n(467)):Error(n(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},vt===null?Re.memoizedState=vt=e:vt=vt.next=e}return vt}function Fo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function la(e){var i=oa;return oa+=1,Xr===null&&(Xr=[]),e=lm(Xr,e,i),i=Re,(vt===null?i.memoizedState:vt.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?Zm:rh),e}function Wo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return la(e);if(e.$$typeof===y)return jt(e)}throw Error(n(438,String(e)))}function Vu(e){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Re.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Fo(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=U;return i.index++,a}function Zi(e,i){return typeof i=="function"?i(e):i}function Ko(e){var i=pt();return Gu(i,Ge,e)}function Gu(e,i,a){var o=e.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=a;var m=e.baseQueue,b=o.pending;if(b!==null){if(m!==null){var O=m.next;m.next=b.next,b.next=O}i.baseQueue=m=b,o.pending=null}if(b=e.baseState,m===null)e.memoizedState=b;else{i=m.next;var P=O=null,K=null,ee=i,le=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(Ne&he)===he:(Qi&he)===he){var ie=ee.revertLane;if(ie===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===Fr&&(le=!0);else if((Qi&ie)===ie){ee=ee.next,ie===Fr&&(le=!0);continue}else he={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},K===null?(P=K=he,O=b):K=K.next=he,Re.lanes|=ie,js|=ie;he=ee.action,cr&&a(b,he),b=ee.hasEagerState?ee.eagerState:a(b,he)}else ie={lane:he,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},K===null?(P=K=ie,O=b):K=K.next=ie,Re.lanes|=he,js|=he;ee=ee.next}while(ee!==null&&ee!==i);if(K===null?O=b:K.next=P,!Zt(b,e.memoizedState)&&(_t=!0,le&&(a=Wr,a!==null)))throw a;e.memoizedState=b,e.baseState=O,e.baseQueue=K,o.lastRenderedState=b}return m===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Yu(e){var i=pt(),a=i.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var o=a.dispatch,m=a.pending,b=i.memoizedState;if(m!==null){a.pending=null;var O=m=m.next;do b=e(b,O.action),O=O.next;while(O!==m);Zt(b,i.memoizedState)||(_t=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),a.lastRenderedState=b}return[b,o]}function ym(e,i,a){var o=Re,m=pt(),b=Ue;if(b){if(a===void 0)throw Error(n(407));a=a()}else a=i();var O=!Zt((Ge||m).memoizedState,a);if(O&&(m.memoizedState=a,_t=!0),m=m.queue,Qu(wm.bind(null,o,m,e),[e]),m.getSnapshot!==i||O||vt!==null&&vt.memoizedState.tag&1){if(o.flags|=2048,Jr(9,{destroy:void 0},xm.bind(null,o,m,a,i),null),Qe===null)throw Error(n(349));b||(Qi&127)!==0||bm(o,i,a)}return a}function bm(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=Fo(),Re.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function xm(e,i,a,o){i.value=a,i.getSnapshot=o,Sm(i)&&Cm(e)}function wm(e,i,a){return a(function(){Sm(i)&&Cm(e)})}function Sm(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Zt(e,a)}catch{return!0}}function Cm(e){var i=er(e,2);i!==null&&Vt(i,e,2)}function Xu(e){var i=It();if(typeof e=="function"){var a=e;if(e=a(),cr){hi(!0);try{a()}finally{hi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:e},i}function Em(e,i,a,o){return e.baseState=a,Gu(e,Ge,typeof o=="function"?o:Zi)}function $x(e,i,a,o,m){if(Yo(e))throw Error(n(485));if(e=i.action,e!==null){var b={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){b.listeners.push(O)}};$.T!==null?a(!0):b.isTransition=!1,o(b),a=i.pending,a===null?(b.next=i.pending=b,km(i,b)):(b.next=a.next,i.pending=a.next=b)}}function km(e,i){var a=i.action,o=i.payload,m=e.state;if(i.isTransition){var b=$.T,O={};$.T=O;try{var P=a(m,o),K=$.S;K!==null&&K(O,P),Am(e,i,P)}catch(ee){Ju(e,i,ee)}finally{b!==null&&O.types!==null&&(b.types=O.types),$.T=b}}else try{b=a(m,o),Am(e,i,b)}catch(ee){Ju(e,i,ee)}}function Am(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Rm(e,i,o)},function(o){return Ju(e,i,o)}):Rm(e,i,a)}function Rm(e,i,a){i.status="fulfilled",i.value=a,Tm(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,km(e,a)))}function Ju(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Tm(i),i=i.next;while(i!==o)}e.action=null}function Tm(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Om(e,i){return i}function jm(e,i){if(Ue){var a=Qe.formState;if(a!==null){e:{var o=Re;if(Ue){if(it){t:{for(var m=it,b=_i;m.nodeType!==8;){if(!b){m=null;break t}if(m=bi(m.nextSibling),m===null){m=null;break t}}b=m.data,m=b==="F!"||b==="F"?m:null}if(m){it=bi(m.nextSibling),o=m.data==="F!";break e}}ws(o)}o=!1}o&&(i=a[0])}}return a=It(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Om,lastRenderedState:i},a.queue=o,a=Xm.bind(null,Re,o),o.dispatch=a,o=Xu(!1),b=sh.bind(null,Re,!1,o.queue),o=It(),m={state:i,dispatch:null,action:e,pending:null},o.queue=m,a=$x.bind(null,Re,m,b,a),m.dispatch=a,o.memoizedState=e,[i,a,!1]}function Dm(e){var i=pt();return Nm(i,Ge,e)}function Nm(e,i,a){if(i=Gu(e,i,Om)[0],e=Ko(Zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=la(i)}catch(O){throw O===Kr?Bo:O}else o=i;i=pt();var m=i.queue,b=m.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,Jr(9,{destroy:void 0},qx.bind(null,m,a),null)),[o,b,e]}function qx(e,i){e.action=i}function Lm(e){var i=pt(),a=Ge;if(a!==null)return Nm(i,a,e);pt(),i=i.memoizedState,a=pt();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function Jr(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Re.updateQueue,i===null&&(i=Fo(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Mm(){return pt().memoizedState}function Vo(e,i,a,o){var m=It();Re.flags|=e,m.memoizedState=Jr(1|i,{destroy:void 0},a,o===void 0?null:o)}function Go(e,i,a,o){var m=pt();o=o===void 0?null:o;var b=m.memoizedState.inst;Ge!==null&&o!==null&&$u(o,Ge.memoizedState.deps)?m.memoizedState=Jr(i,b,a,o):(Re.flags|=e,m.memoizedState=Jr(1|i,b,a,o))}function Bm(e,i){Vo(8390656,8,e,i)}function Qu(e,i){Go(2048,8,e,i)}function Fx(e){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=Fo(),Re.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function Pm(e){var i=pt().memoizedState;return Fx({ref:i,nextImpl:e}),function(){if(($e&2)!==0)throw Error(n(440));return i.impl.apply(void 0,arguments)}}function Um(e,i){return Go(4,2,e,i)}function Hm(e,i){return Go(4,4,e,i)}function Im(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function zm(e,i,a){a=a!=null?a.concat([e]):null,Go(4,4,Im.bind(null,i,e),a)}function Zu(){}function $m(e,i){var a=pt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&$u(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function qm(e,i){var a=pt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&$u(i,o[1]))return o[0];if(o=e(),cr){hi(!0);try{e()}finally{hi(!1)}}return a.memoizedState=[o,i],o}function eh(e,i,a){return a===void 0||(Qi&1073741824)!==0&&(Ne&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=Fg(),Re.lanes|=e,js|=e,a)}function Fm(e,i,a,o){return Zt(a,i)?a:Gr.current!==null?(e=eh(e,a,o),Zt(e,i)||(_t=!0),e):(Qi&42)===0||(Qi&1073741824)!==0&&(Ne&261930)===0?(_t=!0,e.memoizedState=a):(e=Fg(),Re.lanes|=e,js|=e,i)}function Wm(e,i,a,o,m){var b=Y.p;Y.p=b!==0&&8>b?b:8;var O=$.T,P={};$.T=P,sh(e,!1,i,a);try{var K=m(),ee=$.S;if(ee!==null&&ee(P,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var le=Hx(K,o);ca(e,i,le,ni(e))}else ca(e,i,o,ni(e))}catch(he){ca(e,i,{then:function(){},status:"rejected",reason:he},ni())}finally{Y.p=b,O!==null&&P.types!==null&&(O.types=P.types),$.T=O}}function Wx(){}function th(e,i,a,o){if(e.tag!==5)throw Error(n(476));var m=Km(e).queue;Wm(e,m,i,M,a===null?Wx:function(){return Vm(e),a(o)})}function Km(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:M},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Vm(e){var i=Km(e);i.next===null&&(i=e.alternate.memoizedState),ca(e,i.next.queue,{},ni())}function ih(){return jt(ka)}function Gm(){return pt().memoizedState}function Ym(){return pt().memoizedState}function Kx(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=ni();e=Es(a);var o=ks(i,e,a);o!==null&&(Vt(o,i,a),ra(o,i,a)),i={cache:ju()},e.payload=i;return}i=i.return}}function Vx(e,i,a){var o=ni();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Yo(e)?Jm(i,a):(a=bu(e,i,a,o),a!==null&&(Vt(a,e,o),Qm(a,i,o)))}function Xm(e,i,a){var o=ni();ca(e,i,a,o)}function ca(e,i,a,o){var m={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Jm(i,m);else{var b=e.alternate;if(e.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var O=i.lastRenderedState,P=b(O,a);if(m.hasEagerState=!0,m.eagerState=P,Zt(P,O))return To(e,i,m,0),Qe===null&&Ro(),!1}catch{}if(a=bu(e,i,m,o),a!==null)return Vt(a,e,o),Qm(a,i,o),!0}return!1}function sh(e,i,a,o){if(o={lane:2,revertLane:Mh(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Yo(e)){if(i)throw Error(n(479))}else i=bu(e,a,o,2),i!==null&&Vt(i,e,2)}function Yo(e){var i=e.alternate;return e===Re||i!==null&&i===Re}function Jm(e,i){Yr=$o=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Qm(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,sp(e,a)}}var ua={readContext:jt,use:Wo,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};ua.useEffectEvent=ct;var Zm={readContext:jt,use:Wo,useCallback:function(e,i){return It().memoizedState=[e,i===void 0?null:i],e},useContext:jt,useEffect:Bm,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Vo(4194308,4,Im.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Vo(4194308,4,e,i)},useInsertionEffect:function(e,i){Vo(4,2,e,i)},useMemo:function(e,i){var a=It();i=i===void 0?null:i;var o=e();if(cr){hi(!0);try{e()}finally{hi(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=It();if(a!==void 0){var m=a(i);if(cr){hi(!0);try{a(i)}finally{hi(!1)}}}else m=i;return o.memoizedState=o.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},o.queue=e,e=e.dispatch=Vx.bind(null,Re,e),[o.memoizedState,e]},useRef:function(e){var i=It();return e={current:e},i.memoizedState=e},useState:function(e){e=Xu(e);var i=e.queue,a=Xm.bind(null,Re,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Zu,useDeferredValue:function(e,i){var a=It();return eh(a,e,i)},useTransition:function(){var e=Xu(!1);return e=Wm.bind(null,Re,e.queue,!0,!1),It().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Re,m=It();if(Ue){if(a===void 0)throw Error(n(407));a=a()}else{if(a=i(),Qe===null)throw Error(n(349));(Ne&127)!==0||bm(o,i,a)}m.memoizedState=a;var b={value:a,getSnapshot:i};return m.queue=b,Bm(wm.bind(null,o,b,e),[e]),o.flags|=2048,Jr(9,{destroy:void 0},xm.bind(null,o,b,a,i),null),a},useId:function(){var e=It(),i=Qe.identifierPrefix;if(Ue){var a=Bi,o=Mi;a=(o&~(1<<32-Rt(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=qo++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Ix++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:ih,useFormState:jm,useActionState:jm,useOptimistic:function(e){var i=It();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=sh.bind(null,Re,!0,a),a.dispatch=i,[e,i]},useMemoCache:Vu,useCacheRefresh:function(){return It().memoizedState=Kx.bind(null,Re)},useEffectEvent:function(e){var i=It(),a={impl:e};return i.memoizedState=a,function(){if(($e&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}},rh={readContext:jt,use:Wo,useCallback:$m,useContext:jt,useEffect:Qu,useImperativeHandle:zm,useInsertionEffect:Um,useLayoutEffect:Hm,useMemo:qm,useReducer:Ko,useRef:Mm,useState:function(){return Ko(Zi)},useDebugValue:Zu,useDeferredValue:function(e,i){var a=pt();return Fm(a,Ge.memoizedState,e,i)},useTransition:function(){var e=Ko(Zi)[0],i=pt().memoizedState;return[typeof e=="boolean"?e:la(e),i]},useSyncExternalStore:ym,useId:Gm,useHostTransitionStatus:ih,useFormState:Dm,useActionState:Dm,useOptimistic:function(e,i){var a=pt();return Em(a,Ge,e,i)},useMemoCache:Vu,useCacheRefresh:Ym};rh.useEffectEvent=Pm;var eg={readContext:jt,use:Wo,useCallback:$m,useContext:jt,useEffect:Qu,useImperativeHandle:zm,useInsertionEffect:Um,useLayoutEffect:Hm,useMemo:qm,useReducer:Yu,useRef:Mm,useState:function(){return Yu(Zi)},useDebugValue:Zu,useDeferredValue:function(e,i){var a=pt();return Ge===null?eh(a,e,i):Fm(a,Ge.memoizedState,e,i)},useTransition:function(){var e=Yu(Zi)[0],i=pt().memoizedState;return[typeof e=="boolean"?e:la(e),i]},useSyncExternalStore:ym,useId:Gm,useHostTransitionStatus:ih,useFormState:Lm,useActionState:Lm,useOptimistic:function(e,i){var a=pt();return Ge!==null?Em(a,Ge,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Vu,useCacheRefresh:Ym};eg.useEffectEvent=Pm;function nh(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:g({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ah={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=ni(),m=Es(o);m.payload=i,a!=null&&(m.callback=a),i=ks(e,m,o),i!==null&&(Vt(i,e,o),ra(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=ni(),m=Es(o);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=ks(e,m,o),i!==null&&(Vt(i,e,o),ra(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=ni(),o=Es(a);o.tag=2,i!=null&&(o.callback=i),i=ks(e,o,a),i!==null&&(Vt(i,e,a),ra(i,e,a))}};function tg(e,i,a,o,m,b,O){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,b,O):i.prototype&&i.prototype.isPureReactComponent?!Xn(a,o)||!Xn(m,b):!0}function ig(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&ah.enqueueReplaceState(i,i.state,null)}function ur(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=g({},a));for(var m in e)a[m]===void 0&&(a[m]=e[m])}return a}function sg(e){Ao(e)}function rg(e){console.error(e)}function ng(e){Ao(e)}function Xo(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ag(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function oh(e,i,a){return a=Es(a),a.tag=3,a.payload={element:null},a.callback=function(){Xo(e,i)},a}function og(e){return e=Es(e),e.tag=3,e}function lg(e,i,a,o){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var b=o.value;e.payload=function(){return m(b)},e.callback=function(){ag(i,a,o)}}var O=a.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(e.callback=function(){ag(i,a,o),typeof m!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var P=o.stack;this.componentDidCatch(o.value,{componentStack:P!==null?P:""})})}function Gx(e,i,a,o,m){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&qr(i,a,m,!0),a=ti.current,a!==null){switch(a.tag){case 31:case 13:return yi===null?ll():a.alternate===null&&ut===0&&(ut=3),a.flags&=-257,a.flags|=65536,a.lanes=m,o===Po?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Dh(e,o,m)),!1;case 22:return a.flags|=65536,o===Po?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Dh(e,o,m)),!1}throw Error(n(435,a.tag))}return Dh(e,o,m),ll(),!1}if(Ue)return i=ti.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,o!==ku&&(e=Error(n(422),{cause:o}),Zn(mi(e,a)))):(o!==ku&&(i=Error(n(423),{cause:o}),Zn(mi(i,a))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,o=mi(o,a),m=oh(e.stateNode,o,m),Pu(e,m),ut!==4&&(ut=2)),!1;var b=Error(n(520),{cause:o});if(b=mi(b,a),_a===null?_a=[b]:_a.push(b),ut!==4&&(ut=2),i===null)return!0;o=mi(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=m&-m,a.lanes|=e,e=oh(a.stateNode,o,e),Pu(a,e),!1;case 1:if(i=a.type,b=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ds===null||!Ds.has(b))))return a.flags|=65536,m&=-m,a.lanes|=m,m=og(m),lg(m,e,a,o),Pu(a,m),!1}a=a.return}while(a!==null);return!1}var lh=Error(n(461)),_t=!1;function Dt(e,i,a,o){i.child=e===null?dm(i,null,a,o):lr(i,e.child,a,o)}function cg(e,i,a,o,m){a=a.render;var b=i.ref;if("ref"in o){var O={};for(var P in o)P!=="ref"&&(O[P]=o[P])}else O=o;return rr(i),o=qu(e,i,a,O,b,m),P=Fu(),e!==null&&!_t?(Wu(e,i,m),es(e,i,m)):(Ue&&P&&Cu(i),i.flags|=1,Dt(e,i,o,m),i.child)}function ug(e,i,a,o,m){if(e===null){var b=a.type;return typeof b=="function"&&!xu(b)&&b.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=b,hg(e,i,b,o,m)):(e=jo(a.type,null,o,i,i.mode,m),e.ref=i.ref,e.return=i,i.child=e)}if(b=e.child,!gh(e,m)){var O=b.memoizedProps;if(a=a.compare,a=a!==null?a:Xn,a(O,o)&&e.ref===i.ref)return es(e,i,m)}return i.flags|=1,e=Gi(b,o),e.ref=i.ref,e.return=i,i.child=e}function hg(e,i,a,o,m){if(e!==null){var b=e.memoizedProps;if(Xn(b,o)&&e.ref===i.ref)if(_t=!1,i.pendingProps=o=b,gh(e,m))(e.flags&131072)!==0&&(_t=!0);else return i.lanes=e.lanes,es(e,i,m)}return ch(e,i,a,o,m)}function dg(e,i,a,o){var m=o.children,b=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(b=b!==null?b.baseLanes|a:a,e!==null){for(o=i.child=e.child,m=0;o!==null;)m=m|o.lanes|o.childLanes,o=o.sibling;o=m&~b}else o=0,i.child=null;return fg(e,i,b,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Mo(i,b!==null?b.cachePool:null),b!==null?mm(i,b):Hu(),gm(i);else return o=i.lanes=536870912,fg(e,i,b!==null?b.baseLanes|a:a,a,o)}else b!==null?(Mo(i,b.cachePool),mm(i,b),Rs(),i.memoizedState=null):(e!==null&&Mo(i,null),Hu(),Rs());return Dt(e,i,m,a),i.child}function ha(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function fg(e,i,a,o,m){var b=Nu();return b=b===null?null:{parent:gt._currentValue,pool:b},i.memoizedState={baseLanes:a,cachePool:b},e!==null&&Mo(i,null),Hu(),gm(i),e!==null&&qr(e,i,o,!0),i.childLanes=m,null}function Jo(e,i){return i=Zo({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function pg(e,i,a){return lr(i,e.child,null,a),e=Jo(i,i.pendingProps),e.flags|=2,ii(i),i.memoizedState=null,e}function Yx(e,i,a){var o=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Ue){if(o.mode==="hidden")return e=Jo(i,o),i.lanes=536870912,ha(null,e);if(zu(i),(e=it)?(e=kv(e,_i),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:bs!==null?{id:Mi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},a=Jp(e),a.return=i,i.child=a,Ot=i,it=null)):e=null,e===null)throw ws(i);return i.lanes=536870912,null}return Jo(i,o)}var b=e.memoizedState;if(b!==null){var O=b.dehydrated;if(zu(i),m)if(i.flags&256)i.flags&=-257,i=pg(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(n(558));else if(_t||qr(e,i,a,!1),m=(a&e.childLanes)!==0,_t||m){if(o=Qe,o!==null&&(O=rp(o,a),O!==0&&O!==b.retryLane))throw b.retryLane=O,er(e,O),Vt(o,e,O),lh;ll(),i=pg(e,i,a)}else e=b.treeContext,it=bi(O.nextSibling),Ot=i,Ue=!0,xs=null,_i=!1,e!==null&&em(i,e),i=Jo(i,o),i.flags|=4096;return i}return e=Gi(e.child,{mode:o.mode,children:o.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Qo(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function ch(e,i,a,o,m){return rr(i),a=qu(e,i,a,o,void 0,m),o=Fu(),e!==null&&!_t?(Wu(e,i,m),es(e,i,m)):(Ue&&o&&Cu(i),i.flags|=1,Dt(e,i,a,m),i.child)}function mg(e,i,a,o,m,b){return rr(i),i.updateQueue=null,a=_m(i,o,a,m),vm(e),o=Fu(),e!==null&&!_t?(Wu(e,i,b),es(e,i,b)):(Ue&&o&&Cu(i),i.flags|=1,Dt(e,i,a,b),i.child)}function gg(e,i,a,o,m){if(rr(i),i.stateNode===null){var b=Hr,O=a.contextType;typeof O=="object"&&O!==null&&(b=jt(O)),b=new a(o,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=ah,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=o,b.state=i.memoizedState,b.refs={},Mu(i),O=a.contextType,b.context=typeof O=="object"&&O!==null?jt(O):Hr,b.state=i.memoizedState,O=a.getDerivedStateFromProps,typeof O=="function"&&(nh(i,a,O,o),b.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(O=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),O!==b.state&&ah.enqueueReplaceState(b,b.state,null),aa(i,o,b,m),na(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){b=i.stateNode;var P=i.memoizedProps,K=ur(a,P);b.props=K;var ee=b.context,le=a.contextType;O=Hr,typeof le=="object"&&le!==null&&(O=jt(le));var he=a.getDerivedStateFromProps;le=typeof he=="function"||typeof b.getSnapshotBeforeUpdate=="function",P=i.pendingProps!==P,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P||ee!==O)&&ig(i,b,o,O),Cs=!1;var ie=i.memoizedState;b.state=ie,aa(i,o,b,m),na(),ee=i.memoizedState,P||ie!==ee||Cs?(typeof he=="function"&&(nh(i,a,he,o),ee=i.memoizedState),(K=Cs||tg(i,a,K,o,ie,ee,O))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=ee),b.props=o,b.state=ee,b.context=O,o=K):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{b=i.stateNode,Bu(e,i),O=i.memoizedProps,le=ur(a,O),b.props=le,he=i.pendingProps,ie=b.context,ee=a.contextType,K=Hr,typeof ee=="object"&&ee!==null&&(K=jt(ee)),P=a.getDerivedStateFromProps,(ee=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O!==he||ie!==K)&&ig(i,b,o,K),Cs=!1,ie=i.memoizedState,b.state=ie,aa(i,o,b,m),na();var re=i.memoizedState;O!==he||ie!==re||Cs||e!==null&&e.dependencies!==null&&No(e.dependencies)?(typeof P=="function"&&(nh(i,a,P,o),re=i.memoizedState),(le=Cs||tg(i,a,le,o,ie,re,K)||e!==null&&e.dependencies!==null&&No(e.dependencies))?(ee||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(o,re,K),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(o,re,K)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||O===e.memoizedProps&&ie===e.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===e.memoizedProps&&ie===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=re),b.props=o,b.state=re,b.context=K,o=le):(typeof b.componentDidUpdate!="function"||O===e.memoizedProps&&ie===e.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===e.memoizedProps&&ie===e.memoizedState||(i.flags|=1024),o=!1)}return b=o,Qo(e,i),o=(i.flags&128)!==0,b||o?(b=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,e!==null&&o?(i.child=lr(i,e.child,null,m),i.child=lr(i,null,a,m)):Dt(e,i,a,m),i.memoizedState=b.state,e=i.child):e=es(e,i,m),e}function vg(e,i,a,o){return ir(),i.flags|=256,Dt(e,i,a,o),i.child}var uh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hh(e){return{baseLanes:e,cachePool:am()}}function dh(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=ri),e}function _g(e,i,a){var o=i.pendingProps,m=!1,b=(i.flags&128)!==0,O;if((O=b)||(O=e!==null&&e.memoizedState===null?!1:(ft.current&2)!==0),O&&(m=!0,i.flags&=-129),O=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ue){if(m?As(i):Rs(),(e=it)?(e=kv(e,_i),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:bs!==null?{id:Mi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},a=Jp(e),a.return=i,i.child=a,Ot=i,it=null)):e=null,e===null)throw ws(i);return Gh(e)?i.lanes=32:i.lanes=536870912,null}var P=o.children;return o=o.fallback,m?(Rs(),m=i.mode,P=Zo({mode:"hidden",children:P},m),o=tr(o,m,a,null),P.return=i,o.return=i,P.sibling=o,i.child=P,o=i.child,o.memoizedState=hh(a),o.childLanes=dh(e,O,a),i.memoizedState=uh,ha(null,o)):(As(i),fh(i,P))}var K=e.memoizedState;if(K!==null&&(P=K.dehydrated,P!==null)){if(b)i.flags&256?(As(i),i.flags&=-257,i=ph(e,i,a)):i.memoizedState!==null?(Rs(),i.child=e.child,i.flags|=128,i=null):(Rs(),P=o.fallback,m=i.mode,o=Zo({mode:"visible",children:o.children},m),P=tr(P,m,a,null),P.flags|=2,o.return=i,P.return=i,o.sibling=P,i.child=o,lr(i,e.child,null,a),o=i.child,o.memoizedState=hh(a),o.childLanes=dh(e,O,a),i.memoizedState=uh,i=ha(null,o));else if(As(i),Gh(P)){if(O=P.nextSibling&&P.nextSibling.dataset,O)var ee=O.dgst;O=ee,o=Error(n(419)),o.stack="",o.digest=O,Zn({value:o,source:null,stack:null}),i=ph(e,i,a)}else if(_t||qr(e,i,a,!1),O=(a&e.childLanes)!==0,_t||O){if(O=Qe,O!==null&&(o=rp(O,a),o!==0&&o!==K.retryLane))throw K.retryLane=o,er(e,o),Vt(O,e,o),lh;Vh(P)||ll(),i=ph(e,i,a)}else Vh(P)?(i.flags|=192,i.child=e.child,i=null):(e=K.treeContext,it=bi(P.nextSibling),Ot=i,Ue=!0,xs=null,_i=!1,e!==null&&em(i,e),i=fh(i,o.children),i.flags|=4096);return i}return m?(Rs(),P=o.fallback,m=i.mode,K=e.child,ee=K.sibling,o=Gi(K,{mode:"hidden",children:o.children}),o.subtreeFlags=K.subtreeFlags&65011712,ee!==null?P=Gi(ee,P):(P=tr(P,m,a,null),P.flags|=2),P.return=i,o.return=i,o.sibling=P,i.child=o,ha(null,o),o=i.child,P=e.child.memoizedState,P===null?P=hh(a):(m=P.cachePool,m!==null?(K=gt._currentValue,m=m.parent!==K?{parent:K,pool:K}:m):m=am(),P={baseLanes:P.baseLanes|a,cachePool:m}),o.memoizedState=P,o.childLanes=dh(e,O,a),i.memoizedState=uh,ha(e.child,o)):(As(i),a=e.child,e=a.sibling,a=Gi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(O=i.deletions,O===null?(i.deletions=[e],i.flags|=16):O.push(e)),i.child=a,i.memoizedState=null,a)}function fh(e,i){return i=Zo({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Zo(e,i){return e=ei(22,e,null,i),e.lanes=0,e}function ph(e,i,a){return lr(i,e.child,null,a),e=fh(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function yg(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Tu(e.return,i,a)}function mh(e,i,a,o,m,b){var O=e.memoizedState;O===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:m,treeForkCount:b}:(O.isBackwards=i,O.rendering=null,O.renderingStartTime=0,O.last=o,O.tail=a,O.tailMode=m,O.treeForkCount=b)}function bg(e,i,a){var o=i.pendingProps,m=o.revealOrder,b=o.tail;o=o.children;var O=ft.current,P=(O&2)!==0;if(P?(O=O&1|2,i.flags|=128):O&=1,te(ft,O),Dt(e,i,o,a),o=Ue?Qn:0,!P&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yg(e,a,i);else if(e.tag===19)yg(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(m){case"forwards":for(a=i.child,m=null;a!==null;)e=a.alternate,e!==null&&zo(e)===null&&(m=a),a=a.sibling;a=m,a===null?(m=i.child,i.child=null):(m=a.sibling,a.sibling=null),mh(i,!1,m,a,b,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,m=i.child,i.child=null;m!==null;){if(e=m.alternate,e!==null&&zo(e)===null){i.child=m;break}e=m.sibling,m.sibling=a,a=m,m=e}mh(i,!0,a,null,b,o);break;case"together":mh(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function es(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),js|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(qr(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(n(153));if(i.child!==null){for(e=i.child,a=Gi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Gi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function gh(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&No(e)))}function Xx(e,i,a){switch(i.tag){case 3:J(i,i.stateNode.containerInfo),Ss(i,gt,e.memoizedState.cache),ir();break;case 27:case 5:ce(i);break;case 4:J(i,i.stateNode.containerInfo);break;case 10:Ss(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,zu(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(As(i),i.flags|=128,null):(a&i.child.childLanes)!==0?_g(e,i,a):(As(i),e=es(e,i,a),e!==null?e.sibling:null);As(i);break;case 19:var m=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(qr(e,i,a,!1),o=(a&i.childLanes)!==0),m){if(o)return bg(e,i,a);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),te(ft,ft.current),o)break;return null;case 22:return i.lanes=0,dg(e,i,a,i.pendingProps);case 24:Ss(i,gt,e.memoizedState.cache)}return es(e,i,a)}function xg(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)_t=!0;else{if(!gh(e,a)&&(i.flags&128)===0)return _t=!1,Xx(e,i,a);_t=(e.flags&131072)!==0}else _t=!1,Ue&&(i.flags&1048576)!==0&&Zp(i,Qn,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(e=ar(i.elementType),i.type=e,typeof e=="function")xu(e)?(o=ur(e,o),i.tag=1,i=gg(null,i,e,o,a)):(i.tag=0,i=ch(null,i,e,o,a));else{if(e!=null){var m=e.$$typeof;if(m===k){i.tag=11,i=cg(null,i,e,o,a);break e}else if(m===D){i.tag=14,i=ug(null,i,e,o,a);break e}}throw i=Q(e)||e,Error(n(306,i,""))}}return i;case 0:return ch(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,m=ur(o,i.pendingProps),gg(e,i,o,m,a);case 3:e:{if(J(i,i.stateNode.containerInfo),e===null)throw Error(n(387));o=i.pendingProps;var b=i.memoizedState;m=b.element,Bu(e,i),aa(i,o,null,a);var O=i.memoizedState;if(o=O.cache,Ss(i,gt,o),o!==b.cache&&Ou(i,[gt],a,!0),na(),o=O.element,b.isDehydrated)if(b={element:o,isDehydrated:!1,cache:O.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=vg(e,i,o,a);break e}else if(o!==m){m=mi(Error(n(424)),i),Zn(m),i=vg(e,i,o,a);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,it=bi(e.firstChild),Ot=i,Ue=!0,xs=null,_i=!0,a=dm(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ir(),o===m){i=es(e,i,a);break e}Dt(e,i,o,a)}i=i.child}return i;case 26:return Qo(e,i),e===null?(a=Dv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ue||(a=i.type,e=i.pendingProps,o=ml(me.current).createElement(a),o[Tt]=i,o[zt]=e,Nt(o,a,e),kt(o),i.stateNode=o):i.memoizedState=Dv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return ce(i),e===null&&Ue&&(o=i.stateNode=Tv(i.type,i.pendingProps,me.current),Ot=i,_i=!0,m=it,Bs(i.type)?(Yh=m,it=bi(o.firstChild)):it=m),Dt(e,i,i.pendingProps.children,a),Qo(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ue&&((m=o=it)&&(o=kw(o,i.type,i.pendingProps,_i),o!==null?(i.stateNode=o,Ot=i,it=bi(o.firstChild),_i=!1,m=!0):m=!1),m||ws(i)),ce(i),m=i.type,b=i.pendingProps,O=e!==null?e.memoizedProps:null,o=b.children,Fh(m,b)?o=null:O!==null&&Fh(m,O)&&(i.flags|=32),i.memoizedState!==null&&(m=qu(e,i,zx,null,null,a),ka._currentValue=m),Qo(e,i),Dt(e,i,o,a),i.child;case 6:return e===null&&Ue&&((e=a=it)&&(a=Aw(a,i.pendingProps,_i),a!==null?(i.stateNode=a,Ot=i,it=null,e=!0):e=!1),e||ws(i)),null;case 13:return _g(e,i,a);case 4:return J(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=lr(i,null,o,a):Dt(e,i,o,a),i.child;case 11:return cg(e,i,i.type,i.pendingProps,a);case 7:return Dt(e,i,i.pendingProps,a),i.child;case 8:return Dt(e,i,i.pendingProps.children,a),i.child;case 12:return Dt(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Ss(i,i.type,o.value),Dt(e,i,o.children,a),i.child;case 9:return m=i.type._context,o=i.pendingProps.children,rr(i),m=jt(m),o=o(m),i.flags|=1,Dt(e,i,o,a),i.child;case 14:return ug(e,i,i.type,i.pendingProps,a);case 15:return hg(e,i,i.type,i.pendingProps,a);case 19:return bg(e,i,a);case 31:return Yx(e,i,a);case 22:return dg(e,i,a,i.pendingProps);case 24:return rr(i),o=jt(gt),e===null?(m=Nu(),m===null&&(m=Qe,b=ju(),m.pooledCache=b,b.refCount++,b!==null&&(m.pooledCacheLanes|=a),m=b),i.memoizedState={parent:o,cache:m},Mu(i),Ss(i,gt,m)):((e.lanes&a)!==0&&(Bu(e,i),aa(i,null,null,a),na()),m=e.memoizedState,b=i.memoizedState,m.parent!==o?(m={parent:o,cache:o},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),Ss(i,gt,o)):(o=b.cache,Ss(i,gt,o),o!==m.cache&&Ou(i,[gt],a,!0))),Dt(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function ts(e){e.flags|=4}function vh(e,i,a,o,m){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(m&335544128)===m)if(e.stateNode.complete)e.flags|=8192;else if(Gg())e.flags|=8192;else throw or=Po,Lu}else e.flags&=-16777217}function wg(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pv(i))if(Gg())e.flags|=8192;else throw or=Po,Lu}function el(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?tp():536870912,e.lanes|=i,tn|=i)}function da(e,i){if(!Ue)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function st(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var m=e.child;m!==null;)a|=m.lanes|m.childLanes,o|=m.subtreeFlags&65011712,o|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)a|=m.lanes|m.childLanes,o|=m.subtreeFlags,o|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function Jx(e,i,a){var o=i.pendingProps;switch(Eu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(i),null;case 1:return st(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ji(gt),ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&($r(i)?ts(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Au())),st(i),null;case 26:var m=i.type,b=i.memoizedState;return e===null?(ts(i),b!==null?(st(i),wg(i,b)):(st(i),vh(i,m,null,o,a))):b?b!==e.memoizedState?(ts(i),st(i),wg(i,b)):(st(i),i.flags&=-16777217):(e=e.memoizedProps,e!==o&&ts(i),st(i),vh(i,m,e,o,a)),null;case 27:if(xe(i),a=me.current,m=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ts(i);else{if(!o){if(i.stateNode===null)throw Error(n(166));return st(i),null}e=oe.current,$r(i)?tm(i):(e=Tv(m,o,a),i.stateNode=e,ts(i))}return st(i),null;case 5:if(xe(i),m=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ts(i);else{if(!o){if(i.stateNode===null)throw Error(n(166));return st(i),null}if(b=oe.current,$r(i))tm(i);else{var O=ml(me.current);switch(b){case 1:b=O.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:b=O.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":b=O.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":b=O.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":b=O.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof o.is=="string"?O.createElement("select",{is:o.is}):O.createElement("select"),o.multiple?b.multiple=!0:o.size&&(b.size=o.size);break;default:b=typeof o.is=="string"?O.createElement(m,{is:o.is}):O.createElement(m)}}b[Tt]=i,b[zt]=o;e:for(O=i.child;O!==null;){if(O.tag===5||O.tag===6)b.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===i)break e;for(;O.sibling===null;){if(O.return===null||O.return===i)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}i.stateNode=b;e:switch(Nt(b,m,o),m){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ts(i)}}return st(i),vh(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ts(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(n(166));if(e=me.current,$r(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,m=Ot,m!==null)switch(m.tag){case 27:case 5:o=m.memoizedProps}e[Tt]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||_v(e.nodeValue,a)),e||ws(i,!0)}else e=ml(e).createTextNode(o),e[Tt]=i,i.stateNode=e}return st(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(o=$r(i),a!==null){if(e===null){if(!o)throw Error(n(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(557));e[Tt]=i}else ir(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),e=!1}else a=Au(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(ii(i),i):(ii(i),null);if((i.flags&128)!==0)throw Error(n(558))}return st(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=$r(i),o!==null&&o.dehydrated!==null){if(e===null){if(!m)throw Error(n(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[Tt]=i}else ir(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),m=!1}else m=Au(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(ii(i),i):(ii(i),null)}return ii(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=i.child,m=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(m=o.alternate.memoizedState.cachePool.pool),b=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(b=o.memoizedState.cachePool.pool),b!==m&&(o.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),el(i,i.updateQueue),st(i),null);case 4:return ae(),e===null&&Hh(i.stateNode.containerInfo),st(i),null;case 10:return Ji(i.type),st(i),null;case 19:if(V(ft),o=i.memoizedState,o===null)return st(i),null;if(m=(i.flags&128)!==0,b=o.rendering,b===null)if(m)da(o,!1);else{if(ut!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(b=zo(e),b!==null){for(i.flags|=128,da(o,!1),e=b.updateQueue,i.updateQueue=e,el(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Xp(a,e),a=a.sibling;return te(ft,ft.current&1|2),Ue&&Yi(i,o.treeForkCount),i.child}e=e.sibling}o.tail!==null&&fe()>nl&&(i.flags|=128,m=!0,da(o,!1),i.lanes=4194304)}else{if(!m)if(e=zo(b),e!==null){if(i.flags|=128,m=!0,e=e.updateQueue,i.updateQueue=e,el(i,e),da(o,!0),o.tail===null&&o.tailMode==="hidden"&&!b.alternate&&!Ue)return st(i),null}else 2*fe()-o.renderingStartTime>nl&&a!==536870912&&(i.flags|=128,m=!0,da(o,!1),i.lanes=4194304);o.isBackwards?(b.sibling=i.child,i.child=b):(e=o.last,e!==null?e.sibling=b:i.child=b,o.last=b)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=fe(),e.sibling=null,a=ft.current,te(ft,m?a&1|2:a&1),Ue&&Yi(i,o.treeForkCount),e):(st(i),null);case 22:case 23:return ii(i),Iu(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(st(i),i.subtreeFlags&6&&(i.flags|=8192)):st(i),a=i.updateQueue,a!==null&&el(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&V(nr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(gt),st(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function Qx(e,i){switch(Eu(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Ji(gt),ae(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return xe(i),null;case 31:if(i.memoizedState!==null){if(ii(i),i.alternate===null)throw Error(n(340));ir()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(ii(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ir()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return V(ft),null;case 4:return ae(),null;case 10:return Ji(i.type),null;case 22:case 23:return ii(i),Iu(),e!==null&&V(nr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Ji(gt),null;case 25:return null;default:return null}}function Sg(e,i){switch(Eu(i),i.tag){case 3:Ji(gt),ae();break;case 26:case 27:case 5:xe(i);break;case 4:ae();break;case 31:i.memoizedState!==null&&ii(i);break;case 13:ii(i);break;case 19:V(ft);break;case 10:Ji(i.type);break;case 22:case 23:ii(i),Iu(),e!==null&&V(nr);break;case 24:Ji(gt)}}function fa(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var m=o.next;a=m;do{if((a.tag&e)===e){o=void 0;var b=a.create,O=a.inst;o=b(),O.destroy=o}a=a.next}while(a!==m)}}catch(P){Ke(i,i.return,P)}}function Ts(e,i,a){try{var o=i.updateQueue,m=o!==null?o.lastEffect:null;if(m!==null){var b=m.next;o=b;do{if((o.tag&e)===e){var O=o.inst,P=O.destroy;if(P!==void 0){O.destroy=void 0,m=i;var K=a,ee=P;try{ee()}catch(le){Ke(m,K,le)}}}o=o.next}while(o!==b)}}catch(le){Ke(i,i.return,le)}}function Cg(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{pm(i,a)}catch(o){Ke(e,e.return,o)}}}function Eg(e,i,a){a.props=ur(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Ke(e,i,o)}}function pa(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(m){Ke(e,i,m)}}function Pi(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(m){Ke(e,i,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){Ke(e,i,m)}else a.current=null}function kg(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(m){Ke(e,e.return,m)}}function _h(e,i,a){try{var o=e.stateNode;bw(o,e.type,a,i),o[zt]=i}catch(m){Ke(e,e.return,m)}}function Ag(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Bs(e.type)||e.tag===4}function yh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ag(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Bs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bh(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ki));else if(o!==4&&(o===27&&Bs(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(bh(e,i,a),e=e.sibling;e!==null;)bh(e,i,a),e=e.sibling}function tl(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Bs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(tl(e,i,a),e=e.sibling;e!==null;)tl(e,i,a),e=e.sibling}function Rg(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Nt(i,o,a),i[Tt]=e,i[zt]=a}catch(b){Ke(e,e.return,b)}}var is=!1,yt=!1,xh=!1,Tg=typeof WeakSet=="function"?WeakSet:Set,At=null;function Zx(e,i){if(e=e.containerInfo,$h=wl,e=zp(e),pu(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var m=o.anchorOffset,b=o.focusNode;o=o.focusOffset;try{a.nodeType,b.nodeType}catch{a=null;break e}var O=0,P=-1,K=-1,ee=0,le=0,he=e,ie=null;t:for(;;){for(var re;he!==a||m!==0&&he.nodeType!==3||(P=O+m),he!==b||o!==0&&he.nodeType!==3||(K=O+o),he.nodeType===3&&(O+=he.nodeValue.length),(re=he.firstChild)!==null;)ie=he,he=re;for(;;){if(he===e)break t;if(ie===a&&++ee===m&&(P=O),ie===b&&++le===o&&(K=O),(re=he.nextSibling)!==null)break;he=ie,ie=he.parentNode}he=re}a=P===-1||K===-1?null:{start:P,end:K}}else a=null}a=a||{start:0,end:0}}else a=null;for(qh={focusedElem:e,selectionRange:a},wl=!1,At=i;At!==null;)if(i=At,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,At=e;else for(;At!==null;){switch(i=At,b=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)m=e[a],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&b!==null){e=void 0,a=i,m=b.memoizedProps,b=b.memoizedState,o=a.stateNode;try{var ge=ur(a.type,m);e=o.getSnapshotBeforeUpdate(ge,b),o.__reactInternalSnapshotBeforeUpdate=e}catch(we){Ke(a,a.return,we)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Kh(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Kh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=i.sibling,e!==null){e.return=i.return,At=e;break}At=i.return}}function Og(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:rs(e,a),o&4&&fa(5,a);break;case 1:if(rs(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(O){Ke(a,a.return,O)}else{var m=ur(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(m,i,e.__reactInternalSnapshotBeforeUpdate)}catch(O){Ke(a,a.return,O)}}o&64&&Cg(a),o&512&&pa(a,a.return);break;case 3:if(rs(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{pm(e,i)}catch(O){Ke(a,a.return,O)}}break;case 27:i===null&&o&4&&Rg(a);case 26:case 5:rs(e,a),i===null&&o&4&&kg(a),o&512&&pa(a,a.return);break;case 12:rs(e,a);break;case 31:rs(e,a),o&4&&Ng(e,a);break;case 13:rs(e,a),o&4&&Lg(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=lw.bind(null,a),Rw(e,a))));break;case 22:if(o=a.memoizedState!==null||is,!o){i=i!==null&&i.memoizedState!==null||yt,m=is;var b=yt;is=o,(yt=i)&&!b?ns(e,a,(a.subtreeFlags&8772)!==0):rs(e,a),is=m,yt=b}break;case 30:break;default:rs(e,a)}}function jg(e){var i=e.alternate;i!==null&&(e.alternate=null,jg(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Jc(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var rt=null,qt=!1;function ss(e,i,a){for(a=a.child;a!==null;)Dg(e,i,a),a=a.sibling}function Dg(e,i,a){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(ki,a)}catch{}switch(a.tag){case 26:yt||Pi(a,i),ss(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||Pi(a,i);var o=rt,m=qt;Bs(a.type)&&(rt=a.stateNode,qt=!1),ss(e,i,a),Sa(a.stateNode),rt=o,qt=m;break;case 5:yt||Pi(a,i);case 6:if(o=rt,m=qt,rt=null,ss(e,i,a),rt=o,qt=m,rt!==null)if(qt)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(a.stateNode)}catch(b){Ke(a,i,b)}else try{rt.removeChild(a.stateNode)}catch(b){Ke(a,i,b)}break;case 18:rt!==null&&(qt?(e=rt,Cv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),un(e)):Cv(rt,a.stateNode));break;case 4:o=rt,m=qt,rt=a.stateNode.containerInfo,qt=!0,ss(e,i,a),rt=o,qt=m;break;case 0:case 11:case 14:case 15:Ts(2,a,i),yt||Ts(4,a,i),ss(e,i,a);break;case 1:yt||(Pi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Eg(a,i,o)),ss(e,i,a);break;case 21:ss(e,i,a);break;case 22:yt=(o=yt)||a.memoizedState!==null,ss(e,i,a),yt=o;break;default:ss(e,i,a)}}function Ng(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{un(e)}catch(a){Ke(i,i.return,a)}}}function Lg(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{un(e)}catch(a){Ke(i,i.return,a)}}function ew(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Tg),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Tg),i;default:throw Error(n(435,e.tag))}}function il(e,i){var a=ew(e);i.forEach(function(o){if(!a.has(o)){a.add(o);var m=cw.bind(null,e,o);o.then(m,m)}})}function Ft(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var m=a[o],b=e,O=i,P=O;e:for(;P!==null;){switch(P.tag){case 27:if(Bs(P.type)){rt=P.stateNode,qt=!1;break e}break;case 5:rt=P.stateNode,qt=!1;break e;case 3:case 4:rt=P.stateNode.containerInfo,qt=!0;break e}P=P.return}if(rt===null)throw Error(n(160));Dg(b,O,m),rt=null,qt=!1,b=m.alternate,b!==null&&(b.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Mg(i,e),i=i.sibling}var Ri=null;function Mg(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ft(i,e),Wt(e),o&4&&(Ts(3,e,e.return),fa(3,e),Ts(5,e,e.return));break;case 1:Ft(i,e),Wt(e),o&512&&(yt||a===null||Pi(a,a.return)),o&64&&is&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var m=Ri;if(Ft(i,e),Wt(e),o&512&&(yt||a===null||Pi(a,a.return)),o&4){var b=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,m=m.ownerDocument||m;t:switch(o){case"title":b=m.getElementsByTagName("title")[0],(!b||b[zn]||b[Tt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=m.createElement(o),m.head.insertBefore(b,m.querySelector("head > title"))),Nt(b,o,a),b[Tt]=e,kt(b),o=b;break e;case"link":var O=Mv("link","href",m).get(o+(a.href||""));if(O){for(var P=0;P<O.length;P++)if(b=O[P],b.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&b.getAttribute("rel")===(a.rel==null?null:a.rel)&&b.getAttribute("title")===(a.title==null?null:a.title)&&b.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){O.splice(P,1);break t}}b=m.createElement(o),Nt(b,o,a),m.head.appendChild(b);break;case"meta":if(O=Mv("meta","content",m).get(o+(a.content||""))){for(P=0;P<O.length;P++)if(b=O[P],b.getAttribute("content")===(a.content==null?null:""+a.content)&&b.getAttribute("name")===(a.name==null?null:a.name)&&b.getAttribute("property")===(a.property==null?null:a.property)&&b.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&b.getAttribute("charset")===(a.charSet==null?null:a.charSet)){O.splice(P,1);break t}}b=m.createElement(o),Nt(b,o,a),m.head.appendChild(b);break;default:throw Error(n(468,o))}b[Tt]=e,kt(b),o=b}e.stateNode=o}else Bv(m,e.type,e.stateNode);else e.stateNode=Lv(m,o,e.memoizedProps);else b!==o?(b===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):b.count--,o===null?Bv(m,e.type,e.stateNode):Lv(m,o,e.memoizedProps)):o===null&&e.stateNode!==null&&_h(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ft(i,e),Wt(e),o&512&&(yt||a===null||Pi(a,a.return)),a!==null&&o&4&&_h(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ft(i,e),Wt(e),o&512&&(yt||a===null||Pi(a,a.return)),e.flags&32){m=e.stateNode;try{Dr(m,"")}catch(ge){Ke(e,e.return,ge)}}o&4&&e.stateNode!=null&&(m=e.memoizedProps,_h(e,m,a!==null?a.memoizedProps:m)),o&1024&&(xh=!0);break;case 6:if(Ft(i,e),Wt(e),o&4){if(e.stateNode===null)throw Error(n(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(ge){Ke(e,e.return,ge)}}break;case 3:if(_l=null,m=Ri,Ri=gl(i.containerInfo),Ft(i,e),Ri=m,Wt(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{un(i.containerInfo)}catch(ge){Ke(e,e.return,ge)}xh&&(xh=!1,Bg(e));break;case 4:o=Ri,Ri=gl(e.stateNode.containerInfo),Ft(i,e),Wt(e),Ri=o;break;case 12:Ft(i,e),Wt(e);break;case 31:Ft(i,e),Wt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,il(e,o)));break;case 13:Ft(i,e),Wt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(rl=fe()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,il(e,o)));break;case 22:m=e.memoizedState!==null;var K=a!==null&&a.memoizedState!==null,ee=is,le=yt;if(is=ee||m,yt=le||K,Ft(i,e),yt=le,is=ee,Wt(e),o&8192)e:for(i=e.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(a===null||K||is||yt||hr(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){K=a=i;try{if(b=K.stateNode,m)O=b.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{P=K.stateNode;var he=K.memoizedProps.style,ie=he!=null&&he.hasOwnProperty("display")?he.display:null;P.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(ge){Ke(K,K.return,ge)}}}else if(i.tag===6){if(a===null){K=i;try{K.stateNode.nodeValue=m?"":K.memoizedProps}catch(ge){Ke(K,K.return,ge)}}}else if(i.tag===18){if(a===null){K=i;try{var re=K.stateNode;m?Ev(re,!0):Ev(K.stateNode,!1)}catch(ge){Ke(K,K.return,ge)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,il(e,a))));break;case 19:Ft(i,e),Wt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,il(e,o)));break;case 30:break;case 21:break;default:Ft(i,e),Wt(e)}}function Wt(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(Ag(o)){a=o;break}o=o.return}if(a==null)throw Error(n(160));switch(a.tag){case 27:var m=a.stateNode,b=yh(e);tl(e,b,m);break;case 5:var O=a.stateNode;a.flags&32&&(Dr(O,""),a.flags&=-33);var P=yh(e);tl(e,P,O);break;case 3:case 4:var K=a.stateNode.containerInfo,ee=yh(e);bh(e,ee,K);break;default:throw Error(n(161))}}catch(le){Ke(e,e.return,le)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Bg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Bg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function rs(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Og(e,i.alternate,i),i=i.sibling}function hr(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ts(4,i,i.return),hr(i);break;case 1:Pi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Eg(i,i.return,a),hr(i);break;case 27:Sa(i.stateNode);case 26:case 5:Pi(i,i.return),hr(i);break;case 22:i.memoizedState===null&&hr(i);break;case 30:hr(i);break;default:hr(i)}e=e.sibling}}function ns(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,m=e,b=i,O=b.flags;switch(b.tag){case 0:case 11:case 15:ns(m,b,a),fa(4,b);break;case 1:if(ns(m,b,a),o=b,m=o.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ee){Ke(o,o.return,ee)}if(o=b,m=o.updateQueue,m!==null){var P=o.stateNode;try{var K=m.shared.hiddenCallbacks;if(K!==null)for(m.shared.hiddenCallbacks=null,m=0;m<K.length;m++)fm(K[m],P)}catch(ee){Ke(o,o.return,ee)}}a&&O&64&&Cg(b),pa(b,b.return);break;case 27:Rg(b);case 26:case 5:ns(m,b,a),a&&o===null&&O&4&&kg(b),pa(b,b.return);break;case 12:ns(m,b,a);break;case 31:ns(m,b,a),a&&O&4&&Ng(m,b);break;case 13:ns(m,b,a),a&&O&4&&Lg(m,b);break;case 22:b.memoizedState===null&&ns(m,b,a),pa(b,b.return);break;case 30:break;default:ns(m,b,a)}i=i.sibling}}function wh(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ea(a))}function Sh(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ea(e))}function Ti(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Pg(e,i,a,o),i=i.sibling}function Pg(e,i,a,o){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Ti(e,i,a,o),m&2048&&fa(9,i);break;case 1:Ti(e,i,a,o);break;case 3:Ti(e,i,a,o),m&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ea(e)));break;case 12:if(m&2048){Ti(e,i,a,o),e=i.stateNode;try{var b=i.memoizedProps,O=b.id,P=b.onPostCommit;typeof P=="function"&&P(O,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(K){Ke(i,i.return,K)}}else Ti(e,i,a,o);break;case 31:Ti(e,i,a,o);break;case 13:Ti(e,i,a,o);break;case 23:break;case 22:b=i.stateNode,O=i.alternate,i.memoizedState!==null?b._visibility&2?Ti(e,i,a,o):ma(e,i):b._visibility&2?Ti(e,i,a,o):(b._visibility|=2,Qr(e,i,a,o,(i.subtreeFlags&10256)!==0||!1)),m&2048&&wh(O,i);break;case 24:Ti(e,i,a,o),m&2048&&Sh(i.alternate,i);break;default:Ti(e,i,a,o)}}function Qr(e,i,a,o,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var b=e,O=i,P=a,K=o,ee=O.flags;switch(O.tag){case 0:case 11:case 15:Qr(b,O,P,K,m),fa(8,O);break;case 23:break;case 22:var le=O.stateNode;O.memoizedState!==null?le._visibility&2?Qr(b,O,P,K,m):ma(b,O):(le._visibility|=2,Qr(b,O,P,K,m)),m&&ee&2048&&wh(O.alternate,O);break;case 24:Qr(b,O,P,K,m),m&&ee&2048&&Sh(O.alternate,O);break;default:Qr(b,O,P,K,m)}i=i.sibling}}function ma(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,m=o.flags;switch(o.tag){case 22:ma(a,o),m&2048&&wh(o.alternate,o);break;case 24:ma(a,o),m&2048&&Sh(o.alternate,o);break;default:ma(a,o)}i=i.sibling}}var ga=8192;function Zr(e,i,a){if(e.subtreeFlags&ga)for(e=e.child;e!==null;)Ug(e,i,a),e=e.sibling}function Ug(e,i,a){switch(e.tag){case 26:Zr(e,i,a),e.flags&ga&&e.memoizedState!==null&&Iw(a,Ri,e.memoizedState,e.memoizedProps);break;case 5:Zr(e,i,a);break;case 3:case 4:var o=Ri;Ri=gl(e.stateNode.containerInfo),Zr(e,i,a),Ri=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=ga,ga=16777216,Zr(e,i,a),ga=o):Zr(e,i,a));break;default:Zr(e,i,a)}}function Hg(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function va(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];At=o,zg(o,e)}Hg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ig(e),e=e.sibling}function Ig(e){switch(e.tag){case 0:case 11:case 15:va(e),e.flags&2048&&Ts(9,e,e.return);break;case 3:va(e);break;case 12:va(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,sl(e)):va(e);break;default:va(e)}}function sl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];At=o,zg(o,e)}Hg(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ts(8,i,i.return),sl(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,sl(i));break;default:sl(i)}e=e.sibling}}function zg(e,i){for(;At!==null;){var a=At;switch(a.tag){case 0:case 11:case 15:Ts(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ea(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,At=o;else e:for(a=e;At!==null;){o=At;var m=o.sibling,b=o.return;if(jg(o),o===a){At=null;break e}if(m!==null){m.return=b,At=m;break e}At=b}}}var tw={getCacheForType:function(e){var i=jt(gt),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return jt(gt).controller.signal}},iw=typeof WeakMap=="function"?WeakMap:Map,$e=0,Qe=null,je=null,Ne=0,We=0,si=null,Os=!1,en=!1,Ch=!1,as=0,ut=0,js=0,dr=0,Eh=0,ri=0,tn=0,_a=null,Kt=null,kh=!1,rl=0,$g=0,nl=1/0,al=null,Ds=null,xt=0,Ns=null,sn=null,os=0,Ah=0,Rh=null,qg=null,ya=0,Th=null;function ni(){return($e&2)!==0&&Ne!==0?Ne&-Ne:$.T!==null?Mh():np()}function Fg(){if(ri===0)if((Ne&536870912)===0||Ue){var e=po;po<<=1,(po&3932160)===0&&(po=262144),ri=e}else ri=536870912;return e=ti.current,e!==null&&(e.flags|=32),ri}function Vt(e,i,a){(e===Qe&&(We===2||We===9)||e.cancelPendingCommit!==null)&&(rn(e,0),Ls(e,Ne,ri,!1)),In(e,a),(($e&2)===0||e!==Qe)&&(e===Qe&&(($e&2)===0&&(dr|=a),ut===4&&Ls(e,Ne,ri,!1)),Ui(e))}function Wg(e,i,a){if(($e&6)!==0)throw Error(n(327));var o=!a&&(i&127)===0&&(i&e.expiredLanes)===0||Hn(e,i),m=o?nw(e,i):jh(e,i,!0),b=o;do{if(m===0){en&&!o&&Ls(e,i,0,!1);break}else{if(a=e.current.alternate,b&&!sw(a)){m=jh(e,i,!1),b=!1;continue}if(m===2){if(b=i,e.errorRecoveryDisabledLanes&b)var O=0;else O=e.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){i=O;e:{var P=e;m=_a;var K=P.current.memoizedState.isDehydrated;if(K&&(rn(P,O).flags|=256),O=jh(P,O,!1),O!==2){if(Ch&&!K){P.errorRecoveryDisabledLanes|=b,dr|=b,m=4;break e}b=Kt,Kt=m,b!==null&&(Kt===null?Kt=b:Kt.push.apply(Kt,b))}m=O}if(b=!1,m!==2)continue}}if(m===1){rn(e,0),Ls(e,i,0,!0);break}e:{switch(o=e,b=m,b){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:Ls(o,i,ri,!Os);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(m=rl+300-fe(),10<m)){if(Ls(o,i,ri,!Os),go(o,0,!0)!==0)break e;os=i,o.timeoutHandle=wv(Kg.bind(null,o,a,Kt,al,kh,i,ri,dr,tn,Os,b,"Throttled",-0,0),m);break e}Kg(o,a,Kt,al,kh,i,ri,dr,tn,Os,b,null,-0,0)}}break}while(!0);Ui(e)}function Kg(e,i,a,o,m,b,O,P,K,ee,le,he,ie,re){if(e.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ki},Ug(i,b,he);var ge=(b&62914560)===b?rl-fe():(b&4194048)===b?$g-fe():0;if(ge=zw(he,ge),ge!==null){os=b,e.cancelPendingCommit=ge(ev.bind(null,e,i,b,a,o,m,O,P,K,le,he,null,ie,re)),Ls(e,b,O,!ee);return}}ev(e,i,b,a,o,m,O,P,K)}function sw(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var m=a[o],b=m.getSnapshot;m=m.value;try{if(!Zt(b(),m))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ls(e,i,a,o){i&=~Eh,i&=~dr,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var m=i;0<m;){var b=31-Rt(m),O=1<<b;o[b]=-1,m&=~O}a!==0&&ip(e,a,i)}function ol(){return($e&6)===0?(ba(0),!1):!0}function Oh(){if(je!==null){if(We===0)var e=je.return;else e=je,Xi=sr=null,Ku(e),Vr=null,ia=0,e=je;for(;e!==null;)Sg(e.alternate,e),e=e.return;je=null}}function rn(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Sw(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),os=0,Oh(),Qe=e,je=a=Gi(e.current,null),Ne=i,We=0,si=null,Os=!1,en=Hn(e,i),Ch=!1,tn=ri=Eh=dr=js=ut=0,Kt=_a=null,kh=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var m=31-Rt(o),b=1<<m;i|=e[m],o&=~b}return as=i,Ro(),a}function Vg(e,i){Re=null,$.H=ua,i===Kr||i===Bo?(i=cm(),We=3):i===Lu?(i=cm(),We=4):We=i===lh?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,si=i,je===null&&(ut=1,Xo(e,mi(i,e.current)))}function Gg(){var e=ti.current;return e===null?!0:(Ne&4194048)===Ne?yi===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?e===yi:!1}function Yg(){var e=$.H;return $.H=ua,e===null?ua:e}function Xg(){var e=$.A;return $.A=tw,e}function ll(){ut=4,Os||(Ne&4194048)!==Ne&&ti.current!==null||(en=!0),(js&134217727)===0&&(dr&134217727)===0||Qe===null||Ls(Qe,Ne,ri,!1)}function jh(e,i,a){var o=$e;$e|=2;var m=Yg(),b=Xg();(Qe!==e||Ne!==i)&&(al=null,rn(e,i)),i=!1;var O=ut;e:do try{if(We!==0&&je!==null){var P=je,K=si;switch(We){case 8:Oh(),O=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(i=!0);var ee=We;if(We=0,si=null,nn(e,P,K,ee),a&&en){O=0;break e}break;default:ee=We,We=0,si=null,nn(e,P,K,ee)}}rw(),O=ut;break}catch(le){Vg(e,le)}while(!0);return i&&e.shellSuspendCounter++,Xi=sr=null,$e=o,$.H=m,$.A=b,je===null&&(Qe=null,Ne=0,Ro()),O}function rw(){for(;je!==null;)Jg(je)}function nw(e,i){var a=$e;$e|=2;var o=Yg(),m=Xg();Qe!==e||Ne!==i?(al=null,nl=fe()+500,rn(e,i)):en=Hn(e,i);e:do try{if(We!==0&&je!==null){i=je;var b=si;t:switch(We){case 1:We=0,si=null,nn(e,i,b,1);break;case 2:case 9:if(om(b)){We=0,si=null,Qg(i);break}i=function(){We!==2&&We!==9||Qe!==e||(We=7),Ui(e)},b.then(i,i);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:om(b)?(We=0,si=null,Qg(i)):(We=0,si=null,nn(e,i,b,7));break;case 5:var O=null;switch(je.tag){case 26:O=je.memoizedState;case 5:case 27:var P=je;if(O?Pv(O):P.stateNode.complete){We=0,si=null;var K=P.sibling;if(K!==null)je=K;else{var ee=P.return;ee!==null?(je=ee,cl(ee)):je=null}break t}}We=0,si=null,nn(e,i,b,5);break;case 6:We=0,si=null,nn(e,i,b,6);break;case 8:Oh(),ut=6;break e;default:throw Error(n(462))}}aw();break}catch(le){Vg(e,le)}while(!0);return Xi=sr=null,$.H=o,$.A=m,$e=a,je!==null?0:(Qe=null,Ne=0,Ro(),ut)}function aw(){for(;je!==null&&!vs();)Jg(je)}function Jg(e){var i=xg(e.alternate,e,as);e.memoizedProps=e.pendingProps,i===null?cl(e):je=i}function Qg(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=mg(a,i,i.pendingProps,i.type,void 0,Ne);break;case 11:i=mg(a,i,i.pendingProps,i.type.render,i.ref,Ne);break;case 5:Ku(i);default:Sg(a,i),i=je=Xp(i,as),i=xg(a,i,as)}e.memoizedProps=e.pendingProps,i===null?cl(e):je=i}function nn(e,i,a,o){Xi=sr=null,Ku(i),Vr=null,ia=0;var m=i.return;try{if(Gx(e,m,i,a,Ne)){ut=1,Xo(e,mi(a,e.current)),je=null;return}}catch(b){if(m!==null)throw je=m,b;ut=1,Xo(e,mi(a,e.current)),je=null;return}i.flags&32768?(Ue||o===1?e=!0:en||(Ne&536870912)!==0?e=!1:(Os=e=!0,(o===2||o===9||o===3||o===6)&&(o=ti.current,o!==null&&o.tag===13&&(o.flags|=16384))),Zg(i,e)):cl(i)}function cl(e){var i=e;do{if((i.flags&32768)!==0){Zg(i,Os);return}e=i.return;var a=Jx(i.alternate,i,as);if(a!==null){je=a;return}if(i=i.sibling,i!==null){je=i;return}je=i=e}while(i!==null);ut===0&&(ut=5)}function Zg(e,i){do{var a=Qx(e.alternate,e);if(a!==null){a.flags&=32767,je=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){je=e;return}je=e=a}while(e!==null);ut=6,je=null}function ev(e,i,a,o,m,b,O,P,K){e.cancelPendingCommit=null;do ul();while(xt!==0);if(($e&6)!==0)throw Error(n(327));if(i!==null){if(i===e.current)throw Error(n(177));if(b=i.lanes|i.childLanes,b|=yu,Hb(e,a,b,O,P,K),e===Qe&&(je=Qe=null,Ne=0),sn=i,Ns=e,os=a,Ah=b,Rh=m,qg=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,uw(Je,function(){return nv(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=$.T,$.T=null,m=Y.p,Y.p=2,O=$e,$e|=4;try{Zx(e,i,a)}finally{$e=O,Y.p=m,$.T=o}}xt=1,tv(),iv(),sv()}}function tv(){if(xt===1){xt=0;var e=Ns,i=sn,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var o=Y.p;Y.p=2;var m=$e;$e|=4;try{Mg(i,e);var b=qh,O=zp(e.containerInfo),P=b.focusedElem,K=b.selectionRange;if(O!==P&&P&&P.ownerDocument&&Ip(P.ownerDocument.documentElement,P)){if(K!==null&&pu(P)){var ee=K.start,le=K.end;if(le===void 0&&(le=ee),"selectionStart"in P)P.selectionStart=ee,P.selectionEnd=Math.min(le,P.value.length);else{var he=P.ownerDocument||document,ie=he&&he.defaultView||window;if(ie.getSelection){var re=ie.getSelection(),ge=P.textContent.length,we=Math.min(K.start,ge),Xe=K.end===void 0?we:Math.min(K.end,ge);!re.extend&&we>Xe&&(O=Xe,Xe=we,we=O);var X=Hp(P,we),G=Hp(P,Xe);if(X&&G&&(re.rangeCount!==1||re.anchorNode!==X.node||re.anchorOffset!==X.offset||re.focusNode!==G.node||re.focusOffset!==G.offset)){var Z=he.createRange();Z.setStart(X.node,X.offset),re.removeAllRanges(),we>Xe?(re.addRange(Z),re.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),re.addRange(Z))}}}}for(he=[],re=P;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<he.length;P++){var ue=he[P];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}wl=!!$h,qh=$h=null}finally{$e=m,Y.p=o,$.T=a}}e.current=i,xt=2}}function iv(){if(xt===2){xt=0;var e=Ns,i=sn,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var o=Y.p;Y.p=2;var m=$e;$e|=4;try{Og(e,i.alternate,i)}finally{$e=m,Y.p=o,$.T=a}}xt=3}}function sv(){if(xt===4||xt===3){xt=0,Bt();var e=Ns,i=sn,a=os,o=qg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?xt=5:(xt=0,sn=Ns=null,rv(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(Ds=null),Yc(a),i=i.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(ki,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=$.T,m=Y.p,Y.p=2,$.T=null;try{for(var b=e.onRecoverableError,O=0;O<o.length;O++){var P=o[O];b(P.value,{componentStack:P.stack})}}finally{$.T=i,Y.p=m}}(os&3)!==0&&ul(),Ui(e),m=e.pendingLanes,(a&261930)!==0&&(m&42)!==0?e===Th?ya++:(ya=0,Th=e):ya=0,ba(0)}}function rv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ea(i)))}function ul(){return tv(),iv(),sv(),nv()}function nv(){if(xt!==5)return!1;var e=Ns,i=Ah;Ah=0;var a=Yc(os),o=$.T,m=Y.p;try{Y.p=32>a?32:a,$.T=null,a=Rh,Rh=null;var b=Ns,O=os;if(xt=0,sn=Ns=null,os=0,($e&6)!==0)throw Error(n(331));var P=$e;if($e|=4,Ig(b.current),Pg(b,b.current,O,a),$e=P,ba(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(ki,b)}catch{}return!0}finally{Y.p=m,$.T=o,rv(e,i)}}function av(e,i,a){i=mi(a,i),i=oh(e.stateNode,i,2),e=ks(e,i,2),e!==null&&(In(e,2),Ui(e))}function Ke(e,i,a){if(e.tag===3)av(e,e,a);else for(;i!==null;){if(i.tag===3){av(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ds===null||!Ds.has(o))){e=mi(a,e),a=og(2),o=ks(i,a,2),o!==null&&(lg(a,o,i,e),In(o,2),Ui(o));break}}i=i.return}}function Dh(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new iw;var m=new Set;o.set(i,m)}else m=o.get(i),m===void 0&&(m=new Set,o.set(i,m));m.has(a)||(Ch=!0,m.add(a),e=ow.bind(null,e,i,a),i.then(e,e))}function ow(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Qe===e&&(Ne&a)===a&&(ut===4||ut===3&&(Ne&62914560)===Ne&&300>fe()-rl?($e&2)===0&&rn(e,0):Eh|=a,tn===Ne&&(tn=0)),Ui(e)}function ov(e,i){i===0&&(i=tp()),e=er(e,i),e!==null&&(In(e,i),Ui(e))}function lw(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),ov(e,a)}function cw(e,i){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,m=e.memoizedState;m!==null&&(a=m.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(n(314))}o!==null&&o.delete(i),ov(e,a)}function uw(e,i){return ui(e,i)}var hl=null,an=null,Nh=!1,dl=!1,Lh=!1,Ms=0;function Ui(e){e!==an&&e.next===null&&(an===null?hl=an=e:an=an.next=e),dl=!0,Nh||(Nh=!0,dw())}function ba(e,i){if(!Lh&&dl){Lh=!0;do for(var a=!1,o=hl;o!==null;){if(e!==0){var m=o.pendingLanes;if(m===0)var b=0;else{var O=o.suspendedLanes,P=o.pingedLanes;b=(1<<31-Rt(42|e)+1)-1,b&=m&~(O&~P),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(a=!0,hv(o,b))}else b=Ne,b=go(o,o===Qe?b:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(b&3)===0||Hn(o,b)||(a=!0,hv(o,b));o=o.next}while(a);Lh=!1}}function hw(){lv()}function lv(){dl=Nh=!1;var e=0;Ms!==0&&ww()&&(e=Ms);for(var i=fe(),a=null,o=hl;o!==null;){var m=o.next,b=cv(o,i);b===0?(o.next=null,a===null?hl=m:a.next=m,m===null&&(an=a)):(a=o,(e!==0||(b&3)!==0)&&(dl=!0)),o=m}xt!==0&&xt!==5||ba(e),Ms!==0&&(Ms=0)}function cv(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,m=e.expirationTimes,b=e.pendingLanes&-62914561;0<b;){var O=31-Rt(b),P=1<<O,K=m[O];K===-1?((P&a)===0||(P&o)!==0)&&(m[O]=Ub(P,i)):K<=i&&(e.expiredLanes|=P),b&=~P}if(i=Qe,a=Ne,a=go(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(We===2||We===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Fi(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Hn(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Fi(o),Yc(a)){case 2:case 8:a=tt;break;case 32:a=Je;break;case 268435456:a=Ct;break;default:a=Je}return o=uv.bind(null,e),a=ui(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Fi(o),e.callbackPriority=2,e.callbackNode=null,2}function uv(e,i){if(xt!==0&&xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ul()&&e.callbackNode!==a)return null;var o=Ne;return o=go(e,e===Qe?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Wg(e,o,i),cv(e,fe()),e.callbackNode!=null&&e.callbackNode===a?uv.bind(null,e):null)}function hv(e,i){if(ul())return null;Wg(e,i,!0)}function dw(){Cw(function(){($e&6)!==0?ui(qe,hw):lv()})}function Mh(){if(Ms===0){var e=Fr;e===0&&(e=fo,fo<<=1,(fo&261888)===0&&(fo=256)),Ms=e}return Ms}function dv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:bo(""+e)}function fv(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function fw(e,i,a,o,m){if(i==="submit"&&a&&a.stateNode===m){var b=dv((m[zt]||null).action),O=o.submitter;O&&(i=(i=O[zt]||null)?dv(i.formAction):O.getAttribute("formAction"),i!==null&&(b=i,O=null));var P=new Co("action","action",null,o,m);e.push({event:P,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ms!==0){var K=O?fv(m,O):new FormData(m);th(a,{pending:!0,data:K,method:m.method,action:b},null,K)}}else typeof b=="function"&&(P.preventDefault(),K=O?fv(m,O):new FormData(m),th(a,{pending:!0,data:K,method:m.method,action:b},b,K))},currentTarget:m}]})}}for(var Bh=0;Bh<_u.length;Bh++){var Ph=_u[Bh],pw=Ph.toLowerCase(),mw=Ph[0].toUpperCase()+Ph.slice(1);Ai(pw,"on"+mw)}Ai(Fp,"onAnimationEnd"),Ai(Wp,"onAnimationIteration"),Ai(Kp,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(jx,"onTransitionRun"),Ai(Dx,"onTransitionStart"),Ai(Nx,"onTransitionCancel"),Ai(Vp,"onTransitionEnd"),Or("onMouseEnter",["mouseout","mouseover"]),Or("onMouseLeave",["mouseout","mouseover"]),Or("onPointerEnter",["pointerout","pointerover"]),Or("onPointerLeave",["pointerout","pointerover"]),Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xa));function pv(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],m=o.event;o=o.listeners;e:{var b=void 0;if(i)for(var O=o.length-1;0<=O;O--){var P=o[O],K=P.instance,ee=P.currentTarget;if(P=P.listener,K!==b&&m.isPropagationStopped())break e;b=P,m.currentTarget=ee;try{b(m)}catch(le){Ao(le)}m.currentTarget=null,b=K}else for(O=0;O<o.length;O++){if(P=o[O],K=P.instance,ee=P.currentTarget,P=P.listener,K!==b&&m.isPropagationStopped())break e;b=P,m.currentTarget=ee;try{b(m)}catch(le){Ao(le)}m.currentTarget=null,b=K}}}}function De(e,i){var a=i[Xc];a===void 0&&(a=i[Xc]=new Set);var o=e+"__bubble";a.has(o)||(mv(i,e,2,!1),a.add(o))}function Uh(e,i,a){var o=0;i&&(o|=4),mv(a,e,o,i)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Hh(e){if(!e[fl]){e[fl]=!0,lp.forEach(function(a){a!=="selectionchange"&&(gw.has(a)||Uh(a,!1,e),Uh(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[fl]||(i[fl]=!0,Uh("selectionchange",!1,i))}}function mv(e,i,a,o){switch(Fv(i)){case 2:var m=Fw;break;case 8:m=Ww;break;default:m=ed}a=m.bind(null,i,a,e),m=void 0,!nu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),o?m!==void 0?e.addEventListener(i,a,{capture:!0,passive:m}):e.addEventListener(i,a,!0):m!==void 0?e.addEventListener(i,a,{passive:m}):e.addEventListener(i,a,!1)}function Ih(e,i,a,o,m){var b=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var O=o.tag;if(O===3||O===4){var P=o.stateNode.containerInfo;if(P===m)break;if(O===4)for(O=o.return;O!==null;){var K=O.tag;if((K===3||K===4)&&O.stateNode.containerInfo===m)return;O=O.return}for(;P!==null;){if(O=Ar(P),O===null)return;if(K=O.tag,K===5||K===6||K===26||K===27){o=b=O;continue e}P=P.parentNode}}o=o.return}bp(function(){var ee=b,le=su(a),he=[];e:{var ie=Gp.get(e);if(ie!==void 0){var re=Co,ge=e;switch(e){case"keypress":if(wo(a)===0)break e;case"keydown":case"keyup":re=cx;break;case"focusin":ge="focus",re=cu;break;case"focusout":ge="blur",re=cu;break;case"beforeblur":case"afterblur":re=cu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=dx;break;case Fp:case Wp:case Kp:re=ex;break;case Vp:re=px;break;case"scroll":case"scrollend":re=Yb;break;case"wheel":re=gx;break;case"copy":case"cut":case"paste":re=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ep;break;case"toggle":case"beforetoggle":re=_x}var we=(i&4)!==0,Xe=!we&&(e==="scroll"||e==="scrollend"),X=we?ie!==null?ie+"Capture":null:ie;we=[];for(var G=ee,Z;G!==null;){var ue=G;if(Z=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Z===null||X===null||(ue=qn(G,X),ue!=null&&we.push(wa(G,ue,Z))),Xe)break;G=G.return}0<we.length&&(ie=new re(ie,ge,null,a,le),he.push({event:ie,listeners:we}))}}if((i&7)===0){e:{if(ie=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",ie&&a!==iu&&(ge=a.relatedTarget||a.fromElement)&&(Ar(ge)||ge[kr]))break e;if((re||ie)&&(ie=le.window===le?le:(ie=le.ownerDocument)?ie.defaultView||ie.parentWindow:window,re?(ge=a.relatedTarget||a.toElement,re=ee,ge=ge?Ar(ge):null,ge!==null&&(Xe=u(ge),we=ge.tag,ge!==Xe||we!==5&&we!==27&&we!==6)&&(ge=null)):(re=null,ge=ee),re!==ge)){if(we=Sp,ue="onMouseLeave",X="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(we=Ep,ue="onPointerLeave",X="onPointerEnter",G="pointer"),Xe=re==null?ie:$n(re),Z=ge==null?ie:$n(ge),ie=new we(ue,G+"leave",re,a,le),ie.target=Xe,ie.relatedTarget=Z,ue=null,Ar(le)===ee&&(we=new we(X,G+"enter",ge,a,le),we.target=Z,we.relatedTarget=Xe,ue=we),Xe=ue,re&&ge)t:{for(we=vw,X=re,G=ge,Z=0,ue=X;ue;ue=we(ue))Z++;ue=0;for(var be=G;be;be=we(be))ue++;for(;0<Z-ue;)X=we(X),Z--;for(;0<ue-Z;)G=we(G),ue--;for(;Z--;){if(X===G||G!==null&&X===G.alternate){we=X;break t}X=we(X),G=we(G)}we=null}else we=null;re!==null&&gv(he,ie,re,we,!1),ge!==null&&Xe!==null&&gv(he,Xe,ge,we,!0)}}e:{if(ie=ee?$n(ee):window,re=ie.nodeName&&ie.nodeName.toLowerCase(),re==="select"||re==="input"&&ie.type==="file")var Ie=Np;else if(jp(ie))if(Lp)Ie=Rx;else{Ie=kx;var _e=Ex}else re=ie.nodeName,!re||re.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ee&&tu(ee.elementType)&&(Ie=Np):Ie=Ax;if(Ie&&(Ie=Ie(e,ee))){Dp(he,Ie,a,le);break e}_e&&_e(e,ie,ee),e==="focusout"&&ee&&ie.type==="number"&&ee.memoizedProps.value!=null&&eu(ie,"number",ie.value)}switch(_e=ee?$n(ee):window,e){case"focusin":(jp(_e)||_e.contentEditable==="true")&&(Br=_e,mu=ee,Jn=null);break;case"focusout":Jn=mu=Br=null;break;case"mousedown":gu=!0;break;case"contextmenu":case"mouseup":case"dragend":gu=!1,$p(he,a,le);break;case"selectionchange":if(Ox)break;case"keydown":case"keyup":$p(he,a,le)}var Te;if(hu)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Mr?Tp(e,a)&&(Le="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(kp&&a.locale!=="ko"&&(Mr||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Mr&&(Te=xp()):(ys=le,au="value"in ys?ys.value:ys.textContent,Mr=!0)),_e=pl(ee,Le),0<_e.length&&(Le=new Cp(Le,e,null,a,le),he.push({event:Le,listeners:_e}),Te?Le.data=Te:(Te=Op(a),Te!==null&&(Le.data=Te)))),(Te=bx?xx(e,a):wx(e,a))&&(Le=pl(ee,"onBeforeInput"),0<Le.length&&(_e=new Cp("onBeforeInput","beforeinput",null,a,le),he.push({event:_e,listeners:Le}),_e.data=Te)),fw(he,e,ee,a,le)}pv(he,i)})}function wa(e,i,a){return{instance:e,listener:i,currentTarget:a}}function pl(e,i){for(var a=i+"Capture",o=[];e!==null;){var m=e,b=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||b===null||(m=qn(e,a),m!=null&&o.unshift(wa(e,m,b)),m=qn(e,i),m!=null&&o.push(wa(e,m,b))),e.tag===3)return o;e=e.return}return[]}function vw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gv(e,i,a,o,m){for(var b=i._reactName,O=[];a!==null&&a!==o;){var P=a,K=P.alternate,ee=P.stateNode;if(P=P.tag,K!==null&&K===o)break;P!==5&&P!==26&&P!==27||ee===null||(K=ee,m?(ee=qn(a,b),ee!=null&&O.unshift(wa(a,ee,K))):m||(ee=qn(a,b),ee!=null&&O.push(wa(a,ee,K)))),a=a.return}O.length!==0&&e.push({event:i,listeners:O})}var _w=/\r\n?/g,yw=/\u0000|\uFFFD/g;function vv(e){return(typeof e=="string"?e:""+e).replace(_w,`
`).replace(yw,"")}function _v(e,i){return i=vv(i),vv(e)===i}function Ye(e,i,a,o,m,b){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Dr(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Dr(e,""+o);break;case"className":_o(e,"class",o);break;case"tabIndex":_o(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":_o(e,a,o);break;case"style":_p(e,o,b);break;case"data":if(i!=="object"){_o(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=bo(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(a==="formAction"?(i!=="input"&&Ye(e,i,"name",m.name,m,null),Ye(e,i,"formEncType",m.formEncType,m,null),Ye(e,i,"formMethod",m.formMethod,m,null),Ye(e,i,"formTarget",m.formTarget,m,null)):(Ye(e,i,"encType",m.encType,m,null),Ye(e,i,"method",m.method,m,null),Ye(e,i,"target",m.target,m,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=bo(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Ki);break;case"onScroll":o!=null&&De("scroll",e);break;case"onScrollEnd":o!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(n(61));if(a=o.__html,a!=null){if(m.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=bo(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":De("beforetoggle",e),De("toggle",e),vo(e,"popover",o);break;case"xlinkActuate":Wi(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Wi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Wi(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Wi(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Wi(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Wi(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Wi(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Wi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Wi(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":vo(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vb.get(a)||a,vo(e,a,o))}}function zh(e,i,a,o,m,b){switch(a){case"style":_p(e,o,b);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(n(61));if(a=o.__html,a!=null){if(m.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Dr(e,o):(typeof o=="number"||typeof o=="bigint")&&Dr(e,""+o);break;case"onScroll":o!=null&&De("scroll",e);break;case"onScrollEnd":o!=null&&De("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cp.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),i=a.slice(2,m?a.length-7:void 0),b=e[zt]||null,b=b!=null?b[a]:null,typeof b=="function"&&e.removeEventListener(i,b,m),typeof o=="function")){typeof b!="function"&&b!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,m);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):vo(e,a,o)}}}function Nt(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var o=!1,m=!1,b;for(b in a)if(a.hasOwnProperty(b)){var O=a[b];if(O!=null)switch(b){case"src":o=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:Ye(e,i,b,O,a,null)}}m&&Ye(e,i,"srcSet",a.srcSet,a,null),o&&Ye(e,i,"src",a.src,a,null);return;case"input":De("invalid",e);var P=b=O=m=null,K=null,ee=null;for(o in a)if(a.hasOwnProperty(o)){var le=a[o];if(le!=null)switch(o){case"name":m=le;break;case"type":O=le;break;case"checked":K=le;break;case"defaultChecked":ee=le;break;case"value":b=le;break;case"defaultValue":P=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(137,i));break;default:Ye(e,i,o,le,a,null)}}pp(e,b,P,K,ee,O,m,!1);return;case"select":De("invalid",e),o=O=b=null;for(m in a)if(a.hasOwnProperty(m)&&(P=a[m],P!=null))switch(m){case"value":b=P;break;case"defaultValue":O=P;break;case"multiple":o=P;default:Ye(e,i,m,P,a,null)}i=b,a=O,e.multiple=!!o,i!=null?jr(e,!!o,i,!1):a!=null&&jr(e,!!o,a,!0);return;case"textarea":De("invalid",e),b=m=o=null;for(O in a)if(a.hasOwnProperty(O)&&(P=a[O],P!=null))switch(O){case"value":o=P;break;case"defaultValue":m=P;break;case"children":b=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(n(91));break;default:Ye(e,i,O,P,a,null)}gp(e,o,m,b);return;case"option":for(K in a)a.hasOwnProperty(K)&&(o=a[K],o!=null)&&(K==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Ye(e,i,K,o,a,null));return;case"dialog":De("beforetoggle",e),De("toggle",e),De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(o=0;o<xa.length;o++)De(xa[o],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in a)if(a.hasOwnProperty(ee)&&(o=a[ee],o!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:Ye(e,i,ee,o,a,null)}return;default:if(tu(i)){for(le in a)a.hasOwnProperty(le)&&(o=a[le],o!==void 0&&zh(e,i,le,o,a,void 0));return}}for(P in a)a.hasOwnProperty(P)&&(o=a[P],o!=null&&Ye(e,i,P,o,a,null))}function bw(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,b=null,O=null,P=null,K=null,ee=null,le=null;for(re in a){var he=a[re];if(a.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":K=he;default:o.hasOwnProperty(re)||Ye(e,i,re,null,o,he)}}for(var ie in o){var re=o[ie];if(he=a[ie],o.hasOwnProperty(ie)&&(re!=null||he!=null))switch(ie){case"type":b=re;break;case"name":m=re;break;case"checked":ee=re;break;case"defaultChecked":le=re;break;case"value":O=re;break;case"defaultValue":P=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,i));break;default:re!==he&&Ye(e,i,ie,re,o,he)}}Zc(e,O,P,K,ee,le,b,m);return;case"select":re=O=P=ie=null;for(b in a)if(K=a[b],a.hasOwnProperty(b)&&K!=null)switch(b){case"value":break;case"multiple":re=K;default:o.hasOwnProperty(b)||Ye(e,i,b,null,o,K)}for(m in o)if(b=o[m],K=a[m],o.hasOwnProperty(m)&&(b!=null||K!=null))switch(m){case"value":ie=b;break;case"defaultValue":P=b;break;case"multiple":O=b;default:b!==K&&Ye(e,i,m,b,o,K)}i=P,a=O,o=re,ie!=null?jr(e,!!a,ie,!1):!!o!=!!a&&(i!=null?jr(e,!!a,i,!0):jr(e,!!a,a?[]:"",!1));return;case"textarea":re=ie=null;for(P in a)if(m=a[P],a.hasOwnProperty(P)&&m!=null&&!o.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Ye(e,i,P,null,o,m)}for(O in o)if(m=o[O],b=a[O],o.hasOwnProperty(O)&&(m!=null||b!=null))switch(O){case"value":ie=m;break;case"defaultValue":re=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==b&&Ye(e,i,O,m,o,b)}mp(e,ie,re);return;case"option":for(var ge in a)ie=a[ge],a.hasOwnProperty(ge)&&ie!=null&&!o.hasOwnProperty(ge)&&(ge==="selected"?e.selected=!1:Ye(e,i,ge,null,o,ie));for(K in o)ie=o[K],re=a[K],o.hasOwnProperty(K)&&ie!==re&&(ie!=null||re!=null)&&(K==="selected"?e.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":Ye(e,i,K,ie,o,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)ie=a[we],a.hasOwnProperty(we)&&ie!=null&&!o.hasOwnProperty(we)&&Ye(e,i,we,null,o,ie);for(ee in o)if(ie=o[ee],re=a[ee],o.hasOwnProperty(ee)&&ie!==re&&(ie!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(n(137,i));break;default:Ye(e,i,ee,ie,o,re)}return;default:if(tu(i)){for(var Xe in a)ie=a[Xe],a.hasOwnProperty(Xe)&&ie!==void 0&&!o.hasOwnProperty(Xe)&&zh(e,i,Xe,void 0,o,ie);for(le in o)ie=o[le],re=a[le],!o.hasOwnProperty(le)||ie===re||ie===void 0&&re===void 0||zh(e,i,le,ie,o,re);return}}for(var X in a)ie=a[X],a.hasOwnProperty(X)&&ie!=null&&!o.hasOwnProperty(X)&&Ye(e,i,X,null,o,ie);for(he in o)ie=o[he],re=a[he],!o.hasOwnProperty(he)||ie===re||ie==null&&re==null||Ye(e,i,he,ie,o,re)}function yv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var m=a[o],b=m.transferSize,O=m.initiatorType,P=m.duration;if(b&&P&&yv(O)){for(O=0,P=m.responseEnd,o+=1;o<a.length;o++){var K=a[o],ee=K.startTime;if(ee>P)break;var le=K.transferSize,he=K.initiatorType;le&&yv(he)&&(K=K.responseEnd,O+=le*(K<P?1:(P-ee)/(K-ee)))}if(--o,i+=8*(b+O)/(m.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $h=null,qh=null;function ml(e){return e.nodeType===9?e:e.ownerDocument}function bv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Fh(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wh=null;function ww(){var e=window.event;return e&&e.type==="popstate"?e===Wh?!1:(Wh=e,!0):(Wh=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,Sw=typeof clearTimeout=="function"?clearTimeout:void 0,Sv=typeof Promise=="function"?Promise:void 0,Cw=typeof queueMicrotask=="function"?queueMicrotask:typeof Sv<"u"?function(e){return Sv.resolve(null).then(e).catch(Ew)}:wv;function Ew(e){setTimeout(function(){throw e})}function Bs(e){return e==="head"}function Cv(e,i){var a=i,o=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(m),un(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Sa(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Sa(a);for(var b=a.firstChild;b;){var O=b.nextSibling,P=b.nodeName;b[zn]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=O}}else a==="body"&&Sa(e.ownerDocument.body);a=m}while(a);un(i)}function Ev(e,i){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Kh(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kh(a),Jc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function kw(e,i,a,o){for(;e.nodeType===1;){var m=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[zn])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(b=e.getAttribute("rel"),b==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(b!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(b=e.getAttribute("src"),(b!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&b&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var b=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===b)return e}else return e;if(e=bi(e.nextSibling),e===null)break}return null}function Aw(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=bi(e.nextSibling),e===null))return null;return e}function kv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=bi(e.nextSibling),e===null))return null;return e}function Vh(e){return e.data==="$?"||e.data==="$~"}function Gh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Rw(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function bi(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Yh=null;function Av(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return bi(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function Rv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function Tv(e,i,a){switch(i=ml(a),e){case"html":if(e=i.documentElement,!e)throw Error(n(452));return e;case"head":if(e=i.head,!e)throw Error(n(453));return e;case"body":if(e=i.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function Sa(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Jc(e)}var xi=new Map,Ov=new Set;function gl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ls=Y.d;Y.d={f:Tw,r:Ow,D:jw,C:Dw,L:Nw,m:Lw,X:Bw,S:Mw,M:Pw};function Tw(){var e=ls.f(),i=ol();return e||i}function Ow(e){var i=Rr(e);i!==null&&i.tag===5&&i.type==="form"?Vm(i):ls.r(e)}var on=typeof document>"u"?null:document;function jv(e,i,a){var o=on;if(o&&typeof i=="string"&&i){var m=fi(i);m='link[rel="'+e+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),Ov.has(m)||(Ov.add(m),e={rel:e,crossOrigin:a,href:i},o.querySelector(m)===null&&(i=o.createElement("link"),Nt(i,"link",e),kt(i),o.head.appendChild(i)))}}function jw(e){ls.D(e),jv("dns-prefetch",e,null)}function Dw(e,i){ls.C(e,i),jv("preconnect",e,i)}function Nw(e,i,a){ls.L(e,i,a);var o=on;if(o&&e&&i){var m='link[rel="preload"][as="'+fi(i)+'"]';i==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+fi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+fi(a.imageSizes)+'"]')):m+='[href="'+fi(e)+'"]';var b=m;switch(i){case"style":b=ln(e);break;case"script":b=cn(e)}xi.has(b)||(e=g({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),xi.set(b,e),o.querySelector(m)!==null||i==="style"&&o.querySelector(Ca(b))||i==="script"&&o.querySelector(Ea(b))||(i=o.createElement("link"),Nt(i,"link",e),kt(i),o.head.appendChild(i)))}}function Lw(e,i){ls.m(e,i);var a=on;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+fi(o)+'"][href="'+fi(e)+'"]',b=m;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=cn(e)}if(!xi.has(b)&&(e=g({rel:"modulepreload",href:e},i),xi.set(b,e),a.querySelector(m)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ea(b)))return}o=a.createElement("link"),Nt(o,"link",e),kt(o),a.head.appendChild(o)}}}function Mw(e,i,a){ls.S(e,i,a);var o=on;if(o&&e){var m=Tr(o).hoistableStyles,b=ln(e);i=i||"default";var O=m.get(b);if(!O){var P={loading:0,preload:null};if(O=o.querySelector(Ca(b)))P.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":i},a),(a=xi.get(b))&&Xh(e,a);var K=O=o.createElement("link");kt(K),Nt(K,"link",e),K._p=new Promise(function(ee,le){K.onload=ee,K.onerror=le}),K.addEventListener("load",function(){P.loading|=1}),K.addEventListener("error",function(){P.loading|=2}),P.loading|=4,vl(O,i,o)}O={type:"stylesheet",instance:O,count:1,state:P},m.set(b,O)}}}function Bw(e,i){ls.X(e,i);var a=on;if(a&&e){var o=Tr(a).hoistableScripts,m=cn(e),b=o.get(m);b||(b=a.querySelector(Ea(m)),b||(e=g({src:e,async:!0},i),(i=xi.get(m))&&Jh(e,i),b=a.createElement("script"),kt(b),Nt(b,"link",e),a.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},o.set(m,b))}}function Pw(e,i){ls.M(e,i);var a=on;if(a&&e){var o=Tr(a).hoistableScripts,m=cn(e),b=o.get(m);b||(b=a.querySelector(Ea(m)),b||(e=g({src:e,async:!0,type:"module"},i),(i=xi.get(m))&&Jh(e,i),b=a.createElement("script"),kt(b),Nt(b,"link",e),a.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},o.set(m,b))}}function Dv(e,i,a,o){var m=(m=me.current)?gl(m):null;if(!m)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ln(a.href),a=Tr(m).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ln(a.href);var b=Tr(m).hoistableStyles,O=b.get(e);if(O||(m=m.ownerDocument||m,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(e,O),(b=m.querySelector(Ca(e)))&&!b._p&&(O.instance=b,O.state.loading=5),xi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xi.set(e,a),b||Uw(m,e,a,O.state))),i&&o===null)throw Error(n(528,""));return O}if(i&&o!==null)throw Error(n(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=cn(a),a=Tr(m).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function ln(e){return'href="'+fi(e)+'"'}function Ca(e){return'link[rel="stylesheet"]['+e+"]"}function Nv(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function Uw(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Nt(i,"link",a),kt(i),e.head.appendChild(i))}function cn(e){return'[src="'+fi(e)+'"]'}function Ea(e){return"script[async]"+e}function Lv(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+fi(a.href)+'"]');if(o)return i.instance=o,kt(o),o;var m=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),kt(o),Nt(o,"style",m),vl(o,a.precedence,e),i.instance=o;case"stylesheet":m=ln(a.href);var b=e.querySelector(Ca(m));if(b)return i.state.loading|=4,i.instance=b,kt(b),b;o=Nv(a),(m=xi.get(m))&&Xh(o,m),b=(e.ownerDocument||e).createElement("link"),kt(b);var O=b;return O._p=new Promise(function(P,K){O.onload=P,O.onerror=K}),Nt(b,"link",o),i.state.loading|=4,vl(b,a.precedence,e),i.instance=b;case"script":return b=cn(a.src),(m=e.querySelector(Ea(b)))?(i.instance=m,kt(m),m):(o=a,(m=xi.get(b))&&(o=g({},a),Jh(o,m)),e=e.ownerDocument||e,m=e.createElement("script"),kt(m),Nt(m,"link",o),e.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,vl(o,a.precedence,e));return i.instance}function vl(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=o.length?o[o.length-1]:null,b=m,O=0;O<o.length;O++){var P=o[O];if(P.dataset.precedence===i)b=P;else if(b!==m)break}b?b.parentNode.insertBefore(e,b.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Xh(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Jh(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var _l=null;function Mv(e,i,a){if(_l===null){var o=new Map,m=_l=new Map;m.set(a,o)}else m=_l,o=m.get(a),o||(o=new Map,m.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),m=0;m<a.length;m++){var b=a[m];if(!(b[zn]||b[Tt]||e==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var O=b.getAttribute(i)||"";O=e+O;var P=o.get(O);P?P.push(b):o.set(O,[b])}}return o}function Bv(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function Hw(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Pv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Iw(e,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=ln(o.href),b=i.querySelector(Ca(m));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=yl.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=b,kt(b);return}b=i.ownerDocument||i,o=Nv(o),(m=xi.get(m))&&Xh(o,m),b=b.createElement("link"),kt(b);var O=b;O._p=new Promise(function(P,K){O.onload=P,O.onerror=K}),Nt(b,"link",o),a.instance=b}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=yl.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var Qh=0;function zw(e,i){return e.stylesheets&&e.count===0&&xl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&xl(e,e.stylesheets),e.unsuspend){var b=e.unsuspend;e.unsuspend=null,b()}},6e4+i);0<e.imgBytes&&Qh===0&&(Qh=62500*xw());var m=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&xl(e,e.stylesheets),e.unsuspend)){var b=e.unsuspend;e.unsuspend=null,b()}},(e.imgBytes>Qh?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(m)}}:null}function yl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var bl=null;function xl(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,bl=new Map,i.forEach($w,e),bl=null,yl.call(e))}function $w(e,i){if(!(i.state.loading&4)){var a=bl.get(e);if(a)var o=a.get(null);else{a=new Map,bl.set(e,a);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<m.length;b++){var O=m[b];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(a.set(O.dataset.precedence,O),o=O)}o&&a.set(null,o)}m=i.instance,O=m.getAttribute("data-precedence"),b=a.get(O)||o,b===o&&a.set(null,m),a.set(O,m),this.count++,o=yl.bind(this),m.addEventListener("load",o),m.addEventListener("error",o),b?b.parentNode.insertBefore(m,b.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),i.state.loading|=4}}var ka={$$typeof:y,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function qw(e,i,a,o,m,b,O,P,K){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.hiddenUpdates=Vc(null),this.identifierPrefix=o,this.onUncaughtError=m,this.onCaughtError=b,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Uv(e,i,a,o,m,b,O,P,K,ee,le,he){return e=new qw(e,i,a,O,K,ee,le,he,P),i=1,b===!0&&(i|=24),b=ei(3,null,null,i),e.current=b,b.stateNode=e,i=ju(),i.refCount++,e.pooledCache=i,i.refCount++,b.memoizedState={element:o,isDehydrated:a,cache:i},Mu(b),e}function Hv(e){return e?(e=Hr,e):Hr}function Iv(e,i,a,o,m,b){m=Hv(m),o.context===null?o.context=m:o.pendingContext=m,o=Es(i),o.payload={element:a},b=b===void 0?null:b,b!==null&&(o.callback=b),a=ks(e,o,i),a!==null&&(Vt(a,e,i),ra(a,e,i))}function zv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Zh(e,i){zv(e,i),(e=e.alternate)&&zv(e,i)}function $v(e){if(e.tag===13||e.tag===31){var i=er(e,67108864);i!==null&&Vt(i,e,67108864),Zh(e,67108864)}}function qv(e){if(e.tag===13||e.tag===31){var i=ni();i=Gc(i);var a=er(e,i);a!==null&&Vt(a,e,i),Zh(e,i)}}var wl=!0;function Fw(e,i,a,o){var m=$.T;$.T=null;var b=Y.p;try{Y.p=2,ed(e,i,a,o)}finally{Y.p=b,$.T=m}}function Ww(e,i,a,o){var m=$.T;$.T=null;var b=Y.p;try{Y.p=8,ed(e,i,a,o)}finally{Y.p=b,$.T=m}}function ed(e,i,a,o){if(wl){var m=td(o);if(m===null)Ih(e,i,o,Sl,a),Wv(e,o);else if(Vw(m,e,i,a,o))o.stopPropagation();else if(Wv(e,o),i&4&&-1<Kw.indexOf(e)){for(;m!==null;){var b=Rr(m);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var O=Ys(b.pendingLanes);if(O!==0){var P=b;for(P.pendingLanes|=2,P.entangledLanes|=2;O;){var K=1<<31-Rt(O);P.entanglements[1]|=K,O&=~K}Ui(b),($e&6)===0&&(nl=fe()+500,ba(0))}}break;case 31:case 13:P=er(b,2),P!==null&&Vt(P,b,2),ol(),Zh(b,2)}if(b=td(o),b===null&&Ih(e,i,o,Sl,a),b===m)break;m=b}m!==null&&o.stopPropagation()}else Ih(e,i,o,null,a)}}function td(e){return e=su(e),id(e)}var Sl=null;function id(e){if(Sl=null,e=Ar(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===31){if(e=c(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Sl=e,null}function Fv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case qe:return 2;case tt:return 8;case Je:case Ci:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var sd=!1,Ps=null,Us=null,Hs=null,Aa=new Map,Ra=new Map,Is=[],Kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wv(e,i){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":Aa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(i.pointerId)}}function Ta(e,i,a,o,m,b){return e===null||e.nativeEvent!==b?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:b,targetContainers:[m]},i!==null&&(i=Rr(i),i!==null&&$v(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),e)}function Vw(e,i,a,o,m){switch(i){case"focusin":return Ps=Ta(Ps,e,i,a,o,m),!0;case"dragenter":return Us=Ta(Us,e,i,a,o,m),!0;case"mouseover":return Hs=Ta(Hs,e,i,a,o,m),!0;case"pointerover":var b=m.pointerId;return Aa.set(b,Ta(Aa.get(b)||null,e,i,a,o,m)),!0;case"gotpointercapture":return b=m.pointerId,Ra.set(b,Ta(Ra.get(b)||null,e,i,a,o,m)),!0}return!1}function Kv(e){var i=Ar(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,ap(e.priority,function(){qv(a)});return}}else if(i===31){if(i=c(a),i!==null){e.blockedOn=i,ap(e.priority,function(){qv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cl(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=td(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);iu=o,a.target.dispatchEvent(o),iu=null}else return i=Rr(a),i!==null&&$v(i),e.blockedOn=a,!1;i.shift()}return!0}function Vv(e,i,a){Cl(e)&&a.delete(i)}function Gw(){sd=!1,Ps!==null&&Cl(Ps)&&(Ps=null),Us!==null&&Cl(Us)&&(Us=null),Hs!==null&&Cl(Hs)&&(Hs=null),Aa.forEach(Vv),Ra.forEach(Vv)}function El(e,i){e.blockedOn===i&&(e.blockedOn=null,sd||(sd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Gw)))}var kl=null;function Gv(e){kl!==e&&(kl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){kl===e&&(kl=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],m=e[i+2];if(typeof o!="function"){if(id(o||a)===null)continue;break}var b=Rr(a);b!==null&&(e.splice(i,3),i-=3,th(b,{pending:!0,data:m,method:a.method,action:o},o,m))}}))}function un(e){function i(K){return El(K,e)}Ps!==null&&El(Ps,e),Us!==null&&El(Us,e),Hs!==null&&El(Hs,e),Aa.forEach(i),Ra.forEach(i);for(var a=0;a<Is.length;a++){var o=Is[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Is.length&&(a=Is[0],a.blockedOn===null);)Kv(a),a.blockedOn===null&&Is.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var m=a[o],b=a[o+1],O=m[zt]||null;if(typeof b=="function")O||Gv(a);else if(O){var P=null;if(b&&b.hasAttribute("formAction")){if(m=b,O=b[zt]||null)P=O.formAction;else if(id(m)!==null)continue}else P=O.action;typeof P=="function"?a[o+1]=P:(a.splice(o,3),o-=3),Gv(a)}}}function Yv(){function e(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(O){return m=O})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,m=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function rd(e){this._internalRoot=e}Al.prototype.render=rd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(n(409));var a=i.current,o=ni();Iv(a,o,e,i,null,null)},Al.prototype.unmount=rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Iv(e.current,2,null,e,null,null),ol(),i[kr]=null}};function Al(e){this._internalRoot=e}Al.prototype.unstable_scheduleHydration=function(e){if(e){var i=np();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Is.length&&i!==0&&i<Is[a].priority;a++);Is.splice(a,0,e),a===0&&Kv(e)}};var Xv=t.version;if(Xv!=="19.2.4")throw Error(n(527,Xv,"19.2.4"));Y.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=f(i),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Yw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{ki=Rl.inject(Yw),Et=Rl}catch{}}return ja.createRoot=function(e,i){if(!l(e))throw Error(n(299));var a=!1,o="",m=sg,b=rg,O=ng;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError)),i=Uv(e,1,!1,null,null,a,o,null,m,b,O,Yv),e[kr]=i.current,Hh(e),new rd(i)},ja.hydrateRoot=function(e,i,a){if(!l(e))throw Error(n(299));var o=!1,m="",b=sg,O=rg,P=ng,K=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(b=a.onUncaughtError),a.onCaughtError!==void 0&&(O=a.onCaughtError),a.onRecoverableError!==void 0&&(P=a.onRecoverableError),a.formState!==void 0&&(K=a.formState)),i=Uv(e,1,!0,i,a??null,o,m,K,b,O,P,Yv),i.context=Hv(null),a=i.current,o=ni(),o=Gc(o),m=Es(o),m.callback=null,ks(a,m,o),a=o,i.current.lanes=a,In(i,a),Ui(i),e[kr]=i.current,Hh(e),new Al(i)},ja.version="19.2.4",ja}var a_;function nS(){if(a_)return od.exports;a_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),od.exports=rS(),od.exports}var aS=nS();const oS=Oc(aS);var o_="popstate";function lS(s={}){function t(n,l){let{pathname:u,search:d,hash:c}=n.location;return Jd("",{pathname:u,search:d,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:Ga(l)}return uS(t,r,null,s)}function at(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Ni(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cS(){return Math.random().toString(36).substring(2,10)}function l_(s,t){return{usr:s.state,key:s.key,idx:t}}function Jd(s,t,r=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Dn(t):t,state:r,key:t&&t.key||n||cS()}}function Ga({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Dn(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function uS(s,t,r,n={}){let{window:l=document.defaultView,v5Compat:u=!1}=n,d=l.history,c="POP",h=null,f=x();f==null&&(f=0,d.replaceState({...d.state,idx:f},""));function x(){return(d.state||{idx:null}).idx}function g(){c="POP";let p=x(),_=p==null?null:p-f;f=p,h&&h({action:c,location:C.location,delta:_})}function S(p,_){c="PUSH";let v=Jd(C.location,p,_);f=x()+1;let y=l_(v,f),k=C.createHref(v);try{d.pushState(y,"",k)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;l.location.assign(k)}u&&h&&h({action:c,location:C.location,delta:1})}function A(p,_){c="REPLACE";let v=Jd(C.location,p,_);f=x();let y=l_(v,f),k=C.createHref(v);d.replaceState(y,"",k),u&&h&&h({action:c,location:C.location,delta:0})}function E(p){return hS(p)}let C={get action(){return c},get location(){return s(l,d)},listen(p){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(o_,g),h=p,()=>{l.removeEventListener(o_,g),h=null}},createHref(p){return t(l,p)},createURL:E,encodeLocation(p){let _=E(p);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:S,replace:A,go(p){return d.go(p)}};return C}function hS(s,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),at(r,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:Ga(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function I0(s,t,r="/"){return dS(s,t,r,!1)}function dS(s,t,r,n){let l=typeof t=="string"?Dn(t):t,u=ps(l.pathname||"/",r);if(u==null)return null;let d=z0(s);fS(d);let c=null;for(let h=0;c==null&&h<d.length;++h){let f=CS(u);c=wS(d[h],f,n)}return c}function z0(s,t=[],r=[],n="",l=!1){let u=(d,c,h=l,f)=>{let x={relativePath:f===void 0?d.path||"":f,caseSensitive:d.caseSensitive===!0,childrenIndex:c,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(n)&&h)return;at(x.relativePath.startsWith(n),`Absolute route path "${x.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(n.length)}let g=fs([n,x.relativePath]),S=r.concat(x);d.children&&d.children.length>0&&(at(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),z0(d.children,t,S,g,h)),!(d.path==null&&!d.index)&&t.push({path:g,score:bS(g,d.index),routesMeta:S})};return s.forEach((d,c)=>{if(d.path===""||!d.path?.includes("?"))u(d,c);else for(let h of $0(d.path))u(d,c,!0,h)}),t}function $0(s){let t=s.split("/");if(t.length===0)return[];let[r,...n]=t,l=r.endsWith("?"),u=r.replace(/\?$/,"");if(n.length===0)return l?[u,""]:[u];let d=$0(n.join("/")),c=[];return c.push(...d.map(h=>h===""?u:[u,h].join("/"))),l&&c.push(...d),c.map(h=>s.startsWith("/")&&h===""?"/":h)}function fS(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:xS(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var pS=/^:[\w-]+$/,mS=3,gS=2,vS=1,_S=10,yS=-2,c_=s=>s==="*";function bS(s,t){let r=s.split("/"),n=r.length;return r.some(c_)&&(n+=yS),t&&(n+=gS),r.filter(l=>!c_(l)).reduce((l,u)=>l+(pS.test(u)?mS:u===""?vS:_S),n)}function xS(s,t){return s.length===t.length&&s.slice(0,-1).every((n,l)=>n===t[l])?s[s.length-1]-t[t.length-1]:0}function wS(s,t,r=!1){let{routesMeta:n}=s,l={},u="/",d=[];for(let c=0;c<n.length;++c){let h=n[c],f=c===n.length-1,x=u==="/"?t:t.slice(u.length)||"/",g=cc({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},x),S=h.route;if(!g&&f&&r&&!n[n.length-1].route.index&&(g=cc({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},x)),!g)return null;Object.assign(l,g.params),d.push({params:l,pathname:fs([u,g.pathname]),pathnameBase:RS(fs([u,g.pathnameBase])),route:S}),g.pathnameBase!=="/"&&(u=fs([u,g.pathnameBase]))}return d}function cc(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,n]=SS(s.path,s.caseSensitive,s.end),l=t.match(r);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:n.reduce((f,{paramName:x,isOptional:g},S)=>{if(x==="*"){let E=c[S]||"";d=u.slice(0,u.length-E.length).replace(/(.)\/+$/,"$1")}const A=c[S];return g&&!A?f[x]=void 0:f[x]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:u,pathnameBase:d,pattern:s}}function SS(s,t=!1,r=!0){Ni(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,c,h)=>(n.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),n]}function CS(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ni(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function ps(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=s.charAt(r);return n&&n!=="/"?null:s.slice(r)||"/"}var ES=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function kS(s,t="/"){let{pathname:r,search:n="",hash:l=""}=typeof s=="string"?Dn(s):s,u;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?u=u_(r.substring(1),"/"):u=u_(r,t)):u=t,{pathname:u,search:TS(n),hash:OS(l)}}function u_(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function hd(s,t,r,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AS(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Rf(s){let t=AS(s);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Tf(s,t,r,n=!1){let l;typeof s=="string"?l=Dn(s):(l={...s},at(!l.pathname||!l.pathname.includes("?"),hd("?","pathname","search",l)),at(!l.pathname||!l.pathname.includes("#"),hd("#","pathname","hash",l)),at(!l.search||!l.search.includes("#"),hd("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,c;if(d==null)c=r;else{let g=t.length-1;if(!n&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),g-=1;l.pathname=S.join("/")}c=g>=0?t[g]:"/"}let h=kS(l,c),f=d&&d!=="/"&&d.endsWith("/"),x=(u||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(f||x)&&(h.pathname+="/"),h}var fs=s=>s.join("/").replace(/\/\/+/g,"/"),RS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),TS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,OS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,jS=class{constructor(s,t,r,n=!1){this.status=s,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function DS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function NS(s){return s.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var q0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function F0(s,t){let r=s;if(typeof r!="string"||!ES.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,l=!1;if(q0)try{let u=new URL(window.location.href),d=r.startsWith("//")?new URL(u.protocol+r):new URL(r),c=ps(d.pathname,t);d.origin===u.origin&&c!=null?r=c+d.search+d.hash:l=!0}catch{Ni(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:l,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var W0=["POST","PUT","PATCH","DELETE"];new Set(W0);var LS=["GET",...W0];new Set(LS);var Nn=q.createContext(null);Nn.displayName="DataRouter";var jc=q.createContext(null);jc.displayName="DataRouterState";var MS=q.createContext(!1),K0=q.createContext({isTransitioning:!1});K0.displayName="ViewTransition";var BS=q.createContext(new Map);BS.displayName="Fetchers";var PS=q.createContext(null);PS.displayName="Await";var oi=q.createContext(null);oi.displayName="Navigation";var so=q.createContext(null);so.displayName="Location";var qi=q.createContext({outlet:null,matches:[],isDataRoute:!1});qi.displayName="Route";var Of=q.createContext(null);Of.displayName="RouteError";var V0="REACT_ROUTER_ERROR",US="REDIRECT",HS="ROUTE_ERROR_RESPONSE";function IS(s){if(s.startsWith(`${V0}:${US}:{`))try{let t=JSON.parse(s.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function zS(s){if(s.startsWith(`${V0}:${HS}:{`))try{let t=JSON.parse(s.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new jS(t.status,t.statusText,t.data)}catch{}}function $S(s,{relative:t}={}){at(Ln(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=q.useContext(oi),{hash:l,pathname:u,search:d}=no(s,{relative:t}),c=u;return r!=="/"&&(c=u==="/"?r:fs([r,u])),n.createHref({pathname:c,search:d,hash:l})}function Ln(){return q.useContext(so)!=null}function Vs(){return at(Ln(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(so).location}var G0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Y0(s){q.useContext(oi).static||q.useLayoutEffect(s)}function ro(){let{isDataRoute:s}=q.useContext(qi);return s?t1():qS()}function qS(){at(Ln(),"useNavigate() may be used only in the context of a <Router> component.");let s=q.useContext(Nn),{basename:t,navigator:r}=q.useContext(oi),{matches:n}=q.useContext(qi),{pathname:l}=Vs(),u=JSON.stringify(Rf(n)),d=q.useRef(!1);return Y0(()=>{d.current=!0}),q.useCallback((h,f={})=>{if(Ni(d.current,G0),!d.current)return;if(typeof h=="number"){r.go(h);return}let x=Tf(h,JSON.parse(u),l,f.relative==="path");s==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:fs([t,x.pathname])),(f.replace?r.replace:r.push)(x,f.state,f)},[t,r,u,l,s])}q.createContext(null);function no(s,{relative:t}={}){let{matches:r}=q.useContext(qi),{pathname:n}=Vs(),l=JSON.stringify(Rf(r));return q.useMemo(()=>Tf(s,JSON.parse(l),n,t==="path"),[s,l,n,t])}function FS(s,t){return X0(s,t)}function X0(s,t,r,n,l){at(Ln(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=q.useContext(oi),{matches:d}=q.useContext(qi),c=d[d.length-1],h=c?c.params:{},f=c?c.pathname:"/",x=c?c.pathnameBase:"/",g=c&&c.route;{let v=g&&g.path||"";Q0(f,!g||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let S=Vs(),A;if(t){let v=typeof t=="string"?Dn(t):t;at(x==="/"||v.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${v.pathname}" was given in the \`location\` prop.`),A=v}else A=S;let E=A.pathname||"/",C=E;if(x!=="/"){let v=x.replace(/^\//,"").split("/");C="/"+E.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=I0(s,{pathname:C});Ni(g||p!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Ni(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=YS(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},h,v.params),pathname:fs([x,u.encodeLocation?u.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?x:fs([x,u.encodeLocation?u.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),d,r,n,l);return t&&_?q.createElement(so.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},_):_}function WS(){let s=e1(),t=DS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},u={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:u},"ErrorBoundary")," or"," ",q.createElement("code",{style:u},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),r?q.createElement("pre",{style:l},r):null,d)}var KS=q.createElement(WS,null),J0=class extends q.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.onError?this.props.onError(s,t):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const r=zS(s.digest);r&&(s=r)}let t=s!==void 0?q.createElement(qi.Provider,{value:this.props.routeContext},q.createElement(Of.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?q.createElement(VS,{error:s},t):t}};J0.contextType=MS;var dd=new WeakMap;function VS({children:s,error:t}){let{basename:r}=q.useContext(oi);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=IS(t.digest);if(n){let l=dd.get(t);if(l)throw l;let u=F0(n.location,r);if(q0&&!dd.get(t))if(u.isExternal||n.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:n.replace}));throw dd.set(t,d),d}return q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function GS({routeContext:s,match:t,children:r}){let n=q.useContext(Nn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(qi.Provider,{value:s},r)}function YS(s,t=[],r=null,n=null,l=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let u=s,d=r?.errors;if(d!=null){let x=u.findIndex(g=>g.route.id&&d?.[g.route.id]!==void 0);at(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let c=!1,h=-1;if(r)for(let x=0;x<u.length;x++){let g=u[x];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=x),g.route.id){let{loaderData:S,errors:A}=r,E=g.route.loader&&!S.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||E){c=!0,h>=0?u=u.slice(0,h+1):u=[u[0]];break}}}let f=r&&n?(x,g)=>{n(x,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:NS(r.matches),errorInfo:g})}:void 0;return u.reduceRight((x,g,S)=>{let A,E=!1,C=null,p=null;r&&(A=d&&g.route.id?d[g.route.id]:void 0,C=g.route.errorElement||KS,c&&(h<0&&S===0?(Q0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,p=null):h===S&&(E=!0,p=g.route.hydrateFallbackElement||null)));let _=t.concat(u.slice(0,S+1)),v=()=>{let y;return A?y=C:E?y=p:g.route.Component?y=q.createElement(g.route.Component,null):g.route.element?y=g.route.element:y=x,q.createElement(GS,{match:g,routeContext:{outlet:x,matches:_,isDataRoute:r!=null},children:y})};return r&&(g.route.ErrorBoundary||g.route.errorElement||S===0)?q.createElement(J0,{location:r.location,revalidation:r.revalidation,component:C,error:A,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:f}):v()},null)}function jf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XS(s){let t=q.useContext(Nn);return at(t,jf(s)),t}function JS(s){let t=q.useContext(jc);return at(t,jf(s)),t}function QS(s){let t=q.useContext(qi);return at(t,jf(s)),t}function Df(s){let t=QS(s),r=t.matches[t.matches.length-1];return at(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function ZS(){return Df("useRouteId")}function e1(){let s=q.useContext(Of),t=JS("useRouteError"),r=Df("useRouteError");return s!==void 0?s:t.errors?.[r]}function t1(){let{router:s}=XS("useNavigate"),t=Df("useNavigate"),r=q.useRef(!1);return Y0(()=>{r.current=!0}),q.useCallback(async(l,u={})=>{Ni(r.current,G0),r.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:t,...u}))},[s,t])}var h_={};function Q0(s,t,r){!t&&!h_[s]&&(h_[s]=!0,Ni(!1,r))}q.memo(i1);function i1({routes:s,future:t,state:r,onError:n}){return X0(s,void 0,r,n,t)}function d_({to:s,replace:t,state:r,relative:n}){at(Ln(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=q.useContext(oi);Ni(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=q.useContext(qi),{pathname:d}=Vs(),c=ro(),h=Tf(s,Rf(u),d,n==="path"),f=JSON.stringify(h);return q.useEffect(()=>{c(JSON.parse(f),{replace:t,state:r,relative:n})},[c,f,n,t,r]),null}function mr(s){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function s1({basename:s="/",children:t=null,location:r,navigationType:n="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){at(!Ln(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),h=q.useMemo(()=>({basename:c,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[c,l,u,d]);typeof r=="string"&&(r=Dn(r));let{pathname:f="/",search:x="",hash:g="",state:S=null,key:A="default"}=r,E=q.useMemo(()=>{let C=ps(f,c);return C==null?null:{location:{pathname:C,search:x,hash:g,state:S,key:A},navigationType:n}},[c,f,x,g,S,A,n]);return Ni(E!=null,`<Router basename="${c}"> is not able to match the URL "${f}${x}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:q.createElement(oi.Provider,{value:h},q.createElement(so.Provider,{children:t,value:E}))}function r1({children:s,location:t}){return FS(Qd(s),t)}function Qd(s,t=[]){let r=[];return q.Children.forEach(s,(n,l)=>{if(!q.isValidElement(n))return;let u=[...t,l];if(n.type===q.Fragment){r.push.apply(r,Qd(n.props.children,u));return}at(n.type===mr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!n.props.index||!n.props.children,"An index route cannot have child routes.");let d={id:n.props.id||u.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(d.children=Qd(n.props.children,u)),r.push(d)}),r}var ic="get",sc="application/x-www-form-urlencoded";function Dc(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function n1(s){return Dc(s)&&s.tagName.toLowerCase()==="button"}function a1(s){return Dc(s)&&s.tagName.toLowerCase()==="form"}function o1(s){return Dc(s)&&s.tagName.toLowerCase()==="input"}function l1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function c1(s,t){return s.button===0&&(!t||t==="_self")&&!l1(s)}var Tl=null;function u1(){if(Tl===null)try{new FormData(document.createElement("form"),0),Tl=!1}catch{Tl=!0}return Tl}var h1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fd(s){return s!=null&&!h1.has(s)?(Ni(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sc}"`),null):s}function d1(s,t){let r,n,l,u,d;if(a1(s)){let c=s.getAttribute("action");n=c?ps(c,t):null,r=s.getAttribute("method")||ic,l=fd(s.getAttribute("enctype"))||sc,u=new FormData(s)}else if(n1(s)||o1(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=s.getAttribute("formaction")||c.getAttribute("action");if(n=h?ps(h,t):null,r=s.getAttribute("formmethod")||c.getAttribute("method")||ic,l=fd(s.getAttribute("formenctype"))||fd(c.getAttribute("enctype"))||sc,u=new FormData(c,s),!u1()){let{name:f,type:x,value:g}=s;if(x==="image"){let S=f?`${f}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else f&&u.append(f,g)}}else{if(Dc(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ic,n=null,l=sc,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:n,method:r.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nf(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function f1(s,t,r,n){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${n}`:l.pathname=`${l.pathname}.${n}`:l.pathname==="/"?l.pathname=`_root.${n}`:t&&ps(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${n}`,l}async function p1(s,t){if(s.id in t)return t[s.id];try{let r=await import(s.module);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function m1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function g1(s,t,r){let n=await Promise.all(s.map(async l=>{let u=t.routes[l.route.id];if(u){let d=await p1(u,r);return d.links?d.links():[]}return[]}));return b1(n.flat(1).filter(m1).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function f_(s,t,r,n,l,u){let d=(h,f)=>r[f]?h.route.id!==r[f].route.id:!0,c=(h,f)=>r[f].pathname!==h.pathname||r[f].route.path?.endsWith("*")&&r[f].params["*"]!==h.params["*"];return u==="assets"?t.filter((h,f)=>d(h,f)||c(h,f)):u==="data"?t.filter((h,f)=>{let x=n.routes[h.route.id];if(!x||!x.hasLoader)return!1;if(d(h,f)||c(h,f))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function v1(s,t,{includeHydrateFallback:r}={}){return _1(s.map(n=>{let l=t.routes[n.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function _1(s){return[...new Set(s)]}function y1(s){let t={},r=Object.keys(s).sort();for(let n of r)t[n]=s[n];return t}function b1(s,t){let r=new Set;return new Set(t),s.reduce((n,l)=>{let u=JSON.stringify(y1(l));return r.has(u)||(r.add(u),n.push({key:u,link:l})),n},[])}function Z0(){let s=q.useContext(Nn);return Nf(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function x1(){let s=q.useContext(jc);return Nf(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Lf=q.createContext(void 0);Lf.displayName="FrameworkContext";function ey(){let s=q.useContext(Lf);return Nf(s,"You must render this element inside a <HydratedRouter> element"),s}function w1(s,t){let r=q.useContext(Lf),[n,l]=q.useState(!1),[u,d]=q.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:f,onMouseLeave:x,onTouchStart:g}=t,S=q.useRef(null);q.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let C=_=>{_.forEach(v=>{d(v.isIntersecting)})},p=new IntersectionObserver(C,{threshold:.5});return S.current&&p.observe(S.current),()=>{p.disconnect()}}},[s]),q.useEffect(()=>{if(n){let C=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(C)}}},[n]);let A=()=>{l(!0)},E=()=>{l(!1),d(!1)};return r?s!=="intent"?[u,S,{}]:[u,S,{onFocus:Da(c,A),onBlur:Da(h,E),onMouseEnter:Da(f,A),onMouseLeave:Da(x,E),onTouchStart:Da(g,A)}]:[!1,S,{}]}function Da(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function S1({page:s,...t}){let{router:r}=Z0(),n=q.useMemo(()=>I0(r.routes,s,r.basename),[r.routes,s,r.basename]);return n?q.createElement(E1,{page:s,matches:n,...t}):null}function C1(s){let{manifest:t,routeModules:r}=ey(),[n,l]=q.useState([]);return q.useEffect(()=>{let u=!1;return g1(s,t,r).then(d=>{u||l(d)}),()=>{u=!0}},[s,t,r]),n}function E1({page:s,matches:t,...r}){let n=Vs(),{future:l,manifest:u,routeModules:d}=ey(),{basename:c}=Z0(),{loaderData:h,matches:f}=x1(),x=q.useMemo(()=>f_(s,t,f,u,n,"data"),[s,t,f,u,n]),g=q.useMemo(()=>f_(s,t,f,u,n,"assets"),[s,t,f,u,n]),S=q.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let C=new Set,p=!1;if(t.forEach(v=>{let y=u.routes[v.route.id];!y||!y.hasLoader||(!x.some(k=>k.route.id===v.route.id)&&v.route.id in h&&d[v.route.id]?.shouldRevalidate||y.hasClientLoader?p=!0:C.add(v.route.id))}),C.size===0)return[];let _=f1(s,c,l.unstable_trailingSlashAwareDataRequests,"data");return p&&C.size>0&&_.searchParams.set("_routes",t.filter(v=>C.has(v.route.id)).map(v=>v.route.id).join(",")),[_.pathname+_.search]},[c,l.unstable_trailingSlashAwareDataRequests,h,n,u,x,t,s,d]),A=q.useMemo(()=>v1(g,u),[g,u]),E=C1(g);return q.createElement(q.Fragment,null,S.map(C=>q.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...r})),A.map(C=>q.createElement("link",{key:C,rel:"modulepreload",href:C,...r})),E.map(({key:C,link:p})=>q.createElement("link",{key:C,nonce:r.nonce,...p,crossOrigin:p.crossOrigin??r.crossOrigin})))}function k1(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var A1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A1&&(window.__reactRouterVersion="7.13.0")}catch{}function R1({basename:s,children:t,unstable_useTransitions:r,window:n}){let l=q.useRef();l.current==null&&(l.current=lS({window:n,v5Compat:!0}));let u=l.current,[d,c]=q.useState({action:u.action,location:u.location}),h=q.useCallback(f=>{r===!1?c(f):q.startTransition(()=>c(f))},[r]);return q.useLayoutEffect(()=>u.listen(h),[u,h]),q.createElement(s1,{basename:s,children:t,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:r})}var ty=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iy=q.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:l,reloadDocument:u,replace:d,state:c,target:h,to:f,preventScrollReset:x,viewTransition:g,unstable_defaultShouldRevalidate:S,...A},E){let{basename:C,unstable_useTransitions:p}=q.useContext(oi),_=typeof f=="string"&&ty.test(f),v=F0(f,C);f=v.to;let y=$S(f,{relative:l}),[k,T,j]=w1(n,A),D=D1(f,{replace:d,state:c,target:h,preventScrollReset:x,relative:l,viewTransition:g,unstable_defaultShouldRevalidate:S,unstable_useTransitions:p});function R(U){t&&t(U),U.defaultPrevented||D(U)}let N=q.createElement("a",{...A,...j,href:v.absoluteURL||y,onClick:v.isExternal||u?t:R,ref:k1(E,T),target:h,"data-discover":!_&&r==="render"?"true":void 0});return k&&!_?q.createElement(q.Fragment,null,N,q.createElement(S1,{page:y})):N});iy.displayName="Link";var T1=q.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:l=!1,style:u,to:d,viewTransition:c,children:h,...f},x){let g=no(d,{relative:f.relative}),S=Vs(),A=q.useContext(jc),{navigator:E,basename:C}=q.useContext(oi),p=A!=null&&P1(g)&&c===!0,_=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,v=S.pathname,y=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;r||(v=v.toLowerCase(),y=y?y.toLowerCase():null,_=_.toLowerCase()),y&&C&&(y=ps(y,C)||y);const k=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=v===_||!l&&v.startsWith(_)&&v.charAt(k)==="/",j=y!=null&&(y===_||!l&&y.startsWith(_)&&y.charAt(_.length)==="/"),D={isActive:T,isPending:j,isTransitioning:p},R=T?t:void 0,N;typeof n=="function"?N=n(D):N=[n,T?"active":null,j?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let U=typeof u=="function"?u(D):u;return q.createElement(iy,{...f,"aria-current":R,className:N,ref:x,style:U,to:d,viewTransition:c},typeof h=="function"?h(D):h)});T1.displayName="NavLink";var O1=q.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:l,state:u,method:d=ic,action:c,onSubmit:h,relative:f,preventScrollReset:x,viewTransition:g,unstable_defaultShouldRevalidate:S,...A},E)=>{let{unstable_useTransitions:C}=q.useContext(oi),p=M1(),_=B1(c,{relative:f}),v=d.toLowerCase()==="get"?"get":"post",y=typeof c=="string"&&ty.test(c),k=T=>{if(h&&h(T),T.defaultPrevented)return;T.preventDefault();let j=T.nativeEvent.submitter,D=j?.getAttribute("formmethod")||d,R=()=>p(j||T.currentTarget,{fetcherKey:t,method:D,navigate:r,replace:l,state:u,relative:f,preventScrollReset:x,viewTransition:g,unstable_defaultShouldRevalidate:S});C&&r!==!1?q.startTransition(()=>R()):R()};return q.createElement("form",{ref:E,method:v,action:_,onSubmit:n?h:k,...A,"data-discover":!y&&s==="render"?"true":void 0})});O1.displayName="Form";function j1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sy(s){let t=q.useContext(Nn);return at(t,j1(s)),t}function D1(s,{target:t,replace:r,state:n,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:c,unstable_useTransitions:h}={}){let f=ro(),x=Vs(),g=no(s,{relative:u});return q.useCallback(S=>{if(c1(S,t)){S.preventDefault();let A=r!==void 0?r:Ga(x)===Ga(g),E=()=>f(s,{replace:A,state:n,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:c});h?q.startTransition(()=>E()):E()}},[x,f,g,r,n,t,s,l,u,d,c,h])}var N1=0,L1=()=>`__${String(++N1)}__`;function M1(){let{router:s}=sy("useSubmit"),{basename:t}=q.useContext(oi),r=ZS(),n=s.fetch,l=s.navigate;return q.useCallback(async(u,d={})=>{let{action:c,method:h,encType:f,formData:x,body:g}=d1(u,t);if(d.navigate===!1){let S=d.fetcherKey||L1();await n(S,r,d.action||c,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:g,formMethod:d.method||h,formEncType:d.encType||f,flushSync:d.flushSync})}else await l(d.action||c,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:g,formMethod:d.method||h,formEncType:d.encType||f,replace:d.replace,state:d.state,fromRouteId:r,flushSync:d.flushSync,viewTransition:d.viewTransition})},[n,l,t,r])}function B1(s,{relative:t}={}){let{basename:r}=q.useContext(oi),n=q.useContext(qi);at(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),u={...no(s||".",{relative:t})},d=Vs();if(s==null){u.search=d.search;let c=new URLSearchParams(u.search),h=c.getAll("index");if(h.some(x=>x==="")){c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let x=c.toString();u.search=x?`?${x}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:fs([r,u.pathname])),Ga(u)}function P1(s,{relative:t}={}){let r=q.useContext(K0);at(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=sy("useViewTransitionState"),l=no(s,{relative:t});if(!r.isTransitioning)return!1;let u=ps(r.currentLocation.pathname,n)||r.currentLocation.pathname,d=ps(r.nextLocation.pathname,n)||r.nextLocation.pathname;return cc(l.pathname,d)!=null||cc(l.pathname,u)!=null}function Nc(s,t){var r={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(s);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(s,n[l])&&(r[n[l]]=s[n[l]]);return r}function Gs(s,t,r,n){function l(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function c(x){try{f(n.next(x))}catch(g){d(g)}}function h(x){try{f(n.throw(x))}catch(g){d(g)}}function f(x){x.done?u(x.value):l(x.value).then(c,h)}f((n=n.apply(s,t||[])).next())})}const U1=s=>s?(...t)=>s(...t):(...t)=>fetch(...t);class Mf extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class H1 extends Mf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class p_ extends Mf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class m_ extends Mf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Zd;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Zd||(Zd={}));class I1{constructor(t,{headers:r={},customFetch:n,region:l=Zd.Any}={}){this.url=t,this.headers=r,this.region=l,this.fetch=U1(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Gs(this,arguments,void 0,function*(r,n={}){var l;let u,d;try{const{headers:c,method:h,body:f,signal:x,timeout:g}=n;let S={},{region:A}=n;A||(A=this.region);const E=new URL(`${this.url}/${r}`);A&&A!=="any"&&(S["x-region"]=A,E.searchParams.set("forceFunctionRegion",A));let C;f&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",C=f):typeof f=="string"?(S["Content-Type"]="text/plain",C=f):typeof FormData<"u"&&f instanceof FormData?C=f:(S["Content-Type"]="application/json",C=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?C=JSON.stringify(f):C=f;let p=x;g&&(d=new AbortController,u=setTimeout(()=>d.abort(),g),x?(p=d.signal,x.addEventListener("abort",()=>d.abort())):p=d.signal);const _=yield this.fetch(E.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),c),body:C,signal:p}).catch(T=>{throw new H1(T)}),v=_.headers.get("x-relay-error");if(v&&v==="true")throw new p_(_);if(!_.ok)throw new m_(_);let y=((l=_.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),k;return y==="application/json"?k=yield _.json():y==="application/octet-stream"||y==="application/pdf"?k=yield _.blob():y==="text/event-stream"?k=_:y==="multipart/form-data"?k=yield _.formData():k=yield _.text(),{data:k,error:null,response:_}}catch(c){return{data:null,error:c,response:c instanceof m_||c instanceof p_?c.context:void 0}}finally{u&&clearTimeout(u)}})}}var z1=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},$1=class{constructor(s){var t,r;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(t=s.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,t){return this.headers=new Headers(this.headers),this.headers.set(s,t),this}then(s,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let l=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let d=null,c=null,h=null,f=u.status,x=u.statusText;if(u.ok){var g,S;if(r.method!=="HEAD"){var A;const _=await u.text();_===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((A=r.headers.get("Accept"))===null||A===void 0)&&A.includes("application/vnd.pgrst.plan+text"))?c=_:c=JSON.parse(_))}const C=(g=r.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),p=(S=u.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");C&&p&&p.length>1&&(h=parseInt(p[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(c)&&(c.length>1?(d={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,f=406,x="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var E;const C=await u.text();try{d=JSON.parse(C),Array.isArray(d)&&u.status===404&&(c=[],d=null,f=200,x="OK")}catch{u.status===404&&C===""?(f=204,x="No Content"):d={message:C}}if(d&&r.isMaybeSingle&&(!(d==null||(E=d.details)===null||E===void 0)&&E.includes("0 rows"))&&(d=null,f=200,x="OK"),d&&r.shouldThrowOnError)throw new z1(d)}return{error:d,data:c,count:h,status:f,statusText:x}});return this.shouldThrowOnError||(l=l.catch(u=>{var d;let c="";const h=u?.cause;if(h){var f,x,g,S;const E=(f=h?.message)!==null&&f!==void 0?f:"",C=(x=h?.code)!==null&&x!==void 0?x:"";c=`${(g=u?.name)!==null&&g!==void 0?g:"FetchError"}: ${u?.message}`,c+=`

Caused by: ${(S=h?.name)!==null&&S!==void 0?S:"Error"}: ${E}`,C&&(c+=` (${C})`),h?.stack&&(c+=`
${h.stack}`)}else{var A;c=(A=u?.stack)!==null&&A!==void 0?A:""}return{error:{message:`${(d=u?.name)!==null&&d!==void 0?d:"FetchError"}: ${u?.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,t)}returns(){return this}overrideTypes(){return this}},q1=class extends $1{select(s){let t=!1;const r=(s??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:l=n}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${s}`),this}range(s,t,{foreignTable:r,referencedTable:n=r}={}){const l=typeof n>"u"?"offset":`${n}.offset`,u=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${t-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:l=!1,format:u="text"}={}){var d;const c=[s?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${c};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const g_=new RegExp("[,()]");var xn=class extends q1{eq(s,t){return this.url.searchParams.append(s,`eq.${t}`),this}neq(s,t){return this.url.searchParams.append(s,`neq.${t}`),this}gt(s,t){return this.url.searchParams.append(s,`gt.${t}`),this}gte(s,t){return this.url.searchParams.append(s,`gte.${t}`),this}lt(s,t){return this.url.searchParams.append(s,`lt.${t}`),this}lte(s,t){return this.url.searchParams.append(s,`lte.${t}`),this}like(s,t){return this.url.searchParams.append(s,`like.${t}`),this}likeAllOf(s,t){return this.url.searchParams.append(s,`like(all).{${t.join(",")}}`),this}likeAnyOf(s,t){return this.url.searchParams.append(s,`like(any).{${t.join(",")}}`),this}ilike(s,t){return this.url.searchParams.append(s,`ilike.${t}`),this}ilikeAllOf(s,t){return this.url.searchParams.append(s,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(s,t){return this.url.searchParams.append(s,`ilike(any).{${t.join(",")}}`),this}regexMatch(s,t){return this.url.searchParams.append(s,`match.${t}`),this}regexIMatch(s,t){return this.url.searchParams.append(s,`imatch.${t}`),this}is(s,t){return this.url.searchParams.append(s,`is.${t}`),this}isDistinct(s,t){return this.url.searchParams.append(s,`isdistinct.${t}`),this}in(s,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&g_.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&g_.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cs.{${t.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(t)}`),this}containedBy(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cd.{${t.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(t)}`),this}rangeGt(s,t){return this.url.searchParams.append(s,`sr.${t}`),this}rangeGte(s,t){return this.url.searchParams.append(s,`nxl.${t}`),this}rangeLt(s,t){return this.url.searchParams.append(s,`sl.${t}`),this}rangeLte(s,t){return this.url.searchParams.append(s,`nxr.${t}`),this}rangeAdjacent(s,t){return this.url.searchParams.append(s,`adj.${t}`),this}overlaps(s,t){return typeof t=="string"?this.url.searchParams.append(s,`ov.${t}`):this.url.searchParams.append(s,`ov.{${t.join(",")}}`),this}textSearch(s,t,{config:r,type:n}={}){let l="";n==="plain"?l="pl":n==="phrase"?l="ph":n==="websearch"&&(l="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${l}fts${u}.${t}`),this}match(s){return Object.entries(s).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(s,t,r){return this.url.searchParams.append(s,`not.${t}.${r}`),this}or(s,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${s})`),this}filter(s,t,r){return this.url.searchParams.append(s,`${t}.${r}`),this}},F1=class{constructor(s,{headers:t={},schema:r,fetch:n}){this.url=s,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,t){const{head:r=!1,count:n}=t??{},l=r?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join(""),{url:c,headers:h}=this.cloneRequestState();return c.searchParams.set("select",d),n&&h.append("Prefer",`count=${n}`),new xn({method:l,url:c,headers:h,schema:this.schema,fetch:this.fetch})}insert(s,{count:t,defaultToNull:r=!0}={}){var n;const l="POST",{url:u,headers:d}=this.cloneRequestState();if(t&&d.append("Prefer",`count=${t}`),r||d.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(c.length>0){const h=[...new Set(c)].map(f=>`"${f}"`);u.searchParams.set("columns",h.join(","))}}return new xn({method:l,url:u,headers:d,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(s,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:l=!0}={}){var u;const d="POST",{url:c,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&c.searchParams.set("on_conflict",t),n&&h.append("Prefer",`count=${n}`),l||h.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((x,g)=>x.concat(Object.keys(g)),[]);if(f.length>0){const x=[...new Set(f)].map(g=>`"${g}"`);c.searchParams.set("columns",x.join(","))}}return new xn({method:d,url:c,headers:h,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:t}={}){var r;const n="PATCH",{url:l,headers:u}=this.cloneRequestState();return t&&u.append("Prefer",`count=${t}`),new xn({method:n,url:l,headers:u,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:s}={}){var t;const r="DELETE",{url:n,headers:l}=this.cloneRequestState();return s&&l.append("Prefer",`count=${s}`),new xn({method:r,url:n,headers:l,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},W1=class ry{constructor(t,{headers:r={},schema:n,fetch:l}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new F1(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ry(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:l=!1,count:u}={}){var d;let c;const h=new URL(`${this.url}/rpc/${t}`);let f;const x=A=>A!==null&&typeof A=="object"&&(!Array.isArray(A)||A.some(x)),g=n&&Object.values(r).some(x);g?(c="POST",f=r):n||l?(c=n?"HEAD":"GET",Object.entries(r).filter(([A,E])=>E!==void 0).map(([A,E])=>[A,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([A,E])=>{h.searchParams.append(A,E)})):(c="POST",f=r);const S=new Headers(this.headers);return g?S.set("Prefer",u?`count=${u},return=minimal`:"return=minimal"):u&&S.set("Prefer",`count=${u}`),new xn({method:c,url:h,headers:S,schema:this.schemaName,body:f,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class K1{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const l=n.node,u=parseInt(l.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const V1="2.93.1",G1=`realtime-js/${V1}`,Y1="1.0.0",ny="2.0.0",v_=ny,ef=1e4,X1=1e3,J1=100;var Fs;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Fs||(Fs={}));var wt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(wt||(wt={}));var ji;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ji||(ji={}));var tf;(function(s){s.websocket="websocket"})(tf||(tf={}));var vr;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(vr||(vr={}));class Q1{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const l=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(t){var r,n;const l=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},d=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(t,r,n){var l,u;const d=t.topic,c=(l=t.ref)!==null&&l!==void 0?l:"",h=(u=t.join_ref)!==null&&u!==void 0?u:"",f=t.payload.event,x=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},g=Object.keys(x).length===0?"":JSON.stringify(x);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+c.length+d.length+f.length+g.length,A=new ArrayBuffer(this.HEADER_LENGTH+S);let E=new DataView(A),C=0;E.setUint8(C++,this.KINDS.userBroadcastPush),E.setUint8(C++,h.length),E.setUint8(C++,c.length),E.setUint8(C++,d.length),E.setUint8(C++,f.length),E.setUint8(C++,g.length),E.setUint8(C++,r),Array.from(h,_=>E.setUint8(C++,_.charCodeAt(0))),Array.from(c,_=>E.setUint8(C++,_.charCodeAt(0))),Array.from(d,_=>E.setUint8(C++,_.charCodeAt(0))),Array.from(f,_=>E.setUint8(C++,_.charCodeAt(0))),Array.from(g,_=>E.setUint8(C++,_.charCodeAt(0)));var p=new Uint8Array(A.byteLength+n.byteLength);return p.set(new Uint8Array(A),0),p.set(new Uint8Array(n),A.byteLength),p.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[l,u,d,c,h]=n;return r({join_ref:l,ref:u,topic:d,event:c,payload:h})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),l=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,r,l)}_decodeUserBroadcast(t,r,n){const l=r.getUint8(1),u=r.getUint8(2),d=r.getUint8(3),c=r.getUint8(4);let h=this.HEADER_LENGTH+4;const f=n.decode(t.slice(h,h+l));h=h+l;const x=n.decode(t.slice(h,h+u));h=h+u;const g=n.decode(t.slice(h,h+d));h=h+d;const S=t.slice(h,t.byteLength),A=c===this.JSON_ENCODING?JSON.parse(n.decode(S)):S,E={type:this.BROADCAST_EVENT,event:x,payload:A};return d>0&&(E.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class ay{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(et||(et={}));const __=(s,t,r={})=>{var n;const l=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((u,d)=>(u[d]=Z1(d,s,t,l),u),{}):{}},Z1=(s,t,r,n)=>{const l=t.find(c=>c.name===s),u=l?.type,d=r[s];return u&&!n.includes(u)?oy(u,d):sf(d)},oy=(s,t)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return sC(t,r)}switch(s){case et.bool:return eC(t);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return tC(t);case et.json:case et.jsonb:return iC(t);case et.timestamp:return rC(t);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return sf(t);default:return sf(t)}},sf=s=>s,eC=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},tC=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},iC=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},sC=(s,t)=>{if(typeof s!="string")return s;const r=s.length-1,n=s[r];if(s[0]==="{"&&n==="}"){let u;const d=s.slice(1,r);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(c=>oy(t,c))}return s},rC=s=>typeof s=="string"?s.replace(" ","T"):s,ly=s=>{const t=new URL(s);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class pd{constructor(t,r,n={},l=ef){this.channel=t,this.event=r,this.payload=n,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var y_;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(y_||(y_={}));class Fa{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},l=>{const{onJoin:u,onLeave:d,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fa.syncState(this.state,l,u,d),this.pendingDiffs.forEach(h=>{this.state=Fa.syncDiff(this.state,h,u,d)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},l=>{const{onJoin:u,onLeave:d,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Fa.syncDiff(this.state,l,u,d),c())}),this.onJoin((l,u,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:d})}),this.onLeave((l,u,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,l){const u=this.cloneDeep(t),d=this.transformState(r),c={},h={};return this.map(u,(f,x)=>{d[f]||(h[f]=x)}),this.map(d,(f,x)=>{const g=u[f];if(g){const S=x.map(p=>p.presence_ref),A=g.map(p=>p.presence_ref),E=x.filter(p=>A.indexOf(p.presence_ref)<0),C=g.filter(p=>S.indexOf(p.presence_ref)<0);E.length>0&&(c[f]=E),C.length>0&&(h[f]=C)}else c[f]=x}),this.syncDiff(u,{joins:c,leaves:h},n,l)}static syncDiff(t,r,n,l){const{joins:u,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),l||(l=()=>{}),this.map(u,(c,h)=>{var f;const x=(f=t[c])!==null&&f!==void 0?f:[];if(t[c]=this.cloneDeep(h),x.length>0){const g=t[c].map(A=>A.presence_ref),S=x.filter(A=>g.indexOf(A.presence_ref)<0);t[c].unshift(...S)}n(c,x,h)}),this.map(d,(c,h)=>{let f=t[c];if(!f)return;const x=h.map(g=>g.presence_ref);f=f.filter(g=>x.indexOf(g.presence_ref)<0),t[c]=f,l(c,f,h),f.length===0&&delete t[c]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const l=t[n];return"metas"in l?r[n]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[n]=l,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var b_;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(b_||(b_={}));var Wa;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Wa||(Wa={}));var hs;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(hs||(hs={}));class kn{constructor(t,r={config:{}},n){var l,u;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new pd(this,ji.join,this.params,this.timeout),this.rejoinTimer=new ay(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ji.reply,{},(d,c)=>{this._trigger(this._replyEventName(c),d)}),this.presence=new Fa(this),this.broadcastEndpointURL=ly(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:d,presence:c,private:h}}=this.params,f=(l=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(A=>A.filter))!==null&&l!==void 0?l:[],x=!!this.bindings[Wa.PRESENCE]&&this.bindings[Wa.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,g={},S={broadcast:d,presence:Object.assign(Object.assign({},c),{enabled:x}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(A=>t?.(hs.CHANNEL_ERROR,A)),this._onClose(()=>t?.(hs.CLOSED)),this.updateJoinPayload(Object.assign({config:S},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:A})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),A===void 0){t?.(hs.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,p=(E=C?.length)!==null&&E!==void 0?E:0,_=[];for(let v=0;v<p;v++){const y=C[v],{filter:{event:k,schema:T,table:j,filter:D}}=y,R=A&&A[v];if(R&&R.event===k&&kn.isFilterValueEqual(R.schema,T)&&kn.isFilterValueEqual(R.table,j)&&kn.isFilterValueEqual(R.filter,D))_.push(Object.assign(Object.assign({},y),{id:R.id}));else{this.unsubscribe(),this.state=wt.errored,t?.(hs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(hs.SUBSCRIBED);return}}).receive("error",A=>{this.state=wt.errored,t?.(hs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{t?.(hs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===wt.joined&&t===Wa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var l;if(r==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(l=n.timeout)!==null&&l!==void 0?l:this.timeout);if(c.status===202)return{success:!0};let h=c.statusText;try{const f=await c.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(t,r={}){var n,l;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=t,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((l=f.body)===null||l===void 0?void 0:l.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,c,h;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(c=(d=this.params)===null||d===void 0?void 0:d.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&u("ok"),f.receive("ok",()=>u("ok")),f.receive("error",()=>u("error")),f.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=wt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ji.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(l=>{n=new pd(this,ji.leave,{},t),n.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const l=new AbortController,u=setTimeout(()=>l.abort(),n),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(u),d}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new pd(this,t,r,n);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>J1){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var l,u;const d=t.toLocaleLowerCase(),{close:c,error:h,leave:f,join:x}=ji;if(n&&[c,h,f,x].indexOf(d)>=0&&n!==this._joinRef())return;let S=this._onMessage(d,r,n);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(A=>{var E,C,p;return((E=A.filter)===null||E===void 0?void 0:E.event)==="*"||((p=(C=A.filter)===null||C===void 0?void 0:C.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===d}).map(A=>A.callback(S,n)):(u=this.bindings[d])===null||u===void 0||u.filter(A=>{var E,C,p,_,v,y;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in A){const k=A.id,T=(E=A.filter)===null||E===void 0?void 0:E.event;return k&&((C=r.ids)===null||C===void 0?void 0:C.includes(k))&&(T==="*"||T?.toLocaleLowerCase()===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const k=(v=(_=A?.filter)===null||_===void 0?void 0:_.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return k==="*"||k===((y=r?.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===d}).map(A=>{if(typeof S=="object"&&"ids"in S){const E=S.data,{schema:C,table:p,commit_timestamp:_,type:v,errors:y}=E;S=Object.assign(Object.assign({},{schema:C,table:p,commit_timestamp:_,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(E))}A.callback(S,n)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const l=t.toLocaleLowerCase(),u={type:l,filter:r,callback:n};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===n&&kn.isEqual(l.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ji.close,{},t)}_onError(t){this._on(ji.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=__(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=__(t.columns,t.old_record)),r}}const md=()=>{},Ol={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nC=[1e3,2e3,5e3,1e4],aC=1e4,oC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lC{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ef,this.transport=null,this.heartbeatIntervalMs=Ol.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=md,this.ref=0,this.reconnectTimer=null,this.vsn=v_,this.logger=md,this.conn=null,this.sendBuffer=[],this.serializer=new Q1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...u)=>l(...u):(...u)=>fetch(...u),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${tf.websocket}`,this.httpEndpoint=ly(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=K1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Fs.connecting:return vr.Connecting;case Fs.open:return vr.Open;case Fs.closing:return vr.Closing;default:return vr.Closed}}isConnected(){return this.connectionState()===vr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,l=this.getChannels().find(u=>u.topic===n);if(l)return l;{const u=new kn(`realtime:${t}`,r,this);return this.channels.push(u),u}}push(t){const{topic:r,event:n,payload:l,ref:u}=t,d=()=>{this.encode(t,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${r} ${n} (${u})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(X1,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ol.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",f)}catch(x){this.log("error","error in heartbeat callback",x)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:l,payload:u,ref:d}=r,c=d?`(${d})`:"",h=u.status||"";this.log("receive",`${h} ${n} ${l} ${c}`.trim(),u),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(l,u,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Fs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Fs.open||this.conn.readyState===Fs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ji.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${t}${n}${l}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([oC],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const u={access_token:r,version:G1};r&&l.updateJoinPayload(u),l.joinedOnce&&l._isJoined()&&l._push(ji.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ay(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ol.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,l,u,d,c,h,f,x,g,S,A;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:ef,this.heartbeatIntervalMs=(l=t?.heartbeatIntervalMs)!==null&&l!==void 0?l:Ol.HEARTBEAT_INTERVAL,this.worker=(u=t?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(c=t?.heartbeatCallback)!==null&&c!==void 0?c:md,this.vsn=(h=t?.vsn)!==null&&h!==void 0?h:v_,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t?.reconnectAfterMs)!==null&&f!==void 0?f:(E=>nC[E-1]||aC),this.vsn){case Y1:this.encode=(x=t?.encode)!==null&&x!==void 0?x:((E,C)=>C(JSON.stringify(E))),this.decode=(g=t?.decode)!==null&&g!==void 0?g:((E,C)=>C(JSON.parse(E)));break;case ny:this.encode=(S=t?.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(A=t?.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Ya=class extends Error{constructor(s,t){super(s),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function cC(s,t,r){const n=new URL(t,s);if(r)for(const[l,u]of Object.entries(r))u!==void 0&&n.searchParams.set(l,u);return n.toString()}async function uC(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function hC(s){const t=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:l,body:u,headers:d}){const c=cC(s.baseUrl,n,l),h=await uC(s.auth),f=await t(c,{method:r,headers:{...u?{"Content-Type":"application/json"}:{},...h,...d},body:u?JSON.stringify(u):void 0}),x=await f.text(),g=(f.headers.get("content-type")||"").includes("application/json"),S=g&&x?JSON.parse(x):x;if(!f.ok){const A=g?S:void 0,E=A?.error;throw new Ya(E?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:E?.type,icebergCode:E?.code,details:A})}return{status:f.status,headers:f.headers,data:S}}}}function jl(s){return s.join("")}var dC=class{constructor(s,t=""){this.client=s,this.prefix=t}async listNamespaces(s){const t=s?{parent:jl(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(s,t){const r={namespace:s.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jl(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jl(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jl(s.namespace)}`}),!0}catch(t){if(t instanceof Ya&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(s,t){try{return await this.createNamespace(s,t)}catch(r){if(r instanceof Ya&&r.status===409)return;throw r}}};function hn(s){return s.join("")}var fC=class{constructor(s,t="",r){this.client=s,this.prefix=t,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hn(s.namespace)}/tables`})).data.identifiers}async createTable(s,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hn(s.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(s,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hn(s.namespace)}/tables/${s.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hn(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(s){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hn(s.namespace)}/tables/${s.name}`,headers:t})).data.metadata}async tableExists(s){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hn(s.namespace)}/tables/${s.name}`,headers:t}),!0}catch(r){if(r instanceof Ya&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,t){try{return await this.createTable(s,t)}catch(r){if(r instanceof Ya&&r.status===409)return await this.loadTable({namespace:s.namespace,name:t.name});throw r}}},pC=class{constructor(s){let t="v1";s.catalogName&&(t+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=hC({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new dC(this.client,t),this.tableOps=new fC(this.client,t,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,t){return this.namespaceOps.createNamespace(s,t)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,t){return this.tableOps.createTable(s,t)}async updateTable(s,t){return this.tableOps.updateTable(s,t)}async dropTable(s,t){await this.tableOps.dropTable(s,t)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,t){return this.namespaceOps.createNamespaceIfNotExists(s,t)}async createTableIfNotExists(s,t){return this.tableOps.createTableIfNotExists(s,t)}},Lc=class extends Error{constructor(s,t="storage",r,n){super(s),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function Mc(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Dl=class extends Lc{constructor(s,t,r,n="storage"){super(s,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},cy=class extends Lc{constructor(s,t,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const mC=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),gC=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},rf=s=>{if(Array.isArray(s))return s.map(r=>rf(r));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([r,n])=>{const l=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[l]=rf(n)}),t},vC=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Xa(s){"@babel/helpers - typeof";return Xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xa(s)}function _C(s,t){if(Xa(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var n=r.call(s,t);if(Xa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function yC(s){var t=_C(s,"string");return Xa(t)=="symbol"?t:t+""}function bC(s,t,r){return(t=yC(t))in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function x_(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,n)}return r}function Ce(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x_(Object(r),!0).forEach(function(n){bC(s,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):x_(Object(r)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(r,n))})}return s}const w_=s=>{var t;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(t=s.error)===null||t===void 0?void 0:t.message)||JSON.stringify(s)},xC=async(s,t,r,n)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!r?.noResolveJson){const l=s,u=l.status||500;if(typeof l.json=="function")l.json().then(d=>{const c=d?.statusCode||d?.code||u+"";t(new Dl(w_(d),u,c,n))}).catch(()=>{if(n==="vectors"){const d=u+"";t(new Dl(l.statusText||`HTTP ${u} error`,u,d,n))}else{const d=u+"";t(new Dl(l.statusText||`HTTP ${u} error`,u,d,n))}});else{const d=u+"";t(new Dl(l.statusText||`HTTP ${u} error`,u,d,n))}}else t(new cy(w_(s),s,n))},wC=(s,t,r,n)=>{const l={method:s,headers:t?.headers||{}};return s==="GET"||s==="HEAD"||!n?Ce(Ce({},l),r):(gC(n)?(l.headers=Ce({"Content-Type":"application/json"},t?.headers),l.body=JSON.stringify(n)):l.body=n,t?.duplex&&(l.duplex=t.duplex),Ce(Ce({},l),r))};async function Na(s,t,r,n,l,u,d){return new Promise((c,h)=>{s(r,wC(t,n,l,u)).then(f=>{if(!f.ok)throw f;if(n?.noResolveJson)return f;if(d==="vectors"){const x=f.headers.get("content-type");if(!x||!x.includes("application/json"))return{}}return f.json()}).then(f=>c(f)).catch(f=>xC(f,h,n,d))})}function SC(s="storage"){return{get:async(t,r,n,l)=>Na(t,"GET",r,n,l,void 0,s),post:async(t,r,n,l,u)=>Na(t,"POST",r,l,u,n,s),put:async(t,r,n,l,u)=>Na(t,"PUT",r,l,u,n,s),head:async(t,r,n,l)=>Na(t,"HEAD",r,Ce(Ce({},n),{},{noResolveJson:!0}),l,void 0,s),remove:async(t,r,n,l,u)=>Na(t,"DELETE",r,l,u,n,s)}}const CC=SC("storage"),{get:Ja,post:nt,put:nf,head:EC,remove:Bf}=CC;var Mn=class{constructor(s,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=t,this.fetch=mC(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var t=this;try{return{data:await s(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Mc(r))return{data:null,error:r};throw r}}},kC=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t}then(s,t){return this.execute().then(s,t)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(Mc(t))return{data:null,error:t};throw t}}};let uy;uy=Symbol.toStringTag;var AC=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t,this[uy]="BlobDownloadBuilder",this.promise=null}asStream(){return new kC(this.downloadFn,this.shouldThrowOnError)}then(s,t){return this.getPromise().then(s,t)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(Mc(t))return{data:null,error:t};throw t}}};const RC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},S_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var TC=class extends Mn{constructor(s,t={},r,n){super(s,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(s,t,r,n){var l=this;return l.handleOperation(async()=>{let u;const d=Ce(Ce({},S_),n);let c=Ce(Ce({},l.headers),s==="POST"&&{"x-upsert":String(d.upsert)});const h=d.metadata;typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),h&&u.append("metadata",l.encodeMetadata(h)),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),h&&!u.has("metadata")&&u.append("metadata",l.encodeMetadata(h))):(u=r,c["cache-control"]=`max-age=${d.cacheControl}`,c["content-type"]=d.contentType,h&&(c["x-metadata"]=l.toBase64(l.encodeMetadata(h))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),n?.headers&&(c=Ce(Ce({},c),n.headers));const f=l._removeEmptyFolders(t),x=l._getFinalPath(f),g=await(s=="PUT"?nf:nt)(l.fetch,`${l.url}/object/${x}`,u,Ce({headers:c},d?.duplex?{duplex:d.duplex}:{}));return{path:f,id:g.Id,fullPath:g.Key}})}async upload(s,t,r){return this.uploadOrUpdate("POST",s,t,r)}async uploadToSignedUrl(s,t,r,n){var l=this;const u=l._removeEmptyFolders(s),d=l._getFinalPath(u),c=new URL(l.url+`/object/upload/sign/${d}`);return c.searchParams.set("token",t),l.handleOperation(async()=>{let h;const f=Ce({upsert:S_.upsert},n),x=Ce(Ce({},l.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",f.cacheControl)):(h=r,x["cache-control"]=`max-age=${f.cacheControl}`,x["content-type"]=f.contentType),{path:u,fullPath:(await nf(l.fetch,c.toString(),h,{headers:x})).Key}})}async createSignedUploadUrl(s,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(s);const l=Ce({},r.headers);t?.upsert&&(l["x-upsert"]="true");const u=await nt(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:l}),d=new URL(r.url+u.url),c=d.searchParams.get("token");if(!c)throw new Lc("No token returned by API");return{signedUrl:d.toString(),path:s,token:c}})}async update(s,t,r){return this.uploadOrUpdate("PUT",s,t,r)}async move(s,t,r){var n=this;return n.handleOperation(async()=>await nt(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:s,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers}))}async copy(s,t,r){var n=this;return n.handleOperation(async()=>({path:(await nt(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:s,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(s,t,r){var n=this;return n.handleOperation(async()=>{let l=n._getFinalPath(s),u=await nt(n.fetch,`${n.url}/object/sign/${l}`,Ce({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const d=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${u.signedURL}${d}`)}})}async createSignedUrls(s,t,r){var n=this;return n.handleOperation(async()=>{const l=await nt(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:s},{headers:n.headers}),u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return l.map(d=>Ce(Ce({},d),{},{signedUrl:d.signedURL?encodeURI(`${n.url}${d.signedURL}${u}`):null}))})}download(s,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(t?.transform||{}),l=n?`?${n}`:"",u=this._getFinalPath(s),d=()=>Ja(this.fetch,`${this.url}/${r}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new AC(d,this.shouldThrowOnError)}async info(s){var t=this;const r=t._getFinalPath(s);return t.handleOperation(async()=>rf(await Ja(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(s){var t=this;const r=t._getFinalPath(s);try{return await EC(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Mc(n)&&n instanceof cy){const l=n.originalError;if([400,404].includes(l?.status))return{data:!1,error:n}}throw n}}getPublicUrl(s,t){const r=this._getFinalPath(s),n=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&n.push(l);const u=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&n.push(d);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${c}`)}}}async remove(s){var t=this;return t.handleOperation(async()=>await Bf(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:s},{headers:t.headers}))}async list(s,t,r){var n=this;return n.handleOperation(async()=>{const l=Ce(Ce(Ce({},RC),t),{},{prefix:s||""});return await nt(n.fetch,`${n.url}/object/list/${n.bucketId}`,l,{headers:n.headers},r)})}async listV2(s,t){var r=this;return r.handleOperation(async()=>{const n=Ce({},s);return await nt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const t=[];return s.width&&t.push(`width=${s.width}`),s.height&&t.push(`height=${s.height}`),s.resize&&t.push(`resize=${s.resize}`),s.format&&t.push(`format=${s.format}`),s.quality&&t.push(`quality=${s.quality}`),t.join("&")}};const OC="2.93.1",ao={"X-Client-Info":`storage-js/${OC}`};var jC=class extends Mn{constructor(s,t={},r,n){const l=new URL(s);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase."));const u=l.href.replace(/\/$/,""),d=Ce(Ce({},ao),t);super(u,d,r,"storage")}async listBuckets(s){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(s);return await Ja(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(s){var t=this;return t.handleOperation(async()=>await Ja(t.fetch,`${t.url}/bucket/${s}`,{headers:t.headers}))}async createBucket(s,t={public:!1}){var r=this;return r.handleOperation(async()=>await nt(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,t){var r=this;return r.handleOperation(async()=>await nf(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/bucket/${s}/empty`,{},{headers:t.headers}))}async deleteBucket(s){var t=this;return t.handleOperation(async()=>await Bf(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(s){const t={};return s&&("limit"in s&&(t.limit=String(s.limit)),"offset"in s&&(t.offset=String(s.offset)),s.search&&(t.search=s.search),s.sortColumn&&(t.sortColumn=s.sortColumn),s.sortOrder&&(t.sortOrder=s.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},DC=class extends Mn{constructor(s,t={},r){const n=s.replace(/\/$/,""),l=Ce(Ce({},ao),t);super(n,l,r,"storage")}async createBucket(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/bucket`,{name:s},{headers:t.headers}))}async listBuckets(s){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;s?.limit!==void 0&&r.set("limit",s.limit.toString()),s?.offset!==void 0&&r.set("offset",s.offset.toString()),s?.sortColumn&&r.set("sortColumn",s.sortColumn),s?.sortOrder&&r.set("sortOrder",s.sortOrder),s?.search&&r.set("search",s.search);const n=r.toString(),l=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Ja(t.fetch,l,{headers:t.headers})})}async deleteBucket(s){var t=this;return t.handleOperation(async()=>await Bf(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}))}from(s){var t=this;if(!vC(s))throw new Lc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new pC({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(l,u){const d=l[u];return typeof d!="function"?d:async(...c)=>{try{return{data:await d.apply(l,c),error:null}}catch(h){if(n)throw h;return{data:null,error:h}}}}})}},NC=class extends Mn{constructor(s,t={},r){const n=s.replace(/\/$/,""),l=Ce(Ce({},ao),{},{"Content-Type":"application/json"},t);super(n,l,r,"vectors")}async createIndex(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/CreateIndex`,s,{headers:t.headers})||{})}async getIndex(s,t){var r=this;return r.handleOperation(async()=>await nt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:t},{headers:r.headers}))}async listIndexes(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/ListIndexes`,s,{headers:t.headers}))}async deleteIndex(s,t){var r=this;return r.handleOperation(async()=>await nt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:t},{headers:r.headers})||{})}},LC=class extends Mn{constructor(s,t={},r){const n=s.replace(/\/$/,""),l=Ce(Ce({},ao),{},{"Content-Type":"application/json"},t);super(n,l,r,"vectors")}async putVectors(s){var t=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/PutVectors`,s,{headers:t.headers})||{})}async getVectors(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/GetVectors`,s,{headers:t.headers}))}async listVectors(s){var t=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/ListVectors`,s,{headers:t.headers}))}async queryVectors(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/QueryVectors`,s,{headers:t.headers}))}async deleteVectors(s){var t=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/DeleteVectors`,s,{headers:t.headers})||{})}},MC=class extends Mn{constructor(s,t={},r){const n=s.replace(/\/$/,""),l=Ce(Ce({},ao),{},{"Content-Type":"application/json"},t);super(n,l,r,"vectors")}async createBucket(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:t.headers})||{})}async getBucket(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:s},{headers:t.headers}))}async listBuckets(s={}){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/ListVectorBuckets`,s,{headers:t.headers}))}async deleteBucket(s){var t=this;return t.handleOperation(async()=>await nt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:t.headers})||{})}},BC=class extends MC{constructor(s,t={}){super(s,t.headers||{},t.fetch)}from(s){return new PC(this.url,this.headers,s,this.fetch)}async createBucket(s){var t=()=>super.createBucket,r=this;return t().call(r,s)}async getBucket(s){var t=()=>super.getBucket,r=this;return t().call(r,s)}async listBuckets(s={}){var t=()=>super.listBuckets,r=this;return t().call(r,s)}async deleteBucket(s){var t=()=>super.deleteBucket,r=this;return t().call(r,s)}},PC=class extends NC{constructor(s,t,r,n){super(s,t,n),this.vectorBucketName=r}async createIndex(s){var t=()=>super.createIndex,r=this;return t().call(r,Ce(Ce({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var t=()=>super.listIndexes,r=this;return t().call(r,Ce(Ce({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,s)}async deleteIndex(s){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,s)}index(s){return new UC(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},UC=class extends LC{constructor(s,t,r,n,l){super(s,t,l),this.vectorBucketName=r,this.indexName=n}async putVectors(s){var t=()=>super.putVectors,r=this;return t().call(r,Ce(Ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var t=()=>super.getVectors,r=this;return t().call(r,Ce(Ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var t=()=>super.listVectors,r=this;return t().call(r,Ce(Ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var t=()=>super.queryVectors,r=this;return t().call(r,Ce(Ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var t=()=>super.deleteVectors,r=this;return t().call(r,Ce(Ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},HC=class extends jC{constructor(s,t={},r,n){super(s,t,r,n)}from(s){return new TC(this.url,this.headers,s,this.fetch)}get vectors(){return new BC(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new DC(this.url+"/iceberg",this.headers,this.fetch)}};const hy="2.93.1",wn=30*1e3,af=3,gd=af*wn,IC="http://localhost:9999",zC="supabase.auth.token",$C={"X-Client-Info":`gotrue-js/${hy}`},of="X-Supabase-Api-Version",dy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,FC=600*1e3;class Qa extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ye(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class WC extends Qa{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function KC(s){return ye(s)&&s.name==="AuthApiError"}class _r extends Qa{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ms extends Qa{constructor(t,r,n,l){super(t,n,l),this.name=r,this.status=n}}class ai extends ms{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vd(s){return ye(s)&&s.name==="AuthSessionMissingError"}class dn extends ms{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nl extends ms{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ll extends ms{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function VC(s){return ye(s)&&s.name==="AuthImplicitGrantRedirectError"}class C_ extends ms{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class GC extends ms{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class lf extends ms{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function _d(s){return ye(s)&&s.name==="AuthRetryableFetchError"}class E_ extends ms{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class cf extends ms{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),k_=` 	
\r=`.split(""),YC=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<k_.length;t+=1)s[k_[t].charCodeAt(0)]=-2;for(let t=0;t<uc.length;t+=1)s[uc[t].charCodeAt(0)]=t;return s})();function A_(s,t,r){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(uc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(uc[n]),t.queuedBits-=6}}function fy(s,t,r){const n=YC[s];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function R_(s){const t=[],r=d=>{t.push(String.fromCodePoint(d))},n={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=d=>{QC(d,n,r)};for(let d=0;d<s.length;d+=1)fy(s.charCodeAt(d),l,u);return t.join("")}function XC(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function JC(s,t){for(let r=0;r<s.length;r+=1){let n=s.charCodeAt(r);if(n>55295&&n<=56319){const l=(n-55296)*1024&65535;n=(s.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}XC(n,t)}}function QC(s,t,r){if(t.utf8seq===0){if(s<=127){r(s);return}for(let n=1;n<6;n+=1)if((s>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function An(s){const t=[],r={queue:0,queuedBits:0},n=l=>{t.push(l)};for(let l=0;l<s.length;l+=1)fy(s.charCodeAt(l),r,n);return new Uint8Array(t)}function ZC(s){const t=[];return JC(s,r=>t.push(r)),new Uint8Array(t)}function xr(s){const t=[],r={queue:0,queuedBits:0},n=l=>{t.push(l)};return s.forEach(l=>A_(l,r,n)),A_(null,r,n),t.join("")}function eE(s){return Math.round(Date.now()/1e3)+s}function tE(){return Symbol("auth-callback")}const Mt=()=>typeof window<"u"&&typeof document<"u",fr={tested:!1,writable:!1},py=()=>{if(!Mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fr.tested)return fr.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),fr.tested=!0,fr.writable=!0}catch{fr.tested=!0,fr.writable=!1}return fr.writable};function iE(s){const t={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,u)=>{t[u]=l})}catch{}return r.searchParams.forEach((n,l)=>{t[l]=n}),t}const my=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),sE=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Sn=async(s,t,r)=>{await s.setItem(t,JSON.stringify(r))},pr=async(s,t)=>{const r=await s.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Lt=async(s,t)=>{await s.removeItem(t)};class Bc{constructor(){this.promise=new Bc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bc.promiseConstructor=Promise;function Ml(s){const t=s.split(".");if(t.length!==3)throw new cf("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!qC.test(t[n]))throw new cf("JWT not in base64url format");return{header:JSON.parse(R_(t[0])),payload:JSON.parse(R_(t[1])),signature:An(t[2]),raw:{header:t[0],payload:t[1]}}}async function rE(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function nE(s,t){return new Promise((n,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await s(u);if(!t(u,null,d)){n(d);return}}catch(d){if(!t(u,d)){l(d);return}}})()})}function aE(s){return("0"+s.toString(16)).substr(-2)}function oE(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let l="";for(let u=0;u<56;u++)l+=r.charAt(Math.floor(Math.random()*n));return l}return crypto.getRandomValues(t),Array.from(t,aE).join("")}async function lE(s){const r=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(n);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function cE(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await lE(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fn(s,t,r=!1){const n=oE();let l=n;r&&(l+="/PASSWORD_RECOVERY"),await Sn(s,`${t}-code-verifier`,l);const u=await cE(n);return[u,n===u?"plain":"s256"]}const uE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hE(s){const t=s.headers.get(of);if(!t||!t.match(uE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function dE(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function fE(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pn(s){if(!pE.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yd(){const s={};return new Proxy(s,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mE(s,t){return new Proxy(s,{get:(r,n,l)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const u=n.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,l)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,l)}})}function T_(s){return JSON.parse(JSON.stringify(s))}const gr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),gE=[502,503,504];async function O_(s){var t;if(!sE(s))throw new lf(gr(s),0);if(gE.includes(s.status))throw new lf(gr(s),s.status);let r;try{r=await s.json()}catch(u){throw new _r(gr(u),u)}let n;const l=hE(s);if(l&&l.getTime()>=dy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new E_(gr(r),s.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ai}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new E_(gr(r),s.status,r.weak_password.reasons);throw new WC(gr(r),s.status||500,n)}const vE=(s,t,r,n)=>{const l={method:s,headers:t?.headers||{}};return s==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),l.body=JSON.stringify(n),Object.assign(Object.assign({},l),r))};async function Se(s,t,r,n){var l;const u=Object.assign({},n?.headers);u[of]||(u[of]=dy["2024-01-01"].name),n?.jwt&&(u.Authorization=`Bearer ${n.jwt}`);const d=(l=n?.query)!==null&&l!==void 0?l:{};n?.redirectTo&&(d.redirect_to=n.redirectTo);const c=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",h=await _E(s,t,r+c,{headers:u,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(h):{data:Object.assign({},h),error:null}}async function _E(s,t,r,n,l,u){const d=vE(t,n,l,u);let c;try{c=await s(r,Object.assign({},d))}catch(h){throw console.error(h),new lf(gr(h),0)}if(c.ok||await O_(c),n?.noResolveJson)return c;try{return await c.json()}catch(h){await O_(h)}}function Oi(s){var t;let r=null;xE(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=eE(s.expires_in)));const n=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:r,user:n},error:null}}function j_(s){const t=Oi(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=s.weak_password),t}function Ws(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function yE(s){return{data:s,error:null}}function bE(s){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:l,verification_type:u}=s,d=Nc(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:r,hashed_token:n,redirect_to:l,verification_type:u},h=Object.assign({},d);return{data:{properties:c,user:h},error:null}}function D_(s){return s}function xE(s){return s.access_token&&s.refresh_token&&s.expires_in}const bd=["global","local","others"];class wE{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=my(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=bd[0]){if(bd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bd.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ye(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ws})}catch(n){if(ye(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Nc(t,["options"]),l=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(l.new_email=n?.newEmail,delete l.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:bE,redirectTo:r?.redirectTo})}catch(r){if(ye(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ws})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,l,u,d,c,h;try{const f={nextPage:null,lastPage:0,total:0},x=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(u=(l=t?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:D_});if(x.error)throw x.error;const g=await x.json(),S=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,A=(h=(c=x.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return A.length>0&&(A.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(E.split(";")[1].split("=")[1]);f[`${p}Page`]=C}),f.total=parseInt(S)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(ye(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){pn(t);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ws})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){pn(t);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ws})}catch(n){if(ye(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){pn(t);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ws})}catch(n){if(ye(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){pn(t.userId);try{const{data:r,error:n}=await Se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:n}}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _deleteFactor(t){pn(t.userId),pn(t.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,l,u,d,c,h;try{const f={nextPage:null,lastPage:0,total:0},x=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(u=(l=t?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:D_});if(x.error)throw x.error;const g=await x.json(),S=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,A=(h=(c=x.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return A.length>0&&(A.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(E.split(";")[1].split("=")[1]);f[`${p}Page`]=C}),f.total=parseInt(S)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(ye(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ye(r))return{data:null,error:r};throw r}}}function N_(s={}){return{getItem:t=>s[t]||null,setItem:(t,r)=>{s[t]=r},removeItem:t=>{delete s[t]}}}const mn={debug:!!(globalThis&&py()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class SE extends gy{}async function CE(s,t,r){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),mn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async l=>{if(l){mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,l.name);try{return await r()}finally{mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,l.name)}}else{if(t===0)throw mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new SE(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(mn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function EE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vy(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function kE(s){return parseInt(s,16)}function AE(s){const t=new TextEncoder().encode(s);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function RE(s){var t;const{chainId:r,domain:n,expirationTime:l,issuedAt:u=new Date,nonce:d,notBefore:c,requestId:h,resources:f,scheme:x,uri:g,version:S}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((t=s.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const A=vy(s.address),E=x?`${x}://${n}`:n,C=s.statement?`${s.statement}
`:"",p=`${E} wants you to sign in with your Ethereum account:
${A}

${C}`;let _=`URI: ${g}
Version: ${S}
Chain ID: ${r}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(l&&(_+=`
Expiration Time: ${l.toISOString()}`),c&&(_+=`
Not Before: ${c.toISOString()}`),h&&(_+=`
Request ID: ${h}`),f){let v=`
Resources:`;for(const y of f){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);v+=`
- ${y}`}_+=v}return`${p}
${_}`}class bt extends Error{constructor({message:t,code:r,cause:n,name:l}){var u;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(u=l??(n instanceof Error?n.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=r}}class hc extends bt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function TE({error:s,options:t}){var r,n,l;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=u.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(t.mediation==="conditional"&&((n=u.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new bt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return u.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const d=window.location.hostname;if(_y(d)){if(u.rp.id!==d)return new bt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function OE({error:s,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new bt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const n=window.location.hostname;if(_y(n)){if(r.rpId!==n)return new bt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class jE{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const DE=new jE;function NE(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:t,user:r,excludeCredentials:n}=s,l=Nc(s,["challenge","user","excludeCredentials"]),u=An(t).buffer,d=Object.assign(Object.assign({},r),{id:An(r.id).buffer}),c=Object.assign(Object.assign({},l),{challenge:u,user:d});if(n&&n.length>0){c.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const f=n[h];c.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:An(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function LE(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:t,allowCredentials:r}=s,n=Nc(s,["challenge","allowCredentials"]),l=An(t).buffer,u=Object.assign(Object.assign({},n),{challenge:l});if(r&&r.length>0){u.allowCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const c=r[d];u.allowCredentials[d]=Object.assign(Object.assign({},c),{id:An(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return u}function ME(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:xr(new Uint8Array(s.response.attestationObject)),clientDataJSON:xr(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function BE(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,n=s.getClientExtensionResults(),l=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:xr(new Uint8Array(l.authenticatorData)),clientDataJSON:xr(new Uint8Array(l.clientDataJSON)),signature:xr(new Uint8Array(l.signature)),userHandle:l.userHandle?xr(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _y(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function L_(){var s,t;return!!(Mt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function PE(s){try{const t=await navigator.credentials.create(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hc("Browser returned unexpected credential type",t)}:{data:null,error:new hc("Empty credential response",t)}}catch(t){return{data:null,error:TE({error:t,options:s})}}}async function UE(s){try{const t=await navigator.credentials.get(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hc("Browser returned unexpected credential type",t)}:{data:null,error:new hc("Empty credential response",t)}}catch(t){return{data:null,error:OE({error:t,options:s})}}}const HE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},IE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function dc(...s){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),n={};for(const l of s)if(l)for(const u in l){const d=l[u];if(d!==void 0)if(Array.isArray(d))n[u]=d;else if(r(d))n[u]=d;else if(t(d)){const c=n[u];t(c)?n[u]=dc(c,d):n[u]=dc(d)}else n[u]=d}return n}function zE(s,t){return dc(HE,s,t||{})}function $E(s,t){return dc(IE,s,t||{})}class qE{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:l},u){try{const{data:d,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!d)return{data:null,error:c};const h=l??DE.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:f}=d.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${n}`),f.displayName||(f.displayName=f.name)}switch(d.webauthn.type){case"create":{const f=zE(d.webauthn.credential_options.publicKey,u?.create),{data:x,error:g}=await PE({publicKey:f,signal:h});return x?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:g}}case"request":{const f=$E(d.webauthn.credential_options.publicKey,u?.request),{data:x,error:g}=await UE(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:f,signal:h}));return x?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:g}}}}catch(d){return ye(d)?{data:null,error:d}:{data:null,error:new _r("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!r)return{data:null,error:new Qa("rpId is required for WebAuthn authentication")};try{if(!L_())return{data:null,error:new _r("Browser does not support WebAuthn",null)};const{data:d,error:c}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:l},{request:u});if(!d)return{data:null,error:c};const{webauthn:h}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:n,credential_response:h.credential_response}})}catch(d){return ye(d)?{data:null,error:d}:{data:null,error:new _r("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!r)return{data:null,error:new Qa("rpId is required for WebAuthn registration")};try{if(!L_())return{data:null,error:new _r("Browser does not support WebAuthn",null)};const{data:d,error:c}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(x=>{var g;return(g=x.data)===null||g===void 0?void 0:g.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===t&&S.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:c};const{data:h,error:f}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:l},{create:u});return h?this._verify({factorId:d.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(d){return ye(d)?{data:null,error:d}:{data:null,error:new _r("Unexpected error in register",d)}}}}EE();const FE={url:IC,storageKey:zC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$C,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function M_(s,t,r){return await r()}const gn={};class Za{get jwks(){var t,r;return(r=(t=gn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=gn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},FE),t);if(this.storageKey=u.storageKey,this.instanceID=(r=Za.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Za.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Mt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new wE({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=my(u.fetch),this.lock=u.lock||M_,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,this.lockAcquireTimeout=u.lockAcquireTimeout,u.lock?this.lock=u.lock:this.persistSession&&Mt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=CE:this.lock=M_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:py()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=N_(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=N_(this.memoryStorage)),Mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${hy}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Mt()&&(r=iE(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Mt()&&this.detectSessionInUrl&&n!=="none"){const{data:l,error:u}=await this._getSessionFromURL(r,n);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),VC(u)){const h=(t=u.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:u}}return{error:u}}const{session:d,redirectType:c}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",c),await this._saveSession(d),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ye(r)?this._returnResult({error:r}):this._returnResult({error:new _r("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,l;try{const u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(l=t?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Oi}),{data:d,error:c}=u;if(c||!d)return this._returnResult({data:{user:null,session:null},error:c});const h=d.session,f=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(u){if(ye(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(t){var r,n,l;try{let u;if("email"in t){const{email:x,password:g,options:S}=t;let A=null,E=null;this.flowType==="pkce"&&([A,E]=await fn(this.storage,this.storageKey)),u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:x,password:g,data:(r=S?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:A,code_challenge_method:E},xform:Oi})}else if("phone"in t){const{phone:x,password:g,options:S}=t;u=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:g,data:(n=S?.data)!==null&&n!==void 0?n:{},channel:(l=S?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:Oi})}else throw new Nl("You must provide either an email or phone number and a password");const{data:d,error:c}=u;if(c||!d)return await Lt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const h=d.session,f=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(u){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ye(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(t){try{let r;if("email"in t){const{email:u,password:d,options:c}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:j_})}else if("phone"in t){const{phone:u,password:d,options:c}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:j_})}else throw new Nl("You must provide either an email or phone number and a password");const{data:n,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!n||!n.session||!n.user){const u=new dn;return this._returnResult({data:{user:null,session:null},error:u})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:l})}catch(r){if(ye(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,l,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,l,u,d,c,h,f,x,g,S;let A,E;if("message"in t)A=t.message,E=t.signature;else{const{chain:C,wallet:p,statement:_,options:v}=t;let y;if(Mt())if(typeof p=="object")y=p;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")y=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=p}const k=new URL((r=v?.url)!==null&&r!==void 0?r:window.location.href),T=await y.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=vy(T[0]);let D=(n=v?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!D){const N=await y.request({method:"eth_chainId"});D=kE(N)}const R={domain:k.host,address:j,statement:_,uri:k.href,version:"1",chainId:D,nonce:(l=v?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(d=(u=v?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(c=v?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(h=v?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=v?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(x=v?.signInWithEthereum)===null||x===void 0?void 0:x.resources};A=RE(R),E=await y.request({method:"personal_sign",params:[AE(A),j]})}try{const{data:C,error:p}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:E},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Oi});if(p)throw p;if(!C||!C.session||!C.user){const _=new dn;return this._returnResult({data:{user:null,session:null},error:_})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:p})}catch(C){if(ye(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(t){var r,n,l,u,d,c,h,f,x,g,S,A;let E,C;if("message"in t)E=t.message,C=t.signature;else{const{chain:p,wallet:_,statement:v,options:y}=t;let k;if(Mt())if(typeof _=="object")k=_;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))k=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!y?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=_}const T=new URL((r=y?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const j=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y?.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),v?{statement:v}:null));let D;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")D=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)D=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)E=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),C=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${T.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(l=(n=y?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=y?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((d=y?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((c=y?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((h=y?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((f=y?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((g=(x=y?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||g===void 0)&&g.length?["Resources",...y.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const j=await k.signMessage(new TextEncoder().encode(E),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=j}}try{const{data:p,error:_}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:xr(C)},!((S=t.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(A=t.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Oi});if(_)throw _;if(!p||!p.session||!p.user){const v=new dn;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:_})}catch(p){if(ye(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(t){const r=await pr(this.storage,`${this.storageKey}-code-verifier`),[n,l]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new GC;const{data:u,error:d}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Oi});if(await Lt(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const c=new dn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:d})}catch(u){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ye(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(t){try{const{options:r,provider:n,token:l,access_token:u,nonce:d}=t,c=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:l,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Oi}),{data:h,error:f}=c;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h||!h.session||!h.user){const x=new dn;return this._returnResult({data:{user:null,session:null},error:x})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:f})}catch(r){if(ye(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,l,u,d;try{if("email"in t){const{email:c,options:h}=t;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await fn(this.storage,this.storageKey));const{error:g}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(n=h?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:x},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:c,options:h}=t,{data:f,error:x}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(l=h?.data)!==null&&l!==void 0?l:{},create_user:(u=h?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(d=h?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:x})}throw new Nl("You must provide either an email or phone number.")}catch(c){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ye(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var r,n;try{let l,u;"options"in t&&(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo,u=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:d,error:c}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Oi});if(c)throw c;if(!d)throw new Error("An error occurred on token verification.");const h=d.session,f=d.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(l){if(ye(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(t){var r,n,l,u,d;try{let c=null,h=null;this.flowType==="pkce"&&([c,h]=await fn(this.storage,this.storageKey));const f=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((l=t?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:yE});return!((u=f.data)===null||u===void 0)&&u.url&&Mt()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(c){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ye(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ai;const{error:l}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(t){if(ye(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:l,options:u}=t,{error:d}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:n,type:l,options:u}=t,{data:d,error:c}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:c})}throw new Nl("You must provide either an email or phone number and a type")}catch(r){if(ye(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await pr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<gd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const d=await pr(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=yd()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=mE(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ws}):await this._useSession(async r=>{var n,l,u;const{data:d,error:c}=r;if(c)throw c;return!(!((n=d.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ai}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Ws})})}catch(r){if(ye(r))return vd(r)&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:l,error:u}=n;if(u)throw u;if(!l.session)throw new ai;const d=l.session;let c=null,h=null;this.flowType==="pkce"&&t.email!=null&&([c,h]=await fn(this.storage,this.storageKey));const{data:f,error:x}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:h}),jwt:d.access_token,xform:Ws});if(x)throw x;return d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(n){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ye(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ai;const r=Date.now()/1e3;let n=r,l=!0,u=null;const{payload:d}=Ml(t.access_token);if(d.exp&&(n=d.exp,l=n<=r),l){const{data:c,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c)return{data:{user:null,session:null},error:null};u=c}else{const{data:c,error:h}=await this._getUser(t.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});u={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(r){if(ye(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:d,error:c}=r;if(c)throw c;t=(n=d.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new ai;const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ye(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Mt())throw new Ll("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ll(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new C_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ll("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new C_("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:l,access_token:u,refresh_token:d,expires_in:c,expires_at:h,token_type:f}=t;if(!u||!c||!d||!f)throw new Ll("No session defined in URL");const x=Math.round(Date.now()/1e3),g=parseInt(c);let S=x+g;h&&(S=parseInt(h));const A=S-x;A*1e3<=wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${g}s`);const E=S-g;x-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,S,x):x-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,S,x);const{data:C,error:p}=await this._getUser(u);if(p)throw p;const _={provider_token:n,provider_refresh_token:l,access_token:u,expires_in:g,expires_at:S,refresh_token:d,token_type:f,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:t.type},error:null})}catch(n){if(ye(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await pr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:l,error:u}=r;if(u&&!vd(u))return this._returnResult({error:u});const d=(n=l.session)===null||n===void 0?void 0:n.access_token;if(d){const{error:c}=await this.admin.signOut(d,t);if(c&&!(KC(c)&&(c.status===404||c.status===401||c.status===403)||vd(c)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=tE(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,l;try{const{data:{session:u},error:d}=r;if(d)throw d;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,r={}){let n=null,l=null;this.flowType==="pkce"&&([n,l]=await fn(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ye(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ye(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:l}=await this._useSession(async u=>{var d,c,h,f,x;const{data:g,error:S}=u;if(S)throw S;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",A,{headers:this.headers,jwt:(x=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return Mt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:t.provider,url:n?.url},error:null})}catch(n){if(ye(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:l,data:{session:u}}=r;if(l)throw l;const{options:d,provider:c,token:h,access_token:f,nonce:x}=t,g=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=u?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:h,access_token:f,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Oi}),{data:S,error:A}=g;return A?this._returnResult({data:{user:null,session:null},error:A}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new dn}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:A}))}catch(l){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ye(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,l;const{data:u,error:d}=r;if(d)throw d;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(n=u.session)===null||n===void 0?void 0:n.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(ye(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await nE(async l=>(l>0&&await rE(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Oi})),(l,u)=>{const d=200*Math.pow(2,l);return u&&_d(u)&&Date.now()+d-n<wn})}catch(n){if(this._debug(r,"error",n),ye(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Mt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const l=await pr(this.storage,this.storageKey);if(l&&this.userStorage){let d=await pr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await Sn(this.userStorage,this.storageKey+"-user",d)),l.user=(t=d?.user)!==null&&t!==void 0?t:yd()}else if(l&&!l.user&&!l.user){const d=await pr(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await Lt(this.storage,this.storageKey+"-user"),await Sn(this.storage,this.storageKey,l)):l.user=yd()}if(this._debug(n,"session from storage",l),!this._isValidSession(l)){this._debug(n,"session is not valid"),l!==null&&await this._removeSession();return}const u=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<gd;if(this._debug(n,`session has${u?"":" not"} expired with margin of ${gd}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),_d(d)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:c}=await this._getUser(l.access_token);!c&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(n,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(n,"error",l),console.error(l);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ai;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Bc;const{data:u,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!u.session)throw new ai;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const c={data:u.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(u){if(this._debug(l,"error",u),ye(u)){const d={data:null,error:u};return _d(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,r,n=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,r)}catch(h){u.push(h)}});if(await Promise.all(d),u.length>0){for(let c=0;c<u.length;c+=1)console.error(u[c]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Lt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Sn(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const u=T_(l);await Sn(this.storage,this.storageKey,u)}else{const l=T_(r);await Sn(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Lt(this.storage,this.storageKey),await Lt(this.storage,this.storageKey+"-code-verifier"),await Lt(this.storage,this.storageKey+"-user"),this.userStorage&&await Lt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Mt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((n.expires_at*1e3-t)/wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${wn}ms, refresh threshold is ${af} ticks`),l<=af&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const l=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&l.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[u,d]=await fn(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(c.toString())}if(n?.queryParams){const u=new URLSearchParams(n.queryParams);l.push(u.toString())}return n?.skipBrowserRedirect&&l.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:l,error:u}=r;return u?this._returnResult({data:null,error:u}):await Se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=l?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ye(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,l;const{data:u,error:d}=r;if(d)return this._returnResult({data:null,error:d});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:f}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=u?.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&h.type==="totp"&&(!((l=h?.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(ye(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:l,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?ME(t.webauthn.credential_response):BE(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:h}=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(n=l?.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:h}))})}catch(r){if(ye(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:l,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=l?.session)===null||n===void 0?void 0:n.access_token});if(d.error)return d;const{data:c}=d;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:NE(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:LE(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ye(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=r?.factors)!==null&&t!==void 0?t:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,l,u;if(t)try{const{payload:A}=Ml(t);let E=null;A.aal&&(E=A.aal);let C=E;const{data:{user:p},error:_}=await this.getUser(t);if(_)return this._returnResult({data:null,error:_});((n=(r=p?.factors)===null||r===void 0?void 0:r.filter(k=>k.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(C="aal2");const y=A.amr||[];return{data:{currentLevel:E,nextLevel:C,currentAuthenticationMethods:y},error:null}}catch(A){if(ye(A))return this._returnResult({data:null,error:A});throw A}const{data:{session:d},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Ml(d.access_token);let f=null;h.aal&&(f=h.aal);let x=f;((u=(l=d.user.factors)===null||l===void 0?void 0:l.filter(A=>A.status==="verified"))!==null&&u!==void 0?u:[]).length>0&&(x="aal2");const S=h.amr||[];return{data:{currentLevel:f,nextLevel:x,currentAuthenticationMethods:S},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:l}=r;return l?this._returnResult({data:null,error:l}):n?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new ai})})}catch(r){if(ye(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:l},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new ai});const d=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return d.data&&d.data.redirect_url&&Mt()&&!r?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(n){if(ye(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:l},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new ai});const d=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return d.data&&d.data.redirect_url&&Mt()&&!r?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(n){if(ye(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new ai})})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:l}=r;return l?this._returnResult({data:null,error:l}):n?(await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ai})})}catch(r){if(ye(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(c=>c.kid===t);if(n)return n;const l=Date.now();if(n=this.jwks.keys.find(c=>c.kid===t),n&&this.jwks_cached_at+FC>l)return n;const{data:u,error:d}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,n=u.keys.find(c=>c.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:A,error:E}=await this.getSession();if(E||!A.session)return this._returnResult({data:null,error:E});n=A.session.access_token}const{header:l,payload:u,signature:d,raw:{header:c,payload:h}}=Ml(n);r?.allowExpired||dE(u.exp);const f=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!f){const{error:A}=await this.getUser(n);if(A)throw A;return{data:{claims:u,header:l,signature:d},error:null}}const x=fE(l.alg),g=await crypto.subtle.importKey("jwk",f,x,!0,["verify"]);if(!await crypto.subtle.verify(x,g,d,ZC(`${c}.${h}`)))throw new cf("Invalid JWT signature");return{data:{claims:u,header:l,signature:d},error:null}}catch(n){if(ye(n))return this._returnResult({data:null,error:n});throw n}}}Za.nextInstanceID={};const WE=Za,KE="2.93.1";let qa="";typeof Deno<"u"?qa="deno":typeof document<"u"?qa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qa="react-native":qa="node";function VE(){const s=globalThis.process;if(s&&s.platform){const t=s.platform;if(t==="darwin")return"macOS";if(t==="win32")return"Windows";if(t==="linux")return"Linux";if(t==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const t=navigator.userAgentData.platform;if(t==="macOS")return"macOS";if(t==="Windows")return"Windows";if(t==="Linux")return"Linux";if(t==="Android")return"Android";if(t==="iOS")return"iOS"}return null}function GE(){const s=globalThis.process;if(s){const t=s.versions;if(t&&t.node&&typeof window>"u")try{const r=globalThis.require;if(r)return r("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function YE(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const s=globalThis.process;if(s){const t=s.versions;if(t&&t.node)return"node"}return null}function XE(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const s=globalThis.process;if(s){const t=s.versions;if(t&&t.node)return t.node}return null}function JE(){const s={"X-Client-Info":`supabase-js-${qa}/${KE}`},t=VE();t&&(s["X-Supabase-Client-Platform"]=t);const r=GE();r&&(s["X-Supabase-Client-Platform-Version"]=r);const n=YE();n&&(s["X-Supabase-Client-Runtime"]=n);const l=XE();return l&&(s["X-Supabase-Client-Runtime-Version"]=l),s}const QE=JE(),ZE={headers:QE},e2={schema:"public"},t2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i2={};function eo(s){"@babel/helpers - typeof";return eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eo(s)}function s2(s,t){if(eo(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var n=r.call(s,t);if(eo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function r2(s){var t=s2(s,"string");return eo(t)=="symbol"?t:t+""}function n2(s,t,r){return(t=r2(t))in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function B_(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,n)}return r}function ht(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B_(Object(r),!0).forEach(function(n){n2(s,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):B_(Object(r)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(r,n))})}return s}const a2=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),o2=()=>Headers,l2=(s,t,r)=>{const n=a2(r),l=o2();return async(u,d)=>{var c;const h=(c=await t())!==null&&c!==void 0?c:s;let f=new l(d?.headers);return f.has("apikey")||f.set("apikey",s),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),n(u,ht(ht({},d),{},{headers:f}))}};function c2(s){return s.endsWith("/")?s:s+"/"}function u2(s,t){var r,n;const{db:l,auth:u,realtime:d,global:c}=s,{db:h,auth:f,realtime:x,global:g}=t,S={db:ht(ht({},h),l),auth:ht(ht({},f),u),realtime:ht(ht({},x),d),storage:{},global:ht(ht(ht({},g),c),{},{headers:ht(ht({},(r=g?.headers)!==null&&r!==void 0?r:{}),(n=c?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return s.accessToken?S.accessToken=s.accessToken:delete S.accessToken,S}function h2(s){const t=s?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(c2(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var d2=class extends WE{constructor(s){super(s)}},f2=class{constructor(s,t,r){var n,l;this.supabaseUrl=s,this.supabaseKey=t;const u=h2(s);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,c={db:e2,realtime:i2,auth:ht(ht({},t2),{},{storageKey:d}),global:ZE},h=u2(r??{},c);if(this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(l=h.global.headers)!==null&&l!==void 0?l:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(x,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=h.auth)!==null&&f!==void 0?f:{},this.headers,h.global.fetch)}this.fetch=l2(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(ht({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new W1(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new HC(this.storageUrl.href,this.headers,this.fetch,r?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new I1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,t,r)}channel(s,t={config:{}}){return this.realtime.channel(s,t)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,t,r;if(s.accessToken)return await s.accessToken();const{data:n}=await s.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:l,storageKey:u,flowType:d,lock:c,debug:h,throwOnError:f},x,g){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d2({url:this.authUrl.href,headers:ht(ht({},S),x),storageKey:u,autoRefreshToken:s,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:l,flowType:d,lock:c,debug:h,throwOnError:f,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new lC(this.realtimeUrl.href,ht(ht({},s),{},{params:ht(ht({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,t)=>{this._handleTokenChanged(s,"CLIENT",t?.access_token)})}_handleTokenChanged(s,t,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const p2=(s,t,r)=>new f2(s,t,r);function m2(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const t=s.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}m2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const g2="https://ygecdbbtzbsoimuljyoc.supabase.co",v2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlnZWNkYmJ0emJzb2ltdWxqeW9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzOTk2NTAsImV4cCI6MjA4NDk3NTY1MH0.w0KOxA8gKHew1NhviaWSZU0VD0W5QvGli4J9X4zO1lY",Tn=p2(g2,v2);const yy=(...s)=>s.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();const _2=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const y2=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase());const P_=s=>{const t=y2(s);return t.charAt(0).toUpperCase()+t.slice(1)};var b2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x2=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const w2=q.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:u,iconNode:d,...c},h)=>q.createElement("svg",{ref:h,...b2,width:t,height:t,stroke:s,strokeWidth:n?Number(r)*24/Number(t):r,className:yy("lucide",l),...!u&&!x2(c)&&{"aria-hidden":"true"},...c},[...d.map(([f,x])=>q.createElement(f,x)),...Array.isArray(u)?u:[u]]));const Oe=(s,t)=>{const r=q.forwardRef(({className:n,...l},u)=>q.createElement(w2,{ref:u,iconNode:t,className:yy(`lucide-${_2(P_(s))}`,`lucide-${s}`,n),...l}));return r.displayName=P_(s),r};const S2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pc=Oe("arrow-left",S2);const C2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],E2=Oe("arrow-right",C2);const k2=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],A2=Oe("book-open",k2);const R2=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],T2=Oe("brain",R2);const O2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],by=Oe("calendar",O2);const j2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fc=Oe("check",j2);const D2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],N2=Oe("chevron-down",D2);const L2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],M2=Oe("chevron-right",L2);const B2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rc=Oe("circle-alert",B2);const P2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],uf=Oe("circle-check-big",P2);const U2=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],H2=Oe("code-xml",U2);const I2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],hf=Oe("copy",I2);const z2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$2=Oe("download",z2);const q2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],U_=Oe("external-link",q2);const F2=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],H_=Oe("file-code",F2);const W2=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],df=Oe("file-text",W2);const K2=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],xy=Oe("file",K2);const V2=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],G2=Oe("folder",V2);const Y2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],X2=Oe("funnel",Y2);const J2=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Pf=Oe("github",J2);const Q2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Z2=Oe("heart",Q2);const ek=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],tk=Oe("library",ek);const ik=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],pc=Oe("loader-circle",ik);const sk=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],rk=Oe("log-out",sk);const nk=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ak=Oe("mail",nk);const ok=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],lk=Oe("pen-line",ok);const ck=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],uk=Oe("pen",ck);const hk=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],I_=Oe("play",hk);const dk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mc=Oe("plus",dk);const fk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pk=Oe("save",fk);const mk=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Uf=Oe("search",mk);const gk=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],vk=Oe("send",gk);const _k=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],wy=Oe("shopping-bag",_k);const yk=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Hf=Oe("sparkles",yk);const bk=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],If=Oe("terminal",bk);const xk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sy=Oe("trash-2",xk);const wk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Sk=Oe("trending-up",wk);const Ck=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],zf=Oe("upload",Ck);const Ek=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kk=Oe("user",Ek);const Ak=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gs=Oe("x",Ak);const Rk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Tk=Oe("zap",Rk);function Ok({onOpenAuth:s,onOpenCart:t,user:r,cartCount:n,onNavFind:l,onNavCd:u,onNavMan:d}){const c=ro();return w.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-pink-200 bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:w.jsxs("div",{className:"container flex h-16 items-center justify-between px-4 sm:px-8 max-w-7xl mx-auto",children:[w.jsxs("div",{className:"flex items-center gap-2 font-mono text-sm md:text-base",children:[w.jsxs("button",{onClick:()=>c("/"),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[w.jsx("span",{className:"text-2xl leading-none",children:""}),w.jsx("span",{className:"font-bold text-text-main font-candy text-lg",children:"~/ Candy-Shop"})]}),w.jsxs("div",{className:"flex items-center gap-1.5 ml-2 px-2 py-0.5 rounded-full bg-green-100 border border-green-200",children:[w.jsxs("span",{className:"relative flex h-2 w-2",children:[w.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),w.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),w.jsx("span",{className:"text-[10px] font-medium text-green-700 uppercase tracking-wider font-mono",children:"Open"})]})]}),w.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm font-mono text-text-muted",children:[w.jsxs("button",{onClick:l,className:"hover:text-primary transition-colors flex items-center gap-2 group",children:[w.jsx("span",{className:"text-secondary",children:"$"}),w.jsx("span",{className:"group-hover:translate-x-0.5 transition-transform",children:"find --sweet"})]}),w.jsxs("button",{onClick:u,className:"hover:text-primary transition-colors flex items-center gap-2 group",children:[w.jsx("span",{className:"text-secondary",children:"$"}),w.jsx("span",{className:"group-hover:translate-x-0.5 transition-transform",children:"cd /chocolates"})]}),w.jsxs("button",{onClick:d,className:"hover:text-primary transition-colors flex items-center gap-2 group",children:[w.jsx("span",{className:"text-secondary",children:"$"}),w.jsx("span",{className:"group-hover:translate-x-0.5 transition-transform",children:"man recipes"})]}),r&&w.jsxs(w.Fragment,{children:[w.jsxs("button",{onClick:()=>c("/skills/create"),className:"hover:text-primary transition-colors flex items-center gap-2 group",children:[w.jsx(mc,{className:"w-4 h-4"}),w.jsx("span",{className:"group-hover:translate-x-0.5 transition-transform",children:"create skills"})]}),w.jsxs("button",{onClick:()=>c("/skills/library"),className:"hover:text-primary transition-colors flex items-center gap-2 group",children:[w.jsx(tk,{className:"w-4 h-4"}),w.jsx("span",{className:"group-hover:translate-x-0.5 transition-transform",children:"my skills"})]})]})]}),w.jsxs("div",{className:"flex items-center gap-4 font-mono text-sm",children:[w.jsxs("button",{onClick:t,className:"flex items-center gap-2 hover:text-primary transition-colors relative",children:[w.jsx(wy,{className:"w-4 h-4"}),w.jsxs("span",{children:["[",n,"]"]})]}),r?w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-secondary/5 border border-secondary/20 rounded-full hover:bg-secondary/10 transition-colors",children:[r.user_metadata?.avatar_url?w.jsx("img",{src:r.user_metadata.avatar_url,alt:"Avatar",className:"w-5 h-5 rounded-full border border-secondary/20"}):w.jsx(kk,{className:"w-4 h-4 text-secondary"}),w.jsx("span",{className:"font-candy text-secondary text-xs",children:r.user_metadata?.full_name||r.email?.split("@")[0]||"Agent"})]}),w.jsx("button",{onClick:()=>Tn.auth.signOut(),className:"p-1.5 text-text-muted hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",title:"Sign Out",children:w.jsx(rk,{className:"w-4 h-4"})})]}):w.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-1.5 text-primary border border-primary/20 rounded hover:bg-primary/5 transition-colors",children:[w.jsx("span",{className:"text-secondary",children:"$"})," login"]})]})]})})}function ff({children:s,onOpenAuth:t,onOpenCart:r,user:n,cartCount:l,onNavFind:u,onNavCd:d,onNavMan:c}){return w.jsxs("div",{className:"flex min-h-screen flex-col font-mono text-text-main",children:[w.jsx(Ok,{onOpenAuth:t,onOpenCart:r,user:n,cartCount:l,onNavFind:u,onNavCd:d,onNavMan:c}),w.jsx("main",{className:"flex-1 w-full max-w-7xl mx-auto px-4 sm:px-8 py-8 md:py-12",children:s}),w.jsx("footer",{className:"w-full border-t border-pink-200 py-6 mt-12 bg-white/50 relative",children:w.jsxs("div",{className:"container max-w-7xl mx-auto px-4 flex items-center justify-between text-xs text-text-muted font-mono",children:[w.jsx("p",{className:"font-mono",children:'$ echo "Made with sugar, spice, and AI"'}),w.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"hover:text-primary transition-colors font-mono",children:"$ cd top"})]})})]})}function jk({onOpenDocs:s}){return w.jsx("section",{className:"relative pt-12 pb-20 lg:pt-20 lg:pb-32",children:w.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-8 items-center",children:[w.jsxs("div",{className:"flex flex-col items-start space-y-8",children:[w.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/5 border border-primary/20 text-primary text-xs font-mono font-medium",children:[w.jsx("span",{className:"flex h-1.5 w-1.5 rounded-full bg-primary"}),"v2.0.0 Sweet Release"]}),w.jsxs("div",{className:"relative",children:[w.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-candy font-bold tracking-tight text-text-main leading-[1.1]",children:["The Ultimate ",w.jsx("br",{}),"Candy-Shop",w.jsx("span",{className:"inline-block w-3 h-10 ml-2 -mb-1 bg-primary animate-pulse"})]}),w.jsx("p",{className:"mt-4 text-xl text-text-muted font-mono",children:w.jsxs("span",{className:"text-secondary",children:[">"," sudo install sweetness"]})})]}),w.jsx("p",{className:"text-lg text-text-muted max-w-lg leading-relaxed font-body",children:"Deploy happiness directly to your taste buds. Hand-crafted confectionary modules available for immediate consumption."}),w.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[w.jsxs("button",{onClick:()=>document.getElementById("skills-grid")?.scrollIntoView({behavior:"smooth"}),className:"h-12 px-6 bg-primary text-white rounded-md font-mono font-medium hover:bg-primary/90 transition-colors flex items-center gap-2 shadow-lg shadow-pink-200",children:[w.jsx(Uf,{className:"w-4 h-4"}),"Browse Treats"]}),w.jsxs("button",{onClick:s,className:"h-12 px-6 bg-white border border-pink-200 text-text-main rounded-md font-mono font-medium hover:bg-pink-50 transition-colors flex items-center gap-2",children:[w.jsx(df,{className:"w-4 h-4 text-text-muted"}),"Menu.md"]})]}),w.jsxs("div",{className:"flex items-center gap-8 pt-4",children:[w.jsx("div",{className:"flex -space-x-2",children:[1,2,3,4].map(t=>w.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-background bg-pink-100 flex items-center justify-center text-xs",children:""},t))}),w.jsxs("div",{className:"text-sm font-mono text-text-muted",children:[w.jsx("span",{className:"text-text-main font-bold",children:"5,000+"})," satisfied cravings"]})]})]}),w.jsxs("div",{className:"relative lg:ml-auto w-full max-w-lg",children:[w.jsxs("div",{className:"relative bg-white rounded-xl border border-pink-200 shadow-xl overflow-hidden",children:[w.jsxs("div",{className:"h-10 bg-pink-50 border-b border-pink-200 flex items-center px-4 justify-between",children:[w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("div",{className:"w-3 h-3 rounded-full bg-[#ff5f56] border border-[#e0443e]"}),w.jsx("div",{className:"w-3 h-3 rounded-full bg-[#ffbd2e] border border-[#dea123]"}),w.jsx("div",{className:"w-3 h-3 rounded-full bg-[#27c93f] border border-[#1aab29]"})]}),w.jsx("div",{className:"text-xs font-mono text-text-muted",children:"sugar_levels.tsx"}),w.jsx("div",{className:"w-12"})]}),w.jsxs("div",{className:"p-6",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-sm text-text-muted font-mono mb-1",children:"Weekly Sugar Intake"}),w.jsx("div",{className:"text-2xl font-bold font-candy text-primary",children:"High Voltage"})]}),w.jsx("div",{className:"p-2 bg-pink-100 rounded-lg",children:w.jsx(Sk,{className:"w-5 h-5 text-primary"})})]}),w.jsx("div",{className:"h-32 flex items-end gap-2 justify-between px-2",children:[40,65,45,80,55,90,70,85,60,95].map((t,r)=>w.jsx("div",{className:"w-full bg-pink-100 rounded-t-sm relative group",children:w.jsx("div",{className:"absolute bottom-0 w-full bg-primary rounded-t-sm transition-all duration-500 group-hover:bg-secondary",style:{height:`${t}%`}})},r))})]})]}),w.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-[#282a36] text-[#f8f8f2] p-4 rounded-lg shadow-xl border border-white/10 font-mono text-sm max-w-[240px] hidden sm:block transform hover:-translate-y-1 transition-transform",children:[w.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/40 mb-2",children:[w.jsx(H2,{className:"w-3 h-3"}),w.jsx("span",{children:"inventory.ts"})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-pink-400",children:"const"})," ",w.jsx("span",{className:"text-green-400",children:"gummies"})," = ",w.jsx("span",{className:"text-purple-400",children:"Infinity"}),";"]}),w.jsx("div",{className:"text-blue-300 text-xs mt-1",children:"// always fresh"})]})]})]})})}const to=[{id:"financial-analyst",name:"Financial Analyst",description:"Expert at analyzing financial data, reading 10-K reports, and generating investment memos.",category:"Analysis",icon:"",color:"bg-green-100 border-green-200 text-green-700",installCommand:"clone https://github.com/anthropics/skills/financial-analyst",popularity:99,config:{"financial-analyst":{source:"github.com/anthropics/skills",path:"financial-analyst",capabilities:["web-search","pdf-analysis"]}}},{id:"superpowers-planner",name:"Superpowers Planner",description:"Enhances Claude Code with TDD, YAGNI, and structured planning capabilities.",category:"Development",icon:"",color:"bg-yellow-100 border-yellow-200 text-yellow-700",installCommand:"/plugin install superpowers@superpowers-marketplace",popularity:95,config:{superpowers:{plugin:"obra/superpowers",settings:{mode:"planner",tdd:!0}}}},{id:"research-agent",name:"Deep Research",description:"Automated researcher that can browse the web, synthesize information, and write reports.",category:"Knowledge",icon:"",color:"bg-blue-100 border-blue-200 text-blue-700",installCommand:"clone https://github.com/anthropics/skills/research-agent",popularity:92,config:{"research-agent":{source:"github.com/anthropics/skills",capabilities:["browser-tool","filesystem"]}}},{id:"web-scraper",name:"Universal Scraper",description:"Extract clean markdown from any URL using Composio skills.",category:"Tools",icon:"",color:"bg-purple-100 border-purple-200 text-purple-700",installCommand:"composio add web-scraper",popularity:88,config:{composio:{integrations:["web-scraper"],api_key:"YOUR_KEY"}}},{id:"customer-support",name:"Support Agent",description:"Handle customer tickets, draft empathetic responses, and categorize issues.",category:"Productivity",icon:"",color:"bg-pink-100 border-pink-200 text-pink-700",installCommand:"clone https://github.com/anthropics/skills/customer-support",popularity:85,config:{"support-agent":{source:"github.com/anthropics/skills/customer-support"}}},{id:"data-scientist",name:"Data Scientist",description:"Analyze CSV files, generate Python visualizations, and run statistical tests.",category:"Analysis",icon:"",color:"bg-indigo-100 border-indigo-200 text-indigo-700",installCommand:"clone https://github.com/VoltAgent/awesome-claude-skills/data-sci",popularity:82,config:{"data-sci":{tools:["python-execution","file-upload"]}}}];function Dk({skill:s,onClose:t}){const[r,n]=q.useState(!1);if(!s)return null;const l=JSON.stringify(s.config,null,2),u=()=>{navigator.clipboard.writeText(l),n(!0),setTimeout(()=>n(!1),2e3)};return w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:t}),w.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col max-h-[90vh]",children:[w.jsxs("div",{className:`h-32 ${s.color.replace("text-","bg-").replace("100","50")} relative flex items-center justify-center`,children:[w.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 bg-white/50 hover:bg-white rounded-full transition-colors",children:w.jsx(gs,{className:"w-5 h-5 text-gray-600"})}),w.jsx("div",{className:"text-6xl animate-bounce duration-[2000ms]",children:s.icon})]}),w.jsxs("div",{className:"p-8 overflow-y-auto",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:s.category}),w.jsx("div",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Ready to Serve"})]}),w.jsx("h2",{className:"text-3xl font-candy font-bold text-gray-900 mb-2",children:s.name}),w.jsx("p",{className:"text-gray-600 text-lg mb-8 font-body leading-relaxed",children:s.description}),w.jsxs("div",{className:"mb-8",children:[w.jsxs("h3",{className:"text-sm font-bold text-gray-900 mb-2 flex items-center gap-2",children:[w.jsx(If,{className:"w-4 h-4"}),"Quick Install"]}),w.jsxs("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg font-mono text-sm overflow-x-auto flex items-center justify-between group",children:[w.jsx("code",{children:s.installCommand}),w.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s.installCommand)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-white/10 rounded",children:w.jsx(hf,{className:"w-4 h-4"})})]})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"Claude Desktop Config"}),w.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-sm text-primary font-medium hover:text-pink-600 transition-colors",children:[r?w.jsx(fc,{className:"w-4 h-4"}):w.jsx(hf,{className:"w-4 h-4"}),r?"Copied!":"Copy Config"]})]}),w.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 font-mono text-sm text-gray-700 overflow-auto max-h-64 shadow-inner",children:w.jsx("pre",{children:l})})]})]}),w.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:w.jsx("button",{onClick:t,className:"px-6 py-2 bg-primary text-white rounded-lg font-medium hover:bg-pink-600 transition-colors shadow-lg shadow-pink-200",children:"Done"})})]})]})}const Bl="user_skills",St={getSkills:()=>{try{return JSON.parse(localStorage.getItem(Bl)||"[]")}catch{return[]}},saveSkill:s=>{try{const t=St.getSkills(),r={id:s.id||`skill-${Date.now()}`,userId:s.userId||"",name:s.name||"Untitled Skill",description:s.description||"",category:s.category||"Custom",icon:s.icon||"",color:s.color||"bg-indigo-100",config:s.config||{capabilities:[],systemPrompt:"",parameters:{}},sourceFiles:s.sourceFiles||[],analysisContext:s.analysisContext||{workDomain:[],technicalSkills:[],experiencePatterns:[],keyTopics:[],suggestedName:s.name||"Untitled",suggestedDescription:s.description||"",suggestedCategory:s.category||"Custom",suggestedCapabilities:[],filesSummary:[],confidence:0,systemPrompt:""},installCommand:s.installCommand||"",popularity:s.popularity||0,status:s.status||"draft",isPublic:s.isPublic||!1,origin:s.origin||"created",createdAt:s.createdAt instanceof Date?s.createdAt:new Date(s.createdAt||Date.now()),updatedAt:new Date};t.push(r),localStorage.setItem(Bl,JSON.stringify(t))}catch(t){throw console.error("Failed to save skill:",t),t}},deleteSkill:s=>{try{const r=St.getSkills().filter(n=>n.id!==s);localStorage.setItem(Bl,JSON.stringify(r))}catch(t){throw console.error("Failed to delete skill:",t),t}},updateSkill:(s,t)=>{try{const r=St.getSkills(),n=r.findIndex(l=>l.id===s);n!==-1&&(r[n]={...r[n],...t,updatedAt:new Date},localStorage.setItem(Bl,JSON.stringify(r)))}catch(r){throw console.error("Failed to update skill:",r),r}},getSkillById:s=>St.getSkills().find(r=>r.id===s),saveExecutionHistory:(s,t,r,n)=>{try{const l=`skill_history_${s}`,u=JSON.parse(localStorage.getItem(l)||"[]");u.push({id:`exec-${Date.now()}`,input:t,output:r,timestamp:new Date().toISOString(),duration:n}),u.length>50&&u.shift(),localStorage.setItem(l,JSON.stringify(u))}catch(l){console.error("Failed to save execution history:",l)}},getExecutionHistory:s=>{try{const t=`skill_history_${s}`;return JSON.parse(localStorage.getItem(t)||"[]")}catch{return[]}},getLikes:()=>{try{return JSON.parse(localStorage.getItem("liked_skills")||"[]")}catch{return[]}},saveLike:s=>{try{const t=St.getLikes();t.includes(s)||(t.push(s),localStorage.setItem("liked_skills",JSON.stringify(t)))}catch(t){throw console.error("Failed to save like:",t),t}},removeLike:s=>{try{const r=St.getLikes().filter(n=>n!==s);localStorage.setItem("liked_skills",JSON.stringify(r))}catch(t){throw console.error("Failed to remove like:",t),t}},isLiked:s=>St.getLikes().includes(s)};function Nk({searchQuery:s,setSearchQuery:t,categoryFilter:r,setCategoryFilter:n,cart:l,onToggleCart:u,user:d,onOpenAuth:c}){const[h,f]=q.useState(null),[x,g]=q.useState(new Set);q.useEffect(()=>{const E=St.getLikes();g(new Set(E))},[]);const S=E=>{if(!d){c();return}x.has(E)?(St.removeLike(E),g(p=>{const _=new Set(p);return _.delete(E),_})):(St.saveLike(E),g(p=>new Set(p).add(E)))},A=q.useMemo(()=>to.filter(E=>{const C=E.name.toLowerCase().includes(s.toLowerCase())||E.description.toLowerCase().includes(s.toLowerCase()),p=r?E.category===r:!0;return C&&p}),[s,r]);return w.jsxs(w.Fragment,{children:[w.jsx("section",{className:"py-20 bg-[#F9FAFB]",id:"skills-grid",children:w.jsxs("div",{className:"container max-w-7xl mx-auto px-4",children:[w.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-12",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-candy font-bold mb-2 text-text-main",children:r?`${r} Modules`:"Freshly Baked Skills"}),w.jsxs("div",{className:"flex items-center gap-2 text-text-muted font-mono text-sm",children:[w.jsx("span",{children:"$ ls ./inventory"}),r&&w.jsxs("button",{onClick:()=>n(null),className:"px-2 py-0.5 bg-pink-100 text-pink-600 rounded hover:bg-pink-200 transition-colors flex items-center gap-1",children:['--filter="',r,'" ',w.jsx(gs,{className:"w-3 h-3"})]})]})]}),w.jsx("div",{className:"w-full md:w-96 relative group",children:w.jsxs("div",{className:"relative",children:[w.jsx(Uf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted"}),w.jsx("input",{id:"search-input",type:"text",value:s,onChange:E=>t(E.target.value),placeholder:"Search skills...",className:"w-full h-10 pl-10 pr-4 bg-white border border-gray-200 rounded-lg text-sm font-mono focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent transition-all placeholder:text-gray-400 shadow-sm"})]})})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:A.map(E=>w.jsxs("div",{onClick:()=>f(E),className:"group bg-white rounded-xl border border-gray-200 shadow-sm hover:border-pink-300 hover:shadow-md transition-all duration-300 flex flex-col h-full overflow-hidden cursor-pointer relative",children:[w.jsxs("div",{className:"h-10 px-4 border-b border-gray-100 flex items-center bg-white relative",children:[w.jsxs("div",{className:"flex items-center gap-1.5 absolute left-4",children:[w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FF5F57]"}),w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FEBC2E]"}),w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#28C840]"})]}),w.jsxs("div",{className:"mx-auto text-xs font-mono text-gray-400 font-medium",children:[E.id,".ts"]})]}),w.jsxs("div",{className:"p-5 flex-1 font-mono text-sm leading-relaxed relative",children:[w.jsxs("div",{className:"absolute left-4 top-5 bottom-5 w-6 text-right text-gray-200 select-none text-xs flex flex-col gap-1",children:[w.jsx("span",{children:"1"}),w.jsx("span",{children:"2"}),w.jsx("span",{children:"3"}),w.jsx("span",{children:"4"})]}),w.jsxs("div",{className:"pl-10",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w.jsx("span",{className:"text-purple-600 font-bold",children:"export"}),w.jsx("span",{className:"text-blue-600 font-bold",children:E.name.replace(/\s+/g,"")})]}),w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx("span",{className:"text-purple-600",children:"from"}),w.jsxs("span",{className:"text-green-600 text-xs truncate",children:['"',E.installCommand.split(" ").pop(),'"']})]}),w.jsxs("div",{className:"text-gray-400 italic text-xs leading-5 border-l-2 border-gray-100 pl-3 py-1",children:["/** ",w.jsx("br",{}),"* ",E.description," ",w.jsx("br",{}),"*/"]})]})]}),w.jsxs("div",{className:"h-10 px-4 border-t border-gray-100 bg-[#FAFAFA] flex items-center justify-between text-xs font-mono text-gray-500",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(by,{className:"w-3 h-3"}),w.jsx("span",{children:"Updated today"})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("button",{onClick:C=>{C.stopPropagation(),S(E.id)},className:"hover:text-pink-500 transition-colors",children:w.jsx(Z2,{className:`w-3.5 h-3.5 ${x.has(E.id)?"fill-pink-500 text-pink-500":""}`})}),w.jsx("button",{onClick:C=>{C.stopPropagation(),u(E.id)},className:`flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] uppercase font-bold tracking-wide transition-all border ${l.has(E.id)?"bg-green-50 border-green-200 text-green-600":"bg-white border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-500"}`,children:l.has(E.id)?w.jsxs(w.Fragment,{children:[w.jsx(fc,{className:"w-3 h-3"}),w.jsx("span",{children:"In Bag"})]}):w.jsxs(w.Fragment,{children:[w.jsx(wy,{className:"w-3 h-3"}),w.jsx("span",{children:"Add"})]})})]})]})]},E.id))}),A.length===0&&w.jsxs("div",{className:"text-center py-20 text-gray-400 font-mono",children:['No skills found matching "',s,'" :(']})]})}),w.jsx(Dk,{skill:h,onClose:()=>f(null)})]})}const Lk=[{name:"Knowledge",count:12,exports:["search","maps","academic"]},{name:"Tools",count:8,exports:["filesystem","browser","screenshot"]},{name:"Development",count:24,exports:["github","postgres","sentry"]},{name:"Productivity",count:15,exports:["notion","slack","calendar"]},{name:"Analysis",count:6,exports:["csv","sql","graph"]},{name:"Creative",count:4,exports:["image-gen","music","text-to-speech"]}];function Mk({onSelectCategory:s}){return w.jsx("section",{className:"py-20 bg-pink-50 border-t border-pink-200",id:"categories-section",children:w.jsxs("div",{className:"container max-w-7xl mx-auto px-4",children:[w.jsxs("h2",{className:"text-2xl font-bold mb-8 font-candy flex items-center gap-3 text-text-main",children:[w.jsx(G2,{className:"w-6 h-6 text-primary"}),w.jsx("span",{children:"Skill Directories"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Lk.map((t,r)=>w.jsxs("div",{onClick:()=>s(t.name),className:"group bg-white p-6 rounded-xl border border-pink-200 shadow-sm hover:shadow-candy transition-all cursor-pointer",children:[w.jsxs("div",{className:"font-mono text-sm",children:[w.jsxs("div",{className:"text-pink-300 mb-2",children:["// ",t.count," modules"]}),w.jsxs("div",{className:"text-primary mb-1",children:['"',t.name.toLowerCase(),'": ',w.jsx("span",{className:"text-text-main",children:"{"})]}),w.jsxs("div",{className:"pl-4 text-text-muted",children:[w.jsx("span",{className:"text-secondary",children:"exports"}),": [",t.exports.map((n,l)=>w.jsxs("span",{children:[w.jsxs("span",{className:"text-accent",children:["'",n,"'"]}),l<t.exports.length-1&&", "]},l)),"]"]}),w.jsx("div",{className:"text-text-main",children:"}"})]}),w.jsxs("div",{className:"mt-4 pt-4 border-t border-pink-100 flex items-center justify-between text-xs font-mono text-text-muted group-hover:text-primary transition-colors",children:[w.jsxs("span",{children:["$ cd ./",t.name.toLowerCase()," && ls"]}),w.jsx(E2,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})]})]},r))})]})})}const Bk=[{name:"Anthropic Skills",description:"Official Agent Skills from Anthropic. The gold standard for extending Claude.",url:"https://github.com/anthropics/skills",icon:w.jsx(Pf,{className:"w-5 h-5 text-gray-700"}),color:"border-slate-200 hover:border-slate-400"},{name:"Obra Superpowers",description:"Core skills library to make Claude Code smarter, focused on TDD and planning.",url:"https://github.com/obra/superpowers",icon:w.jsx(Tk,{className:"w-5 h-5 text-yellow-500"}),color:"border-yellow-200 hover:border-yellow-400"},{name:"Awesome Claude Skills",description:"Curated list of the best community-driven skills and prompts.",url:"https://github.com/ComposioHQ/awesome-claude-skills",icon:w.jsx("span",{className:"text-xl",children:""}),color:"border-purple-200 hover:border-purple-400"}];function Pk(){return w.jsx("section",{className:"py-20 bg-gray-50 border-t border-gray-200",children:w.jsxs("div",{className:"container max-w-7xl mx-auto px-4",children:[w.jsxs("h2",{className:"text-2xl font-bold mb-8 font-candy flex items-center gap-3 text-text-main",children:[w.jsx(U_,{className:"w-6 h-6 text-primary"}),w.jsx("span",{children:"Community Aisles (External)"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Bk.map((s,t)=>w.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:`group bg-white p-6 rounded-xl border shadow-sm transition-all hover:shadow-md flex items-start gap-4 ${s.color}`,children:[w.jsx("div",{className:"mt-1",children:s.icon}),w.jsxs("div",{children:[w.jsxs("h3",{className:"font-bold text-gray-900 group-hover:text-primary transition-colors flex items-center gap-2",children:[s.name,w.jsx(U_,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]}),w.jsx("p",{className:"text-sm text-gray-500 mt-2 leading-relaxed",children:s.description})]})]},t))})]})})}const Uk=[{q:"Is this sugar-free?",a:"We have a dedicated module for sugar-free options. Run `$ npm install @candy/sugar-free` to verify."},{q:"Do you ship internationally?",a:"Yes! We deploy happiness globally. Check our shipping manifest for restricted regions."},{q:"Can I return open wrappers?",a:"Negative. Once executed, consumption is irreversible. Please review our `REFUND_POLICY.md`."},{q:"Bulk API access?",a:"For wholesale orders, please authenticate as an enterprise partner using our Wholesale API."}];function Hk(){const[s,t]=q.useState(0);return w.jsx("section",{className:"py-20 bg-background",children:w.jsx("div",{className:"container max-w-4xl mx-auto px-4",children:w.jsxs("div",{className:"bg-white rounded-xl border border-pink-200 shadow-candy overflow-hidden",children:[w.jsxs("div",{className:"h-10 bg-pink-50 border-b border-pink-200 flex items-center px-4 gap-2",children:[w.jsx(xy,{className:"w-4 h-4 text-pink-400"}),w.jsx("span",{className:"text-sm font-mono text-text-main",children:"FAQ.md"})]}),w.jsxs("div",{className:"p-8",children:[w.jsx("h2",{className:"text-3xl font-candy font-bold mb-8 text-primary border-b border-pink-100 pb-4",children:"# Frequently Asked Questions"}),w.jsx("div",{className:"space-y-4",children:Uk.map((r,n)=>w.jsxs("div",{className:"border border-pink-100 rounded-lg overflow-hidden",children:[w.jsxs("button",{onClick:()=>t(s===n?null:n),className:"w-full flex items-center gap-3 p-4 text-left hover:bg-pink-50 transition-colors font-mono text-sm",children:[s===n?w.jsx(N2,{className:"w-4 h-4 text-primary"}):w.jsx(M2,{className:"w-4 h-4 text-text-muted"}),w.jsxs("span",{className:"text-secondary font-bold",children:["## ",n+1,". ",r.q]})]}),s===n&&w.jsx("div",{className:"px-4 pb-4 pl-11 text-text-muted text-sm leading-relaxed border-t border-pink-100 bg-pink-50/30 pt-4 font-body",children:r.a})]},n))})]})]})})})}function Ik({isOpen:s,onClose:t}){const[r,n]=q.useState(!1),[l,u]=q.useState(null);if(!s)return null;const d=async c=>{n(!0),u(null);try{const h=`${window.location.origin}/auth/callback`,{error:f}=await Tn.auth.signInWithOAuth({provider:c,options:{redirectTo:h}});if(f)throw f}catch(h){u(h.message),n(!1)}};return w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:t}),w.jsxs("div",{className:"relative w-full max-w-sm bg-white rounded-3xl shadow-2xl p-8 animate-in fade-in zoom-in duration-200 border border-gray-100",children:[w.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 rounded-full transition-colors",children:w.jsx(gs,{className:"w-5 h-5"})}),w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"mx-auto w-12 h-12 bg-pink-50 rounded-full flex items-center justify-center mb-4 text-2xl",children:""}),w.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-sans",children:"Welcome Back"}),w.jsx("p",{className:"text-gray-500 text-sm mt-2 font-mono",children:"Sign in to access your sweet inventory."})]}),l&&w.jsx("div",{className:"mb-6 p-3 bg-red-50 border border-red-100 text-red-600 text-xs rounded-lg font-medium text-center",children:l}),w.jsx("div",{className:"space-y-3",children:w.jsxs("button",{onClick:()=>d("google"),disabled:r,className:"w-full h-12 flex items-center justify-center gap-3 bg-white border border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-gray-50 hover:border-gray-400 transition-all active:scale-[0.98] disabled:opacity-50",children:[w.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[w.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),w.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),w.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),w.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})}),w.jsxs("div",{className:"relative my-6",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-gray-200"})}),w.jsx("div",{className:"relative flex justify-center text-sm",children:w.jsx("span",{className:"px-2 bg-white text-gray-500 font-mono text-xs",children:"OR EMAIL"})})]}),w.jsxs("button",{className:"w-full h-10 flex items-center justify-center gap-2 text-gray-500 hover:bg-gray-50 rounded-lg transition-colors text-sm font-medium",children:[w.jsx(ak,{className:"w-4 h-4"}),"Sign in with Email code"]}),w.jsx("p",{className:"mt-8 text-center text-xs text-gray-400",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})]})]})}function zk(){const s=ro(),[t,r]=q.useState(null);return q.useEffect(()=>{(async()=>{try{await new Promise(d=>setTimeout(d,500));const{data:{session:l},error:u}=await Tn.auth.getSession();if(u){console.error("Error getting session:",u),r(u.message),setTimeout(()=>{s("/",{replace:!0})},2e3);return}if(window.location.hash&&window.history.replaceState(null,"",window.location.pathname),l)s("/",{replace:!0});else{const{data:{subscription:d}}=Tn.auth.onAuthStateChange((c,h)=>{c==="SIGNED_IN"&&h?(window.history.replaceState(null,"",window.location.pathname),s("/",{replace:!0}),d.unsubscribe()):c==="SIGNED_OUT"&&(r("Authentication failed. Please try again."),setTimeout(()=>{s("/",{replace:!0}),d.unsubscribe()},2e3))});setTimeout(()=>{d.unsubscribe(),t||(r("Authentication timeout. Please try again."),setTimeout(()=>{s("/",{replace:!0})},2e3))},5e3)}}catch(l){console.error("Auth callback error:",l),r("Authentication failed. Please try again."),setTimeout(()=>{s("/",{replace:!0})},2e3)}})()},[s,t]),w.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white",children:w.jsx("div",{className:"text-center",children:t?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),w.jsx("p",{className:"text-red-600 font-mono text-sm mb-2",children:t}),w.jsx("p",{className:"text-gray-500 font-mono text-xs",children:"Redirecting..."})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-8 h-8 border-4 border-pink-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),w.jsx("p",{className:"text-gray-600 font-mono text-sm",children:"Completing sign in..."})]})})})}function $k({isOpen:s,onClose:t,cartIds:r,onRemove:n,onClear:l,onPurchase:u}){const[d,c]=q.useState(!1),h=to.filter(S=>r.has(S.id)),f={mcpServers:h.reduce((S,A)=>({...S,...A.config}),{})},x=JSON.stringify(f,null,2),g=()=>{navigator.clipboard.writeText(x),c(!0),setTimeout(()=>c(!1),2e3)};return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:`fixed inset-0 bg-black/40 backdrop-blur-sm transition-opacity z-[100] ${s?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),w.jsxs("div",{className:`fixed inset-y-0 right-0 w-full max-w-md bg-white shadow-2xl transform transition-transform duration-300 z-[101] flex flex-col ${s?"translate-x-0":"translate-x-full"}`,children:[w.jsxs("div",{className:"h-16 border-b border-gray-100 flex items-center justify-between px-6 bg-gray-50",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"text-2xl",children:""}),w.jsx("h2",{className:"text-xl font-candy font-bold text-gray-900",children:"Your Bag"}),w.jsxs("span",{className:"bg-primary/10 text-primary text-xs font-bold px-2 py-1 rounded-full",children:[h.length," items"]})]}),w.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:w.jsx(gs,{className:"w-5 h-5 text-gray-500"})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:h.length===0?w.jsxs("div",{className:"text-center py-20 opacity-50",children:[w.jsx("div",{className:"text-6xl mb-4",children:""}),w.jsx("p",{className:"font-mono text-gray-500",children:"Your bag is empty."}),w.jsx("button",{onClick:t,className:"mt-4 text-primary hover:underline font-bold text-sm",children:"Browse Treats"})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"space-y-3",children:h.map(S=>w.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 border border-gray-100 rounded-xl group hover:border-pink-200 transition-colors",children:[w.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg ${S.color}`,children:S.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("h4",{className:"font-bold text-gray-800 text-sm truncate",children:S.name}),w.jsx("p",{className:"font-mono text-xs text-gray-400 truncate",children:S.id})]}),w.jsx("button",{onClick:()=>n(S.id),className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:w.jsx(Sy,{className:"w-4 h-4"})})]},S.id))}),w.jsxs("div",{className:"bg-gray-900 rounded-xl overflow-hidden mt-8 shadow-lg",children:[w.jsxs("div",{className:"bg-gray-800 px-4 py-2 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 font-mono",children:[w.jsx(If,{className:"w-3 h-3"}),"claude_desktop_config.json"]}),w.jsxs("button",{onClick:g,className:"text-xs text-white/80 hover:text-white flex items-center gap-1.5 bg-white/10 hover:bg-white/20 px-2 py-1 rounded transition-colors",children:[d?w.jsx(fc,{className:"w-3 h-3"}):w.jsx(hf,{className:"w-3 h-3"}),d?"Copied":"Copy"]})]}),w.jsx("div",{className:"p-4 overflow-x-auto",children:w.jsx("pre",{className:"text-xs text-green-400 font-mono",children:x})})]})]})}),h.length>0&&w.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 space-y-3",children:[w.jsxs("button",{onClick:g,className:"w-full py-3 bg-primary text-white rounded-xl font-bold font-candy text-lg shadow-lg shadow-pink-200 hover:bg-pink-600 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[w.jsx($2,{className:"w-5 h-5"}),"checkout --merge"]}),w.jsxs("button",{onClick:u,className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-bold font-candy text-lg shadow-lg shadow-green-200 hover:from-green-600 hover:to-emerald-600 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[w.jsx(fc,{className:"w-5 h-5"}),"Complete Purchase"]}),w.jsx("button",{onClick:l,className:"w-full py-2 text-gray-400 text-xs font-mono hover:text-red-500 transition-colors",children:"$ rm -rf ./bag/*"})]})]})]})}function qk({isOpen:s,onClose:t}){return s?w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:t}),w.jsxs("div",{className:"relative w-full max-w-3xl bg-white rounded-2xl shadow-window overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col max-h-[85vh]",children:[w.jsxs("div",{className:"h-12 bg-gray-100 border-b border-gray-200 flex items-center justify-between px-4 sticky top-0",children:[w.jsxs("div",{className:"flex items-center gap-2 text-gray-500 font-mono text-sm",children:[w.jsx(A2,{className:"w-4 h-4"}),w.jsx("span",{children:"Menu.md"})]}),w.jsx("button",{onClick:t,className:"hover:bg-gray-200 p-1 rounded transition-colors",children:w.jsx(gs,{className:"w-5 h-5 text-gray-500"})})]}),w.jsxs("div",{className:"p-8 overflow-y-auto prose prose-pink max-w-none",children:[w.jsx("h1",{className:"font-candy text-4xl mb-4 text-primary",children:"The Menu (Documentation)"}),w.jsx("p",{className:"lead font-body text-gray-600",children:"Welcome to the Candy Shop! Here you can find the sweetest skills for your Claude AI."}),w.jsx("h3",{children:" What is this?"}),w.jsxs("p",{children:["This is a curated collection of ",w.jsx("strong",{children:"Model Context Protocol (MCP)"}),' servers. Think of them as "skills" or "tools" that give Claude new capabilities, like searching the web, reading files, or accessing databases.']}),w.jsx("h3",{children:" How to Install"}),w.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 not-prose my-6",children:w.jsxs("ol",{className:"list-decimal list-inside space-y-2 font-mono text-sm text-gray-700",children:[w.jsx("li",{children:"Broswse the shop and add treats to your bag."}),w.jsx("li",{children:"Open your bag (top right)."}),w.jsxs("li",{children:["Click ",w.jsx("strong",{children:"Checkout"})," to copy the merged configuration."]}),w.jsxs("li",{children:["Paste it into your ",w.jsx("code",{children:"claude_desktop_config.json"})," file."]})]})}),w.jsx("h3",{children:" Config Location"}),w.jsx("p",{children:"You can find your config file at:"}),w.jsxs("ul",{className:"font-mono text-xs bg-gray-900 text-gray-300 p-4 rounded-lg list-none",children:[w.jsxs("li",{className:"mb-2",children:[w.jsx("span",{className:"text-pink-400",children:"macOS:"})," ~/Library/Application\\ Support/Claude/claude_desktop_config.json"]}),w.jsxs("li",{children:[w.jsx("span",{className:"text-blue-400",children:"Windows:"})," %APPDATA%\\Claude\\claude_desktop_config.json"]})]}),w.jsx("div",{className:"mt-8 pt-8 border-t border-gray-100 text-center",children:w.jsx("button",{onClick:t,className:"px-8 py-3 bg-primary text-white rounded-full font-bold shadow-lg hover:bg-pink-600 transition-colors",children:"Got it, let's shop!"})})]})]})]}):null}function Fk({onSelectMethod:s}){const t=[{id:"upload",title:"Upload Files",description:"Upload your local files and let AI analyze them to create a skill",icon:zf,color:"from-blue-500 to-blue-600"},{id:"manual",title:"Manual Creation",description:"Create a skill by manually entering all the details and configuration",icon:lk,color:"from-purple-500 to-purple-600"},{id:"github",title:"Import from GitHub",description:"Import a skill from a GitHub repository (skill.md file)",icon:Pf,color:"from-gray-700 to-gray-800"}];return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Creation Method"}),w.jsx("p",{className:"text-gray-600",children:"Select how you'd like to create your new skill"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map(r=>{const n=r.icon;return w.jsxs("button",{onClick:()=>s(r.id),className:"group relative overflow-hidden rounded-xl bg-white border-2 border-gray-200 hover:border-pink-500 transition-all hover:shadow-lg p-6 text-left",children:[w.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r.color} opacity-0 group-hover:opacity-5 transition-opacity`}),w.jsxs("div",{className:"relative z-10 space-y-4",children:[w.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${r.color} flex items-center justify-center text-white`,children:w.jsx(n,{className:"w-6 h-6"})}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-pink-600 transition-colors",children:r.title}),w.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.description})]}),w.jsx("div",{className:"pt-2",children:w.jsx("span",{className:"inline-flex items-center text-sm font-medium text-pink-600 group-hover:text-pink-700",children:"Get Started "})})]})]},r.id)})})]})}var xd={exports:{}},wd,z_;function Wk(){if(z_)return wd;z_=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wd=s,wd}var Sd,$_;function Kk(){if($_)return Sd;$_=1;var s=Wk();function t(){}function r(){}return r.resetWarningCache=t,Sd=function(){function n(d,c,h,f,x,g){if(g!==s){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}n.isRequired=n;function l(){return n}var u={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:l,element:n,elementType:n,instanceOf:l,node:n,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:r,resetWarningCache:t};return u.PropTypes=u,u},Sd}var q_;function Vk(){return q_||(q_=1,xd.exports=Kk()()),xd.exports}var Gk=Vk();const Ze=Oc(Gk),Yk=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function On(s,t,r){const n=Xk(s),{webkitRelativePath:l}=s,u=typeof t=="string"?t:typeof l=="string"&&l.length>0?l:`./${s.name}`;return typeof n.path!="string"&&F_(n,"path",u),F_(n,"relativePath",u),n}function Xk(s){const{name:t}=s;if(t&&t.lastIndexOf(".")!==-1&&!s.type){const n=t.split(".").pop().toLowerCase(),l=Yk.get(n);l&&Object.defineProperty(s,"type",{value:l,writable:!1,configurable:!1,enumerable:!0})}return s}function F_(s,t,r){Object.defineProperty(s,t,{value:r,writable:!1,configurable:!1,enumerable:!0})}const Jk=[".DS_Store","Thumbs.db"];function Qk(s){return Gs(this,void 0,void 0,function*(){return gc(s)&&Zk(s.dataTransfer)?sA(s.dataTransfer,s.type):eA(s)?tA(s):Array.isArray(s)&&s.every(t=>"getFile"in t&&typeof t.getFile=="function")?iA(s):[]})}function Zk(s){return gc(s)}function eA(s){return gc(s)&&gc(s.target)}function gc(s){return typeof s=="object"&&s!==null}function tA(s){return pf(s.target.files).map(t=>On(t))}function iA(s){return Gs(this,void 0,void 0,function*(){return(yield Promise.all(s.map(r=>r.getFile()))).map(r=>On(r))})}function sA(s,t){return Gs(this,void 0,void 0,function*(){if(s.items){const r=pf(s.items).filter(l=>l.kind==="file");if(t!=="drop")return r;const n=yield Promise.all(r.map(rA));return W_(Cy(n))}return W_(pf(s.files).map(r=>On(r)))})}function W_(s){return s.filter(t=>Jk.indexOf(t.name)===-1)}function pf(s){if(s===null)return[];const t=[];for(let r=0;r<s.length;r++){const n=s[r];t.push(n)}return t}function rA(s){if(typeof s.webkitGetAsEntry!="function")return K_(s);const t=s.webkitGetAsEntry();return t&&t.isDirectory?Ey(t):K_(s,t)}function Cy(s){return s.reduce((t,r)=>[...t,...Array.isArray(r)?Cy(r):[r]],[])}function K_(s,t){return Gs(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof s.getAsFileSystemHandle=="function"){const u=yield s.getAsFileSystemHandle();if(u===null)throw new Error(`${s} is not a File`);if(u!==void 0){const d=yield u.getFile();return d.handle=u,On(d)}}const n=s.getAsFile();if(!n)throw new Error(`${s} is not a File`);return On(n,(r=t?.fullPath)!==null&&r!==void 0?r:void 0)})}function nA(s){return Gs(this,void 0,void 0,function*(){return s.isDirectory?Ey(s):aA(s)})}function Ey(s){const t=s.createReader();return new Promise((r,n)=>{const l=[];function u(){t.readEntries(d=>Gs(this,void 0,void 0,function*(){if(d.length){const c=Promise.all(d.map(nA));l.push(c),u()}else try{const c=yield Promise.all(l);r(c)}catch(c){n(c)}}),d=>{n(d)})}u()})}function aA(s){return Gs(this,void 0,void 0,function*(){return new Promise((t,r)=>{s.file(n=>{const l=On(n,s.fullPath);t(l)},n=>{r(n)})})})}var Pl={},V_;function oA(){return V_||(V_=1,Pl.__esModule=!0,Pl.default=function(s,t){if(s&&t){var r=Array.isArray(t)?t:t.split(",");if(r.length===0)return!0;var n=s.name||"",l=(s.type||"").toLowerCase(),u=l.replace(/\/.*$/,"");return r.some(function(d){var c=d.trim().toLowerCase();return c.charAt(0)==="."?n.toLowerCase().endsWith(c):c.endsWith("/*")?u===c.replace(/\/.*$/,""):l===c})}return!0}),Pl}var lA=oA();const Cd=Oc(lA);function G_(s){return hA(s)||uA(s)||Ay(s)||cA()}function cA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uA(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function hA(s){if(Array.isArray(s))return mf(s)}function Y_(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,n)}return r}function X_(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y_(Object(r),!0).forEach(function(n){ky(s,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(r,n))})}return s}function ky(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function io(s,t){return pA(s)||fA(s,t)||Ay(s,t)||dA()}function dA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ay(s,t){if(s){if(typeof s=="string")return mf(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mf(s,t)}}function mf(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=s[r];return n}function fA(s,t){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var n=[],l=!0,u=!1,d,c;try{for(r=r.call(s);!(l=(d=r.next()).done)&&(n.push(d.value),!(t&&n.length===t));l=!0);}catch(h){u=!0,c=h}finally{try{!l&&r.return!=null&&r.return()}finally{if(u)throw c}}return n}}function pA(s){if(Array.isArray(s))return s}var mA=typeof Cd=="function"?Cd:Cd.default,gA="file-invalid-type",vA="file-too-large",_A="file-too-small",yA="too-many-files",bA=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=t.split(","),n=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:gA,message:"File type must be ".concat(n)}},J_=function(t){return{code:vA,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Q_=function(t){return{code:_A,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},xA={code:yA,message:"Too many files"};function Ry(s,t){var r=s.type==="application/x-moz-file"||mA(s,t);return[r,r?null:bA(t)]}function Ty(s,t,r){if(yr(s.size))if(yr(t)&&yr(r)){if(s.size>r)return[!1,J_(r)];if(s.size<t)return[!1,Q_(t)]}else{if(yr(t)&&s.size<t)return[!1,Q_(t)];if(yr(r)&&s.size>r)return[!1,J_(r)]}return[!0,null]}function yr(s){return s!=null}function wA(s){var t=s.files,r=s.accept,n=s.minSize,l=s.maxSize,u=s.multiple,d=s.maxFiles,c=s.validator;return!u&&t.length>1||u&&d>=1&&t.length>d?!1:t.every(function(h){var f=Ry(h,r),x=io(f,1),g=x[0],S=Ty(h,n,l),A=io(S,1),E=A[0],C=c?c(h):null;return g&&E&&!C})}function vc(s){return typeof s.isPropagationStopped=="function"?s.isPropagationStopped():typeof s.cancelBubble<"u"?s.cancelBubble:!1}function Ul(s){return s.dataTransfer?Array.prototype.some.call(s.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!s.target&&!!s.target.files}function Z_(s){s.preventDefault()}function SA(s){return s.indexOf("MSIE")!==-1||s.indexOf("Trident/")!==-1}function CA(s){return s.indexOf("Edge/")!==-1}function EA(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return SA(s)||CA(s)}function Hi(){for(var s=arguments.length,t=new Array(s),r=0;r<s;r++)t[r]=arguments[r];return function(n){for(var l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];return t.some(function(c){return!vc(n)&&c&&c.apply(void 0,[n].concat(u)),vc(n)})}}function kA(){return"showOpenFilePicker"in window}function AA(s){if(yr(s)){var t=Object.entries(s).filter(function(r){var n=io(r,2),l=n[0],u=n[1],d=!0;return Oy(l)||(console.warn('Skipped "'.concat(l,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),d=!1),(!Array.isArray(u)||!u.every(jy))&&(console.warn('Skipped "'.concat(l,'" because an invalid file extension was provided.')),d=!1),d}).reduce(function(r,n){var l=io(n,2),u=l[0],d=l[1];return X_(X_({},r),{},ky({},u,d))},{});return[{description:"Files",accept:t}]}return s}function RA(s){if(yr(s))return Object.entries(s).reduce(function(t,r){var n=io(r,2),l=n[0],u=n[1];return[].concat(G_(t),[l],G_(u))},[]).filter(function(t){return Oy(t)||jy(t)}).join(",")}function TA(s){return s instanceof DOMException&&(s.name==="AbortError"||s.code===s.ABORT_ERR)}function OA(s){return s instanceof DOMException&&(s.name==="SecurityError"||s.code===s.SECURITY_ERR)}function Oy(s){return s==="audio/*"||s==="video/*"||s==="image/*"||s==="text/*"||s==="application/*"||/\w+\/[-+.\w]+/g.test(s)}function jy(s){return/^.*\.[\w]+$/.test(s)}var jA=["children"],DA=["open"],NA=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],LA=["refKey","onChange","onClick"];function MA(s){return UA(s)||PA(s)||Dy(s)||BA()}function BA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PA(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function UA(s){if(Array.isArray(s))return gf(s)}function Ed(s,t){return zA(s)||IA(s,t)||Dy(s,t)||HA()}function HA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dy(s,t){if(s){if(typeof s=="string")return gf(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gf(s,t)}}function gf(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=s[r];return n}function IA(s,t){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var n=[],l=!0,u=!1,d,c;try{for(r=r.call(s);!(l=(d=r.next()).done)&&(n.push(d.value),!(t&&n.length===t));l=!0);}catch(h){u=!0,c=h}finally{try{!l&&r.return!=null&&r.return()}finally{if(u)throw c}}return n}}function zA(s){if(Array.isArray(s))return s}function e0(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,n)}return r}function lt(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e0(Object(r),!0).forEach(function(n){vf(s,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):e0(Object(r)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(r,n))})}return s}function vf(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function _c(s,t){if(s==null)return{};var r=$A(s,t),n,l;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(l=0;l<u.length;l++)n=u[l],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(r[n]=s[n])}return r}function $A(s,t){if(s==null)return{};var r={},n=Object.keys(s),l,u;for(u=0;u<n.length;u++)l=n[u],!(t.indexOf(l)>=0)&&(r[l]=s[l]);return r}var $f=q.forwardRef(function(s,t){var r=s.children,n=_c(s,jA),l=Ly(n),u=l.open,d=_c(l,DA);return q.useImperativeHandle(t,function(){return{open:u}},[u]),H0.createElement(q.Fragment,null,r(lt(lt({},d),{},{open:u})))});$f.displayName="Dropzone";var Ny={disabled:!1,getFilesFromEvent:Qk,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};$f.defaultProps=Ny;$f.propTypes={children:Ze.func,accept:Ze.objectOf(Ze.arrayOf(Ze.string)),multiple:Ze.bool,preventDropOnDocument:Ze.bool,noClick:Ze.bool,noKeyboard:Ze.bool,noDrag:Ze.bool,noDragEventsBubbling:Ze.bool,minSize:Ze.number,maxSize:Ze.number,maxFiles:Ze.number,disabled:Ze.bool,getFilesFromEvent:Ze.func,onFileDialogCancel:Ze.func,onFileDialogOpen:Ze.func,useFsAccessApi:Ze.bool,autoFocus:Ze.bool,onDragEnter:Ze.func,onDragLeave:Ze.func,onDragOver:Ze.func,onDrop:Ze.func,onDropAccepted:Ze.func,onDropRejected:Ze.func,onError:Ze.func,validator:Ze.func};var _f={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Ly(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=lt(lt({},Ny),s),r=t.accept,n=t.disabled,l=t.getFilesFromEvent,u=t.maxSize,d=t.minSize,c=t.multiple,h=t.maxFiles,f=t.onDragEnter,x=t.onDragLeave,g=t.onDragOver,S=t.onDrop,A=t.onDropAccepted,E=t.onDropRejected,C=t.onFileDialogCancel,p=t.onFileDialogOpen,_=t.useFsAccessApi,v=t.autoFocus,y=t.preventDropOnDocument,k=t.noClick,T=t.noKeyboard,j=t.noDrag,D=t.noDragEventsBubbling,R=t.onError,N=t.validator,U=q.useMemo(function(){return RA(r)},[r]),F=q.useMemo(function(){return AA(r)},[r]),I=q.useMemo(function(){return typeof p=="function"?p:t0},[p]),W=q.useMemo(function(){return typeof C=="function"?C:t0},[C]),Q=q.useRef(null),se=q.useRef(null),$=q.useReducer(qA,_f),Y=Ed($,2),M=Y[0],H=Y[1],z=M.isFocused,L=M.isFileDialogActive,V=q.useRef(typeof window<"u"&&window.isSecureContext&&_&&kA()),te=function(){!V.current&&L&&setTimeout(function(){if(se.current){var ve=se.current.files;ve.length||(H({type:"closeDialog"}),W())}},300)};q.useEffect(function(){return window.addEventListener("focus",te,!1),function(){window.removeEventListener("focus",te,!1)}},[se,L,W,V]);var oe=q.useRef([]),de=function(ve){Q.current&&Q.current.contains(ve.target)||(ve.preventDefault(),oe.current=[])};q.useEffect(function(){return y&&(document.addEventListener("dragover",Z_,!1),document.addEventListener("drop",de,!1)),function(){y&&(document.removeEventListener("dragover",Z_),document.removeEventListener("drop",de))}},[Q,y]),q.useEffect(function(){return!n&&v&&Q.current&&Q.current.focus(),function(){}},[Q,v,n]);var me=q.useCallback(function(fe){R?R(fe):console.error(fe)},[R]),B=q.useCallback(function(fe){fe.preventDefault(),fe.persist(),ui(fe),oe.current=[].concat(MA(oe.current),[fe.target]),Ul(fe)&&Promise.resolve(l(fe)).then(function(ve){if(!(vc(fe)&&!D)){var qe=ve.length,tt=qe>0&&wA({files:ve,accept:U,minSize:d,maxSize:u,multiple:c,maxFiles:h,validator:N}),Je=qe>0&&!tt;H({isDragAccept:tt,isDragReject:Je,isDragActive:!0,type:"setDraggedFiles"}),f&&f(fe)}}).catch(function(ve){return me(ve)})},[l,f,me,D,U,d,u,c,h,N]),J=q.useCallback(function(fe){fe.preventDefault(),fe.persist(),ui(fe);var ve=Ul(fe);if(ve&&fe.dataTransfer)try{fe.dataTransfer.dropEffect="copy"}catch{}return ve&&g&&g(fe),!1},[g,D]),ae=q.useCallback(function(fe){fe.preventDefault(),fe.persist(),ui(fe);var ve=oe.current.filter(function(tt){return Q.current&&Q.current.contains(tt)}),qe=ve.indexOf(fe.target);qe!==-1&&ve.splice(qe,1),oe.current=ve,!(ve.length>0)&&(H({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ul(fe)&&x&&x(fe))},[Q,x,D]),ce=q.useCallback(function(fe,ve){var qe=[],tt=[];fe.forEach(function(Je){var Ci=Ry(Je,U),Ct=Ed(Ci,2),Ei=Ct[0],Fe=Ct[1],ki=Ty(Je,d,u),Et=Ed(ki,2),hi=Et[0],Rt=Et[1],Pn=N?N(Je):null;if(Ei&&hi&&!Pn)qe.push(Je);else{var Un=[Fe,Rt];Pn&&(Un=Un.concat(Pn)),tt.push({file:Je,errors:Un.filter(function(Kc){return Kc})})}}),(!c&&qe.length>1||c&&h>=1&&qe.length>h)&&(qe.forEach(function(Je){tt.push({file:Je,errors:[xA]})}),qe.splice(0)),H({acceptedFiles:qe,fileRejections:tt,isDragReject:tt.length>0,type:"setFiles"}),S&&S(qe,tt,ve),tt.length>0&&E&&E(tt,ve),qe.length>0&&A&&A(qe,ve)},[H,c,U,d,u,h,S,A,E,N]),xe=q.useCallback(function(fe){fe.preventDefault(),fe.persist(),ui(fe),oe.current=[],Ul(fe)&&Promise.resolve(l(fe)).then(function(ve){vc(fe)&&!D||ce(ve,fe)}).catch(function(ve){return me(ve)}),H({type:"reset"})},[l,ce,me,D]),pe=q.useCallback(function(){if(V.current){H({type:"openDialog"}),I();var fe={multiple:c,types:F};window.showOpenFilePicker(fe).then(function(ve){return l(ve)}).then(function(ve){ce(ve,null),H({type:"closeDialog"})}).catch(function(ve){TA(ve)?(W(ve),H({type:"closeDialog"})):OA(ve)?(V.current=!1,se.current?(se.current.value=null,se.current.click()):me(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):me(ve)});return}se.current&&(H({type:"openDialog"}),I(),se.current.value=null,se.current.click())},[H,I,W,_,ce,me,F,c]),Pe=q.useCallback(function(fe){!Q.current||!Q.current.isEqualNode(fe.target)||(fe.key===" "||fe.key==="Enter"||fe.keyCode===32||fe.keyCode===13)&&(fe.preventDefault(),pe())},[Q,pe]),Ve=q.useCallback(function(){H({type:"focus"})},[]),dt=q.useCallback(function(){H({type:"blur"})},[]),Qt=q.useCallback(function(){k||(EA()?setTimeout(pe,0):pe())},[k,pe]),ke=function(ve){return n?null:ve},li=function(ve){return T?null:ke(ve)},ci=function(ve){return j?null:ke(ve)},ui=function(ve){D&&ve.stopPropagation()},Fi=q.useMemo(function(){return function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=fe.refKey,qe=ve===void 0?"ref":ve,tt=fe.role,Je=fe.onKeyDown,Ci=fe.onFocus,Ct=fe.onBlur,Ei=fe.onClick,Fe=fe.onDragEnter,ki=fe.onDragOver,Et=fe.onDragLeave,hi=fe.onDrop,Rt=_c(fe,NA);return lt(lt(vf({onKeyDown:li(Hi(Je,Pe)),onFocus:li(Hi(Ci,Ve)),onBlur:li(Hi(Ct,dt)),onClick:ke(Hi(Ei,Qt)),onDragEnter:ci(Hi(Fe,B)),onDragOver:ci(Hi(ki,J)),onDragLeave:ci(Hi(Et,ae)),onDrop:ci(Hi(hi,xe)),role:typeof tt=="string"&&tt!==""?tt:"presentation"},qe,Q),!n&&!T?{tabIndex:0}:{}),Rt)}},[Q,Pe,Ve,dt,Qt,B,J,ae,xe,T,j,n]),vs=q.useCallback(function(fe){fe.stopPropagation()},[]),Bt=q.useMemo(function(){return function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=fe.refKey,qe=ve===void 0?"ref":ve,tt=fe.onChange,Je=fe.onClick,Ci=_c(fe,LA),Ct=vf({accept:U,multiple:c,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ke(Hi(tt,xe)),onClick:ke(Hi(Je,vs)),tabIndex:-1},qe,se);return lt(lt({},Ct),Ci)}},[se,r,c,xe,n]);return lt(lt({},M),{},{isFocused:z&&!n,getRootProps:Fi,getInputProps:Bt,rootRef:Q,inputRef:se,open:ke(pe)})}function qA(s,t){switch(t.type){case"focus":return lt(lt({},s),{},{isFocused:!0});case"blur":return lt(lt({},s),{},{isFocused:!1});case"openDialog":return lt(lt({},_f),{},{isFileDialogActive:!0});case"closeDialog":return lt(lt({},s),{},{isFileDialogActive:!1});case"setDraggedFiles":return lt(lt({},s),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return lt(lt({},s),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return lt({},_f);default:return s}}function t0(){}const kd={text:[".txt",".md",".json"],document:[".pdf",".docx"],code:[".js",".ts",".py",".java",".tsx",".jsx"]},qf=[...kd.text,...kd.document,...kd.code],My=10*1024*1024,i0=10;function FA(s){const t="."+s.name.split(".").pop()?.toLowerCase();return qf.includes(t)}function WA(s){return s.size<=My}function KA(s){const t=[],r=[];return s.length>i0?(r.push({file:"general",error:`Maximum ${i0} files can be uploaded`}),{valid:t,errors:r}):(s.forEach(n=>{FA(n)?WA(n)?t.push(n):r.push({file:n.name,error:`File size exceeds limit (maximum ${My/1024/1024}MB)`}):r.push({file:n.name,error:`Unsupported file type. Supported formats: ${qf.join(", ")}`})}),{valid:t,errors:r})}function VA(s){if(s===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(t));return Math.round(s/Math.pow(t,n)*100)/100+" "+r[n]}function GA({onFilesSelected:s,maxFiles:t=10}){const[r,n]=q.useState([]),[l,u]=q.useState([]),d=q.useCallback(S=>{const{valid:A,errors:E}=KA(S);if(u(E),A.length>0){const C=[...r,...A].slice(0,t);n(C),s(C)}},[r,t,s]),{getRootProps:c,getInputProps:h,isDragActive:f}=Ly({onDrop:d,accept:{"text/plain":[".txt"],"text/markdown":[".md"],"application/json":[".json"],"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"text/javascript":[".js"],"text/typescript":[".ts"],"text/x-python":[".py"],"text/x-java":[".java"],"text/jsx":[".jsx"],"text/tsx":[".tsx"]},maxFiles:t}),x=S=>{const A=r.filter((E,C)=>C!==S);n(A),s(A)},g=()=>{n([]),u([]),s([])};return w.jsxs("div",{className:"w-full space-y-4",children:[w.jsxs("div",{...c(),className:`
          border-2 border-dashed rounded-xl p-12 text-center cursor-pointer
          transition-all duration-200
          ${f?"border-pink-500 bg-pink-50":"border-gray-300 bg-gray-50 hover:border-pink-400 hover:bg-pink-50/50"}
        `,children:[w.jsx("input",{...h()}),w.jsxs("div",{className:"flex flex-col items-center gap-4",children:[w.jsx("div",{className:`
            w-16 h-16 rounded-full flex items-center justify-center
            ${f?"bg-pink-200":"bg-gray-200"}
          `,children:w.jsx(zf,{className:`w-8 h-8 ${f?"text-pink-600":"text-gray-500"}`})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-medium text-gray-700 mb-1",children:f?"Drop files here":"Drag files here or click to select"}),w.jsxs("p",{className:"text-sm text-gray-500",children:["Supported formats: ",qf.join(", ")]}),w.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Max ",t," files, 10MB each"]})]})]})]}),l.length>0&&w.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx(rc,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Upload Errors"}),w.jsx("ul",{className:"space-y-1",children:l.map((S,A)=>w.jsxs("li",{className:"text-sm text-red-700",children:[w.jsxs("span",{className:"font-medium",children:[S.file,":"]})," ",S.error]},A))})]})]})}),r.length>0&&w.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[w.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:[r.length," file(s) selected"]}),w.jsx("button",{onClick:g,className:"text-xs text-gray-500 hover:text-red-600 transition-colors",children:"Clear all"})]}),w.jsx("div",{className:"space-y-2",children:r.map((S,A)=>w.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg group hover:bg-gray-100 transition-colors",children:[w.jsx(xy,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm font-medium text-gray-700 truncate",children:S.name}),w.jsx("p",{className:"text-xs text-gray-500",children:VA(S.size)})]}),w.jsx("button",{onClick:()=>x(A),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-red-100 rounded",children:w.jsx(gs,{className:"w-4 h-4 text-red-600"})})]},A))})]})]})}function YA({status:s,progress:t,currentFile:r,message:n}){const l=[{key:"uploading",label:"Upload Files",icon:df},{key:"extracting",label:"Extract Content",icon:df},{key:"analyzing",label:"AI Analysis",icon:T2},{key:"generating",label:"Generate Skill",icon:Hf}],u=l.findIndex(d=>d.key===s);return w.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-500 ease-out",style:{width:`${t}%`}})}),w.jsxs("div",{className:"absolute -top-1 right-0 text-xs font-mono text-gray-500",children:[t,"%"]})]}),w.jsx("div",{className:"flex items-center justify-between",children:l.map((d,c)=>{const h=d.icon,f=c===u,x=c<u,g=c>u;return w.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[w.jsx("div",{className:`
                  w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300
                  ${f?"bg-pink-500 text-white scale-110":""}
                  ${x?"bg-green-500 text-white":""}
                  ${g?"bg-gray-200 text-gray-400":""}
                `,children:x?w.jsx(uf,{className:"w-6 h-6"}):f?w.jsx(pc,{className:"w-6 h-6 animate-spin"}):w.jsx(h,{className:"w-6 h-6"})}),w.jsx("span",{className:`
                  text-xs font-medium text-center
                  ${f?"text-pink-600":""}
                  ${x?"text-green-600":""}
                  ${g?"text-gray-400":""}
                `,children:d.label})]},d.key)})}),w.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx(pc,{className:"w-5 h-5 text-pink-500 animate-spin flex-shrink-0 mt-0.5"}),w.jsxs("div",{className:"flex-1",children:[w.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:n}),r&&w.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["Processing: ",r]})]})]})}),w.jsx("div",{className:"text-center",children:w.jsx("p",{className:"text-xs text-gray-400 italic",children:XA(s)})})]})}function XA(s){const r={uploading:["Uploading your files to the cloud...","File upload in progress, please wait..."],extracting:["Reading your file content...","AI is understanding your documents...","Extracting key information..."],analyzing:["AI is deeply analyzing your professional domain...","Identifying your skills and experience...","This may take a moment, please be patient..."],generating:["Customizing skill configuration for you...","Generating your personal AI assistant...","Almost done..."]}[s]||["Processing..."];return r[Math.floor(Math.random()*r.length)]}const JA=["Knowledge","Tools","Productivity","Development","Analysis","Custom"],Ad={Knowledge:"Knowledge",Tools:"Tools",Productivity:"Productivity",Development:"Development",Analysis:"Analysis",Custom:"Custom"};function By({skill:s,analysisContext:t,onSave:r,onCancel:n}){const[l,u]=q.useState(s),[d]=q.useState(s),[c,h]=q.useState(!1),[f,x]=q.useState({}),[g,S]=q.useState(!1);q.useEffect(()=>{A(l)},[l]);const A=_=>{const v={};!_.name||_.name.trim().length===0?v.name="Skill name cannot be empty":_.name.length>50&&(v.name="Skill name cannot exceed 50 characters"),!_.description||_.description.trim().length===0?v.description="Skill description cannot be empty":_.description.length>500&&(v.description="Skill description cannot exceed 500 characters"),_.category||(v.category="Please select a category"),x(v)},E=async()=>{if(!(Object.keys(f).length>0)){h(!0);try{await r(l)}catch(_){console.error("Save error:",_)}finally{h(!1)}}},C=()=>{u(d),S(!1),n()},p=JSON.stringify(l)!==JSON.stringify(d);return w.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center",children:w.jsx(Hf,{className:"w-6 h-6 text-white"})}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Skill Preview"}),w.jsx("p",{className:"text-sm text-gray-500",children:g?"Edit your skill configuration":"View the generated skill"})]})]}),w.jsxs("button",{onClick:()=>S(!g),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[w.jsx(uk,{className:"w-4 h-4"}),g?"Preview Mode":"Edit Mode"]})]}),w.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[w.jsx("div",{className:"p-6 bg-gradient-to-br from-gray-50 to-white border-b border-gray-200",children:w.jsx("div",{className:"max-w-md mx-auto",children:w.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[w.jsxs("div",{className:"h-10 px-4 border-b border-gray-100 flex items-center bg-white relative",children:[w.jsxs("div",{className:"flex items-center gap-1.5 absolute left-4",children:[w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FF5F57]"}),w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FEBC2E]"}),w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#28C840]"})]}),w.jsxs("div",{className:"mx-auto text-xs font-mono text-gray-400 font-medium",children:[l.id||"new-skill",".ts"]})]}),w.jsxs("div",{className:"p-5 font-mono text-sm",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w.jsx("span",{className:"text-purple-600 font-bold",children:"export"}),w.jsx("span",{className:"text-blue-600 font-bold",children:l.name?.replace(/\s+/g,"")||"NewSkill"})]}),w.jsxs("div",{className:"text-gray-400 italic text-xs leading-5 border-l-2 border-gray-100 pl-3 py-1 mt-3",children:["/** ",w.jsx("br",{}),"* ",l.description||"Skill description"," ",w.jsx("br",{}),"*/"]})]}),w.jsxs("div",{className:"h-10 px-4 border-t border-gray-100 bg-[#FAFAFA] flex items-center justify-between text-xs font-mono text-gray-500",children:[w.jsx("span",{children:Ad[l.category]||"Category"}),w.jsx("span",{className:"text-pink-500",children:l.icon||""})]})]})})}),w.jsxs("div",{className:"p-6 space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Name *"}),g?w.jsx("input",{type:"text",value:l.name||"",onChange:_=>u({...l,name:_.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ${f.name?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Data Analysis Expert"}):w.jsx("div",{className:"px-4 py-2 bg-gray-50 rounded-lg text-gray-900",children:l.name||"Not set"}),f.name&&w.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[w.jsx(rc,{className:"w-3 h-3"}),f.name]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Description *"}),g?w.jsx("textarea",{value:l.description||"",onChange:_=>u({...l,description:_.target.value}),rows:4,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 resize-none ${f.description?"border-red-500":"border-gray-300"}`,placeholder:"Describe what this skill can do..."}):w.jsx("div",{className:"px-4 py-2 bg-gray-50 rounded-lg text-gray-900 whitespace-pre-wrap",children:l.description||"Not set"}),f.description&&w.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[w.jsx(rc,{className:"w-3 h-3"}),f.description]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),g?w.jsxs("select",{value:l.category||"",onChange:_=>u({...l,category:_.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ${f.category?"border-red-500":"border-gray-300"}`,children:[w.jsx("option",{value:"",children:"Select a category"}),JA.map(_=>w.jsx("option",{value:_,children:Ad[_]},_))]}):w.jsx("div",{className:"px-4 py-2 bg-gray-50 rounded-lg text-gray-900",children:l.category?Ad[l.category]:"Not set"}),f.category&&w.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[w.jsx(rc,{className:"w-3 h-3"}),f.category]})]}),w.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[w.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"AI Analysis Results"}),w.jsxs("div",{className:"space-y-2 text-xs text-blue-800",children:[w.jsxs("div",{children:[w.jsx("span",{className:"font-medium",children:"Work Domain:"})," ",t.workDomain.join(", ")]}),w.jsxs("div",{children:[w.jsx("span",{className:"font-medium",children:"Technical Skills:"})," ",t.technicalSkills.join(", ")]}),w.jsxs("div",{children:[w.jsx("span",{className:"font-medium",children:"Confidence:"})," ",(t.confidence*100).toFixed(0),"%"]})]})]})]})]}),w.jsxs("div",{className:"flex items-center justify-end gap-3",children:[w.jsxs("button",{onClick:C,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[w.jsx(gs,{className:"w-4 h-4 inline mr-2"}),"Cancel"]}),w.jsx("button",{onClick:E,disabled:c||Object.keys(f).length>0||!p,className:"px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-pink-500 to-purple-500 rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):w.jsxs(w.Fragment,{children:[w.jsx(pk,{className:"w-4 h-4 inline mr-2"}),"Save Skill"]})})]})]})}function Py(s,t){return function(){return s.apply(t,arguments)}}const{toString:QA}=Object.prototype,{getPrototypeOf:Ff}=Object,{iterator:Uc,toStringTag:Uy}=Symbol,Hc=(s=>t=>{const r=QA.call(t);return s[r]||(s[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Li=s=>(s=s.toLowerCase(),t=>Hc(t)===s),Ic=s=>t=>typeof t===s,{isArray:Bn}=Array,jn=Ic("undefined");function oo(s){return s!==null&&!jn(s)&&s.constructor!==null&&!jn(s.constructor)&&Xt(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Hy=Li("ArrayBuffer");function ZA(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&Hy(s.buffer),t}const eR=Ic("string"),Xt=Ic("function"),Iy=Ic("number"),lo=s=>s!==null&&typeof s=="object",tR=s=>s===!0||s===!1,nc=s=>{if(Hc(s)!=="object")return!1;const t=Ff(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Uy in s)&&!(Uc in s)},iR=s=>{if(!lo(s)||oo(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},sR=Li("Date"),rR=Li("File"),nR=Li("Blob"),aR=Li("FileList"),oR=s=>lo(s)&&Xt(s.pipe),lR=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||Xt(s.append)&&((t=Hc(s))==="formdata"||t==="object"&&Xt(s.toString)&&s.toString()==="[object FormData]"))},cR=Li("URLSearchParams"),[uR,hR,dR,fR]=["ReadableStream","Request","Response","Headers"].map(Li),pR=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function co(s,t,{allOwnKeys:r=!1}={}){if(s===null||typeof s>"u")return;let n,l;if(typeof s!="object"&&(s=[s]),Bn(s))for(n=0,l=s.length;n<l;n++)t.call(null,s[n],n,s);else{if(oo(s))return;const u=r?Object.getOwnPropertyNames(s):Object.keys(s),d=u.length;let c;for(n=0;n<d;n++)c=u[n],t.call(null,s[c],c,s)}}function zy(s,t){if(oo(s))return null;t=t.toLowerCase();const r=Object.keys(s);let n=r.length,l;for(;n-- >0;)if(l=r[n],t===l.toLowerCase())return l;return null}const wr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$y=s=>!jn(s)&&s!==wr;function yf(){const{caseless:s,skipUndefined:t}=$y(this)&&this||{},r={},n=(l,u)=>{const d=s&&zy(r,u)||u;nc(r[d])&&nc(l)?r[d]=yf(r[d],l):nc(l)?r[d]=yf({},l):Bn(l)?r[d]=l.slice():(!t||!jn(l))&&(r[d]=l)};for(let l=0,u=arguments.length;l<u;l++)arguments[l]&&co(arguments[l],n);return r}const mR=(s,t,r,{allOwnKeys:n}={})=>(co(t,(l,u)=>{r&&Xt(l)?Object.defineProperty(s,u,{value:Py(l,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(s,u,{value:l,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),s),gR=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),vR=(s,t,r,n)=>{s.prototype=Object.create(t.prototype,n),Object.defineProperty(s.prototype,"constructor",{value:s,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(s,"super",{value:t.prototype}),r&&Object.assign(s.prototype,r)},_R=(s,t,r,n)=>{let l,u,d;const c={};if(t=t||{},s==null)return t;do{for(l=Object.getOwnPropertyNames(s),u=l.length;u-- >0;)d=l[u],(!n||n(d,s,t))&&!c[d]&&(t[d]=s[d],c[d]=!0);s=r!==!1&&Ff(s)}while(s&&(!r||r(s,t))&&s!==Object.prototype);return t},yR=(s,t,r)=>{s=String(s),(r===void 0||r>s.length)&&(r=s.length),r-=t.length;const n=s.indexOf(t,r);return n!==-1&&n===r},bR=s=>{if(!s)return null;if(Bn(s))return s;let t=s.length;if(!Iy(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=s[t];return r},xR=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&Ff(Uint8Array)),wR=(s,t)=>{const n=(s&&s[Uc]).call(s);let l;for(;(l=n.next())&&!l.done;){const u=l.value;t.call(s,u[0],u[1])}},SR=(s,t)=>{let r;const n=[];for(;(r=s.exec(t))!==null;)n.push(r);return n},CR=Li("HTMLFormElement"),ER=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,l){return n.toUpperCase()+l}),s0=(({hasOwnProperty:s})=>(t,r)=>s.call(t,r))(Object.prototype),kR=Li("RegExp"),qy=(s,t)=>{const r=Object.getOwnPropertyDescriptors(s),n={};co(r,(l,u)=>{let d;(d=t(l,u,s))!==!1&&(n[u]=d||l)}),Object.defineProperties(s,n)},AR=s=>{qy(s,(t,r)=>{if(Xt(s)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=s[r];if(Xt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},RR=(s,t)=>{const r={},n=l=>{l.forEach(u=>{r[u]=!0})};return Bn(s)?n(s):n(String(s).split(t)),r},TR=()=>{},OR=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function jR(s){return!!(s&&Xt(s.append)&&s[Uy]==="FormData"&&s[Uc])}const DR=s=>{const t=new Array(10),r=(n,l)=>{if(lo(n)){if(t.indexOf(n)>=0)return;if(oo(n))return n;if(!("toJSON"in n)){t[l]=n;const u=Bn(n)?[]:{};return co(n,(d,c)=>{const h=r(d,l+1);!jn(h)&&(u[c]=h)}),t[l]=void 0,u}}return n};return r(s,0)},NR=Li("AsyncFunction"),LR=s=>s&&(lo(s)||Xt(s))&&Xt(s.then)&&Xt(s.catch),Fy=((s,t)=>s?setImmediate:t?((r,n)=>(wr.addEventListener("message",({source:l,data:u})=>{l===wr&&u===r&&n.length&&n.shift()()},!1),l=>{n.push(l),wr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Xt(wr.postMessage)),MR=typeof queueMicrotask<"u"?queueMicrotask.bind(wr):typeof process<"u"&&process.nextTick||Fy,BR=s=>s!=null&&Xt(s[Uc]),ne={isArray:Bn,isArrayBuffer:Hy,isBuffer:oo,isFormData:lR,isArrayBufferView:ZA,isString:eR,isNumber:Iy,isBoolean:tR,isObject:lo,isPlainObject:nc,isEmptyObject:iR,isReadableStream:uR,isRequest:hR,isResponse:dR,isHeaders:fR,isUndefined:jn,isDate:sR,isFile:rR,isBlob:nR,isRegExp:kR,isFunction:Xt,isStream:oR,isURLSearchParams:cR,isTypedArray:xR,isFileList:aR,forEach:co,merge:yf,extend:mR,trim:pR,stripBOM:gR,inherits:vR,toFlatObject:_R,kindOf:Hc,kindOfTest:Li,endsWith:yR,toArray:bR,forEachEntry:wR,matchAll:SR,isHTMLForm:CR,hasOwnProperty:s0,hasOwnProp:s0,reduceDescriptors:qy,freezeMethods:AR,toObjectSet:RR,toCamelCase:ER,noop:TR,toFiniteNumber:OR,findKey:zy,global:wr,isContextDefined:$y,isSpecCompliantForm:jR,toJSONObject:DR,isAsyncFn:NR,isThenable:LR,setImmediate:Fy,asap:MR,isIterable:BR};let Ee=class Wy extends Error{static from(t,r,n,l,u,d){const c=new Wy(t.message,r||t.code,n,l,u);return c.cause=t,c.name=t.name,d&&Object.assign(c,d),c}constructor(t,r,n,l,u){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),n&&(this.config=n),l&&(this.request=l),u&&(this.response=u,this.status=u.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ne.toJSONObject(this.config),code:this.code,status:this.status}}};Ee.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Ee.ERR_BAD_OPTION="ERR_BAD_OPTION";Ee.ECONNABORTED="ECONNABORTED";Ee.ETIMEDOUT="ETIMEDOUT";Ee.ERR_NETWORK="ERR_NETWORK";Ee.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Ee.ERR_DEPRECATED="ERR_DEPRECATED";Ee.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Ee.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Ee.ERR_CANCELED="ERR_CANCELED";Ee.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Ee.ERR_INVALID_URL="ERR_INVALID_URL";const PR=null;function bf(s){return ne.isPlainObject(s)||ne.isArray(s)}function Ky(s){return ne.endsWith(s,"[]")?s.slice(0,-2):s}function r0(s,t,r){return s?s.concat(t).map(function(l,u){return l=Ky(l),!r&&u?"["+l+"]":l}).join(r?".":""):t}function UR(s){return ne.isArray(s)&&!s.some(bf)}const HR=ne.toFlatObject(ne,{},null,function(t){return/^is[A-Z]/.test(t)});function zc(s,t,r){if(!ne.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,r=ne.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,p){return!ne.isUndefined(p[C])});const n=r.metaTokens,l=r.visitor||x,u=r.dots,d=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&ne.isSpecCompliantForm(t);if(!ne.isFunction(l))throw new TypeError("visitor must be a function");function f(E){if(E===null)return"";if(ne.isDate(E))return E.toISOString();if(ne.isBoolean(E))return E.toString();if(!h&&ne.isBlob(E))throw new Ee("Blob is not supported. Use a Buffer instead.");return ne.isArrayBuffer(E)||ne.isTypedArray(E)?h&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function x(E,C,p){let _=E;if(E&&!p&&typeof E=="object"){if(ne.endsWith(C,"{}"))C=n?C:C.slice(0,-2),E=JSON.stringify(E);else if(ne.isArray(E)&&UR(E)||(ne.isFileList(E)||ne.endsWith(C,"[]"))&&(_=ne.toArray(E)))return C=Ky(C),_.forEach(function(y,k){!(ne.isUndefined(y)||y===null)&&t.append(d===!0?r0([C],k,u):d===null?C:C+"[]",f(y))}),!1}return bf(E)?!0:(t.append(r0(p,C,u),f(E)),!1)}const g=[],S=Object.assign(HR,{defaultVisitor:x,convertValue:f,isVisitable:bf});function A(E,C){if(!ne.isUndefined(E)){if(g.indexOf(E)!==-1)throw Error("Circular reference detected in "+C.join("."));g.push(E),ne.forEach(E,function(_,v){(!(ne.isUndefined(_)||_===null)&&l.call(t,_,ne.isString(v)?v.trim():v,C,S))===!0&&A(_,C?C.concat(v):[v])}),g.pop()}}if(!ne.isObject(s))throw new TypeError("data must be an object");return A(s),t}function n0(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Wf(s,t){this._pairs=[],s&&zc(s,this,t)}const Vy=Wf.prototype;Vy.append=function(t,r){this._pairs.push([t,r])};Vy.toString=function(t){const r=t?function(n){return t.call(this,n,n0)}:n0;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function IR(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gy(s,t,r){if(!t)return s;const n=r&&r.encode||IR,l=ne.isFunction(r)?{serialize:r}:r,u=l&&l.serialize;let d;if(u?d=u(t,l):d=ne.isURLSearchParams(t)?t.toString():new Wf(t,l).toString(n),d){const c=s.indexOf("#");c!==-1&&(s=s.slice(0,c)),s+=(s.indexOf("?")===-1?"?":"&")+d}return s}class a0{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ne.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Yy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zR=typeof URLSearchParams<"u"?URLSearchParams:Wf,$R=typeof FormData<"u"?FormData:null,qR=typeof Blob<"u"?Blob:null,FR={isBrowser:!0,classes:{URLSearchParams:zR,FormData:$R,Blob:qR},protocols:["http","https","file","blob","url","data"]},Kf=typeof window<"u"&&typeof document<"u",xf=typeof navigator=="object"&&navigator||void 0,WR=Kf&&(!xf||["ReactNative","NativeScript","NS"].indexOf(xf.product)<0),KR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",VR=Kf&&window.location.href||"http://localhost",GR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Kf,hasStandardBrowserEnv:WR,hasStandardBrowserWebWorkerEnv:KR,navigator:xf,origin:VR},Symbol.toStringTag,{value:"Module"})),Ut={...GR,...FR};function YR(s,t){return zc(s,new Ut.classes.URLSearchParams,{visitor:function(r,n,l,u){return Ut.isNode&&ne.isBuffer(r)?(this.append(n,r.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...t})}function XR(s){return ne.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function JR(s){const t={},r=Object.keys(s);let n;const l=r.length;let u;for(n=0;n<l;n++)u=r[n],t[u]=s[u];return t}function Xy(s){function t(r,n,l,u){let d=r[u++];if(d==="__proto__")return!0;const c=Number.isFinite(+d),h=u>=r.length;return d=!d&&ne.isArray(l)?l.length:d,h?(ne.hasOwnProp(l,d)?l[d]=[l[d],n]:l[d]=n,!c):((!l[d]||!ne.isObject(l[d]))&&(l[d]=[]),t(r,n,l[d],u)&&ne.isArray(l[d])&&(l[d]=JR(l[d])),!c)}if(ne.isFormData(s)&&ne.isFunction(s.entries)){const r={};return ne.forEachEntry(s,(n,l)=>{t(XR(n),l,r,0)}),r}return null}function QR(s,t,r){if(ne.isString(s))try{return(t||JSON.parse)(s),ne.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(s)}const uo={transitional:Yy,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",l=n.indexOf("application/json")>-1,u=ne.isObject(t);if(u&&ne.isHTMLForm(t)&&(t=new FormData(t)),ne.isFormData(t))return l?JSON.stringify(Xy(t)):t;if(ne.isArrayBuffer(t)||ne.isBuffer(t)||ne.isStream(t)||ne.isFile(t)||ne.isBlob(t)||ne.isReadableStream(t))return t;if(ne.isArrayBufferView(t))return t.buffer;if(ne.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(u){if(n.indexOf("application/x-www-form-urlencoded")>-1)return YR(t,this.formSerializer).toString();if((c=ne.isFileList(t))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return zc(c?{"files[]":t}:t,h&&new h,this.formSerializer)}}return u||l?(r.setContentType("application/json",!1),QR(t)):t}],transformResponse:[function(t){const r=this.transitional||uo.transitional,n=r&&r.forcedJSONParsing,l=this.responseType==="json";if(ne.isResponse(t)||ne.isReadableStream(t))return t;if(t&&ne.isString(t)&&(n&&!this.responseType||l)){const d=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(t,this.parseReviver)}catch(c){if(d)throw c.name==="SyntaxError"?Ee.from(c,Ee.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ut.classes.FormData,Blob:Ut.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ne.forEach(["delete","get","head","post","put","patch"],s=>{uo.headers[s]={}});const ZR=ne.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eT=s=>{const t={};let r,n,l;return s&&s.split(`
`).forEach(function(d){l=d.indexOf(":"),r=d.substring(0,l).trim().toLowerCase(),n=d.substring(l+1).trim(),!(!r||t[r]&&ZR[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},o0=Symbol("internals");function La(s){return s&&String(s).trim().toLowerCase()}function ac(s){return s===!1||s==null?s:ne.isArray(s)?s.map(ac):String(s)}function tT(s){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(s);)t[n[1]]=n[2];return t}const iT=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Rd(s,t,r,n,l){if(ne.isFunction(n))return n.call(this,t,r);if(l&&(t=r),!!ne.isString(t)){if(ne.isString(n))return t.indexOf(n)!==-1;if(ne.isRegExp(n))return n.test(t)}}function sT(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function rT(s,t){const r=ne.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+r,{value:function(l,u,d){return this[n].call(this,t,l,u,d)},configurable:!0})})}let Jt=class{constructor(t){t&&this.set(t)}set(t,r,n){const l=this;function u(c,h,f){const x=La(h);if(!x)throw new Error("header name must be a non-empty string");const g=ne.findKey(l,x);(!g||l[g]===void 0||f===!0||f===void 0&&l[g]!==!1)&&(l[g||h]=ac(c))}const d=(c,h)=>ne.forEach(c,(f,x)=>u(f,x,h));if(ne.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(ne.isString(t)&&(t=t.trim())&&!iT(t))d(eT(t),r);else if(ne.isObject(t)&&ne.isIterable(t)){let c={},h,f;for(const x of t){if(!ne.isArray(x))throw TypeError("Object iterator must return a key-value pair");c[f=x[0]]=(h=c[f])?ne.isArray(h)?[...h,x[1]]:[h,x[1]]:x[1]}d(c,r)}else t!=null&&u(r,t,n);return this}get(t,r){if(t=La(t),t){const n=ne.findKey(this,t);if(n){const l=this[n];if(!r)return l;if(r===!0)return tT(l);if(ne.isFunction(r))return r.call(this,l,n);if(ne.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=La(t),t){const n=ne.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Rd(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let l=!1;function u(d){if(d=La(d),d){const c=ne.findKey(n,d);c&&(!r||Rd(n,n[c],c,r))&&(delete n[c],l=!0)}}return ne.isArray(t)?t.forEach(u):u(t),l}clear(t){const r=Object.keys(this);let n=r.length,l=!1;for(;n--;){const u=r[n];(!t||Rd(this,this[u],u,t,!0))&&(delete this[u],l=!0)}return l}normalize(t){const r=this,n={};return ne.forEach(this,(l,u)=>{const d=ne.findKey(n,u);if(d){r[d]=ac(l),delete r[u];return}const c=t?sT(u):String(u).trim();c!==u&&delete r[u],r[c]=ac(l),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ne.forEach(this,(n,l)=>{n!=null&&n!==!1&&(r[l]=t&&ne.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(l=>n.set(l)),n}static accessor(t){const n=(this[o0]=this[o0]={accessors:{}}).accessors,l=this.prototype;function u(d){const c=La(d);n[c]||(rT(l,d),n[c]=!0)}return ne.isArray(t)?t.forEach(u):u(t),this}};Jt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ne.reduceDescriptors(Jt.prototype,({value:s},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[r]=n}}});ne.freezeMethods(Jt);function Td(s,t){const r=this||uo,n=t||r,l=Jt.from(n.headers);let u=n.data;return ne.forEach(s,function(c){u=c.call(r,u,l.normalize(),t?t.status:void 0)}),l.normalize(),u}function Jy(s){return!!(s&&s.__CANCEL__)}let ho=class extends Ee{constructor(t,r,n){super(t??"canceled",Ee.ERR_CANCELED,r,n),this.name="CanceledError",this.__CANCEL__=!0}};function Qy(s,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?s(r):t(new Ee("Request failed with status code "+r.status,[Ee.ERR_BAD_REQUEST,Ee.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function nT(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function aT(s,t){s=s||10;const r=new Array(s),n=new Array(s);let l=0,u=0,d;return t=t!==void 0?t:1e3,function(h){const f=Date.now(),x=n[u];d||(d=f),r[l]=h,n[l]=f;let g=u,S=0;for(;g!==l;)S+=r[g++],g=g%s;if(l=(l+1)%s,l===u&&(u=(u+1)%s),f-d<t)return;const A=x&&f-x;return A?Math.round(S*1e3/A):void 0}}function oT(s,t){let r=0,n=1e3/t,l,u;const d=(f,x=Date.now())=>{r=x,l=null,u&&(clearTimeout(u),u=null),s(...f)};return[(...f)=>{const x=Date.now(),g=x-r;g>=n?d(f,x):(l=f,u||(u=setTimeout(()=>{u=null,d(l)},n-g)))},()=>l&&d(l)]}const yc=(s,t,r=3)=>{let n=0;const l=aT(50,250);return oT(u=>{const d=u.loaded,c=u.lengthComputable?u.total:void 0,h=d-n,f=l(h),x=d<=c;n=d;const g={loaded:d,total:c,progress:c?d/c:void 0,bytes:h,rate:f||void 0,estimated:f&&c&&x?(c-d)/f:void 0,event:u,lengthComputable:c!=null,[t?"download":"upload"]:!0};s(g)},r)},l0=(s,t)=>{const r=s!=null;return[n=>t[0]({lengthComputable:r,total:s,loaded:n}),t[1]]},c0=s=>(...t)=>ne.asap(()=>s(...t)),lT=Ut.hasStandardBrowserEnv?((s,t)=>r=>(r=new URL(r,Ut.origin),s.protocol===r.protocol&&s.host===r.host&&(t||s.port===r.port)))(new URL(Ut.origin),Ut.navigator&&/(msie|trident)/i.test(Ut.navigator.userAgent)):()=>!0,cT=Ut.hasStandardBrowserEnv?{write(s,t,r,n,l,u,d){if(typeof document>"u")return;const c=[`${s}=${encodeURIComponent(t)}`];ne.isNumber(r)&&c.push(`expires=${new Date(r).toUTCString()}`),ne.isString(n)&&c.push(`path=${n}`),ne.isString(l)&&c.push(`domain=${l}`),u===!0&&c.push("secure"),ne.isString(d)&&c.push(`SameSite=${d}`),document.cookie=c.join("; ")},read(s){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function uT(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function hT(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function Zy(s,t,r){let n=!uT(t);return s&&(n||r==!1)?hT(s,t):t}const u0=s=>s instanceof Jt?{...s}:s;function Cr(s,t){t=t||{};const r={};function n(f,x,g,S){return ne.isPlainObject(f)&&ne.isPlainObject(x)?ne.merge.call({caseless:S},f,x):ne.isPlainObject(x)?ne.merge({},x):ne.isArray(x)?x.slice():x}function l(f,x,g,S){if(ne.isUndefined(x)){if(!ne.isUndefined(f))return n(void 0,f,g,S)}else return n(f,x,g,S)}function u(f,x){if(!ne.isUndefined(x))return n(void 0,x)}function d(f,x){if(ne.isUndefined(x)){if(!ne.isUndefined(f))return n(void 0,f)}else return n(void 0,x)}function c(f,x,g){if(g in t)return n(f,x);if(g in s)return n(void 0,f)}const h={url:u,method:u,data:u,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:c,headers:(f,x,g)=>l(u0(f),u0(x),g,!0)};return ne.forEach(Object.keys({...s,...t}),function(x){const g=h[x]||l,S=g(s[x],t[x],x);ne.isUndefined(S)&&g!==c||(r[x]=S)}),r}const eb=s=>{const t=Cr({},s);let{data:r,withXSRFToken:n,xsrfHeaderName:l,xsrfCookieName:u,headers:d,auth:c}=t;if(t.headers=d=Jt.from(d),t.url=Gy(Zy(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),c&&d.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ne.isFormData(r)){if(Ut.hasStandardBrowserEnv||Ut.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(ne.isFunction(r.getHeaders)){const h=r.getHeaders(),f=["content-type","content-length"];Object.entries(h).forEach(([x,g])=>{f.includes(x.toLowerCase())&&d.set(x,g)})}}if(Ut.hasStandardBrowserEnv&&(n&&ne.isFunction(n)&&(n=n(t)),n||n!==!1&&lT(t.url))){const h=l&&u&&cT.read(u);h&&d.set(l,h)}return t},dT=typeof XMLHttpRequest<"u",fT=dT&&function(s){return new Promise(function(r,n){const l=eb(s);let u=l.data;const d=Jt.from(l.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:f}=l,x,g,S,A,E;function C(){A&&A(),E&&E(),l.cancelToken&&l.cancelToken.unsubscribe(x),l.signal&&l.signal.removeEventListener("abort",x)}let p=new XMLHttpRequest;p.open(l.method.toUpperCase(),l.url,!0),p.timeout=l.timeout;function _(){if(!p)return;const y=Jt.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),T={data:!c||c==="text"||c==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:y,config:s,request:p};Qy(function(D){r(D),C()},function(D){n(D),C()},T),p=null}"onloadend"in p?p.onloadend=_:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(_)},p.onabort=function(){p&&(n(new Ee("Request aborted",Ee.ECONNABORTED,s,p)),p=null)},p.onerror=function(k){const T=k&&k.message?k.message:"Network Error",j=new Ee(T,Ee.ERR_NETWORK,s,p);j.event=k||null,n(j),p=null},p.ontimeout=function(){let k=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const T=l.transitional||Yy;l.timeoutErrorMessage&&(k=l.timeoutErrorMessage),n(new Ee(k,T.clarifyTimeoutError?Ee.ETIMEDOUT:Ee.ECONNABORTED,s,p)),p=null},u===void 0&&d.setContentType(null),"setRequestHeader"in p&&ne.forEach(d.toJSON(),function(k,T){p.setRequestHeader(T,k)}),ne.isUndefined(l.withCredentials)||(p.withCredentials=!!l.withCredentials),c&&c!=="json"&&(p.responseType=l.responseType),f&&([S,E]=yc(f,!0),p.addEventListener("progress",S)),h&&p.upload&&([g,A]=yc(h),p.upload.addEventListener("progress",g),p.upload.addEventListener("loadend",A)),(l.cancelToken||l.signal)&&(x=y=>{p&&(n(!y||y.type?new ho(null,s,p):y),p.abort(),p=null)},l.cancelToken&&l.cancelToken.subscribe(x),l.signal&&(l.signal.aborted?x():l.signal.addEventListener("abort",x)));const v=nT(l.url);if(v&&Ut.protocols.indexOf(v)===-1){n(new Ee("Unsupported protocol "+v+":",Ee.ERR_BAD_REQUEST,s));return}p.send(u||null)})},pT=(s,t)=>{const{length:r}=s=s?s.filter(Boolean):[];if(t||r){let n=new AbortController,l;const u=function(f){if(!l){l=!0,c();const x=f instanceof Error?f:this.reason;n.abort(x instanceof Ee?x:new ho(x instanceof Error?x.message:x))}};let d=t&&setTimeout(()=>{d=null,u(new Ee(`timeout of ${t}ms exceeded`,Ee.ETIMEDOUT))},t);const c=()=>{s&&(d&&clearTimeout(d),d=null,s.forEach(f=>{f.unsubscribe?f.unsubscribe(u):f.removeEventListener("abort",u)}),s=null)};s.forEach(f=>f.addEventListener("abort",u));const{signal:h}=n;return h.unsubscribe=()=>ne.asap(c),h}},mT=function*(s,t){let r=s.byteLength;if(r<t){yield s;return}let n=0,l;for(;n<r;)l=n+t,yield s.slice(n,l),n=l},gT=async function*(s,t){for await(const r of vT(s))yield*mT(r,t)},vT=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},h0=(s,t,r,n)=>{const l=gT(s,t);let u=0,d,c=h=>{d||(d=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:f,value:x}=await l.next();if(f){c(),h.close();return}let g=x.byteLength;if(r){let S=u+=g;r(S)}h.enqueue(new Uint8Array(x))}catch(f){throw c(f),f}},cancel(h){return c(h),l.return()}},{highWaterMark:2})},d0=64*1024,{isFunction:Hl}=ne,_T=(({Request:s,Response:t})=>({Request:s,Response:t}))(ne.global),{ReadableStream:f0,TextEncoder:p0}=ne.global,m0=(s,...t)=>{try{return!!s(...t)}catch{return!1}},yT=s=>{s=ne.merge.call({skipUndefined:!0},_T,s);const{fetch:t,Request:r,Response:n}=s,l=t?Hl(t):typeof fetch=="function",u=Hl(r),d=Hl(n);if(!l)return!1;const c=l&&Hl(f0),h=l&&(typeof p0=="function"?(E=>C=>E.encode(C))(new p0):async E=>new Uint8Array(await new r(E).arrayBuffer())),f=u&&c&&m0(()=>{let E=!1;const C=new r(Ut.origin,{body:new f0,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!C}),x=d&&c&&m0(()=>ne.isReadableStream(new n("").body)),g={stream:x&&(E=>E.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!g[E]&&(g[E]=(C,p)=>{let _=C&&C[E];if(_)return _.call(C);throw new Ee(`Response type '${E}' is not supported`,Ee.ERR_NOT_SUPPORT,p)})});const S=async E=>{if(E==null)return 0;if(ne.isBlob(E))return E.size;if(ne.isSpecCompliantForm(E))return(await new r(Ut.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(ne.isArrayBufferView(E)||ne.isArrayBuffer(E))return E.byteLength;if(ne.isURLSearchParams(E)&&(E=E+""),ne.isString(E))return(await h(E)).byteLength},A=async(E,C)=>{const p=ne.toFiniteNumber(E.getContentLength());return p??S(C)};return async E=>{let{url:C,method:p,data:_,signal:v,cancelToken:y,timeout:k,onDownloadProgress:T,onUploadProgress:j,responseType:D,headers:R,withCredentials:N="same-origin",fetchOptions:U}=eb(E),F=t||fetch;D=D?(D+"").toLowerCase():"text";let I=pT([v,y&&y.toAbortSignal()],k),W=null;const Q=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let se;try{if(j&&f&&p!=="get"&&p!=="head"&&(se=await A(R,_))!==0){let L=new r(C,{method:"POST",body:_,duplex:"half"}),V;if(ne.isFormData(_)&&(V=L.headers.get("content-type"))&&R.setContentType(V),L.body){const[te,oe]=l0(se,yc(c0(j)));_=h0(L.body,d0,te,oe)}}ne.isString(N)||(N=N?"include":"omit");const $=u&&"credentials"in r.prototype,Y={...U,signal:I,method:p.toUpperCase(),headers:R.normalize().toJSON(),body:_,duplex:"half",credentials:$?N:void 0};W=u&&new r(C,Y);let M=await(u?F(W,U):F(C,Y));const H=x&&(D==="stream"||D==="response");if(x&&(T||H&&Q)){const L={};["status","statusText","headers"].forEach(de=>{L[de]=M[de]});const V=ne.toFiniteNumber(M.headers.get("content-length")),[te,oe]=T&&l0(V,yc(c0(T),!0))||[];M=new n(h0(M.body,d0,te,()=>{oe&&oe(),Q&&Q()}),L)}D=D||"text";let z=await g[ne.findKey(g,D)||"text"](M,E);return!H&&Q&&Q(),await new Promise((L,V)=>{Qy(L,V,{data:z,headers:Jt.from(M.headers),status:M.status,statusText:M.statusText,config:E,request:W})})}catch($){throw Q&&Q(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ee("Network Error",Ee.ERR_NETWORK,E,W),{cause:$.cause||$}):Ee.from($,$&&$.code,E,W)}}},bT=new Map,tb=s=>{let t=s&&s.env||{};const{fetch:r,Request:n,Response:l}=t,u=[n,l,r];let d=u.length,c=d,h,f,x=bT;for(;c--;)h=u[c],f=x.get(h),f===void 0&&x.set(h,f=c?new Map:yT(t)),x=f;return f};tb();const Vf={http:PR,xhr:fT,fetch:{get:tb}};ne.forEach(Vf,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const g0=s=>`- ${s}`,xT=s=>ne.isFunction(s)||s===null||s===!1;function wT(s,t){s=ne.isArray(s)?s:[s];const{length:r}=s;let n,l;const u={};for(let d=0;d<r;d++){n=s[d];let c;if(l=n,!xT(n)&&(l=Vf[(c=String(n)).toLowerCase()],l===void 0))throw new Ee(`Unknown adapter '${c}'`);if(l&&(ne.isFunction(l)||(l=l.get(t))))break;u[c||"#"+d]=l}if(!l){const d=Object.entries(u).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=r?d.length>1?`since :
`+d.map(g0).join(`
`):" "+g0(d[0]):"as no adapter specified";throw new Ee("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return l}const ib={getAdapter:wT,adapters:Vf};function Od(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new ho(null,s)}function v0(s){return Od(s),s.headers=Jt.from(s.headers),s.data=Td.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),ib.getAdapter(s.adapter||uo.adapter,s)(s).then(function(n){return Od(s),n.data=Td.call(s,s.transformResponse,n),n.headers=Jt.from(n.headers),n},function(n){return Jy(n)||(Od(s),n&&n.response&&(n.response.data=Td.call(s,s.transformResponse,n.response),n.response.headers=Jt.from(n.response.headers))),Promise.reject(n)})}const sb="1.13.3",$c={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{$c[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const _0={};$c.transitional=function(t,r,n){function l(u,d){return"[Axios v"+sb+"] Transitional option '"+u+"'"+d+(n?". "+n:"")}return(u,d,c)=>{if(t===!1)throw new Ee(l(d," has been removed"+(r?" in "+r:"")),Ee.ERR_DEPRECATED);return r&&!_0[d]&&(_0[d]=!0,console.warn(l(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(u,d,c):!0}};$c.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function ST(s,t,r){if(typeof s!="object")throw new Ee("options must be an object",Ee.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let l=n.length;for(;l-- >0;){const u=n[l],d=t[u];if(d){const c=s[u],h=c===void 0||d(c,u,s);if(h!==!0)throw new Ee("option "+u+" must be "+h,Ee.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ee("Unknown option "+u,Ee.ERR_BAD_OPTION)}}const oc={assertOptions:ST,validators:$c},Ii=oc.validators;let Sr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new a0,response:new a0}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const u=l.stack?l.stack.replace(/^.+\n/,""):"";try{n.stack?u&&!String(n.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+u):n.stack=u}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Cr(this.defaults,r);const{transitional:n,paramsSerializer:l,headers:u}=r;n!==void 0&&oc.assertOptions(n,{silentJSONParsing:Ii.transitional(Ii.boolean),forcedJSONParsing:Ii.transitional(Ii.boolean),clarifyTimeoutError:Ii.transitional(Ii.boolean)},!1),l!=null&&(ne.isFunction(l)?r.paramsSerializer={serialize:l}:oc.assertOptions(l,{encode:Ii.function,serialize:Ii.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),oc.assertOptions(r,{baseUrl:Ii.spelling("baseURL"),withXsrfToken:Ii.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=u&&ne.merge(u.common,u[r.method]);u&&ne.forEach(["delete","get","head","post","put","patch","common"],E=>{delete u[E]}),r.headers=Jt.concat(d,u);const c=[];let h=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(r)===!1||(h=h&&C.synchronous,c.unshift(C.fulfilled,C.rejected))});const f=[];this.interceptors.response.forEach(function(C){f.push(C.fulfilled,C.rejected)});let x,g=0,S;if(!h){const E=[v0.bind(this),void 0];E.unshift(...c),E.push(...f),S=E.length,x=Promise.resolve(r);let C=r;for(;g<S;)x=x.then(E[g++]).then(p=>{C=p!==void 0?p:C}).catch(E[g++]).then(()=>C);return x}S=c.length;let A=r;for(;g<S;){const E=c[g++],C=c[g++];try{A=E(A)}catch(p){C.call(this,p);break}}try{x=v0.call(this,A)}catch(E){return Promise.reject(E)}for(g=0,S=f.length;g<S;)x=x.then(f[g++]).catch(f[g++]);return x}getUri(t){t=Cr(this.defaults,t);const r=Zy(t.baseURL,t.url,t.allowAbsoluteUrls);return Gy(r,t.params,t.paramsSerializer)}};ne.forEach(["delete","get","head","options"],function(t){Sr.prototype[t]=function(r,n){return this.request(Cr(n||{},{method:t,url:r,data:(n||{}).data}))}});ne.forEach(["post","put","patch"],function(t){function r(n){return function(u,d,c){return this.request(Cr(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}Sr.prototype[t]=r(),Sr.prototype[t+"Form"]=r(!0)});let CT=class rb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(u){r=u});const n=this;this.promise.then(l=>{if(!n._listeners)return;let u=n._listeners.length;for(;u-- >0;)n._listeners[u](l);n._listeners=null}),this.promise.then=l=>{let u;const d=new Promise(c=>{n.subscribe(c),u=c}).then(l);return d.cancel=function(){n.unsubscribe(u)},d},t(function(u,d,c){n.reason||(n.reason=new ho(u,d,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new rb(function(l){t=l}),cancel:t}}};function ET(s){return function(r){return s.apply(null,r)}}function kT(s){return ne.isObject(s)&&s.isAxiosError===!0}const wf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(wf).forEach(([s,t])=>{wf[t]=s});function nb(s){const t=new Sr(s),r=Py(Sr.prototype.request,t);return ne.extend(r,Sr.prototype,t,{allOwnKeys:!0}),ne.extend(r,t,null,{allOwnKeys:!0}),r.create=function(l){return nb(Cr(s,l))},r}const mt=nb(uo);mt.Axios=Sr;mt.CanceledError=ho;mt.CancelToken=CT;mt.isCancel=Jy;mt.VERSION=sb;mt.toFormData=zc;mt.AxiosError=Ee;mt.Cancel=mt.CanceledError;mt.all=function(t){return Promise.all(t)};mt.spread=ET;mt.isAxiosError=kT;mt.mergeConfig=Cr;mt.AxiosHeaders=Jt;mt.formToJSON=s=>Xy(ne.isHTMLForm(s)?new FormData(s):s);mt.getAdapter=ib.getAdapter;mt.HttpStatusCode=wf;mt.default=mt;const{Axios:oj,AxiosError:lj,CanceledError:cj,isCancel:uj,CancelToken:hj,VERSION:dj,all:fj,Cancel:pj,isAxiosError:mj,spread:gj,toFormData:vj,AxiosHeaders:_j,HttpStatusCode:yj,formToJSON:bj,getAdapter:xj,mergeConfig:wj}=mt,AT="http://localhost:3000/api/v1";class RT{client;constructor(){this.client=mt.create({baseURL:AT,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(t=>{const r=localStorage.getItem("auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t})}async uploadFiles(t){const r=new FormData;return t.forEach(l=>{r.append("files",l)}),(await this.client.post("/skills/create/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data}async analyzeFiles(t){return(await this.client.post("/skills/create/analyze",{fileIds:t})).data}async getAnalysisStatus(t){return(await this.client.get(`/skills/create/status/${t}`)).data}async generateSkill(t,r){return(await this.client.post("/skills/create/generate",{analysisResult:t,preferences:r})).data}async saveSkill(t){return(await this.client.post("/skills",t)).data}async getUserSkills(t){return(await this.client.get("/skills",{params:t})).data}async getSkill(t){return(await this.client.get(`/skills/${t}`)).data}async updateSkill(t,r){return(await this.client.put(`/skills/${t}`,r)).data}async deleteSkill(t){await this.client.delete(`/skills/${t}`)}async executeSkill(t,r){return(await this.client.post(`/skills/${t}/execute`,{input:r})).data}async getExecutionHistory(t){return(await this.client.get(`/skills/${t}/history`)).data}}const y0=new RT;function TT(){const[s,t]=q.useState(!1),[r,n]=q.useState({status:"uploading",progress:0,message:"..."}),[l,u]=q.useState(null),[d,c]=q.useState(null),h=q.useRef(null),f=q.useRef(null),x=q.useCallback(async S=>{t(!0),c(null),u(null),n({status:"uploading",progress:0,message:"Starting analysis..."});try{const{jobId:A}=await y0.analyzeFiles(S);f.current=A,h.current=setInterval(async()=>{try{const E=await y0.getAnalysisStatus(A);n({status:E.status,progress:E.progress,message:OT(E.status)}),E.status==="complete"&&E.result?(u(E.result),t(!1),h.current&&clearInterval(h.current)):E.status==="failed"&&(c(E.error||"Analysis failed"),t(!1),h.current&&clearInterval(h.current))}catch(E){console.error("Polling error:",E)}},1e3)}catch(A){c(A instanceof Error?A.message:"Analysis failed"),t(!1)}},[]),g=q.useCallback(()=>{h.current&&clearInterval(h.current),t(!1),n({status:"uploading",progress:0,message:"Preparing analysis..."}),u(null),c(null),f.current=null},[]);return q.useEffect(()=>()=>{h.current&&clearInterval(h.current)},[]),{startAnalysis:x,isAnalyzing:s,status:r,result:l,error:d,reset:g}}function OT(s){return{uploading:"Uploading files...",extracting:"Extracting file contents...",analyzing:"AI is analyzing your files...",generating:"Generating skill configuration...",complete:"Analysis complete!",failed:"Analysis failed",processing:"Processing..."}[s]||"Processing..."}function jT({onComplete:s,onCancel:t}){const[r,n]=q.useState("upload"),[l,u]=q.useState([]),[d,c]=q.useState(null),[h,f]=q.useState(null),[x,g]=q.useState(null),[S,A]=q.useState(!1),{startAnalysis:E,status:C,result:p,error:_}=TT(),v=D=>{u(D),g(null)},y=async()=>{if(l.length!==0){n("analyzing"),g(null),A(!0);try{g({type:"success",message:"Files prepared for analysis..."});const D=l.map((R,N)=>`file-${N}-${Date.now()}`);await E(D)}catch(D){const R=D instanceof Error?D.message:"Analysis failed";g({type:"error",message:R}),console.error("Analysis start error:",D),A(!1)}}};q.useEffect(()=>{p&&r==="analyzing"&&k(p)},[p,r]);const k=async D=>{f(D);try{const R={id:`skill-${Date.now()}`,name:D.suggestedName,description:D.suggestedDescription,category:D.suggestedCategory,icon:"",color:"bg-indigo-100 border-indigo-200 text-indigo-700",config:{capabilities:D.suggestedCapabilities,systemPrompt:D.systemPrompt,parameters:{}},sourceFiles:l.map(N=>N.name),analysisContext:D,installCommand:`skill install ${D.suggestedName.toLowerCase().replace(/\s+/g,"-")}`,popularity:0,status:"draft",isPublic:!1,createdAt:new Date,updatedAt:new Date};c(R),n("preview"),g({type:"success",message:"Skill generated successfully!"})}catch(R){const N=R instanceof Error?R.message:"Skill generation failed";g({type:"error",message:N}),console.error("Skill generation error:",R)}},T=async D=>{try{St.saveSkill(D),n("complete"),g({type:"success",message:"Skill saved successfully!"}),A(!1),setTimeout(()=>{s()},2e3)}catch(R){const N=R instanceof Error?R.message:"Save failed";throw g({type:"error",message:N}),console.error("Save error:",R),A(!1),R}},j=()=>{n("upload"),u([]),c(null),f(null),g(null)};return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[w.jsx(Pc,{className:"w-5 h-5"}),"Back"]}),w.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create AI Skill"}),w.jsx("p",{className:"text-gray-600",children:"Upload your files and let AI analyze and generate a custom skill"})]}),x&&w.jsx("div",{className:`p-4 rounded-lg ${x.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:w.jsx("p",{className:`text-sm ${x.type==="success"?"text-green-800":"text-red-800"}`,children:x.message})}),w.jsx("div",{className:"mb-12",children:w.jsx("div",{className:"flex items-center justify-center gap-4",children:[{key:"upload",label:"Upload Files"},{key:"analyzing",label:"Analyzing"},{key:"preview",label:"Preview & Edit"},{key:"complete",label:"Complete"}].map((D,R)=>{const N=D.key===r,U=["upload","analyzing","preview","complete"].indexOf(r)>R;return w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("div",{className:"flex flex-col items-center",children:[w.jsx("div",{className:`
                      w-10 h-10 rounded-full flex items-center justify-center font-medium transition-all
                      ${N?"bg-pink-500 text-white scale-110":""}
                      ${U?"bg-green-500 text-white":""}
                      ${!N&&!U?"bg-gray-200 text-gray-500":""}
                    `,children:U?w.jsx(uf,{className:"w-5 h-5"}):R+1}),w.jsx("span",{className:"text-xs mt-2 text-gray-600",children:D.label})]}),R<3&&w.jsx("div",{className:`w-16 h-1 rounded ${U?"bg-green-500":"bg-gray-200"}`})]},D.key)})})}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r==="upload"&&w.jsxs("div",{className:"space-y-6",children:[w.jsx(GA,{onFilesSelected:v}),l.length>0&&w.jsx("div",{className:"flex justify-end",children:w.jsx("button",{onClick:y,disabled:S,className:"px-8 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Uploading...":"Start Analysis"})})]}),r==="analyzing"&&w.jsxs("div",{className:"py-12",children:[w.jsx(YA,{status:C.status,progress:C.progress,currentFile:C.currentFile,message:C.message}),_&&w.jsx("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:w.jsx("p",{className:"text-sm text-red-800",children:_})})]}),r==="preview"&&d&&h&&w.jsx(By,{skill:d,analysisContext:h,onSave:T,onCancel:j}),r==="complete"&&w.jsxs("div",{className:"text-center py-12",children:[w.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:w.jsx(uf,{className:"w-12 h-12 text-green-600"})}),w.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Skill Created Successfully!"}),w.jsx("p",{className:"text-gray-600",children:"Redirecting to skills library..."})]})]})]})}const DT=["Knowledge","Tools","Productivity","Development","Analysis","Custom"],NT=["","","","","","","","","",""];function LT({onSave:s,onCancel:t}){const[r,n]=q.useState(""),[l,u]=q.useState(""),[d,c]=q.useState("Custom"),[h,f]=q.useState(""),[x,g]=q.useState(""),[S,A]=q.useState([]),[E,C]=q.useState(""),[p,_]=q.useState({}),v=()=>{const j={};return r.trim()||(j.name="Skill name is required"),l.trim()||(j.description="Description is required"),x.trim()||(j.systemPrompt="System prompt is required"),S.length===0&&(j.capabilities="At least one capability is required"),_(j),Object.keys(j).length===0},y=()=>{E.trim()&&!S.includes(E.trim())&&(A([...S,E.trim()]),C(""))},k=j=>{A(S.filter((D,R)=>R!==j))},T=j=>{if(j.preventDefault(),!v())return;const D={id:`skill-${Date.now()}`,name:r,description:l,category:d,icon:h,color:"bg-indigo-100 border-indigo-200 text-indigo-700",config:{capabilities:S,systemPrompt:x,parameters:{}},sourceFiles:[],analysisContext:{workDomain:[],technicalSkills:[],experiencePatterns:[],keyTopics:[],suggestedName:r,suggestedDescription:l,suggestedCategory:d,suggestedCapabilities:S,filesSummary:[],confidence:100,systemPrompt:x},installCommand:`skill install ${r.toLowerCase().replace(/\s+/g,"-")}`,popularity:0,status:"draft",isPublic:!1,createdAt:new Date,updatedAt:new Date};s(D)};return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[w.jsx(Pc,{className:"w-5 h-5"}),"Back"]}),w.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Skill Manually"}),w.jsx("p",{className:"text-gray-600",children:"Enter all the details for your new skill"})]}),w.jsxs("form",{onSubmit:T,className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Name *"}),w.jsx("input",{type:"text",value:r,onChange:j=>n(j.target.value),placeholder:"e.g., Code Reviewer, Data Analyzer",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ${p.name?"border-red-500":"border-gray-300"}`}),p.name&&w.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.name})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),w.jsx("textarea",{value:l,onChange:j=>u(j.target.value),placeholder:"Describe what this skill does...",rows:3,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 resize-none ${p.description?"border-red-500":"border-gray-300"}`}),p.description&&w.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.description})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),w.jsx("select",{value:d,onChange:j=>c(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",children:DT.map(j=>w.jsx("option",{value:j,children:j},j))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),w.jsx("select",{value:h,onChange:j=>f(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",children:NT.map(j=>w.jsx("option",{value:j,children:j},j))})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"System Prompt *"}),w.jsx("textarea",{value:x,onChange:j=>g(j.target.value),placeholder:"Define how this skill should behave and respond...",rows:4,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 resize-none ${p.systemPrompt?"border-red-500":"border-gray-300"}`}),p.systemPrompt&&w.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.systemPrompt})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Capabilities * ",S.length>0&&w.jsxs("span",{className:"text-gray-500",children:["(",S.length,")"]})]}),w.jsxs("div",{className:"flex gap-2 mb-3",children:[w.jsx("input",{type:"text",value:E,onChange:j=>C(j.target.value),onKeyPress:j=>{j.key==="Enter"&&(j.preventDefault(),y())},placeholder:"Enter a capability and press Enter",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"}),w.jsxs("button",{type:"button",onClick:y,className:"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors flex items-center gap-2",children:[w.jsx(mc,{className:"w-4 h-4"}),"Add"]})]}),S.length>0&&w.jsx("div",{className:"space-y-2",children:S.map((j,D)=>w.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg border border-gray-200",children:[w.jsx("span",{className:"text-sm text-gray-700",children:j}),w.jsx("button",{type:"button",onClick:()=>k(D),className:"text-gray-400 hover:text-red-600 transition-colors",children:w.jsx(gs,{className:"w-4 h-4"})})]},D))}),p.capabilities&&w.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.capabilities})]}),w.jsxs("div",{className:"flex gap-3 pt-4",children:[w.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),w.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all",children:"Create Skill"})]})]})]})}function MT({onImport:s,onCancel:t}){const[r,n]=q.useState(""),[l,u]=q.useState(!1),[d,c]=q.useState(null),[h,f]=q.useState(null),x=A=>{const E=A.split(`
`),C={name:"",description:"",category:"Custom",icon:"",systemPrompt:"",capabilities:[]};let p="",_="";for(const v of E)v.startsWith("# ")?C.name=v.replace("# ","").trim():v.startsWith("## ")?(p==="description"?C.description=_.trim():p==="systemPrompt"?C.systemPrompt=_.trim():p==="capabilities"&&(C.capabilities=_.split(`
`).filter(y=>y.trim().startsWith("-")).map(y=>y.replace("-","").trim()).filter(y=>y.length>0)),p=v.replace("## ","").toLowerCase().trim(),_=""):v.includes("category:")?C.category=v.split(":")[1].trim():v.includes("icon:")?C.icon=v.split(":")[1].trim():_+=v+`
`;return p==="systemPrompt"?C.systemPrompt=_.trim():p==="capabilities"&&(C.capabilities=_.split(`
`).filter(v=>v.trim().startsWith("-")).map(v=>v.replace("-","").trim()).filter(v=>v.length>0)),C},g=async()=>{c(null),u(!0);try{const A=/github\.com\/([^/]+)\/([^/]+)(?:\/tree\/([^/]+))?/,E=r.match(A);if(!E)throw new Error("Invalid GitHub URL. Please use format: https://github.com/owner/repo or https://github.com/owner/repo/tree/branch");const[,C,p,_="main"]=E,v=`https://raw.githubusercontent.com/${C}/${p}/${_}/skill.md`,y=await fetch(v);if(!y.ok)throw new Error(`Failed to fetch skill.md. Make sure the file exists at ${v}`);const k=await y.text(),T=x(k);if(!T.name)throw new Error("Invalid skill.md format. Please ensure it has a title (# Skill Name)");f(T)}catch(A){c(A instanceof Error?A.message:"Failed to import skill"),f(null)}finally{u(!1)}},S=()=>{if(!h)return;const A={id:`skill-${Date.now()}`,name:h.name,description:h.description,category:h.category,icon:h.icon,color:"bg-indigo-100 border-indigo-200 text-indigo-700",config:{capabilities:h.capabilities,systemPrompt:h.systemPrompt,parameters:{}},sourceFiles:[r],analysisContext:{workDomain:[],technicalSkills:[],experiencePatterns:[],keyTopics:[],suggestedName:h.name,suggestedDescription:h.description,suggestedCategory:h.category,suggestedCapabilities:h.capabilities,filesSummary:[],confidence:100,systemPrompt:h.systemPrompt},installCommand:`skill install ${h.name.toLowerCase().replace(/\s+/g,"-")}`,popularity:0,status:"draft",isPublic:!1,createdAt:new Date,updatedAt:new Date};s(A)};return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[w.jsx(Pc,{className:"w-5 h-5"}),"Back"]}),w.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Import Skill from GitHub"}),w.jsx("p",{className:"text-gray-600",children:"Import a skill from a GitHub repository containing a skill.md file"})]}),!h&&w.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Repository URL"}),w.jsx("input",{type:"text",value:r,onChange:A=>n(A.target.value),placeholder:"https://github.com/owner/repo or https://github.com/owner/repo/tree/branch",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"}),w.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"The repository must contain a skill.md file in the root or specified branch"})]}),d&&w.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:w.jsx("p",{className:"text-sm text-red-800",children:d})}),w.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[w.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Example skill.md format:"}),w.jsx("pre",{className:"text-xs text-blue-800 overflow-x-auto",children:`# Code Reviewer
category: Development
icon: 

## Description
Reviews code for quality and best practices

## System Prompt
You are an expert code reviewer...

## Capabilities
- Code analysis
- Performance review
- Security audit`})]}),w.jsxs("div",{className:"flex gap-3 pt-4",children:[w.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),w.jsx("button",{onClick:g,disabled:!r.trim()||l,className:"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?w.jsxs(w.Fragment,{children:[w.jsx(pc,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):w.jsxs(w.Fragment,{children:[w.jsx(Pf,{className:"w-4 h-4"}),"Import Skill"]})})]})]}),h&&w.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-6",children:[w.jsxs("div",{className:"flex items-start gap-4",children:[w.jsx("div",{className:"text-4xl",children:h.icon}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:h.name}),w.jsx("p",{className:"text-sm text-gray-500 mt-1",children:h.category})]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),w.jsx("p",{className:"text-gray-600",children:h.description})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"System Prompt"}),w.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg whitespace-pre-wrap",children:h.systemPrompt})]}),h.capabilities.length>0&&w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Capabilities"}),w.jsx("div",{className:"flex flex-wrap gap-2",children:h.capabilities.map((A,E)=>w.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-700 text-sm rounded-full",children:A},E))})]}),w.jsxs("div",{className:"flex gap-3 pt-4",children:[w.jsx("button",{onClick:()=>{f(null),c(null)},className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Back"}),w.jsx("button",{onClick:S,className:"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all",children:"Confirm Import"})]})]})]})}function BT({onComplete:s,onCancel:t}){const[r,n]=q.useState("select"),[l,u]=q.useState(null),[d,c]=q.useState(null),h=S=>{n(S),c(null)},f=S=>{u(S),n("preview"),c({type:"success",message:"Skill created! Review and save it."})},x=async S=>{try{St.saveSkill(S),n("complete"),c({type:"success",message:"Skill saved successfully!"}),setTimeout(()=>{s()},2e3)}catch(A){const E=A instanceof Error?A.message:"Save failed";c({type:"error",message:E}),console.error("Save error:",A)}},g=()=>{r==="preview"?(u(null),n("select")):r==="complete"?t():n("select"),c(null)};return w.jsxs("div",{className:"space-y-6",children:[d&&w.jsx("div",{className:`p-4 rounded-lg ${d.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:w.jsx("p",{className:`text-sm ${d.type==="success"?"text-green-800":"text-red-800"}`,children:d.message})}),r==="select"&&w.jsxs("div",{children:[w.jsx("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-6",children:" Back"}),w.jsx(Fk,{onSelectMethod:h})]}),r==="upload"&&w.jsx(jT,{onComplete:s,onCancel:g,onSkillCreated:f}),r==="manual"&&w.jsx(LT,{onSave:f,onCancel:g}),r==="github"&&w.jsx(MT,{onImport:f,onCancel:g}),r==="preview"&&l&&w.jsxs("div",{className:"space-y-6",children:[w.jsx("button",{onClick:g,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:" Back"}),w.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:w.jsx(By,{skill:l,analysisContext:l.analysisContext||{workDomain:[],technicalSkills:[],experiencePatterns:[],keyTopics:[],suggestedName:l.name||"",suggestedDescription:l.description||"",suggestedCategory:l.category||"Custom",suggestedCapabilities:[],filesSummary:[],confidence:0,systemPrompt:""},onSave:x,onCancel:g})})]}),r==="complete"&&w.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:w.jsxs("div",{className:"text-center py-12",children:[w.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:w.jsx("span",{className:"text-4xl",children:""})}),w.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Skill Created Successfully!"}),w.jsx("p",{className:"text-gray-600",children:"Redirecting to skills library..."})]})})]})}const b0={Knowledge:"Knowledge",Tools:"Tools",Productivity:"Productivity",Development:"Development",Analysis:"Analysis",Custom:"Custom"};function PT({onCreateNew:s,onUseSkill:t,onBack:r}){const[n,l]=q.useState([]),[u,d]=q.useState(!0),[c,h]=q.useState(""),[f,x]=q.useState(null),[g,S]=q.useState("all"),[A,E]=q.useState(null),[C,p]=q.useState(null);q.useEffect(()=>{_()},[f,g]);const _=()=>{d(!0);try{if(g==="liked"){const k=St.getLikes();let j=to.filter(D=>k.includes(D.id));f&&(j=j.filter(D=>D.category===f)),l(j)}else if(g==="all"){const k=St.getSkills(),T=St.getLikes(),D=to.filter(U=>T.includes(U.id)).map(U=>({id:U.id,userId:"",name:U.name,description:U.description,category:U.category,icon:U.icon,color:U.color,config:{capabilities:[],systemPrompt:"",parameters:U.config,tools:[]},sourceFiles:[],analysisContext:{workDomain:[],technicalSkills:[],experiencePatterns:[],keyTopics:[],suggestedName:U.name,suggestedDescription:U.description,suggestedCategory:U.category,suggestedCapabilities:[],filesSummary:[],confidence:0,systemPrompt:""},installCommand:U.installCommand,popularity:U.popularity,status:"active",isPublic:!1,origin:"store",createdAt:new Date,updatedAt:new Date}));let R=[...k,...D];const N=Array.from(new Map(R.map(U=>[U.id,U])).values());f?R=N.filter(U=>U.category===f):R=N,l(R)}else{let T=St.getSkills();f&&(T=T.filter(j=>j.category===f)),T=T.filter(j=>j.origin===g),l(T)}p(null)}catch(k){console.error("Failed to load skills:",k),p({type:"error",message:"Failed to load skills"})}finally{d(!1)}},v=k=>{try{St.deleteSkill(k),l(n.filter(T=>T.id!==k)),E(null),p({type:"success",message:"Skill deleted successfully"})}catch(T){console.error("Failed to delete skill:",T),p({type:"error",message:"Failed to delete skill"})}},y=n.filter(k=>{if(!c)return!0;const T=c.toLowerCase();return k.name.toLowerCase().includes(T)||k.description.toLowerCase().includes(T)});return w.jsxs("div",{className:"w-full max-w-7xl mx-auto space-y-6",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[r&&w.jsx("button",{onClick:r,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:w.jsx(Pc,{className:"w-5 h-5"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Skills Library"}),w.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage all your created AI skills"})]})]}),w.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all shadow-md",children:[w.jsx(mc,{className:"w-5 h-5"}),"Create New Skill"]})]}),C&&w.jsx("div",{className:`p-4 rounded-lg ${C.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:w.jsx("p",{className:`text-sm ${C.type==="success"?"text-green-800":"text-red-800"}`,children:C.message})}),w.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[w.jsxs("div",{className:"flex-1 relative",children:[w.jsx(Uf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),w.jsx("input",{type:"text",value:c,onChange:k=>h(k.target.value),placeholder:"Search skills...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(X2,{className:"w-5 h-5 text-gray-400"}),w.jsxs("select",{value:f||"",onChange:k=>x(k.target.value||null),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",children:[w.jsx("option",{value:"",children:"All Categories"}),Object.entries(b0).map(([k,T])=>w.jsx("option",{value:k,children:T},k))]})]})]}),w.jsxs("div",{className:"flex items-center gap-1 border-b border-gray-200",children:[w.jsx("button",{onClick:()=>{S("all"),_()},className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="all"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"All Skills"}),w.jsx("button",{onClick:()=>{S("created"),_()},className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="created"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Created"}),w.jsx("button",{onClick:()=>{S("store"),_()},className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="store"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Purchased"}),w.jsx("button",{onClick:()=>{S("liked"),_()},className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="liked"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Liked"})]}),u?w.jsx("div",{className:"flex items-center justify-center py-20",children:w.jsx("div",{className:"w-8 h-8 border-4 border-pink-500 border-t-transparent rounded-full animate-spin"})}):y.length===0?w.jsxs("div",{className:"text-center py-20",children:[w.jsx("div",{className:"text-6xl mb-4",children:""}),w.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:c||f?"No matching skills found":g==="liked"?"No liked skills yet":"No skills created yet"}),w.jsx("p",{className:"text-gray-500 mb-6",children:c||f?"Try adjusting your search criteria":g==="liked"?"Like skills from the home page to see them here":"Click the button above to create your first skill"}),!c&&!f&&w.jsxs("button",{onClick:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all",children:[w.jsx(mc,{className:"w-5 h-5"}),"Create Your First Skill"]})]}):w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(k=>w.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden group",children:[w.jsxs("div",{className:"h-10 px-4 border-b border-gray-100 flex items-center bg-white relative",children:[w.jsxs("div",{className:"flex items-center gap-1.5 absolute left-4",children:[w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FF5F57]"}),w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FEBC2E]"}),w.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#28C840]"})]}),w.jsxs("div",{className:"mx-auto text-xs font-mono text-gray-400 font-medium",children:[k.id.slice(0,8),".ts"]})]}),w.jsxs("div",{className:"p-5",children:[w.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[w.jsx("div",{className:"text-3xl",children:k.icon}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("h3",{className:"text-lg font-bold text-gray-900 truncate",children:k.name}),w.jsx("p",{className:"text-xs text-gray-500",children:b0[k.category]})]})]}),w.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-4",children:k.description}),w.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mb-4",children:[w.jsx(by,{className:"w-3 h-3"}),w.jsx("span",{children:k.createdAt?`Created on ${new Date(k.createdAt).toLocaleDateString("en-US")}`:g==="liked"?"From Store":"Created recently"})]}),w.jsx("div",{className:"flex items-center gap-2",children:g==="liked"?w.jsxs("button",{onClick:()=>t(k),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white text-sm font-medium rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all",children:[w.jsx(I_,{className:"w-4 h-4"}),"View Details"]}):w.jsxs(w.Fragment,{children:[w.jsxs("button",{onClick:()=>t(k),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white text-sm font-medium rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all",children:[w.jsx(I_,{className:"w-4 h-4"}),"Use"]}),w.jsx("button",{onClick:()=>E(k.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:w.jsx(Sy,{className:"w-4 h-4"})})]})})]})]},k.id))}),A&&w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:w.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[w.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Confirm Delete"}),w.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this skill? This action cannot be undone."}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("button",{onClick:()=>E(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),w.jsx("button",{onClick:()=>v(A),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}var jd={exports:{}},x0;function UT(){return x0||(x0=1,(function(s,t){(function(r,n){s.exports=n()})(self,(()=>(()=>{var r={4567:function(d,c,h){var f=this&&this.__decorate||function(y,k,T,j){var D,R=arguments.length,N=R<3?k:j===null?j=Object.getOwnPropertyDescriptor(k,T):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(y,k,T,j);else for(var U=y.length-1;U>=0;U--)(D=y[U])&&(N=(R<3?D(N):R>3?D(k,T,N):D(k,T))||N);return R>3&&N&&Object.defineProperty(k,T,N),N},x=this&&this.__param||function(y,k){return function(T,j){k(T,j,y)}};Object.defineProperty(c,"__esModule",{value:!0}),c.AccessibilityManager=void 0;const g=h(9042),S=h(6114),A=h(9924),E=h(844),C=h(5596),p=h(4725),_=h(3656);let v=c.AccessibilityManager=class extends E.Disposable{constructor(y,k){super(),this._terminal=y,this._renderService=k,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let T=0;T<this._terminal.rows;T++)this._rowElements[T]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[T]);if(this._topBoundaryFocusListener=T=>this._handleBoundaryFocus(T,0),this._bottomBoundaryFocusListener=T=>this._handleBoundaryFocus(T,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new A.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((T=>this._handleResize(T.rows)))),this.register(this._terminal.onRender((T=>this._refreshRows(T.start,T.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((T=>this._handleChar(T)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((T=>this._handleTab(T)))),this.register(this._terminal.onKey((T=>this._handleKey(T.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this._screenDprMonitor=new C.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener((()=>this._refreshRowsDimensions())),this.register((0,_.addDisposableDomListener)(window,"resize",(()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,E.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(y){for(let k=0;k<y;k++)this._handleChar(" ")}_handleChar(y){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==y&&(this._charsToAnnounce+=y):this._charsToAnnounce+=y,y===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=g.tooMuchOutput)),S.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((()=>{this._accessibilityContainer.appendChild(this._liveRegion)}),0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,S.isMac&&this._liveRegion.remove()}_handleKey(y){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(y)||this._charsToConsume.push(y)}_refreshRows(y,k){this._liveRegionDebouncer.refresh(y,k,this._terminal.rows)}_renderRows(y,k){const T=this._terminal.buffer,j=T.lines.length.toString();for(let D=y;D<=k;D++){const R=T.translateBufferLineToString(T.ydisp+D,!0),N=(T.ydisp+D+1).toString(),U=this._rowElements[D];U&&(R.length===0?U.innerText="":U.textContent=R,U.setAttribute("aria-posinset",N),U.setAttribute("aria-setsize",j))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(y,k){const T=y.target,j=this._rowElements[k===0?1:this._rowElements.length-2];if(T.getAttribute("aria-posinset")===(k===0?"1":`${this._terminal.buffer.lines.length}`)||y.relatedTarget!==j)return;let D,R;if(k===0?(D=T,R=this._rowElements.pop(),this._rowContainer.removeChild(R)):(D=this._rowElements.shift(),R=T,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),R.removeEventListener("focus",this._bottomBoundaryFocusListener),k===0){const N=this._createAccessibilityTreeNode();this._rowElements.unshift(N),this._rowContainer.insertAdjacentElement("afterbegin",N)}else{const N=this._createAccessibilityTreeNode();this._rowElements.push(N),this._rowContainer.appendChild(N)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(k===0?-1:1),this._rowElements[k===0?1:this._rowElements.length-2].focus(),y.preventDefault(),y.stopImmediatePropagation()}_handleResize(y){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let k=this._rowContainer.children.length;k<this._terminal.rows;k++)this._rowElements[k]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[k]);for(;this._rowElements.length>y;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const y=document.createElement("div");return y.setAttribute("role","listitem"),y.tabIndex=-1,this._refreshRowDimensions(y),y}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let y=0;y<this._terminal.rows;y++)this._refreshRowDimensions(this._rowElements[y])}}_refreshRowDimensions(y){y.style.height=`${this._renderService.dimensions.css.cell.height}px`}};c.AccessibilityManager=v=f([x(1,p.IRenderService)],v)},3614:(d,c)=>{function h(S){return S.replace(/\r?\n/g,"\r")}function f(S,A){return A?"\x1B[200~"+S+"\x1B[201~":S}function x(S,A,E,C){S=f(S=h(S),E.decPrivateModes.bracketedPasteMode&&C.rawOptions.ignoreBracketedPasteMode!==!0),E.triggerDataEvent(S,!0),A.value=""}function g(S,A,E){const C=E.getBoundingClientRect(),p=S.clientX-C.left-10,_=S.clientY-C.top-10;A.style.width="20px",A.style.height="20px",A.style.left=`${p}px`,A.style.top=`${_}px`,A.style.zIndex="1000",A.focus()}Object.defineProperty(c,"__esModule",{value:!0}),c.rightClickHandler=c.moveTextAreaUnderMouseCursor=c.paste=c.handlePasteEvent=c.copyHandler=c.bracketTextForPaste=c.prepareTextForTerminal=void 0,c.prepareTextForTerminal=h,c.bracketTextForPaste=f,c.copyHandler=function(S,A){S.clipboardData&&S.clipboardData.setData("text/plain",A.selectionText),S.preventDefault()},c.handlePasteEvent=function(S,A,E,C){S.stopPropagation(),S.clipboardData&&x(S.clipboardData.getData("text/plain"),A,E,C)},c.paste=x,c.moveTextAreaUnderMouseCursor=g,c.rightClickHandler=function(S,A,E,C,p){g(S,A,E),p&&C.rightClickSelect(S),A.value=C.selectionText,A.select()}},7239:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorContrastCache=void 0;const f=h(1505);c.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(x,g,S){this._css.set(x,g,S)}getCss(x,g){return this._css.get(x,g)}setColor(x,g,S){this._color.set(x,g,S)}getColor(x,g){return this._color.get(x,g)}clear(){this._color.clear(),this._css.clear()}}},3656:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.addDisposableDomListener=void 0,c.addDisposableDomListener=function(h,f,x,g){h.addEventListener(f,x,g);let S=!1;return{dispose:()=>{S||(S=!0,h.removeEventListener(f,x,g))}}}},6465:function(d,c,h){var f=this&&this.__decorate||function(p,_,v,y){var k,T=arguments.length,j=T<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(p,_,v,y);else for(var D=p.length-1;D>=0;D--)(k=p[D])&&(j=(T<3?k(j):T>3?k(_,v,j):k(_,v))||j);return T>3&&j&&Object.defineProperty(_,v,j),j},x=this&&this.__param||function(p,_){return function(v,y){_(v,y,p)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Linkifier2=void 0;const g=h(3656),S=h(8460),A=h(844),E=h(2585);let C=c.Linkifier2=class extends A.Disposable{get currentLink(){return this._currentLink}constructor(p){super(),this._bufferService=p,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new S.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new S.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,A.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,A.toDisposable)((()=>{this._lastMouseEvent=void 0}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0})))}registerLinkProvider(p){return this._linkProviders.push(p),{dispose:()=>{const _=this._linkProviders.indexOf(p);_!==-1&&this._linkProviders.splice(_,1)}}}attachToDom(p,_,v){this._element=p,this._mouseService=_,this._renderService=v,this.register((0,g.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,g.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){if(this._lastMouseEvent=p,!this._element||!this._mouseService)return;const _=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;const v=p.composedPath();for(let y=0;y<v.length;y++){const k=v[y];if(k.classList.contains("xterm"))break;if(k.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,_){var v,y;this._activeProviderReplies&&_||((v=this._activeProviderReplies)===null||v===void 0||v.forEach((T=>{T?.forEach((j=>{j.link.dispose&&j.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=p.y);let k=!1;for(const[T,j]of this._linkProviders.entries())_?!((y=this._activeProviderReplies)===null||y===void 0)&&y.get(T)&&(k=this._checkLinkProviderResult(T,p,k)):j.provideLinks(p.y,(D=>{var R,N;if(this._isMouseOut)return;const U=D?.map((F=>({link:F})));(R=this._activeProviderReplies)===null||R===void 0||R.set(T,U),k=this._checkLinkProviderResult(T,p,k),((N=this._activeProviderReplies)===null||N===void 0?void 0:N.size)===this._linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)}))}_removeIntersectingLinks(p,_){const v=new Set;for(let y=0;y<_.size;y++){const k=_.get(y);if(k)for(let T=0;T<k.length;T++){const j=k[T],D=j.link.range.start.y<p?0:j.link.range.start.x,R=j.link.range.end.y>p?this._bufferService.cols:j.link.range.end.x;for(let N=D;N<=R;N++){if(v.has(N)){k.splice(T--,1);break}v.add(N)}}}}_checkLinkProviderResult(p,_,v){var y;if(!this._activeProviderReplies)return v;const k=this._activeProviderReplies.get(p);let T=!1;for(let j=0;j<p;j++)this._activeProviderReplies.has(j)&&!this._activeProviderReplies.get(j)||(T=!0);if(!T&&k){const j=k.find((D=>this._linkAtPosition(D.link,_)));j&&(v=!0,this._handleNewLink(j))}if(this._activeProviderReplies.size===this._linkProviders.length&&!v)for(let j=0;j<this._activeProviderReplies.size;j++){const D=(y=this._activeProviderReplies.get(j))===null||y===void 0?void 0:y.find((R=>this._linkAtPosition(R.link,_)));if(D){v=!0,this._handleNewLink(D);break}}return v}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._element||!this._mouseService||!this._currentLink)return;const _=this._positionFromMouseEvent(p,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!p||!_||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,A.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(p.link,_)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>{var v,y;return(y=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||y===void 0?void 0:y.decorations.pointerCursor},set:v=>{var y,k;!((y=this._currentLink)===null||y===void 0)&&y.state&&this._currentLink.state.decorations.pointerCursor!==v&&(this._currentLink.state.decorations.pointerCursor=v,this._currentLink.state.isHovered&&((k=this._element)===null||k===void 0||k.classList.toggle("xterm-cursor-pointer",v)))}},underline:{get:()=>{var v,y;return(y=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||y===void 0?void 0:y.decorations.underline},set:v=>{var y,k,T;!((y=this._currentLink)===null||y===void 0)&&y.state&&((T=(k=this._currentLink)===null||k===void 0?void 0:k.state)===null||T===void 0?void 0:T.decorations.underline)!==v&&(this._currentLink.state.decorations.underline=v,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,v))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((v=>{if(!this._currentLink)return;const y=v.start===0?0:v.start+1+this._bufferService.buffer.ydisp,k=this._bufferService.buffer.ydisp+1+v.end;if(this._currentLink.link.range.start.y>=y&&this._currentLink.link.range.end.y<=k&&(this._clearCurrentLink(y,k),this._lastMouseEvent&&this._element)){const T=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);T&&this._askForLink(T,!1)}}))))}_linkHover(p,_,v){var y;!((y=this._currentLink)===null||y===void 0)&&y.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(v,_.text)}_fireUnderlineEvent(p,_){const v=p.range,y=this._bufferService.buffer.ydisp,k=this._createLinkUnderlineEvent(v.start.x-1,v.start.y-y-1,v.end.x,v.end.y-y-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(k)}_linkLeave(p,_,v){var y;!((y=this._currentLink)===null||y===void 0)&&y.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(v,_.text)}_linkAtPosition(p,_){const v=p.range.start.y*this._bufferService.cols+p.range.start.x,y=p.range.end.y*this._bufferService.cols+p.range.end.x,k=_.y*this._bufferService.cols+_.x;return v<=k&&k<=y}_positionFromMouseEvent(p,_,v){const y=v.getCoords(p,_,this._bufferService.cols,this._bufferService.rows);if(y)return{x:y[0],y:y[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,_,v,y,k){return{x1:p,y1:_,x2:v,y2:y,cols:this._bufferService.cols,fg:k}}};c.Linkifier2=C=f([x(0,E.IBufferService)],C)},9042:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.tooMuchOutput=c.promptLabel=void 0,c.promptLabel="Terminal input",c.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(d,c,h){var f=this&&this.__decorate||function(C,p,_,v){var y,k=arguments.length,T=k<3?p:v===null?v=Object.getOwnPropertyDescriptor(p,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,p,_,v);else for(var j=C.length-1;j>=0;j--)(y=C[j])&&(T=(k<3?y(T):k>3?y(p,_,T):y(p,_))||T);return k>3&&T&&Object.defineProperty(p,_,T),T},x=this&&this.__param||function(C,p){return function(_,v){p(_,v,C)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OscLinkProvider=void 0;const g=h(511),S=h(2585);let A=c.OscLinkProvider=class{constructor(C,p,_){this._bufferService=C,this._optionsService=p,this._oscLinkService=_}provideLinks(C,p){var _;const v=this._bufferService.buffer.lines.get(C-1);if(!v)return void p(void 0);const y=[],k=this._optionsService.rawOptions.linkHandler,T=new g.CellData,j=v.getTrimmedLength();let D=-1,R=-1,N=!1;for(let U=0;U<j;U++)if(R!==-1||v.hasContent(U)){if(v.loadCell(U,T),T.hasExtendedAttrs()&&T.extended.urlId){if(R===-1){R=U,D=T.extended.urlId;continue}N=T.extended.urlId!==D}else R!==-1&&(N=!0);if(N||R!==-1&&U===j-1){const F=(_=this._oscLinkService.getLinkData(D))===null||_===void 0?void 0:_.uri;if(F){const I={start:{x:R+1,y:C},end:{x:U+(N||U!==j-1?0:1),y:C}};let W=!1;if(!k?.allowNonHttpProtocols)try{const Q=new URL(F);["http:","https:"].includes(Q.protocol)||(W=!0)}catch{W=!0}W||y.push({text:F,range:I,activate:(Q,se)=>k?k.activate(Q,se,I):E(0,se),hover:(Q,se)=>{var $;return($=k?.hover)===null||$===void 0?void 0:$.call(k,Q,se,I)},leave:(Q,se)=>{var $;return($=k?.leave)===null||$===void 0?void 0:$.call(k,Q,se,I)}})}N=!1,T.hasExtendedAttrs()&&T.extended.urlId?(R=U,D=T.extended.urlId):(R=-1,D=-1)}}p(y)}};function E(C,p){if(confirm(`Do you want to navigate to ${p}?

WARNING: This link could potentially be dangerous`)){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=p}else console.warn("Opening link blocked as opener could not be cleared")}}c.OscLinkProvider=A=f([x(0,S.IBufferService),x(1,S.IOptionsService),x(2,S.IOscLinkService)],A)},6193:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.RenderDebouncer=void 0,c.RenderDebouncer=class{constructor(h,f){this._parentWindow=h,this._renderCallback=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(h){return this._refreshCallbacks.push(h),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(h,f,x){this._rowCount=x,h=h!==void 0?h:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const h=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const h of this._refreshCallbacks)h(0);this._refreshCallbacks=[]}}},5596:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ScreenDprMonitor=void 0;const f=h(844);class x extends f.Disposable{constructor(S){super(),this._parentWindow=S,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,f.toDisposable)((()=>{this.clearListener()})))}setListener(S){this._listener&&this.clearListener(),this._listener=S,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var S;this._outerListener&&((S=this._resolutionMediaMatchList)===null||S===void 0||S.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}c.ScreenDprMonitor=x},3236:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const f=h(3614),x=h(3656),g=h(6465),S=h(9042),A=h(3730),E=h(1680),C=h(3107),p=h(5744),_=h(2950),v=h(1296),y=h(428),k=h(4269),T=h(5114),j=h(8934),D=h(3230),R=h(9312),N=h(4725),U=h(6731),F=h(8055),I=h(8969),W=h(8460),Q=h(844),se=h(6114),$=h(8437),Y=h(2584),M=h(7399),H=h(5941),z=h(9074),L=h(2585),V=h(5435),te=h(4567),oe=typeof window<"u"?window.document:null;class de extends I.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(B={}){super(B),this.browser=se,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new Q.MutableDisposable),this._onCursorMove=this.register(new W.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new W.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new W.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new W.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new W.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new W.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new W.EventEmitter),this._onBlur=this.register(new W.EventEmitter),this._onA11yCharEmitter=this.register(new W.EventEmitter),this._onA11yTabEmitter=this.register(new W.EventEmitter),this._onWillOpen=this.register(new W.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(g.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(A.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(z.DecorationService),this._instantiationService.setService(L.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((J,ae)=>this.refresh(J,ae)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((J=>this._reportWindowsOptions(J)))),this.register(this._inputHandler.onColor((J=>this._handleColorEvent(J)))),this.register((0,W.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,W.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,W.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,W.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((J=>this._afterResize(J.cols,J.rows)))),this.register((0,Q.toDisposable)((()=>{var J,ae;this._customKeyEventHandler=void 0,(ae=(J=this.element)===null||J===void 0?void 0:J.parentNode)===null||ae===void 0||ae.removeChild(this.element)})))}_handleColorEvent(B){if(this._themeService)for(const J of B){let ae,ce="";switch(J.index){case 256:ae="foreground",ce="10";break;case 257:ae="background",ce="11";break;case 258:ae="cursor",ce="12";break;default:ae="ansi",ce="4;"+J.index}switch(J.type){case 0:const xe=F.color.toColorRGB(ae==="ansi"?this._themeService.colors.ansi[J.index]:this._themeService.colors[ae]);this.coreService.triggerDataEvent(`${Y.C0.ESC}]${ce};${(0,H.toRgbString)(xe)}${Y.C1_ESCAPED.ST}`);break;case 1:if(ae==="ansi")this._themeService.modifyColors((pe=>pe.ansi[J.index]=F.rgba.toColor(...J.color)));else{const pe=ae;this._themeService.modifyColors((Pe=>Pe[pe]=F.rgba.toColor(...J.color)))}break;case 2:this._themeService.restoreColor(J.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(B){B?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(te.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(B){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[I"),this.updateCursorStyle(B),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var B;return(B=this.textarea)===null||B===void 0?void 0:B.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const B=this.buffer.ybase+this.buffer.y,J=this.buffer.lines.get(B);if(!J)return;const ae=Math.min(this.buffer.x,this.cols-1),ce=this._renderService.dimensions.css.cell.height,xe=J.getWidth(ae),pe=this._renderService.dimensions.css.cell.width*xe,Pe=this.buffer.y*this._renderService.dimensions.css.cell.height,Ve=ae*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ve+"px",this.textarea.style.top=Pe+"px",this.textarea.style.width=pe+"px",this.textarea.style.height=ce+"px",this.textarea.style.lineHeight=ce+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,x.addDisposableDomListener)(this.element,"copy",(J=>{this.hasSelection()&&(0,f.copyHandler)(J,this._selectionService)})));const B=J=>(0,f.handlePasteEvent)(J,this.textarea,this.coreService,this.optionsService);this.register((0,x.addDisposableDomListener)(this.textarea,"paste",B)),this.register((0,x.addDisposableDomListener)(this.element,"paste",B)),se.isFirefox?this.register((0,x.addDisposableDomListener)(this.element,"mousedown",(J=>{J.button===2&&(0,f.rightClickHandler)(J,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,x.addDisposableDomListener)(this.element,"contextmenu",(J=>{(0,f.rightClickHandler)(J,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),se.isLinux&&this.register((0,x.addDisposableDomListener)(this.element,"auxclick",(J=>{J.button===1&&(0,f.moveTextAreaUnderMouseCursor)(J,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,x.addDisposableDomListener)(this.textarea,"keyup",(B=>this._keyUp(B)),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"keydown",(B=>this._keyDown(B)),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"keypress",(B=>this._keyPress(B)),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionupdate",(B=>this._compositionHelper.compositionupdate(B)))),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,x.addDisposableDomListener)(this.textarea,"input",(B=>this._inputEvent(B)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(B){var J;if(!B)throw new Error("Terminal requires a parent element.");B.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=B.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),B.appendChild(this.element);const ae=oe.createDocumentFragment();this._viewportElement=oe.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ae.appendChild(this._viewportElement),this._viewportScrollArea=oe.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=oe.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=oe.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ae.appendChild(this.screenElement),this.textarea=oe.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",S.promptLabel),se.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(T.CoreBrowserService,this.textarea,(J=this._document.defaultView)!==null&&J!==void 0?J:window),this._instantiationService.setService(N.ICoreBrowserService,this._coreBrowserService),this.register((0,x.addDisposableDomListener)(this.textarea,"focus",(ce=>this._handleTextAreaFocus(ce)))),this.register((0,x.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(y.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(N.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(U.ThemeService),this._instantiationService.setService(N.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(k.CharacterJoinerService),this._instantiationService.setService(N.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(N.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((ce=>this._onRender.fire(ce)))),this.onResize((ce=>this._renderService.resize(ce.cols,ce.rows))),this._compositionView=oe.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(ae);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(j.MouseService),this._instantiationService.setService(N.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(E.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((ce=>this.scrollLines(ce.amount,ce.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(R.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(N.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((ce=>this.scrollLines(ce.amount,ce.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((ce=>this._renderService.handleSelectionChanged(ce.start,ce.end,ce.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((ce=>{this.textarea.value=ce,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((ce=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,x.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(C.BufferDecorationRenderer,this.screenElement)),this.register((0,x.addDisposableDomListener)(this.element,"mousedown",(ce=>this._selectionService.handleMouseDown(ce)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(te.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(ce=>this._handleScreenReaderModeOptionChange(ce)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(p.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(ce=>{!this._overviewRulerRenderer&&ce&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(p.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(v.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const B=this,J=this.element;function ae(pe){const Pe=B._mouseService.getMouseReportCoords(pe,B.screenElement);if(!Pe)return!1;let Ve,dt;switch(pe.overrideType||pe.type){case"mousemove":dt=32,pe.buttons===void 0?(Ve=3,pe.button!==void 0&&(Ve=pe.button<3?pe.button:3)):Ve=1&pe.buttons?0:4&pe.buttons?1:2&pe.buttons?2:3;break;case"mouseup":dt=0,Ve=pe.button<3?pe.button:3;break;case"mousedown":dt=1,Ve=pe.button<3?pe.button:3;break;case"wheel":if(B.viewport.getLinesScrolled(pe)===0)return!1;dt=pe.deltaY<0?0:1,Ve=4;break;default:return!1}return!(dt===void 0||Ve===void 0||Ve>4)&&B.coreMouseService.triggerMouseEvent({col:Pe.col,row:Pe.row,x:Pe.x,y:Pe.y,button:Ve,action:dt,ctrl:pe.ctrlKey,alt:pe.altKey,shift:pe.shiftKey})}const ce={mouseup:null,wheel:null,mousedrag:null,mousemove:null},xe={mouseup:pe=>(ae(pe),pe.buttons||(this._document.removeEventListener("mouseup",ce.mouseup),ce.mousedrag&&this._document.removeEventListener("mousemove",ce.mousedrag)),this.cancel(pe)),wheel:pe=>(ae(pe),this.cancel(pe,!0)),mousedrag:pe=>{pe.buttons&&ae(pe)},mousemove:pe=>{pe.buttons||ae(pe)}};this.register(this.coreMouseService.onProtocolChange((pe=>{pe?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(pe)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&pe?ce.mousemove||(J.addEventListener("mousemove",xe.mousemove),ce.mousemove=xe.mousemove):(J.removeEventListener("mousemove",ce.mousemove),ce.mousemove=null),16&pe?ce.wheel||(J.addEventListener("wheel",xe.wheel,{passive:!1}),ce.wheel=xe.wheel):(J.removeEventListener("wheel",ce.wheel),ce.wheel=null),2&pe?ce.mouseup||(J.addEventListener("mouseup",xe.mouseup),ce.mouseup=xe.mouseup):(this._document.removeEventListener("mouseup",ce.mouseup),J.removeEventListener("mouseup",ce.mouseup),ce.mouseup=null),4&pe?ce.mousedrag||(ce.mousedrag=xe.mousedrag):(this._document.removeEventListener("mousemove",ce.mousedrag),ce.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,x.addDisposableDomListener)(J,"mousedown",(pe=>{if(pe.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(pe))return ae(pe),ce.mouseup&&this._document.addEventListener("mouseup",ce.mouseup),ce.mousedrag&&this._document.addEventListener("mousemove",ce.mousedrag),this.cancel(pe)}))),this.register((0,x.addDisposableDomListener)(J,"wheel",(pe=>{if(!ce.wheel){if(!this.buffer.hasScrollback){const Pe=this.viewport.getLinesScrolled(pe);if(Pe===0)return;const Ve=Y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(pe.deltaY<0?"A":"B");let dt="";for(let Qt=0;Qt<Math.abs(Pe);Qt++)dt+=Ve;return this.coreService.triggerDataEvent(dt,!0),this.cancel(pe,!0)}return this.viewport.handleWheel(pe)?this.cancel(pe):void 0}}),{passive:!1})),this.register((0,x.addDisposableDomListener)(J,"touchstart",(pe=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(pe),this.cancel(pe)}),{passive:!0})),this.register((0,x.addDisposableDomListener)(J,"touchmove",(pe=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(pe)?void 0:this.cancel(pe)}),{passive:!1}))}refresh(B,J){var ae;(ae=this._renderService)===null||ae===void 0||ae.refreshRows(B,J)}updateCursorStyle(B){var J;!((J=this._selectionService)===null||J===void 0)&&J.shouldColumnSelect(B)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(B,J,ae=0){var ce;ae===1?(super.scrollLines(B,J,ae),this.refresh(0,this.rows-1)):(ce=this.viewport)===null||ce===void 0||ce.scrollLines(B)}paste(B){(0,f.paste)(B,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(B){this._customKeyEventHandler=B}registerLinkProvider(B){return this.linkifier2.registerLinkProvider(B)}registerCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const J=this._characterJoinerService.register(B);return this.refresh(0,this.rows-1),J}deregisterCharacterJoiner(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(B)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(B){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+B)}registerDecoration(B){return this._decorationService.registerDecoration(B)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(B,J,ae){this._selectionService.setSelection(B,J,ae)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var B;(B=this._selectionService)===null||B===void 0||B.clearSelection()}selectAll(){var B;(B=this._selectionService)===null||B===void 0||B.selectAll()}selectLines(B,J){var ae;(ae=this._selectionService)===null||ae===void 0||ae.selectLines(B,J)}_keyDown(B){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;const J=this.browser.isMac&&this.options.macOptionIsMeta&&B.altKey;if(!J&&!this._compositionHelper.keydown(B))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;J||B.key!=="Dead"&&B.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ae=(0,M.evaluateKeyboardEvent)(B,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(B),ae.type===3||ae.type===2){const ce=this.rows-1;return this.scrollLines(ae.type===2?-ce:ce),this.cancel(B,!0)}return ae.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,B)||(ae.cancel&&this.cancel(B,!0),!ae.key||!!(B.key&&!B.ctrlKey&&!B.altKey&&!B.metaKey&&B.key.length===1&&B.key.charCodeAt(0)>=65&&B.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ae.key!==Y.C0.ETX&&ae.key!==Y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ae.key,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(ae.key,!0),!this.optionsService.rawOptions.screenReaderMode||B.altKey||B.ctrlKey?this.cancel(B,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(B,J){const ae=B.isMac&&!this.options.macOptionIsMeta&&J.altKey&&!J.ctrlKey&&!J.metaKey||B.isWindows&&J.altKey&&J.ctrlKey&&!J.metaKey||B.isWindows&&J.getModifierState("AltGraph");return J.type==="keypress"?ae:ae&&(!J.keyCode||J.keyCode>47)}_keyUp(B){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1||((function(J){return J.keyCode===16||J.keyCode===17||J.keyCode===18})(B)||this.focus(),this.updateCursorStyle(B),this._keyPressHandled=!1)}_keyPress(B){let J;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(this.cancel(B),B.charCode)J=B.charCode;else if(B.which===null||B.which===void 0)J=B.keyCode;else{if(B.which===0||B.charCode===0)return!1;J=B.which}return!(!J||(B.altKey||B.ctrlKey||B.metaKey)&&!this._isThirdLevelShift(this.browser,B)||(J=String.fromCharCode(J),this._onKey.fire({key:J,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(J,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(B){if(B.data&&B.inputType==="insertText"&&(!B.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const J=B.data;return this.coreService.triggerDataEvent(J,!0),this.cancel(B),!0}return!1}resize(B,J){B!==this.cols||J!==this.rows?super.resize(B,J):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(B,J){var ae,ce;(ae=this._charSizeService)===null||ae===void 0||ae.measure(),(ce=this.viewport)===null||ce===void 0||ce.syncScrollArea(!0)}clear(){var B;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let J=1;J<this.rows;J++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(B=this.viewport)===null||B===void 0||B.reset(),this.refresh(0,this.rows-1)}}reset(){var B,J;this.options.rows=this.rows,this.options.cols=this.cols;const ae=this._customKeyEventHandler;this._setup(),super.reset(),(B=this._selectionService)===null||B===void 0||B.reset(),this._decorationService.reset(),(J=this.viewport)===null||J===void 0||J.reset(),this._customKeyEventHandler=ae,this.refresh(0,this.rows-1)}clearTextureAtlas(){var B;(B=this._renderService)===null||B===void 0||B.clearTextureAtlas()}_reportFocus(){var B;!((B=this.element)===null||B===void 0)&&B.classList.contains("focus")?this.coreService.triggerDataEvent(Y.C0.ESC+"[I"):this.coreService.triggerDataEvent(Y.C0.ESC+"[O")}_reportWindowsOptions(B){if(this._renderService)switch(B){case V.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const J=this._renderService.dimensions.css.canvas.width.toFixed(0),ae=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[4;${ae};${J}t`);break;case V.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ce=this._renderService.dimensions.css.cell.width.toFixed(0),xe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[6;${xe};${ce}t`)}}cancel(B,J){if(this.options.cancelEvents||J)return B.preventDefault(),B.stopPropagation(),!1}}c.Terminal=de},9924:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TimeBasedDebouncer=void 0,c.TimeBasedDebouncer=class{constructor(h,f=1e3){this._renderCallback=h,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(h,f,x){this._rowCount=x,h=h!==void 0?h:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const g=Date.now();if(g-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=g,this._innerRefresh();else if(!this._additionalRefreshRequested){const S=g-this._lastRefreshMs,A=this._debounceThresholdMS-S;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),A)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const h=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,f)}}},1680:function(d,c,h){var f=this&&this.__decorate||function(_,v,y,k){var T,j=arguments.length,D=j<3?v:k===null?k=Object.getOwnPropertyDescriptor(v,y):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,v,y,k);else for(var R=_.length-1;R>=0;R--)(T=_[R])&&(D=(j<3?T(D):j>3?T(v,y,D):T(v,y))||D);return j>3&&D&&Object.defineProperty(v,y,D),D},x=this&&this.__param||function(_,v){return function(y,k){v(y,k,_)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Viewport=void 0;const g=h(3656),S=h(4725),A=h(8460),E=h(844),C=h(2585);let p=c.Viewport=class extends E.Disposable{constructor(_,v,y,k,T,j,D,R){super(),this._viewportElement=_,this._scrollArea=v,this._bufferService=y,this._optionsService=k,this._charSizeService=T,this._renderService=j,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new A.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((N=>this._activeBuffer=N.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((N=>this._renderDimensions=N))),this._handleThemeChange(R.colors),this.register(R.onChangeColors((N=>this._handleThemeChange(N)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(_){this._viewportElement.style.backgroundColor=_.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(_){if(_)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const v=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==v&&(this._lastRecordedBufferHeight=v,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const _=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==_&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=_),this._refreshAnimationFrame=null}syncScrollArea(_=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(_);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(_)}_handleScroll(_){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const _=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(_*(this._smoothScrollState.target-this._smoothScrollState.origin)),_<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(_,v){const y=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&y<this._lastRecordedBufferHeight)||(_.cancelable&&_.preventDefault(),!1)}handleWheel(_){const v=this._getPixelsScrolled(_);return v!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+v:this._smoothScrollState.target+=v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=v,this._bubbleScroll(_,v))}scrollLines(_){if(_!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const v=_*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!1})}_getPixelsScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let v=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v}getBufferElements(_,v){var y;let k,T="";const j=[],D=v??this._bufferService.buffer.lines.length,R=this._bufferService.buffer.lines;for(let N=_;N<D;N++){const U=R.get(N);if(!U)continue;const F=(y=R.get(N+1))===null||y===void 0?void 0:y.isWrapped;if(T+=U.translateToString(!F),!F||N===R.length-1){const I=document.createElement("div");I.textContent=T,j.push(I),T.length>0&&(k=I),T=""}}return{bufferElements:j,cursorElement:k}}getLinesScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let v=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v}_applyScrollModifier(_,v){const y=this._optionsService.rawOptions.fastScrollModifier;return y==="alt"&&v.altKey||y==="ctrl"&&v.ctrlKey||y==="shift"&&v.shiftKey?_*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:_*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(_){this._lastTouchY=_.touches[0].pageY}handleTouchMove(_){const v=this._lastTouchY-_.touches[0].pageY;return this._lastTouchY=_.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(_,v))}};c.Viewport=p=f([x(2,C.IBufferService),x(3,C.IOptionsService),x(4,S.ICharSizeService),x(5,S.IRenderService),x(6,S.ICoreBrowserService),x(7,S.IThemeService)],p)},3107:function(d,c,h){var f=this&&this.__decorate||function(p,_,v,y){var k,T=arguments.length,j=T<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(p,_,v,y);else for(var D=p.length-1;D>=0;D--)(k=p[D])&&(j=(T<3?k(j):T>3?k(_,v,j):k(_,v))||j);return T>3&&j&&Object.defineProperty(_,v,j),j},x=this&&this.__param||function(p,_){return function(v,y){_(v,y,p)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferDecorationRenderer=void 0;const g=h(3656),S=h(4725),A=h(844),E=h(2585);let C=c.BufferDecorationRenderer=class extends A.Disposable{constructor(p,_,v,y){super(),this._screenElement=p,this._bufferService=_,this._decorationService=v,this._renderService=y,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register((0,g.addDisposableDomListener)(window,"resize",(()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((k=>this._removeDecoration(k)))),this.register((0,A.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const p of this._decorationService.decorations)this._renderDecoration(p);this._dimensionsChanged=!1}_renderDecoration(p){this._refreshStyle(p),this._dimensionsChanged&&this._refreshXPosition(p)}_createElement(p){var _,v;const y=document.createElement("div");y.classList.add("xterm-decoration"),y.classList.toggle("xterm-decoration-top-layer",((_=p?.options)===null||_===void 0?void 0:_.layer)==="top"),y.style.width=`${Math.round((p.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,y.style.height=(p.options.height||1)*this._renderService.dimensions.css.cell.height+"px",y.style.top=(p.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",y.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const k=(v=p.options.x)!==null&&v!==void 0?v:0;return k&&k>this._bufferService.cols&&(y.style.display="none"),this._refreshXPosition(p,y),y}_refreshStyle(p){const _=p.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)p.element&&(p.element.style.display="none",p.onRenderEmitter.fire(p.element));else{let v=this._decorationElements.get(p);v||(v=this._createElement(p),p.element=v,this._decorationElements.set(p,v),this._container.appendChild(v),p.onDispose((()=>{this._decorationElements.delete(p),v.remove()}))),v.style.top=_*this._renderService.dimensions.css.cell.height+"px",v.style.display=this._altBufferIsActive?"none":"block",p.onRenderEmitter.fire(v)}}_refreshXPosition(p,_=p.element){var v;if(!_)return;const y=(v=p.options.x)!==null&&v!==void 0?v:0;(p.options.anchor||"left")==="right"?_.style.right=y?y*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=y?y*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(p){var _;(_=this._decorationElements.get(p))===null||_===void 0||_.remove(),this._decorationElements.delete(p),p.dispose()}};c.BufferDecorationRenderer=C=f([x(1,E.IBufferService),x(2,E.IDecorationService),x(3,S.IRenderService)],C)},5871:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorZoneStore=void 0,c.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(h){if(h.options.overviewRulerOptions){for(const f of this._zones)if(f.color===h.options.overviewRulerOptions.color&&f.position===h.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,h.marker.line))return;if(this._lineAdjacentToZone(f,h.marker.line,h.options.overviewRulerOptions.position))return void this._addLineToZone(f,h.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=h.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=h.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=h.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=h.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:h.options.overviewRulerOptions.color,position:h.options.overviewRulerOptions.position,startBufferLine:h.marker.line,endBufferLine:h.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(h){this._linePadding=h}_lineIntersectsZone(h,f){return f>=h.startBufferLine&&f<=h.endBufferLine}_lineAdjacentToZone(h,f,x){return f>=h.startBufferLine-this._linePadding[x||"full"]&&f<=h.endBufferLine+this._linePadding[x||"full"]}_addLineToZone(h,f){h.startBufferLine=Math.min(h.startBufferLine,f),h.endBufferLine=Math.max(h.endBufferLine,f)}}},5744:function(d,c,h){var f=this&&this.__decorate||function(k,T,j,D){var R,N=arguments.length,U=N<3?T:D===null?D=Object.getOwnPropertyDescriptor(T,j):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(k,T,j,D);else for(var F=k.length-1;F>=0;F--)(R=k[F])&&(U=(N<3?R(U):N>3?R(T,j,U):R(T,j))||U);return N>3&&U&&Object.defineProperty(T,j,U),U},x=this&&this.__param||function(k,T){return function(j,D){T(j,D,k)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OverviewRulerRenderer=void 0;const g=h(5871),S=h(3656),A=h(4725),E=h(844),C=h(2585),p={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},v={full:0,left:0,center:0,right:0};let y=c.OverviewRulerRenderer=class extends E.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(k,T,j,D,R,N,U){var F;super(),this._viewportElement=k,this._screenElement=T,this._bufferService=j,this._decorationService=D,this._renderService=R,this._optionsService=N,this._coreBrowseService=U,this._colorZoneStore=new g.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(F=this._viewportElement.parentElement)===null||F===void 0||F.insertBefore(this._canvas,this._viewportElement);const I=this._canvas.getContext("2d");if(!I)throw new Error("Ctx cannot be null");this._ctx=I,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,E.toDisposable)((()=>{var W;(W=this._canvas)===null||W===void 0||W.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register((0,S.addDisposableDomListener)(this._coreBrowseService.window,"resize",(()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const k=Math.floor(this._canvas.width/3),T=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=k,_.center=T,_.right=k,this._refreshDrawHeightConstants(),v.full=0,v.left=0,v.center=_.left,v.right=_.left+_.center}_refreshDrawHeightConstants(){p.full=Math.round(2*this._coreBrowseService.dpr);const k=this._canvas.height/this._bufferService.buffer.lines.length,T=Math.round(Math.max(Math.min(k,12),6)*this._coreBrowseService.dpr);p.left=T,p.center=T,p.right=T}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const T of this._decorationService.decorations)this._colorZoneStore.addDecoration(T);this._ctx.lineWidth=1;const k=this._colorZoneStore.zones;for(const T of k)T.position!=="full"&&this._renderColorZone(T);for(const T of k)T.position==="full"&&this._renderColorZone(T);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(k){this._ctx.fillStyle=k.color,this._ctx.fillRect(v[k.position||"full"],Math.round((this._canvas.height-1)*(k.startBufferLine/this._bufferService.buffers.active.lines.length)-p[k.position||"full"]/2),_[k.position||"full"],Math.round((this._canvas.height-1)*((k.endBufferLine-k.startBufferLine)/this._bufferService.buffers.active.lines.length)+p[k.position||"full"]))}_queueRefresh(k,T){this._shouldUpdateDimensions=k||this._shouldUpdateDimensions,this._shouldUpdateAnchor=T||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};c.OverviewRulerRenderer=y=f([x(2,C.IBufferService),x(3,C.IDecorationService),x(4,A.IRenderService),x(5,C.IOptionsService),x(6,A.ICoreBrowserService)],y)},2950:function(d,c,h){var f=this&&this.__decorate||function(C,p,_,v){var y,k=arguments.length,T=k<3?p:v===null?v=Object.getOwnPropertyDescriptor(p,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,p,_,v);else for(var j=C.length-1;j>=0;j--)(y=C[j])&&(T=(k<3?y(T):k>3?y(p,_,T):y(p,_))||T);return k>3&&T&&Object.defineProperty(p,_,T),T},x=this&&this.__param||function(C,p){return function(_,v){p(_,v,C)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CompositionHelper=void 0;const g=h(4725),S=h(2585),A=h(2584);let E=c.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(C,p,_,v,y,k){this._textarea=C,this._compositionView=p,this._bufferService=_,this._optionsService=v,this._coreService=y,this._renderService=k,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(C){this._compositionView.textContent=C.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(C){if(this._isComposing||this._isSendingComposition){if(C.keyCode===229||C.keyCode===16||C.keyCode===17||C.keyCode===18)return!1;this._finalizeComposition(!1)}return C.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(C){if(this._compositionView.classList.remove("active"),this._isComposing=!1,C){const p={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,p.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(p.start,p.end):this._textarea.value.substring(p.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}}),0)}else{this._isSendingComposition=!1;const p=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(p,!0)}}_handleAnyTextareaChanges(){const C=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const p=this._textarea.value,_=p.replace(C,"");this._dataAlreadySent=_,p.length>C.length?this._coreService.triggerDataEvent(_,!0):p.length<C.length?this._coreService.triggerDataEvent(`${A.C0.DEL}`,!0):p.length===C.length&&p!==C&&this._coreService.triggerDataEvent(p,!0)}}),0)}updateCompositionElements(C){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,y=p*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=y+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const k=this._compositionView.getBoundingClientRect();this._textarea.style.left=y+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(k.width,1)+"px",this._textarea.style.height=Math.max(k.height,1)+"px",this._textarea.style.lineHeight=k.height+"px"}C||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};c.CompositionHelper=E=f([x(2,S.IBufferService),x(3,S.IOptionsService),x(4,S.ICoreService),x(5,g.IRenderService)],E)},9806:(d,c)=>{function h(f,x,g){const S=g.getBoundingClientRect(),A=f.getComputedStyle(g),E=parseInt(A.getPropertyValue("padding-left")),C=parseInt(A.getPropertyValue("padding-top"));return[x.clientX-S.left-E,x.clientY-S.top-C]}Object.defineProperty(c,"__esModule",{value:!0}),c.getCoords=c.getCoordsRelativeToElement=void 0,c.getCoordsRelativeToElement=h,c.getCoords=function(f,x,g,S,A,E,C,p,_){if(!E)return;const v=h(f,x,g);return v?(v[0]=Math.ceil((v[0]+(_?C/2:0))/C),v[1]=Math.ceil(v[1]/p),v[0]=Math.min(Math.max(v[0],1),S+(_?1:0)),v[1]=Math.min(Math.max(v[1],1),A),v):void 0}},9504:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.moveToCellSequence=void 0;const f=h(2584);function x(p,_,v,y){const k=p-g(p,v),T=_-g(_,v),j=Math.abs(k-T)-(function(D,R,N){let U=0;const F=D-g(D,N),I=R-g(R,N);for(let W=0;W<Math.abs(F-I);W++){const Q=S(D,R)==="A"?-1:1,se=N.buffer.lines.get(F+Q*W);se?.isWrapped&&U++}return U})(p,_,v);return C(j,E(S(p,_),y))}function g(p,_){let v=0,y=_.buffer.lines.get(p),k=y?.isWrapped;for(;k&&p>=0&&p<_.rows;)v++,y=_.buffer.lines.get(--p),k=y?.isWrapped;return v}function S(p,_){return p>_?"A":"B"}function A(p,_,v,y,k,T){let j=p,D=_,R="";for(;j!==v||D!==y;)j+=k?1:-1,k&&j>T.cols-1?(R+=T.buffer.translateBufferLineToString(D,!1,p,j),j=0,p=0,D++):!k&&j<0&&(R+=T.buffer.translateBufferLineToString(D,!1,0,p+1),j=T.cols-1,p=j,D--);return R+T.buffer.translateBufferLineToString(D,!1,p,j)}function E(p,_){const v=_?"O":"[";return f.C0.ESC+v+p}function C(p,_){p=Math.floor(p);let v="";for(let y=0;y<p;y++)v+=_;return v}c.moveToCellSequence=function(p,_,v,y){const k=v.buffer.x,T=v.buffer.y;if(!v.buffer.hasScrollback)return(function(R,N,U,F,I,W){return x(N,F,I,W).length===0?"":C(A(R,N,R,N-g(N,I),!1,I).length,E("D",W))})(k,T,0,_,v,y)+x(T,_,v,y)+(function(R,N,U,F,I,W){let Q;Q=x(N,F,I,W).length>0?F-g(F,I):N;const se=F,$=(function(Y,M,H,z,L,V){let te;return te=x(H,z,L,V).length>0?z-g(z,L):M,Y<H&&te<=z||Y>=H&&te<z?"C":"D"})(R,N,U,F,I,W);return C(A(R,Q,U,se,$==="C",I).length,E($,W))})(k,T,p,_,v,y);let j;if(T===_)return j=k>p?"D":"C",C(Math.abs(k-p),E(j,y));j=T>_?"D":"C";const D=Math.abs(T-_);return C((function(R,N){return N.cols-R})(T>_?p:k,v)+(D-1)*v.cols+1+((T>_?k:p)-1),E(j,y))}},1296:function(d,c,h){var f=this&&this.__decorate||function(I,W,Q,se){var $,Y=arguments.length,M=Y<3?W:se===null?se=Object.getOwnPropertyDescriptor(W,Q):se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(I,W,Q,se);else for(var H=I.length-1;H>=0;H--)($=I[H])&&(M=(Y<3?$(M):Y>3?$(W,Q,M):$(W,Q))||M);return Y>3&&M&&Object.defineProperty(W,Q,M),M},x=this&&this.__param||function(I,W){return function(Q,se){W(Q,se,I)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRenderer=void 0;const g=h(3787),S=h(2550),A=h(2223),E=h(6171),C=h(4725),p=h(8055),_=h(8460),v=h(844),y=h(2585),k="xterm-dom-renderer-owner-",T="xterm-rows",j="xterm-fg-",D="xterm-bg-",R="xterm-focus",N="xterm-selection";let U=1,F=c.DomRenderer=class extends v.Disposable{constructor(I,W,Q,se,$,Y,M,H,z,L){super(),this._element=I,this._screenElement=W,this._viewportElement=Q,this._linkifier2=se,this._charSizeService=Y,this._optionsService=M,this._bufferService=H,this._coreBrowserService=z,this._themeService=L,this._terminalClass=U++,this._rowElements=[],this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(T),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(N),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,E.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((V=>this._injectCss(V)))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(g.DomRendererRowFactory,document),this._element.classList.add(k+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((V=>this._handleLinkHover(V)))),this.register(this._linkifier2.onHideLinkUnderline((V=>this._handleLinkLeave(V)))),this.register((0,v.toDisposable)((()=>{this._element.classList.remove(k+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new S.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const I=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*I,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*I),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/I),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/I),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Q of this._rowElements)Q.style.width=`${this.dimensions.css.canvas.width}px`,Q.style.height=`${this.dimensions.css.cell.height}px`,Q.style.lineHeight=`${this.dimensions.css.cell.height}px`,Q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const W=`${this._terminalSelector} .${T} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=W,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(I){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let W=`${this._terminalSelector} .${T} { color: ${I.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;W+=`${this._terminalSelector} .${T} .xterm-dim { color: ${p.color.multiplyOpacity(I.foreground,.5).css};}`,W+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,W+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",W+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${I.cursor.css};  color: ${I.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${I.cursor.css}; }}`,W+=`${this._terminalSelector} .${T}.${R} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${T}.${R} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${T} .xterm-cursor.xterm-cursor-block { background-color: ${I.cursor.css}; color: ${I.cursorAccent.css};}${this._terminalSelector} .${T} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${I.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${T} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${I.cursor.css} inset;}${this._terminalSelector} .${T} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${I.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,W+=`${this._terminalSelector} .${N} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${N} div { position: absolute; background-color: ${I.selectionBackgroundOpaque.css};}${this._terminalSelector} .${N} div { position: absolute; background-color: ${I.selectionInactiveBackgroundOpaque.css};}`;for(const[Q,se]of I.ansi.entries())W+=`${this._terminalSelector} .${j}${Q} { color: ${se.css}; }${this._terminalSelector} .${j}${Q}.xterm-dim { color: ${p.color.multiplyOpacity(se,.5).css}; }${this._terminalSelector} .${D}${Q} { background-color: ${se.css}; }`;W+=`${this._terminalSelector} .${j}${A.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(I.background).css}; }${this._terminalSelector} .${j}${A.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(I.background),.5).css}; }${this._terminalSelector} .${D}${A.INVERTED_DEFAULT_COLOR} { background-color: ${I.foreground.css}; }`,this._themeStyleElement.textContent=W}_setDefaultSpacing(){const I=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${I}px`,this._rowFactory.defaultSpacing=I}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(I,W){for(let Q=this._rowElements.length;Q<=W;Q++){const se=document.createElement("div");this._rowContainer.appendChild(se),this._rowElements.push(se)}for(;this._rowElements.length>W;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(I,W){this._refreshRowElements(I,W),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(R)}handleFocus(){this._rowContainer.classList.add(R),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(I,W,Q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(I,W,Q),this.renderRows(0,this._bufferService.rows-1),!I||!W)return;const se=I[1]-this._bufferService.buffer.ydisp,$=W[1]-this._bufferService.buffer.ydisp,Y=Math.max(se,0),M=Math.min($,this._bufferService.rows-1);if(Y>=this._bufferService.rows||M<0)return;const H=document.createDocumentFragment();if(Q){const z=I[0]>W[0];H.appendChild(this._createSelectionElement(Y,z?W[0]:I[0],z?I[0]:W[0],M-Y+1))}else{const z=se===Y?I[0]:0,L=Y===$?W[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(Y,z,L));const V=M-Y-1;if(H.appendChild(this._createSelectionElement(Y+1,0,this._bufferService.cols,V)),Y!==M){const te=$===M?W[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(M,0,te))}}this._selectionContainer.appendChild(H)}_createSelectionElement(I,W,Q,se=1){const $=document.createElement("div");return $.style.height=se*this.dimensions.css.cell.height+"px",$.style.top=I*this.dimensions.css.cell.height+"px",$.style.left=W*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(Q-W)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const I of this._rowElements)I.replaceChildren()}renderRows(I,W){const Q=this._bufferService.buffer,se=Q.ybase+Q.y,$=Math.min(Q.x,this._bufferService.cols-1),Y=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,H=this._optionsService.rawOptions.cursorInactiveStyle;for(let z=I;z<=W;z++){const L=z+Q.ydisp,V=this._rowElements[z],te=Q.lines.get(L);if(!V||!te)break;V.replaceChildren(...this._rowFactory.createRow(te,L,L===se,M,H,$,Y,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${k}${this._terminalClass}`}_handleLinkHover(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!0)}_handleLinkLeave(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!1)}_setCellUnderline(I,W,Q,se,$,Y){Q<0&&(I=0),se<0&&(W=0);const M=this._bufferService.rows-1;Q=Math.max(Math.min(Q,M),0),se=Math.max(Math.min(se,M),0),$=Math.min($,this._bufferService.cols);const H=this._bufferService.buffer,z=H.ybase+H.y,L=Math.min(H.x,$-1),V=this._optionsService.rawOptions.cursorBlink,te=this._optionsService.rawOptions.cursorStyle,oe=this._optionsService.rawOptions.cursorInactiveStyle;for(let de=Q;de<=se;++de){const me=de+H.ydisp,B=this._rowElements[de],J=H.lines.get(me);if(!B||!J)break;B.replaceChildren(...this._rowFactory.createRow(J,me,me===z,te,oe,L,V,this.dimensions.css.cell.width,this._widthCache,Y?de===Q?I:0:-1,Y?(de===se?W:$)-1:-1))}}};c.DomRenderer=F=f([x(4,y.IInstantiationService),x(5,C.ICharSizeService),x(6,y.IOptionsService),x(7,y.IBufferService),x(8,C.ICoreBrowserService),x(9,C.IThemeService)],F)},3787:function(d,c,h){var f=this&&this.__decorate||function(j,D,R,N){var U,F=arguments.length,I=F<3?D:N===null?N=Object.getOwnPropertyDescriptor(D,R):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(j,D,R,N);else for(var W=j.length-1;W>=0;W--)(U=j[W])&&(I=(F<3?U(I):F>3?U(D,R,I):U(D,R))||I);return F>3&&I&&Object.defineProperty(D,R,I),I},x=this&&this.__param||function(j,D){return function(R,N){D(R,N,j)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRendererRowFactory=void 0;const g=h(2223),S=h(643),A=h(511),E=h(2585),C=h(8055),p=h(4725),_=h(4269),v=h(6171),y=h(3734);let k=c.DomRendererRowFactory=class{constructor(j,D,R,N,U,F,I){this._document=j,this._characterJoinerService=D,this._optionsService=R,this._coreBrowserService=N,this._coreService=U,this._decorationService=F,this._themeService=I,this._workCell=new A.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(j,D,R){this._selectionStart=j,this._selectionEnd=D,this._columnSelectMode=R}createRow(j,D,R,N,U,F,I,W,Q,se,$){const Y=[],M=this._characterJoinerService.getJoinedCharacters(D),H=this._themeService.colors;let z,L=j.getNoBgTrimmedLength();R&&L<F+1&&(L=F+1);let V=0,te="",oe=0,de=0,me=0,B=!1,J=0,ae=!1,ce=0;const xe=[],pe=se!==-1&&$!==-1;for(let Pe=0;Pe<L;Pe++){j.loadCell(Pe,this._workCell);let Ve=this._workCell.getWidth();if(Ve===0)continue;let dt=!1,Qt=Pe,ke=this._workCell;if(M.length>0&&Pe===M[0][0]){dt=!0;const Fe=M.shift();ke=new _.JoinedCellData(this._workCell,j.translateToString(!0,Fe[0],Fe[1]),Fe[1]-Fe[0]),Qt=Fe[1]-1,Ve=ke.getWidth()}const li=this._isCellInSelection(Pe,D),ci=R&&Pe===F,ui=pe&&Pe>=se&&Pe<=$;let Fi=!1;this._decorationService.forEachDecorationAtCell(Pe,D,void 0,(Fe=>{Fi=!0}));let vs=ke.getChars()||S.WHITESPACE_CELL_CHAR;if(vs===" "&&(ke.isUnderline()||ke.isOverline())&&(vs=""),ce=Ve*W-Q.get(vs,ke.isBold(),ke.isItalic()),z){if(V&&(li&&ae||!li&&!ae&&ke.bg===oe)&&(li&&ae&&H.selectionForeground||ke.fg===de)&&ke.extended.ext===me&&ui===B&&ce===J&&!ci&&!dt&&!Fi){te+=vs,V++;continue}V&&(z.textContent=te),z=this._document.createElement("span"),V=0,te=""}else z=this._document.createElement("span");if(oe=ke.bg,de=ke.fg,me=ke.extended.ext,B=ui,J=ce,ae=li,dt&&F>=Pe&&F<=Qt&&(F=Pe),!this._coreService.isCursorHidden&&ci){if(xe.push("xterm-cursor"),this._coreBrowserService.isFocused)I&&xe.push("xterm-cursor-blink"),xe.push(N==="bar"?"xterm-cursor-bar":N==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(U)switch(U){case"outline":xe.push("xterm-cursor-outline");break;case"block":xe.push("xterm-cursor-block");break;case"bar":xe.push("xterm-cursor-bar");break;case"underline":xe.push("xterm-cursor-underline")}}if(ke.isBold()&&xe.push("xterm-bold"),ke.isItalic()&&xe.push("xterm-italic"),ke.isDim()&&xe.push("xterm-dim"),te=ke.isInvisible()?S.WHITESPACE_CELL_CHAR:ke.getChars()||S.WHITESPACE_CELL_CHAR,ke.isUnderline()&&(xe.push(`xterm-underline-${ke.extended.underlineStyle}`),te===" "&&(te=""),!ke.isUnderlineColorDefault()))if(ke.isUnderlineColorRGB())z.style.textDecorationColor=`rgb(${y.AttributeData.toColorRGB(ke.getUnderlineColor()).join(",")})`;else{let Fe=ke.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ke.isBold()&&Fe<8&&(Fe+=8),z.style.textDecorationColor=H.ansi[Fe].css}ke.isOverline()&&(xe.push("xterm-overline"),te===" "&&(te="")),ke.isStrikethrough()&&xe.push("xterm-strikethrough"),ui&&(z.style.textDecoration="underline");let Bt=ke.getFgColor(),fe=ke.getFgColorMode(),ve=ke.getBgColor(),qe=ke.getBgColorMode();const tt=!!ke.isInverse();if(tt){const Fe=Bt;Bt=ve,ve=Fe;const ki=fe;fe=qe,qe=ki}let Je,Ci,Ct,Ei=!1;switch(this._decorationService.forEachDecorationAtCell(Pe,D,void 0,(Fe=>{Fe.options.layer!=="top"&&Ei||(Fe.backgroundColorRGB&&(qe=50331648,ve=Fe.backgroundColorRGB.rgba>>8&16777215,Je=Fe.backgroundColorRGB),Fe.foregroundColorRGB&&(fe=50331648,Bt=Fe.foregroundColorRGB.rgba>>8&16777215,Ci=Fe.foregroundColorRGB),Ei=Fe.options.layer==="top")})),!Ei&&li&&(Je=this._coreBrowserService.isFocused?H.selectionBackgroundOpaque:H.selectionInactiveBackgroundOpaque,ve=Je.rgba>>8&16777215,qe=50331648,Ei=!0,H.selectionForeground&&(fe=50331648,Bt=H.selectionForeground.rgba>>8&16777215,Ci=H.selectionForeground)),Ei&&xe.push("xterm-decoration-top"),qe){case 16777216:case 33554432:Ct=H.ansi[ve],xe.push(`xterm-bg-${ve}`);break;case 50331648:Ct=C.rgba.toColor(ve>>16,ve>>8&255,255&ve),this._addStyle(z,`background-color:#${T((ve>>>0).toString(16),"0",6)}`);break;default:tt?(Ct=H.foreground,xe.push(`xterm-bg-${g.INVERTED_DEFAULT_COLOR}`)):Ct=H.background}switch(Je||ke.isDim()&&(Je=C.color.multiplyOpacity(Ct,.5)),fe){case 16777216:case 33554432:ke.isBold()&&Bt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Bt+=8),this._applyMinimumContrast(z,Ct,H.ansi[Bt],ke,Je,void 0)||xe.push(`xterm-fg-${Bt}`);break;case 50331648:const Fe=C.rgba.toColor(Bt>>16&255,Bt>>8&255,255&Bt);this._applyMinimumContrast(z,Ct,Fe,ke,Je,Ci)||this._addStyle(z,`color:#${T(Bt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(z,Ct,H.foreground,ke,Je,void 0)||tt&&xe.push(`xterm-fg-${g.INVERTED_DEFAULT_COLOR}`)}xe.length&&(z.className=xe.join(" "),xe.length=0),ci||dt||Fi?z.textContent=te:V++,ce!==this.defaultSpacing&&(z.style.letterSpacing=`${ce}px`),Y.push(z),Pe=Qt}return z&&V&&(z.textContent=te),Y}_applyMinimumContrast(j,D,R,N,U,F){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.excludeFromContrastRatioDemands)(N.getCode()))return!1;const I=this._getContrastCache(N);let W;if(U||F||(W=I.getColor(D.rgba,R.rgba)),W===void 0){const Q=this._optionsService.rawOptions.minimumContrastRatio/(N.isDim()?2:1);W=C.color.ensureContrastRatio(U||D,F||R,Q),I.setColor((U||D).rgba,(F||R).rgba,W??null)}return!!W&&(this._addStyle(j,`color:${W.css}`),!0)}_getContrastCache(j){return j.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(j,D){j.setAttribute("style",`${j.getAttribute("style")||""}${D};`)}_isCellInSelection(j,D){const R=this._selectionStart,N=this._selectionEnd;return!(!R||!N)&&(this._columnSelectMode?R[0]<=N[0]?j>=R[0]&&D>=R[1]&&j<N[0]&&D<=N[1]:j<R[0]&&D>=R[1]&&j>=N[0]&&D<=N[1]:D>R[1]&&D<N[1]||R[1]===N[1]&&D===R[1]&&j>=R[0]&&j<N[0]||R[1]<N[1]&&D===N[1]&&j<N[0]||R[1]<N[1]&&D===R[1]&&j>=R[0])}};function T(j,D,R){for(;j.length<R;)j=D+j;return j}c.DomRendererRowFactory=k=f([x(1,p.ICharacterJoinerService),x(2,E.IOptionsService),x(3,p.ICoreBrowserService),x(4,E.ICoreService),x(5,E.IDecorationService),x(6,p.IThemeService)],k)},2550:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WidthCache=void 0,c.WidthCache=class{constructor(h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=h.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=h.createElement("span"),x=h.createElement("span");x.style.fontWeight="bold";const g=h.createElement("span");g.style.fontStyle="italic";const S=h.createElement("span");S.style.fontWeight="bold",S.style.fontStyle="italic",this._measureElements=[f,x,g,S],this._container.appendChild(f),this._container.appendChild(x),this._container.appendChild(g),this._container.appendChild(S),h.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(h,f,x,g){h===this._font&&f===this._fontSize&&x===this._weight&&g===this._weightBold||(this._font=h,this._fontSize=f,this._weight=x,this._weightBold=g,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${x}`,this._measureElements[1].style.fontWeight=`${g}`,this._measureElements[2].style.fontWeight=`${x}`,this._measureElements[3].style.fontWeight=`${g}`,this.clear())}get(h,f,x){let g=0;if(!f&&!x&&h.length===1&&(g=h.charCodeAt(0))<256)return this._flat[g]!==-9999?this._flat[g]:this._flat[g]=this._measure(h,0);let S=h;f&&(S+="B"),x&&(S+="I");let A=this._holey.get(S);if(A===void 0){let E=0;f&&(E|=1),x&&(E|=2),A=this._measure(h,E),this._holey.set(S,A)}return A}_measure(h,f){const x=this._measureElements[f];return x.textContent=h.repeat(32),x.offsetWidth/32}}},2223:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TEXT_BASELINE=c.DIM_OPACITY=c.INVERTED_DEFAULT_COLOR=void 0;const f=h(6114);c.INVERTED_DEFAULT_COLOR=257,c.DIM_OPACITY=.5,c.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(d,c)=>{function h(f){return 57508<=f&&f<=57558}Object.defineProperty(c,"__esModule",{value:!0}),c.createRenderDimensions=c.excludeFromContrastRatioDemands=c.isRestrictedPowerlineGlyph=c.isPowerlineGlyph=c.throwIfFalsy=void 0,c.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},c.isPowerlineGlyph=h,c.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},c.excludeFromContrastRatioDemands=function(f){return h(f)||(function(x){return 9472<=x&&x<=9631})(f)},c.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionModel=void 0,c.SelectionModel=class{constructor(h){this._bufferService=h,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?h%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)-1]:[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[h,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[Math.max(h,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const h=this.selectionStart,f=this.selectionEnd;return!(!h||!f)&&(h[1]>f[1]||h[1]===f[1]&&h[0]>f[0])}handleTrim(h){return this.selectionStart&&(this.selectionStart[1]-=h),this.selectionEnd&&(this.selectionEnd[1]-=h),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(d,c,h){var f=this&&this.__decorate||function(p,_,v,y){var k,T=arguments.length,j=T<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(p,_,v,y);else for(var D=p.length-1;D>=0;D--)(k=p[D])&&(j=(T<3?k(j):T>3?k(_,v,j):k(_,v))||j);return T>3&&j&&Object.defineProperty(_,v,j),j},x=this&&this.__param||function(p,_){return function(v,y){_(v,y,p)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharSizeService=void 0;const g=h(2585),S=h(8460),A=h(844);let E=c.CharSizeService=class extends A.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(p,_,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new S.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new C(p,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const p=this._measureStrategy.measure();p.width===this.width&&p.height===this.height||(this.width=p.width,this.height=p.height,this._onCharSizeChange.fire())}};c.CharSizeService=E=f([x(2,g.IOptionsService)],E);class C{constructor(_,v,y){this._document=_,this._parentElement=v,this._optionsService=y,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const _={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return _.width!==0&&_.height!==0&&(this._result.width=_.width/32,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(d,c,h){var f=this&&this.__decorate||function(_,v,y,k){var T,j=arguments.length,D=j<3?v:k===null?k=Object.getOwnPropertyDescriptor(v,y):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,v,y,k);else for(var R=_.length-1;R>=0;R--)(T=_[R])&&(D=(j<3?T(D):j>3?T(v,y,D):T(v,y))||D);return j>3&&D&&Object.defineProperty(v,y,D),D},x=this&&this.__param||function(_,v){return function(y,k){v(y,k,_)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharacterJoinerService=c.JoinedCellData=void 0;const g=h(3734),S=h(643),A=h(511),E=h(2585);class C extends g.AttributeData{constructor(v,y,k){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=y,this._width=k}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.JoinedCellData=C;let p=c.CharacterJoinerService=class ab{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new A.CellData}register(v){const y={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(y),y.id}deregister(v){for(let y=0;y<this._characterJoiners.length;y++)if(this._characterJoiners[y].id===v)return this._characterJoiners.splice(y,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];const y=this._bufferService.buffer.lines.get(v);if(!y||y.length===0)return[];const k=[],T=y.translateToString(!0);let j=0,D=0,R=0,N=y.getFg(0),U=y.getBg(0);for(let F=0;F<y.getTrimmedLength();F++)if(y.loadCell(F,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==N||this._workCell.bg!==U){if(F-j>1){const I=this._getJoinedRanges(T,R,D,y,j);for(let W=0;W<I.length;W++)k.push(I[W])}j=F,R=D,N=this._workCell.fg,U=this._workCell.bg}D+=this._workCell.getChars().length||S.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-j>1){const F=this._getJoinedRanges(T,R,D,y,j);for(let I=0;I<F.length;I++)k.push(F[I])}return k}_getJoinedRanges(v,y,k,T,j){const D=v.substring(y,k);let R=[];try{R=this._characterJoiners[0].handler(D)}catch(N){console.error(N)}for(let N=1;N<this._characterJoiners.length;N++)try{const U=this._characterJoiners[N].handler(D);for(let F=0;F<U.length;F++)ab._mergeRanges(R,U[F])}catch(U){console.error(U)}return this._stringRangesToCellRanges(R,T,j),R}_stringRangesToCellRanges(v,y,k){let T=0,j=!1,D=0,R=v[T];if(R){for(let N=k;N<this._bufferService.cols;N++){const U=y.getWidth(N),F=y.getString(N).length||S.WHITESPACE_CELL_CHAR.length;if(U!==0){if(!j&&R[0]<=D&&(R[0]=N,j=!0),R[1]<=D){if(R[1]=N,R=v[++T],!R)break;R[0]<=D?(R[0]=N,j=!0):j=!1}D+=F}}R&&(R[1]=this._bufferService.cols)}}static _mergeRanges(v,y){let k=!1;for(let T=0;T<v.length;T++){const j=v[T];if(k){if(y[1]<=j[0])return v[T-1][1]=y[1],v;if(y[1]<=j[1])return v[T-1][1]=Math.max(y[1],j[1]),v.splice(T,1),v;v.splice(T,1),T--}else{if(y[1]<=j[0])return v.splice(T,0,y),v;if(y[1]<=j[1])return j[0]=Math.min(y[0],j[0]),v;y[0]<j[1]&&(j[0]=Math.min(y[0],j[0]),k=!0)}}return k?v[v.length-1][1]=y[1]:v.push(y),v}};c.CharacterJoinerService=p=f([x(0,E.IBufferService)],p)},5114:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreBrowserService=void 0,c.CoreBrowserService=class{constructor(h,f){this._textarea=h,this.window=f,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}},8934:function(d,c,h){var f=this&&this.__decorate||function(E,C,p,_){var v,y=arguments.length,k=y<3?C:_===null?_=Object.getOwnPropertyDescriptor(C,p):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(E,C,p,_);else for(var T=E.length-1;T>=0;T--)(v=E[T])&&(k=(y<3?v(k):y>3?v(C,p,k):v(C,p))||k);return y>3&&k&&Object.defineProperty(C,p,k),k},x=this&&this.__param||function(E,C){return function(p,_){C(p,_,E)}};Object.defineProperty(c,"__esModule",{value:!0}),c.MouseService=void 0;const g=h(4725),S=h(9806);let A=c.MouseService=class{constructor(E,C){this._renderService=E,this._charSizeService=C}getCoords(E,C,p,_,v){return(0,S.getCoords)(window,E,C,p,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(E,C){const p=(0,S.getCoordsRelativeToElement)(window,E,C);if(this._charSizeService.hasValidSize)return p[0]=Math.min(Math.max(p[0],0),this._renderService.dimensions.css.canvas.width-1),p[1]=Math.min(Math.max(p[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(p[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(p[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(p[0]),y:Math.floor(p[1])}}};c.MouseService=A=f([x(0,g.IRenderService),x(1,g.ICharSizeService)],A)},3230:function(d,c,h){var f=this&&this.__decorate||function(k,T,j,D){var R,N=arguments.length,U=N<3?T:D===null?D=Object.getOwnPropertyDescriptor(T,j):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(k,T,j,D);else for(var F=k.length-1;F>=0;F--)(R=k[F])&&(U=(N<3?R(U):N>3?R(T,j,U):R(T,j))||U);return N>3&&U&&Object.defineProperty(T,j,U),U},x=this&&this.__param||function(k,T){return function(j,D){T(j,D,k)}};Object.defineProperty(c,"__esModule",{value:!0}),c.RenderService=void 0;const g=h(3656),S=h(6193),A=h(5596),E=h(4725),C=h(8460),p=h(844),_=h(7226),v=h(2585);let y=c.RenderService=class extends p.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(k,T,j,D,R,N,U,F){if(super(),this._rowCount=k,this._charSizeService=D,this._renderer=this.register(new p.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new C.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new C.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new C.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new C.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new S.RenderDebouncer(U.window,((I,W)=>this._renderRows(I,W))),this.register(this._renderDebouncer),this._screenDprMonitor=new A.ScreenDprMonitor(U.window),this._screenDprMonitor.setListener((()=>this.handleDevicePixelRatioChange())),this.register(this._screenDprMonitor),this.register(N.onResize((()=>this._fullRefresh()))),this.register(N.buffers.onBufferActivate((()=>{var I;return(I=this._renderer.value)===null||I===void 0?void 0:I.clear()}))),this.register(j.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(R.onDecorationRegistered((()=>this._fullRefresh()))),this.register(R.onDecorationRemoved((()=>this._fullRefresh()))),this.register(j.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],(()=>{this.clear(),this.handleResize(N.cols,N.rows),this._fullRefresh()}))),this.register(j.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(N.buffer.y,N.buffer.y,!0)))),this.register((0,g.addDisposableDomListener)(U.window,"resize",(()=>this.handleDevicePixelRatioChange()))),this.register(F.onChangeColors((()=>this._fullRefresh()))),"IntersectionObserver"in U.window){const I=new U.window.IntersectionObserver((W=>this._handleIntersectionChange(W[W.length-1])),{threshold:0});I.observe(T),this.register({dispose:()=>I.disconnect()})}}_handleIntersectionChange(k){this._isPaused=k.isIntersecting===void 0?k.intersectionRatio===0:!k.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(k,T,j=!1){this._isPaused?this._needsFullRefresh=!0:(j||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(k,T,this._rowCount))}_renderRows(k,T){this._renderer.value&&(k=Math.min(k,this._rowCount-1),T=Math.min(T,this._rowCount-1),this._renderer.value.renderRows(k,T),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:k,end:T}),this._onRender.fire({start:k,end:T}),this._isNextRenderRedrawOnly=!0)}resize(k,T){this._rowCount=T,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(k){this._renderer.value=k,this._renderer.value.onRequestRedraw((T=>this.refreshRows(T.start,T.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(k){return this._renderDebouncer.addRefreshCallback(k)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var k,T;this._renderer.value&&((T=(k=this._renderer.value).clearTextureAtlas)===null||T===void 0||T.call(k),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(k,T){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value.handleResize(k,T))):this._renderer.value.handleResize(k,T),this._fullRefresh())}handleCharSizeChanged(){var k;(k=this._renderer.value)===null||k===void 0||k.handleCharSizeChanged()}handleBlur(){var k;(k=this._renderer.value)===null||k===void 0||k.handleBlur()}handleFocus(){var k;(k=this._renderer.value)===null||k===void 0||k.handleFocus()}handleSelectionChanged(k,T,j){var D;this._selectionState.start=k,this._selectionState.end=T,this._selectionState.columnSelectMode=j,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(k,T,j)}handleCursorMove(){var k;(k=this._renderer.value)===null||k===void 0||k.handleCursorMove()}clear(){var k;(k=this._renderer.value)===null||k===void 0||k.clear()}};c.RenderService=y=f([x(2,v.IOptionsService),x(3,E.ICharSizeService),x(4,v.IDecorationService),x(5,v.IBufferService),x(6,E.ICoreBrowserService),x(7,E.IThemeService)],y)},9312:function(d,c,h){var f=this&&this.__decorate||function(R,N,U,F){var I,W=arguments.length,Q=W<3?N:F===null?F=Object.getOwnPropertyDescriptor(N,U):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(R,N,U,F);else for(var se=R.length-1;se>=0;se--)(I=R[se])&&(Q=(W<3?I(Q):W>3?I(N,U,Q):I(N,U))||Q);return W>3&&Q&&Object.defineProperty(N,U,Q),Q},x=this&&this.__param||function(R,N){return function(U,F){N(U,F,R)}};Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionService=void 0;const g=h(9806),S=h(9504),A=h(456),E=h(4725),C=h(8460),p=h(844),_=h(6114),v=h(4841),y=h(511),k=h(2585),T="",j=new RegExp(T,"g");let D=c.SelectionService=class extends p.Disposable{constructor(R,N,U,F,I,W,Q,se,$){super(),this._element=R,this._screenElement=N,this._linkifier=U,this._bufferService=F,this._coreService=I,this._mouseService=W,this._optionsService=Q,this._renderService=se,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new y.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new C.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new C.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new C.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Y=>this._handleMouseMove(Y),this._mouseUpListener=Y=>this._handleMouseUp(Y),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((Y=>this._handleTrim(Y))),this.register(this._bufferService.buffers.onBufferActivate((Y=>this._handleBufferActivate(Y)))),this.enable(),this._model=new A.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,p.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const R=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!(!R||!N||R[0]===N[0]&&R[1]===N[1])}get selectionText(){const R=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;if(!R||!N)return"";const U=this._bufferService.buffer,F=[];if(this._activeSelectionMode===3){if(R[0]===N[0])return"";const I=R[0]<N[0]?R[0]:N[0],W=R[0]<N[0]?N[0]:R[0];for(let Q=R[1];Q<=N[1];Q++){const se=U.translateBufferLineToString(Q,!0,I,W);F.push(se)}}else{const I=R[1]===N[1]?N[0]:void 0;F.push(U.translateBufferLineToString(R[1],!0,R[0],I));for(let W=R[1]+1;W<=N[1]-1;W++){const Q=U.lines.get(W),se=U.translateBufferLineToString(W,!0);Q?.isWrapped?F[F.length-1]+=se:F.push(se)}if(R[1]!==N[1]){const W=U.lines.get(N[1]),Q=U.translateBufferLineToString(N[1],!0,0,N[0]);W&&W.isWrapped?F[F.length-1]+=Q:F.push(Q)}}return F.map((I=>I.replace(j," "))).join(_.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(R){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),_.isLinux&&R&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(R){const N=this._getMouseBufferCoords(R),U=this._model.finalSelectionStart,F=this._model.finalSelectionEnd;return!!(U&&F&&N)&&this._areCoordsInSelection(N,U,F)}isCellInSelection(R,N){const U=this._model.finalSelectionStart,F=this._model.finalSelectionEnd;return!(!U||!F)&&this._areCoordsInSelection([R,N],U,F)}_areCoordsInSelection(R,N,U){return R[1]>N[1]&&R[1]<U[1]||N[1]===U[1]&&R[1]===N[1]&&R[0]>=N[0]&&R[0]<U[0]||N[1]<U[1]&&R[1]===U[1]&&R[0]<U[0]||N[1]<U[1]&&R[1]===N[1]&&R[0]>=N[0]}_selectWordAtCursor(R,N){var U,F;const I=(F=(U=this._linkifier.currentLink)===null||U===void 0?void 0:U.link)===null||F===void 0?void 0:F.range;if(I)return this._model.selectionStart=[I.start.x-1,I.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(I,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const W=this._getMouseBufferCoords(R);return!!W&&(this._selectWordAt(W,N),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(R,N){this._model.clearSelection(),R=Math.max(R,0),N=Math.min(N,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,R],this._model.selectionEnd=[this._bufferService.cols,N],this.refresh(),this._onSelectionChange.fire()}_handleTrim(R){this._model.handleTrim(R)&&this.refresh()}_getMouseBufferCoords(R){const N=this._mouseService.getCoords(R,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(N)return N[0]--,N[1]--,N[1]+=this._bufferService.buffer.ydisp,N}_getMouseEventScrollAmount(R){let N=(0,g.getCoordsRelativeToElement)(this._coreBrowserService.window,R,this._screenElement)[1];const U=this._renderService.dimensions.css.canvas.height;return N>=0&&N<=U?0:(N>U&&(N-=U),N=Math.min(Math.max(N,-50),50),N/=50,N/Math.abs(N)+Math.round(14*N))}shouldForceSelection(R){return _.isMac?R.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:R.shiftKey}handleMouseDown(R){if(this._mouseDownTimeStamp=R.timeStamp,(R.button!==2||!this.hasSelection)&&R.button===0){if(!this._enabled){if(!this.shouldForceSelection(R))return;R.stopPropagation()}R.preventDefault(),this._dragScrollAmount=0,this._enabled&&R.shiftKey?this._handleIncrementalClick(R):R.detail===1?this._handleSingleClick(R):R.detail===2?this._handleDoubleClick(R):R.detail===3&&this._handleTripleClick(R),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(R){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(R))}_handleSingleClick(R){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(R)?3:0,this._model.selectionStart=this._getMouseBufferCoords(R),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const N=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);N&&N.length!==this._model.selectionStart[0]&&N.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(R){this._selectWordAtCursor(R,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(R){const N=this._getMouseBufferCoords(R);N&&(this._activeSelectionMode=2,this._selectLineAt(N[1]))}shouldColumnSelect(R){return R.altKey&&!(_.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(R){if(R.stopImmediatePropagation(),!this._model.selectionStart)return;const N=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(R),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(R),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const U=this._bufferService.buffer;if(this._model.selectionEnd[1]<U.lines.length){const F=U.lines.get(this._model.selectionEnd[1]);F&&F.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}N&&N[0]===this._model.selectionEnd[0]&&N[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const R=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(R.ydisp+this._bufferService.rows,R.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=R.ydisp),this.refresh()}}_handleMouseUp(R){const N=R.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&N<500&&R.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const U=this._mouseService.getCoords(R,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(U&&U[0]!==void 0&&U[1]!==void 0){const F=(0,S.moveToCellSequence)(U[0]-1,U[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(F,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const R=this._model.finalSelectionStart,N=this._model.finalSelectionEnd,U=!(!R||!N||R[0]===N[0]&&R[1]===N[1]);U?R&&N&&(this._oldSelectionStart&&this._oldSelectionEnd&&R[0]===this._oldSelectionStart[0]&&R[1]===this._oldSelectionStart[1]&&N[0]===this._oldSelectionEnd[0]&&N[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(R,N,U)):this._oldHasSelection&&this._fireOnSelectionChange(R,N,U)}_fireOnSelectionChange(R,N,U){this._oldSelectionStart=R,this._oldSelectionEnd=N,this._oldHasSelection=U,this._onSelectionChange.fire()}_handleBufferActivate(R){this.clearSelection(),this._trimListener.dispose(),this._trimListener=R.activeBuffer.lines.onTrim((N=>this._handleTrim(N)))}_convertViewportColToCharacterIndex(R,N){let U=N;for(let F=0;N>=F;F++){const I=R.loadCell(F,this._workCell).getChars().length;this._workCell.getWidth()===0?U--:I>1&&N!==F&&(U+=I-1)}return U}setSelection(R,N,U){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[R,N],this._model.selectionStartLength=U,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(R){this._isClickInSelection(R)||(this._selectWordAtCursor(R,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(R,N,U=!0,F=!0){if(R[0]>=this._bufferService.cols)return;const I=this._bufferService.buffer,W=I.lines.get(R[1]);if(!W)return;const Q=I.translateBufferLineToString(R[1],!1);let se=this._convertViewportColToCharacterIndex(W,R[0]),$=se;const Y=R[0]-se;let M=0,H=0,z=0,L=0;if(Q.charAt(se)===" "){for(;se>0&&Q.charAt(se-1)===" ";)se--;for(;$<Q.length&&Q.charAt($+1)===" ";)$++}else{let oe=R[0],de=R[0];W.getWidth(oe)===0&&(M++,oe--),W.getWidth(de)===2&&(H++,de++);const me=W.getString(de).length;for(me>1&&(L+=me-1,$+=me-1);oe>0&&se>0&&!this._isCharWordSeparator(W.loadCell(oe-1,this._workCell));){W.loadCell(oe-1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===0?(M++,oe--):B>1&&(z+=B-1,se-=B-1),se--,oe--}for(;de<W.length&&$+1<Q.length&&!this._isCharWordSeparator(W.loadCell(de+1,this._workCell));){W.loadCell(de+1,this._workCell);const B=this._workCell.getChars().length;this._workCell.getWidth()===2?(H++,de++):B>1&&(L+=B-1,$+=B-1),$++,de++}}$++;let V=se+Y-M+z,te=Math.min(this._bufferService.cols,$-se+M+H-z-L);if(N||Q.slice(se,$).trim()!==""){if(U&&V===0&&W.getCodePoint(0)!==32){const oe=I.lines.get(R[1]-1);if(oe&&W.isWrapped&&oe.getCodePoint(this._bufferService.cols-1)!==32){const de=this._getWordAt([this._bufferService.cols-1,R[1]-1],!1,!0,!1);if(de){const me=this._bufferService.cols-de.start;V-=me,te+=me}}}if(F&&V+te===this._bufferService.cols&&W.getCodePoint(this._bufferService.cols-1)!==32){const oe=I.lines.get(R[1]+1);if(oe?.isWrapped&&oe.getCodePoint(0)!==32){const de=this._getWordAt([0,R[1]+1],!1,!1,!0);de&&(te+=de.length)}}return{start:V,length:te}}}_selectWordAt(R,N){const U=this._getWordAt(R,N);if(U){for(;U.start<0;)U.start+=this._bufferService.cols,R[1]--;this._model.selectionStart=[U.start,R[1]],this._model.selectionStartLength=U.length}}_selectToWordAt(R){const N=this._getWordAt(R,!0);if(N){let U=R[1];for(;N.start<0;)N.start+=this._bufferService.cols,U--;if(!this._model.areSelectionValuesReversed())for(;N.start+N.length>this._bufferService.cols;)N.length-=this._bufferService.cols,U++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?N.start:N.start+N.length,U]}}_isCharWordSeparator(R){return R.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(R.getChars())>=0}_selectLineAt(R){const N=this._bufferService.buffer.getWrappedRangeForLine(R),U={start:{x:0,y:N.first},end:{x:this._bufferService.cols-1,y:N.last}};this._model.selectionStart=[0,N.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(U,this._bufferService.cols)}};c.SelectionService=D=f([x(3,k.IBufferService),x(4,k.ICoreService),x(5,E.IMouseService),x(6,k.IOptionsService),x(7,E.IRenderService),x(8,E.ICoreBrowserService)],D)},4725:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.IThemeService=c.ICharacterJoinerService=c.ISelectionService=c.IRenderService=c.IMouseService=c.ICoreBrowserService=c.ICharSizeService=void 0;const f=h(8343);c.ICharSizeService=(0,f.createDecorator)("CharSizeService"),c.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),c.IMouseService=(0,f.createDecorator)("MouseService"),c.IRenderService=(0,f.createDecorator)("RenderService"),c.ISelectionService=(0,f.createDecorator)("SelectionService"),c.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),c.IThemeService=(0,f.createDecorator)("ThemeService")},6731:function(d,c,h){var f=this&&this.__decorate||function(D,R,N,U){var F,I=arguments.length,W=I<3?R:U===null?U=Object.getOwnPropertyDescriptor(R,N):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(D,R,N,U);else for(var Q=D.length-1;Q>=0;Q--)(F=D[Q])&&(W=(I<3?F(W):I>3?F(R,N,W):F(R,N))||W);return I>3&&W&&Object.defineProperty(R,N,W),W},x=this&&this.__param||function(D,R){return function(N,U){R(N,U,D)}};Object.defineProperty(c,"__esModule",{value:!0}),c.ThemeService=c.DEFAULT_ANSI_COLORS=void 0;const g=h(7239),S=h(8055),A=h(8460),E=h(844),C=h(2585),p=S.css.toColor("#ffffff"),_=S.css.toColor("#000000"),v=S.css.toColor("#ffffff"),y=S.css.toColor("#000000"),k={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};c.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const D=[S.css.toColor("#2e3436"),S.css.toColor("#cc0000"),S.css.toColor("#4e9a06"),S.css.toColor("#c4a000"),S.css.toColor("#3465a4"),S.css.toColor("#75507b"),S.css.toColor("#06989a"),S.css.toColor("#d3d7cf"),S.css.toColor("#555753"),S.css.toColor("#ef2929"),S.css.toColor("#8ae234"),S.css.toColor("#fce94f"),S.css.toColor("#729fcf"),S.css.toColor("#ad7fa8"),S.css.toColor("#34e2e2"),S.css.toColor("#eeeeec")],R=[0,95,135,175,215,255];for(let N=0;N<216;N++){const U=R[N/36%6|0],F=R[N/6%6|0],I=R[N%6];D.push({css:S.channels.toCss(U,F,I),rgba:S.channels.toRgba(U,F,I)})}for(let N=0;N<24;N++){const U=8+10*N;D.push({css:S.channels.toCss(U,U,U),rgba:S.channels.toRgba(U,U,U)})}return D})());let T=c.ThemeService=class extends E.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new g.ColorContrastCache,this._halfContrastCache=new g.ColorContrastCache,this._onChangeColors=this.register(new A.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:p,background:_,cursor:v,cursorAccent:y,selectionForeground:void 0,selectionBackgroundTransparent:k,selectionBackgroundOpaque:S.color.blend(_,k),selectionInactiveBackgroundTransparent:k,selectionInactiveBackgroundOpaque:S.color.blend(_,k),ansi:c.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(D={}){const R=this._colors;if(R.foreground=j(D.foreground,p),R.background=j(D.background,_),R.cursor=j(D.cursor,v),R.cursorAccent=j(D.cursorAccent,y),R.selectionBackgroundTransparent=j(D.selectionBackground,k),R.selectionBackgroundOpaque=S.color.blend(R.background,R.selectionBackgroundTransparent),R.selectionInactiveBackgroundTransparent=j(D.selectionInactiveBackground,R.selectionBackgroundTransparent),R.selectionInactiveBackgroundOpaque=S.color.blend(R.background,R.selectionInactiveBackgroundTransparent),R.selectionForeground=D.selectionForeground?j(D.selectionForeground,S.NULL_COLOR):void 0,R.selectionForeground===S.NULL_COLOR&&(R.selectionForeground=void 0),S.color.isOpaque(R.selectionBackgroundTransparent)&&(R.selectionBackgroundTransparent=S.color.opacity(R.selectionBackgroundTransparent,.3)),S.color.isOpaque(R.selectionInactiveBackgroundTransparent)&&(R.selectionInactiveBackgroundTransparent=S.color.opacity(R.selectionInactiveBackgroundTransparent,.3)),R.ansi=c.DEFAULT_ANSI_COLORS.slice(),R.ansi[0]=j(D.black,c.DEFAULT_ANSI_COLORS[0]),R.ansi[1]=j(D.red,c.DEFAULT_ANSI_COLORS[1]),R.ansi[2]=j(D.green,c.DEFAULT_ANSI_COLORS[2]),R.ansi[3]=j(D.yellow,c.DEFAULT_ANSI_COLORS[3]),R.ansi[4]=j(D.blue,c.DEFAULT_ANSI_COLORS[4]),R.ansi[5]=j(D.magenta,c.DEFAULT_ANSI_COLORS[5]),R.ansi[6]=j(D.cyan,c.DEFAULT_ANSI_COLORS[6]),R.ansi[7]=j(D.white,c.DEFAULT_ANSI_COLORS[7]),R.ansi[8]=j(D.brightBlack,c.DEFAULT_ANSI_COLORS[8]),R.ansi[9]=j(D.brightRed,c.DEFAULT_ANSI_COLORS[9]),R.ansi[10]=j(D.brightGreen,c.DEFAULT_ANSI_COLORS[10]),R.ansi[11]=j(D.brightYellow,c.DEFAULT_ANSI_COLORS[11]),R.ansi[12]=j(D.brightBlue,c.DEFAULT_ANSI_COLORS[12]),R.ansi[13]=j(D.brightMagenta,c.DEFAULT_ANSI_COLORS[13]),R.ansi[14]=j(D.brightCyan,c.DEFAULT_ANSI_COLORS[14]),R.ansi[15]=j(D.brightWhite,c.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){const N=Math.min(R.ansi.length-16,D.extendedAnsi.length);for(let U=0;U<N;U++)R.ansi[U+16]=j(D.extendedAnsi[U],c.DEFAULT_ANSI_COLORS[U+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let R=0;R<this._restoreColors.ansi.length;++R)this._colors.ansi[R]=this._restoreColors.ansi[R]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function j(D,R){if(D!==void 0)try{return S.css.toColor(D)}catch{}return R}c.ThemeService=T=f([x(0,C.IOptionsService)],T)},6349:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CircularList=void 0;const f=h(8460),x=h(844);class g extends x.Disposable{constructor(A){super(),this._maxLength=A,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(A){if(this._maxLength===A)return;const E=new Array(A);for(let C=0;C<Math.min(A,this.length);C++)E[C]=this._array[this._getCyclicIndex(C)];this._array=E,this._maxLength=A,this._startIndex=0}get length(){return this._length}set length(A){if(A>this._length)for(let E=this._length;E<A;E++)this._array[E]=void 0;this._length=A}get(A){return this._array[this._getCyclicIndex(A)]}set(A,E){this._array[this._getCyclicIndex(A)]=E}push(A){this._array[this._getCyclicIndex(this._length)]=A,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(A,E,...C){if(E){for(let p=A;p<this._length-E;p++)this._array[this._getCyclicIndex(p)]=this._array[this._getCyclicIndex(p+E)];this._length-=E,this.onDeleteEmitter.fire({index:A,amount:E})}for(let p=this._length-1;p>=A;p--)this._array[this._getCyclicIndex(p+C.length)]=this._array[this._getCyclicIndex(p)];for(let p=0;p<C.length;p++)this._array[this._getCyclicIndex(A+p)]=C[p];if(C.length&&this.onInsertEmitter.fire({index:A,amount:C.length}),this._length+C.length>this._maxLength){const p=this._length+C.length-this._maxLength;this._startIndex+=p,this._length=this._maxLength,this.onTrimEmitter.fire(p)}else this._length+=C.length}trimStart(A){A>this._length&&(A=this._length),this._startIndex+=A,this._length-=A,this.onTrimEmitter.fire(A)}shiftElements(A,E,C){if(!(E<=0)){if(A<0||A>=this._length)throw new Error("start argument out of range");if(A+C<0)throw new Error("Cannot shift elements in list beyond index 0");if(C>0){for(let _=E-1;_>=0;_--)this.set(A+_+C,this.get(A+_));const p=A+E+C-this._length;if(p>0)for(this._length+=p;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let p=0;p<E;p++)this.set(A+p+C,this.get(A+p))}}_getCyclicIndex(A){return(this._startIndex+A)%this._maxLength}}c.CircularList=g},1439:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.clone=void 0,c.clone=function h(f,x=5){if(typeof f!="object")return f;const g=Array.isArray(f)?[]:{};for(const S in f)g[S]=x<=1?f[S]:f[S]&&h(f[S],x-1);return g}},8055:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.contrastRatio=c.toPaddedHex=c.rgba=c.rgb=c.css=c.color=c.channels=c.NULL_COLOR=void 0;const f=h(6114);let x=0,g=0,S=0,A=0;var E,C,p,_,v;function y(T){const j=T.toString(16);return j.length<2?"0"+j:j}function k(T,j){return T<j?(j+.05)/(T+.05):(T+.05)/(j+.05)}c.NULL_COLOR={css:"#00000000",rgba:0},(function(T){T.toCss=function(j,D,R,N){return N!==void 0?`#${y(j)}${y(D)}${y(R)}${y(N)}`:`#${y(j)}${y(D)}${y(R)}`},T.toRgba=function(j,D,R,N=255){return(j<<24|D<<16|R<<8|N)>>>0}})(E||(c.channels=E={})),(function(T){function j(D,R){return A=Math.round(255*R),[x,g,S]=v.toChannels(D.rgba),{css:E.toCss(x,g,S,A),rgba:E.toRgba(x,g,S,A)}}T.blend=function(D,R){if(A=(255&R.rgba)/255,A===1)return{css:R.css,rgba:R.rgba};const N=R.rgba>>24&255,U=R.rgba>>16&255,F=R.rgba>>8&255,I=D.rgba>>24&255,W=D.rgba>>16&255,Q=D.rgba>>8&255;return x=I+Math.round((N-I)*A),g=W+Math.round((U-W)*A),S=Q+Math.round((F-Q)*A),{css:E.toCss(x,g,S),rgba:E.toRgba(x,g,S)}},T.isOpaque=function(D){return(255&D.rgba)==255},T.ensureContrastRatio=function(D,R,N){const U=v.ensureContrastRatio(D.rgba,R.rgba,N);if(U)return v.toColor(U>>24&255,U>>16&255,U>>8&255)},T.opaque=function(D){const R=(255|D.rgba)>>>0;return[x,g,S]=v.toChannels(R),{css:E.toCss(x,g,S),rgba:R}},T.opacity=j,T.multiplyOpacity=function(D,R){return A=255&D.rgba,j(D,A*R/255)},T.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}})(C||(c.color=C={})),(function(T){let j,D;if(!f.isNode){const R=document.createElement("canvas");R.width=1,R.height=1;const N=R.getContext("2d",{willReadFrequently:!0});N&&(j=N,j.globalCompositeOperation="copy",D=j.createLinearGradient(0,0,1,1))}T.toColor=function(R){if(R.match(/#[\da-f]{3,8}/i))switch(R.length){case 4:return x=parseInt(R.slice(1,2).repeat(2),16),g=parseInt(R.slice(2,3).repeat(2),16),S=parseInt(R.slice(3,4).repeat(2),16),v.toColor(x,g,S);case 5:return x=parseInt(R.slice(1,2).repeat(2),16),g=parseInt(R.slice(2,3).repeat(2),16),S=parseInt(R.slice(3,4).repeat(2),16),A=parseInt(R.slice(4,5).repeat(2),16),v.toColor(x,g,S,A);case 7:return{css:R,rgba:(parseInt(R.slice(1),16)<<8|255)>>>0};case 9:return{css:R,rgba:parseInt(R.slice(1),16)>>>0}}const N=R.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(N)return x=parseInt(N[1]),g=parseInt(N[2]),S=parseInt(N[3]),A=Math.round(255*(N[5]===void 0?1:parseFloat(N[5]))),v.toColor(x,g,S,A);if(!j||!D)throw new Error("css.toColor: Unsupported css format");if(j.fillStyle=D,j.fillStyle=R,typeof j.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(j.fillRect(0,0,1,1),[x,g,S,A]=j.getImageData(0,0,1,1).data,A!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(x,g,S,A),css:R}}})(p||(c.css=p={})),(function(T){function j(D,R,N){const U=D/255,F=R/255,I=N/255;return .2126*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))+.7152*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.0722*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))}T.relativeLuminance=function(D){return j(D>>16&255,D>>8&255,255&D)},T.relativeLuminance2=j})(_||(c.rgb=_={})),(function(T){function j(R,N,U){const F=R>>24&255,I=R>>16&255,W=R>>8&255;let Q=N>>24&255,se=N>>16&255,$=N>>8&255,Y=k(_.relativeLuminance2(Q,se,$),_.relativeLuminance2(F,I,W));for(;Y<U&&(Q>0||se>0||$>0);)Q-=Math.max(0,Math.ceil(.1*Q)),se-=Math.max(0,Math.ceil(.1*se)),$-=Math.max(0,Math.ceil(.1*$)),Y=k(_.relativeLuminance2(Q,se,$),_.relativeLuminance2(F,I,W));return(Q<<24|se<<16|$<<8|255)>>>0}function D(R,N,U){const F=R>>24&255,I=R>>16&255,W=R>>8&255;let Q=N>>24&255,se=N>>16&255,$=N>>8&255,Y=k(_.relativeLuminance2(Q,se,$),_.relativeLuminance2(F,I,W));for(;Y<U&&(Q<255||se<255||$<255);)Q=Math.min(255,Q+Math.ceil(.1*(255-Q))),se=Math.min(255,se+Math.ceil(.1*(255-se))),$=Math.min(255,$+Math.ceil(.1*(255-$))),Y=k(_.relativeLuminance2(Q,se,$),_.relativeLuminance2(F,I,W));return(Q<<24|se<<16|$<<8|255)>>>0}T.ensureContrastRatio=function(R,N,U){const F=_.relativeLuminance(R>>8),I=_.relativeLuminance(N>>8);if(k(F,I)<U){if(I<F){const se=j(R,N,U),$=k(F,_.relativeLuminance(se>>8));if($<U){const Y=D(R,N,U);return $>k(F,_.relativeLuminance(Y>>8))?se:Y}return se}const W=D(R,N,U),Q=k(F,_.relativeLuminance(W>>8));if(Q<U){const se=j(R,N,U);return Q>k(F,_.relativeLuminance(se>>8))?W:se}return W}},T.reduceLuminance=j,T.increaseLuminance=D,T.toChannels=function(R){return[R>>24&255,R>>16&255,R>>8&255,255&R]},T.toColor=function(R,N,U,F){return{css:E.toCss(R,N,U,F),rgba:E.toRgba(R,N,U,F)}}})(v||(c.rgba=v={})),c.toPaddedHex=y,c.contrastRatio=k},8969:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreTerminal=void 0;const f=h(844),x=h(2585),g=h(4348),S=h(7866),A=h(744),E=h(7302),C=h(6975),p=h(8460),_=h(1753),v=h(1480),y=h(7994),k=h(9282),T=h(5435),j=h(5981),D=h(2660);let R=!1;class N extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new p.EventEmitter),this._onScroll.event((F=>{var I;(I=this._onScrollApi)===null||I===void 0||I.fire(F.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(F){for(const I in F)this.optionsService.options[I]=F[I]}constructor(F){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new p.EventEmitter),this._instantiationService=new g.InstantiationService,this.optionsService=this.register(new E.OptionsService(F)),this._instantiationService.setService(x.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(A.BufferService)),this._instantiationService.setService(x.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(S.LogService)),this._instantiationService.setService(x.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(C.CoreService)),this._instantiationService.setService(x.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(x.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(x.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(y.CharsetService),this._instantiationService.setService(x.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(x.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new T.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,p.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,p.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,p.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,p.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new j.WriteBuffer(((I,W)=>this._inputHandler.parse(I,W)))),this.register((0,p.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(F,I){this._writeBuffer.write(F,I)}writeSync(F,I){this._logService.logLevel<=x.LogLevelEnum.WARN&&!R&&(this._logService.warn("writeSync is unreliable and will be removed soon."),R=!0),this._writeBuffer.writeSync(F,I)}resize(F,I){isNaN(F)||isNaN(I)||(F=Math.max(F,A.MINIMUM_COLS),I=Math.max(I,A.MINIMUM_ROWS),this._bufferService.resize(F,I))}scroll(F,I=!1){this._bufferService.scroll(F,I)}scrollLines(F,I,W){this._bufferService.scrollLines(F,I,W)}scrollPages(F){this.scrollLines(F*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(F){const I=F-this._bufferService.buffer.ydisp;I!==0&&this.scrollLines(I)}registerEscHandler(F,I){return this._inputHandler.registerEscHandler(F,I)}registerDcsHandler(F,I){return this._inputHandler.registerDcsHandler(F,I)}registerCsiHandler(F,I){return this._inputHandler.registerCsiHandler(F,I)}registerOscHandler(F,I){return this._inputHandler.registerOscHandler(F,I)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let F=!1;const I=this.optionsService.rawOptions.windowsPty;I&&I.buildNumber!==void 0&&I.buildNumber!==void 0?F=I.backend==="conpty"&&I.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(F=!0),F?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const F=[];F.push(this.onLineFeed(k.updateWindowsModeWrappedState.bind(null,this._bufferService))),F.push(this.registerCsiHandler({final:"H"},(()=>((0,k.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)((()=>{for(const I of F)I.dispose()}))}}}c.CoreTerminal=N},8460:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.forwardEvent=c.EventEmitter=void 0,c.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===h)return void this._listeners.splice(f,1)}}})),this._event}fire(h,f){const x=[];for(let g=0;g<this._listeners.length;g++)x.push(this._listeners[g]);for(let g=0;g<x.length;g++)x[g].call(void 0,h,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},c.forwardEvent=function(h,f){return h((x=>f.fire(x)))}},5435:function(d,c,h){var f=this&&this.__decorate||function(Y,M,H,z){var L,V=arguments.length,te=V<3?M:z===null?z=Object.getOwnPropertyDescriptor(M,H):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(Y,M,H,z);else for(var oe=Y.length-1;oe>=0;oe--)(L=Y[oe])&&(te=(V<3?L(te):V>3?L(M,H,te):L(M,H))||te);return V>3&&te&&Object.defineProperty(M,H,te),te},x=this&&this.__param||function(Y,M){return function(H,z){M(H,z,Y)}};Object.defineProperty(c,"__esModule",{value:!0}),c.InputHandler=c.WindowsOptionsReportType=void 0;const g=h(2584),S=h(7116),A=h(2015),E=h(844),C=h(482),p=h(8437),_=h(8460),v=h(643),y=h(511),k=h(3734),T=h(2585),j=h(6242),D=h(6351),R=h(5941),N={"(":0,")":1,"*":2,"+":3,"-":1,".":2},U=131072;function F(Y,M){if(Y>24)return M.setWinLines||!1;switch(Y){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var I;(function(Y){Y[Y.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Y[Y.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(I||(c.WindowsOptionsReportType=I={}));let W=0;class Q extends E.Disposable{getAttrData(){return this._curAttrData}constructor(M,H,z,L,V,te,oe,de,me=new A.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=H,this._coreService=z,this._logService=L,this._optionsService=V,this._oscLinkService=te,this._coreMouseService=oe,this._unicodeService=de,this._parser=me,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new C.StringToUtf32,this._utf8Decoder=new C.Utf8ToUtf32,this._workCell=new y.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=p.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new se(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((B=>this._activeBuffer=B.activeBuffer))),this._parser.setCsiHandlerFallback(((B,J)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(B),params:J.toArray()})})),this._parser.setEscHandlerFallback((B=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(B)})})),this._parser.setExecuteHandlerFallback((B=>{this._logService.debug("Unknown EXECUTE code: ",{code:B})})),this._parser.setOscHandlerFallback(((B,J,ae)=>{this._logService.debug("Unknown OSC code: ",{identifier:B,action:J,data:ae})})),this._parser.setDcsHandlerFallback(((B,J,ae)=>{J==="HOOK"&&(ae=ae.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(B),action:J,payload:ae})})),this._parser.setPrintHandler(((B,J,ae)=>this.print(B,J,ae))),this._parser.registerCsiHandler({final:"@"},(B=>this.insertChars(B))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(B=>this.scrollLeft(B))),this._parser.registerCsiHandler({final:"A"},(B=>this.cursorUp(B))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(B=>this.scrollRight(B))),this._parser.registerCsiHandler({final:"B"},(B=>this.cursorDown(B))),this._parser.registerCsiHandler({final:"C"},(B=>this.cursorForward(B))),this._parser.registerCsiHandler({final:"D"},(B=>this.cursorBackward(B))),this._parser.registerCsiHandler({final:"E"},(B=>this.cursorNextLine(B))),this._parser.registerCsiHandler({final:"F"},(B=>this.cursorPrecedingLine(B))),this._parser.registerCsiHandler({final:"G"},(B=>this.cursorCharAbsolute(B))),this._parser.registerCsiHandler({final:"H"},(B=>this.cursorPosition(B))),this._parser.registerCsiHandler({final:"I"},(B=>this.cursorForwardTab(B))),this._parser.registerCsiHandler({final:"J"},(B=>this.eraseInDisplay(B,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(B=>this.eraseInDisplay(B,!0))),this._parser.registerCsiHandler({final:"K"},(B=>this.eraseInLine(B,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(B=>this.eraseInLine(B,!0))),this._parser.registerCsiHandler({final:"L"},(B=>this.insertLines(B))),this._parser.registerCsiHandler({final:"M"},(B=>this.deleteLines(B))),this._parser.registerCsiHandler({final:"P"},(B=>this.deleteChars(B))),this._parser.registerCsiHandler({final:"S"},(B=>this.scrollUp(B))),this._parser.registerCsiHandler({final:"T"},(B=>this.scrollDown(B))),this._parser.registerCsiHandler({final:"X"},(B=>this.eraseChars(B))),this._parser.registerCsiHandler({final:"Z"},(B=>this.cursorBackwardTab(B))),this._parser.registerCsiHandler({final:"`"},(B=>this.charPosAbsolute(B))),this._parser.registerCsiHandler({final:"a"},(B=>this.hPositionRelative(B))),this._parser.registerCsiHandler({final:"b"},(B=>this.repeatPrecedingCharacter(B))),this._parser.registerCsiHandler({final:"c"},(B=>this.sendDeviceAttributesPrimary(B))),this._parser.registerCsiHandler({prefix:">",final:"c"},(B=>this.sendDeviceAttributesSecondary(B))),this._parser.registerCsiHandler({final:"d"},(B=>this.linePosAbsolute(B))),this._parser.registerCsiHandler({final:"e"},(B=>this.vPositionRelative(B))),this._parser.registerCsiHandler({final:"f"},(B=>this.hVPosition(B))),this._parser.registerCsiHandler({final:"g"},(B=>this.tabClear(B))),this._parser.registerCsiHandler({final:"h"},(B=>this.setMode(B))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(B=>this.setModePrivate(B))),this._parser.registerCsiHandler({final:"l"},(B=>this.resetMode(B))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(B=>this.resetModePrivate(B))),this._parser.registerCsiHandler({final:"m"},(B=>this.charAttributes(B))),this._parser.registerCsiHandler({final:"n"},(B=>this.deviceStatus(B))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(B=>this.deviceStatusPrivate(B))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(B=>this.softReset(B))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(B=>this.setCursorStyle(B))),this._parser.registerCsiHandler({final:"r"},(B=>this.setScrollRegion(B))),this._parser.registerCsiHandler({final:"s"},(B=>this.saveCursor(B))),this._parser.registerCsiHandler({final:"t"},(B=>this.windowOptions(B))),this._parser.registerCsiHandler({final:"u"},(B=>this.restoreCursor(B))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(B=>this.insertColumns(B))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(B=>this.deleteColumns(B))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(B=>this.selectProtected(B))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(B=>this.requestMode(B,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(B=>this.requestMode(B,!1))),this._parser.setExecuteHandler(g.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(g.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(g.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(g.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(g.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(g.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(g.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(g.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(g.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(g.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(g.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(g.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new j.OscHandler((B=>(this.setTitle(B),this.setIconName(B),!0)))),this._parser.registerOscHandler(1,new j.OscHandler((B=>this.setIconName(B)))),this._parser.registerOscHandler(2,new j.OscHandler((B=>this.setTitle(B)))),this._parser.registerOscHandler(4,new j.OscHandler((B=>this.setOrReportIndexedColor(B)))),this._parser.registerOscHandler(8,new j.OscHandler((B=>this.setHyperlink(B)))),this._parser.registerOscHandler(10,new j.OscHandler((B=>this.setOrReportFgColor(B)))),this._parser.registerOscHandler(11,new j.OscHandler((B=>this.setOrReportBgColor(B)))),this._parser.registerOscHandler(12,new j.OscHandler((B=>this.setOrReportCursorColor(B)))),this._parser.registerOscHandler(104,new j.OscHandler((B=>this.restoreIndexedColor(B)))),this._parser.registerOscHandler(110,new j.OscHandler((B=>this.restoreFgColor(B)))),this._parser.registerOscHandler(111,new j.OscHandler((B=>this.restoreBgColor(B)))),this._parser.registerOscHandler(112,new j.OscHandler((B=>this.restoreCursorColor(B)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const B in S.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:B},(()=>this.selectCharset("("+B))),this._parser.registerEscHandler({intermediates:")",final:B},(()=>this.selectCharset(")"+B))),this._parser.registerEscHandler({intermediates:"*",final:B},(()=>this.selectCharset("*"+B))),this._parser.registerEscHandler({intermediates:"+",final:B},(()=>this.selectCharset("+"+B))),this._parser.registerEscHandler({intermediates:"-",final:B},(()=>this.selectCharset("-"+B))),this._parser.registerEscHandler({intermediates:".",final:B},(()=>this.selectCharset("."+B))),this._parser.registerEscHandler({intermediates:"/",final:B},(()=>this.selectCharset("/"+B)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((B=>(this._logService.error("Parsing error: ",B),B))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler(((B,J)=>this.requestStatusString(B,J))))}_preserveStack(M,H,z,L){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=H,this._parseStack.decodedLength=z,this._parseStack.position=L}_logSlowResolvingAsync(M){this._logService.logLevel<=T.LogLevelEnum.WARN&&Promise.race([M,new Promise(((H,z)=>setTimeout((()=>z("#SLOW_TIMEOUT")),5e3)))]).catch((H=>{if(H!=="#SLOW_TIMEOUT")throw H;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,H){let z,L=this._activeBuffer.x,V=this._activeBuffer.y,te=0;const oe=this._parseStack.paused;if(oe){if(z=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,H))return this._logSlowResolvingAsync(z),z;L=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>U&&(te=this._parseStack.position+U)}if(this._logService.logLevel<=T.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,(de=>String.fromCharCode(de))).join("")}"`),typeof M=="string"?M.split("").map((de=>de.charCodeAt(0))):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<U&&(this._parseBuffer=new Uint32Array(Math.min(M.length,U))),oe||this._dirtyRowTracker.clearRange(),M.length>U)for(let de=te;de<M.length;de+=U){const me=de+U<M.length?de+U:M.length,B=typeof M=="string"?this._stringDecoder.decode(M.substring(de,me),this._parseBuffer):this._utf8Decoder.decode(M.subarray(de,me),this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,B))return this._preserveStack(L,V,B,de),this._logSlowResolvingAsync(z),z}else if(!oe){const de=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,de))return this._preserveStack(L,V,de,0),this._logSlowResolvingAsync(z),z}this._activeBuffer.x===L&&this._activeBuffer.y===V||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(M,H,z){let L,V;const te=this._charsetService.charset,oe=this._optionsService.rawOptions.screenReaderMode,de=this._bufferService.cols,me=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,J=this._curAttrData;let ae=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&z-H>0&&ae.getWidth(this._activeBuffer.x-1)===2&&ae.setCellFromCodePoint(this._activeBuffer.x-1,0,1,J.fg,J.bg,J.extended);for(let ce=H;ce<z;++ce){if(L=M[ce],V=this._unicodeService.wcwidth(L),L<127&&te){const xe=te[String.fromCharCode(L)];xe&&(L=xe.charCodeAt(0))}if(oe&&this._onA11yChar.fire((0,C.stringFromCodePoint)(L)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),V||!this._activeBuffer.x){if(this._activeBuffer.x+V-1>=de){if(me){for(;this._activeBuffer.x<de;)ae.setCellFromCodePoint(this._activeBuffer.x++,0,1,J.fg,J.bg,J.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ae=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=de-1,V===2)continue}if(B&&(ae.insertCells(this._activeBuffer.x,V,this._activeBuffer.getNullCell(J),J),ae.getWidth(de-1)===2&&ae.setCellFromCodePoint(de-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,J.fg,J.bg,J.extended)),ae.setCellFromCodePoint(this._activeBuffer.x++,L,V,J.fg,J.bg,J.extended),V>0)for(;--V;)ae.setCellFromCodePoint(this._activeBuffer.x++,0,0,J.fg,J.bg,J.extended)}else ae.getWidth(this._activeBuffer.x-1)?ae.addCodepointToCell(this._activeBuffer.x-1,L):ae.addCodepointToCell(this._activeBuffer.x-2,L)}z-H>0&&(ae.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<de&&z-H>0&&ae.getWidth(this._activeBuffer.x)===0&&!ae.hasContent(this._activeBuffer.x)&&ae.setCellFromCodePoint(this._activeBuffer.x,0,1,J.fg,J.bg,J.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,H){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,H):this._parser.registerCsiHandler(M,(z=>!F(z.params[0],this._optionsService.rawOptions.windowOptions)||H(z)))}registerDcsHandler(M,H){return this._parser.registerDcsHandler(M,new D.DcsHandler(H))}registerEscHandler(M,H){return this._parser.registerEscHandler(M,H)}registerOscHandler(M,H){return this._parser.registerOscHandler(M,new j.OscHandler(H))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||M===void 0)&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);H.hasWidth(this._activeBuffer.x)&&!H.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,H){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+H):(this._activeBuffer.x=M,this._activeBuffer.y=H),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,H){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+H)}cursorUp(M){const H=this._activeBuffer.y-this._activeBuffer.scrollTop;return H>=0?this._moveCursor(0,-Math.min(H,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const H=this._activeBuffer.scrollBottom-this._activeBuffer.y;return H>=0?this._moveCursor(0,Math.min(H,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const H=M.params[0];return H===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:H===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=M.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=M.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const H=M.params[0];return H===1&&(this._curAttrData.bg|=536870912),H!==2&&H!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,H,z,L=!1,V=!1){const te=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);te.replaceCells(H,z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),V),L&&(te.isWrapped=!1)}_resetBufferLine(M,H=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);z&&(z.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),H),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),z.isWrapped=!1)}eraseInDisplay(M,H=!1){let z;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(z=this._activeBuffer.y,this._dirtyRowTracker.markDirty(z),this._eraseInBufferLine(z++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);z<this._bufferService.rows;z++)this._resetBufferLine(z,H);this._dirtyRowTracker.markDirty(z);break;case 1:for(z=this._activeBuffer.y,this._dirtyRowTracker.markDirty(z),this._eraseInBufferLine(z,0,this._activeBuffer.x+1,!0,H),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(z+1).isWrapped=!1);z--;)this._resetBufferLine(z,H);this._dirtyRowTracker.markDirty(0);break;case 2:for(z=this._bufferService.rows,this._dirtyRowTracker.markDirty(z-1);z--;)this._resetBufferLine(z,H);this._dirtyRowTracker.markDirty(0);break;case 3:const L=this._activeBuffer.lines.length-this._bufferService.rows;L>0&&(this._activeBuffer.lines.trimStart(L),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-L,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-L,0),this._onScroll.fire(0))}return!0}eraseInLine(M,H=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,H);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,H)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let H=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=this._activeBuffer.ybase+this._activeBuffer.y,L=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-L+1;for(;H--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let H=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=this._activeBuffer.ybase+this._activeBuffer.y;let L;for(L=this._bufferService.rows-1-this._activeBuffer.scrollBottom,L=this._bufferService.rows-1+this._activeBuffer.ybase-L;H--;)this._activeBuffer.lines.splice(z,1),this._activeBuffer.lines.splice(L,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let H=M.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let H=M.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(p.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=M.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);L.deleteCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=M.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);L.insertCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=M.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);L.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=M.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);L.deleteCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){if(!this._parser.precedingCodepoint)return!0;const H=M.params[0]||1,z=new Uint32Array(H);for(let L=0;L<H;++L)z[L]=this._parser.precedingCodepoint;return this.print(z,0,z.length),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(g.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(g.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(g.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(g.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(g.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let H=0;H<M.length;H++)switch(M.params[H]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let H=0;H<M.length;H++)switch(M.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),this._charsetService.setgCharset(1,S.DEFAULT_CHARSET),this._charsetService.setgCharset(2,S.DEFAULT_CHARSET),this._charsetService.setgCharset(3,S.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let H=0;H<M.length;H++)switch(M.params[H]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let H=0;H<M.length;H++)switch(M.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[H]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,H){const z=this._coreService.decPrivateModes,{activeProtocol:L,activeEncoding:V}=this._coreMouseService,te=this._coreService,{buffers:oe,cols:de}=this._bufferService,{active:me,alt:B}=oe,J=this._optionsService.rawOptions,ae=Pe=>Pe?1:2,ce=M.params[0];return xe=ce,pe=H?ce===2?4:ce===4?ae(te.modes.insertMode):ce===12?3:ce===20?ae(J.convertEol):0:ce===1?ae(z.applicationCursorKeys):ce===3?J.windowOptions.setWinLines?de===80?2:de===132?1:0:0:ce===6?ae(z.origin):ce===7?ae(z.wraparound):ce===8?3:ce===9?ae(L==="X10"):ce===12?ae(J.cursorBlink):ce===25?ae(!te.isCursorHidden):ce===45?ae(z.reverseWraparound):ce===66?ae(z.applicationKeypad):ce===67?4:ce===1e3?ae(L==="VT200"):ce===1002?ae(L==="DRAG"):ce===1003?ae(L==="ANY"):ce===1004?ae(z.sendFocus):ce===1005?4:ce===1006?ae(V==="SGR"):ce===1015?4:ce===1016?ae(V==="SGR_PIXELS"):ce===1048?1:ce===47||ce===1047||ce===1049?ae(me===B):ce===2004?ae(z.bracketedPasteMode):0,te.triggerDataEvent(`${g.C0.ESC}[${H?"":"?"}${xe};${pe}$y`),!0;var xe,pe}_updateAttrColor(M,H,z,L,V){return H===2?(M|=50331648,M&=-16777216,M|=k.AttributeData.fromColorRGB([z,L,V])):H===5&&(M&=-50331904,M|=33554432|255&z),M}_extractColor(M,H,z){const L=[0,0,-1,0,0,0];let V=0,te=0;do{if(L[te+V]=M.params[H+te],M.hasSubParams(H+te)){const oe=M.getSubParams(H+te);let de=0;do L[1]===5&&(V=1),L[te+de+1+V]=oe[de];while(++de<oe.length&&de+te+1+V<L.length);break}if(L[1]===5&&te+V>=2||L[1]===2&&te+V>=5)break;L[1]&&(V=1)}while(++te+H<M.length&&te+V<L.length);for(let oe=2;oe<L.length;++oe)L[oe]===-1&&(L[oe]=0);switch(L[0]){case 38:z.fg=this._updateAttrColor(z.fg,L[1],L[3],L[4],L[5]);break;case 48:z.bg=this._updateAttrColor(z.bg,L[1],L[3],L[4],L[5]);break;case 58:z.extended=z.extended.clone(),z.extended.underlineColor=this._updateAttrColor(z.extended.underlineColor,L[1],L[3],L[4],L[5])}return te}_processUnderline(M,H){H.extended=H.extended.clone(),(!~M||M>5)&&(M=1),H.extended.underlineStyle=M,H.fg|=268435456,M===0&&(H.fg&=-268435457),H.updateExtended()}_processSGR0(M){M.fg=p.DEFAULT_ATTR_DATA.fg,M.bg=p.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const H=M.length;let z;const L=this._curAttrData;for(let V=0;V<H;V++)z=M.params[V],z>=30&&z<=37?(L.fg&=-50331904,L.fg|=16777216|z-30):z>=40&&z<=47?(L.bg&=-50331904,L.bg|=16777216|z-40):z>=90&&z<=97?(L.fg&=-50331904,L.fg|=16777224|z-90):z>=100&&z<=107?(L.bg&=-50331904,L.bg|=16777224|z-100):z===0?this._processSGR0(L):z===1?L.fg|=134217728:z===3?L.bg|=67108864:z===4?(L.fg|=268435456,this._processUnderline(M.hasSubParams(V)?M.getSubParams(V)[0]:1,L)):z===5?L.fg|=536870912:z===7?L.fg|=67108864:z===8?L.fg|=1073741824:z===9?L.fg|=2147483648:z===2?L.bg|=134217728:z===21?this._processUnderline(2,L):z===22?(L.fg&=-134217729,L.bg&=-134217729):z===23?L.bg&=-67108865:z===24?(L.fg&=-268435457,this._processUnderline(0,L)):z===25?L.fg&=-536870913:z===27?L.fg&=-67108865:z===28?L.fg&=-1073741825:z===29?L.fg&=2147483647:z===39?(L.fg&=-67108864,L.fg|=16777215&p.DEFAULT_ATTR_DATA.fg):z===49?(L.bg&=-67108864,L.bg|=16777215&p.DEFAULT_ATTR_DATA.bg):z===38||z===48||z===58?V+=this._extractColor(M,V,L):z===53?L.bg|=1073741824:z===55?L.bg&=-1073741825:z===59?(L.extended=L.extended.clone(),L.extended.underlineColor=-1,L.updateExtended()):z===100?(L.fg&=-67108864,L.fg|=16777215&p.DEFAULT_ATTR_DATA.fg,L.bg&=-67108864,L.bg|=16777215&p.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",z);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${g.C0.ESC}[0n`);break;case 6:const H=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[${H};${z}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const H=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[?${H};${z}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const H=M.params[0]||1;switch(H){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const z=H%2==1;return this._optionsService.options.cursorBlink=z,!0}setScrollRegion(M){const H=M.params[0]||1;let z;return(M.length<2||(z=M.params[1])>this._bufferService.rows||z===0)&&(z=this._bufferService.rows),z>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=z-1,this._setCursor(0,0)),!0}windowOptions(M){if(!F(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const H=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:H!==2&&this._onRequestWindowsOptionsReport.fire(I.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(I.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${g.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:H!==0&&H!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),H!==0&&H!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:H!==0&&H!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),H!==0&&H!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const H=[],z=M.split(";");for(;z.length>1;){const L=z.shift(),V=z.shift();if(/^\d+$/.exec(L)){const te=parseInt(L);if($(te))if(V==="?")H.push({type:0,index:te});else{const oe=(0,R.parseColor)(V);oe&&H.push({type:1,index:te,color:oe})}}}return H.length&&this._onColor.fire(H),!0}setHyperlink(M){const H=M.split(";");return!(H.length<2)&&(H[1]?this._createHyperlink(H[0],H[1]):!H[0]&&this._finishHyperlink())}_createHyperlink(M,H){this._getCurrentLinkId()&&this._finishHyperlink();const z=M.split(":");let L;const V=z.findIndex((te=>te.startsWith("id=")));return V!==-1&&(L=z[V].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:L,uri:H}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,H){const z=M.split(";");for(let L=0;L<z.length&&!(H>=this._specialColors.length);++L,++H)if(z[L]==="?")this._onColor.fire([{type:0,index:this._specialColors[H]}]);else{const V=(0,R.parseColor)(z[L]);V&&this._onColor.fire([{type:1,index:this._specialColors[H],color:V}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const H=[],z=M.split(";");for(let L=0;L<z.length;++L)if(/^\d+$/.exec(z[L])){const V=parseInt(z[L]);$(V)&&H.push({type:2,index:V})}return H.length&&this._onColor.fire(H),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(N[M[0]],S.CHARSETS[M[1]]||S.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=p.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new y.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let H=0;H<this._bufferService.rows;++H){const z=this._activeBuffer.ybase+this._activeBuffer.y+H,L=this._activeBuffer.lines.get(z);L&&(L.fill(M),L.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,H){const z=this._bufferService.buffer,L=this._optionsService.rawOptions;return(V=>(this._coreService.triggerDataEvent(`${g.C0.ESC}${V}${g.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${z.scrollTop+1};${z.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[L.cursorStyle]-(L.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,H){this._dirtyRowTracker.markRangeDirty(M,H)}}c.InputHandler=Q;let se=class{constructor(Y){this._bufferService=Y,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Y){Y<this.start?this.start=Y:Y>this.end&&(this.end=Y)}markRangeDirty(Y,M){Y>M&&(W=Y,Y=M,M=W),Y<this.start&&(this.start=Y),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(Y){return 0<=Y&&Y<256}se=f([x(0,T.IBufferService)],se)},844:(d,c)=>{function h(f){for(const x of f)x.dispose();f.length=0}Object.defineProperty(c,"__esModule",{value:!0}),c.getDisposeArrayDisposable=c.disposeArray=c.toDisposable=c.MutableDisposable=c.Disposable=void 0,c.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const x=this._disposables.indexOf(f);x!==-1&&this._disposables.splice(x,1)}},c.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var x;this._isDisposed||f===this._value||((x=this._value)===null||x===void 0||x.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)===null||f===void 0||f.dispose(),this._value=void 0}},c.toDisposable=function(f){return{dispose:f}},c.disposeArray=h,c.getDisposeArrayDisposable=function(f){return{dispose:()=>h(f)}}},1505:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.FourKeyMap=c.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(x,g,S){this._data[x]||(this._data[x]={}),this._data[x][g]=S}get(x,g){return this._data[x]?this._data[x][g]:void 0}clear(){this._data={}}}c.TwoKeyMap=h,c.FourKeyMap=class{constructor(){this._data=new h}set(f,x,g,S,A){this._data.get(f,x)||this._data.set(f,x,new h),this._data.get(f,x).set(g,S,A)}get(f,x,g,S){var A;return(A=this._data.get(f,x))===null||A===void 0?void 0:A.get(g,S)}clear(){this._data.clear()}}},6114:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isChromeOS=c.isLinux=c.isWindows=c.isIphone=c.isIpad=c.isMac=c.getSafariVersion=c.isSafari=c.isLegacyEdge=c.isFirefox=c.isNode=void 0,c.isNode=typeof navigator>"u";const h=c.isNode?"node":navigator.userAgent,f=c.isNode?"node":navigator.platform;c.isFirefox=h.includes("Firefox"),c.isLegacyEdge=h.includes("Edge"),c.isSafari=/^((?!chrome|android).)*safari/i.test(h),c.getSafariVersion=function(){if(!c.isSafari)return 0;const x=h.match(/Version\/(\d+)/);return x===null||x.length<2?0:parseInt(x[1])},c.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),c.isIpad=f==="iPad",c.isIphone=f==="iPhone",c.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),c.isLinux=f.indexOf("Linux")>=0,c.isChromeOS=/\bCrOS\b/.test(h)},6106:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SortedList=void 0;let h=0;c.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(h=this._search(this._getKey(f)),this._array.splice(h,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const x=this._getKey(f);if(x===void 0||(h=this._search(x),h===-1)||this._getKey(this._array[h])!==x)return!1;do if(this._array[h]===f)return this._array.splice(h,1),!0;while(++h<this._array.length&&this._getKey(this._array[h])===x);return!1}*getKeyIterator(f){if(this._array.length!==0&&(h=this._search(f),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===f))do yield this._array[h];while(++h<this._array.length&&this._getKey(this._array[h])===f)}forEachByKey(f,x){if(this._array.length!==0&&(h=this._search(f),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===f))do x(this._array[h]);while(++h<this._array.length&&this._getKey(this._array[h])===f)}values(){return[...this._array].values()}_search(f){let x=0,g=this._array.length-1;for(;g>=x;){let S=x+g>>1;const A=this._getKey(this._array[S]);if(A>f)g=S-1;else{if(!(A<f)){for(;S>0&&this._getKey(this._array[S-1])===f;)S--;return S}x=S+1}}return x}}},7226:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DebouncedIdleTask=c.IdleTaskQueue=c.PriorityTaskQueue=void 0;const f=h(6114);class x{constructor(){this._tasks=[],this._i=0}enqueue(A){this._tasks.push(A),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(A){this._idleCallback=void 0;let E=0,C=0,p=A.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),C=Math.max(E,C),_=A.timeRemaining(),1.5*C>_)return p-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(p-E))}ms`),void this._start();p=_}this.clear()}}class g extends x{_requestCallback(A){return setTimeout((()=>A(this._createDeadline(16))))}_cancelCallback(A){clearTimeout(A)}_createDeadline(A){const E=Date.now()+A;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}c.PriorityTaskQueue=g,c.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends x{_requestCallback(S){return requestIdleCallback(S)}_cancelCallback(S){cancelIdleCallback(S)}}:g,c.DebouncedIdleTask=class{constructor(){this._queue=new c.IdleTaskQueue}set(S){this._queue.clear(),this._queue.enqueue(S)}flush(){this._queue.flush()}}},9282:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.updateWindowsModeWrappedState=void 0;const f=h(643);c.updateWindowsModeWrappedState=function(x){const g=x.buffer.lines.get(x.buffer.ybase+x.buffer.y-1),S=g?.get(x.cols-1),A=x.buffer.lines.get(x.buffer.ybase+x.buffer.y);A&&S&&(A.isWrapped=S[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&S[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ExtendedAttrs=c.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new h;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}c.AttributeData=h;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,S=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=S}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}c.ExtendedAttrs=f},9092:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Buffer=c.MAX_BUFFER_SIZE=void 0;const f=h(6349),x=h(7226),g=h(3734),S=h(8437),A=h(4634),E=h(511),C=h(643),p=h(4863),_=h(7116);c.MAX_BUFFER_SIZE=4294967295,c.Buffer=class{constructor(v,y,k){this._hasScrollback=v,this._optionsService=y,this._bufferService=k,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=S.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=E.CellData.fromCharData([0,C.NULL_CELL_CHAR,C.NULL_CELL_WIDTH,C.NULL_CELL_CODE]),this._whitespaceCell=E.CellData.fromCharData([0,C.WHITESPACE_CELL_CHAR,C.WHITESPACE_CELL_WIDTH,C.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new x.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new g.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new g.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,y){return new S.BufferLine(this._bufferService.cols,this.getNullCell(v),y)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;const y=v+this._optionsService.rawOptions.scrollback;return y>c.MAX_BUFFER_SIZE?c.MAX_BUFFER_SIZE:y}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=S.DEFAULT_ATTR_DATA);let y=this._rows;for(;y--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,y){const k=this.getNullCell(S.DEFAULT_ATTR_DATA);let T=0;const j=this._getCorrectBufferLength(y);if(j>this.lines.maxLength&&(this.lines.maxLength=j),this.lines.length>0){if(this._cols<v)for(let R=0;R<this.lines.length;R++)T+=+this.lines.get(R).resize(v,k);let D=0;if(this._rows<y)for(let R=this._rows;R<y;R++)this.lines.length<y+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new S.BufferLine(v,k)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new S.BufferLine(v,k)));else for(let R=this._rows;R>y;R--)this.lines.length>y+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(j<this.lines.maxLength){const R=this.lines.length-j;R>0&&(this.lines.trimStart(R),this.ybase=Math.max(this.ybase-R,0),this.ydisp=Math.max(this.ydisp-R,0),this.savedY=Math.max(this.savedY-R,0)),this.lines.maxLength=j}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,y-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=y-1,this._isReflowEnabled&&(this._reflow(v,y),this._cols>v))for(let D=0;D<this.lines.length;D++)T+=+this.lines.get(D).resize(v,k);this._cols=v,this._rows=y,this._memoryCleanupQueue.clear(),T>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let y=0;for(;this._memoryCleanupPosition<this.lines.length;)if(y+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),y>100)return!0;return v}get _isReflowEnabled(){const v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,y){this._cols!==v&&(v>this._cols?this._reflowLarger(v,y):this._reflowSmaller(v,y))}_reflowLarger(v,y){const k=(0,A.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(S.DEFAULT_ATTR_DATA));if(k.length>0){const T=(0,A.reflowLargerCreateNewLayout)(this.lines,k);(0,A.reflowLargerApplyNewLayout)(this.lines,T.layout),this._reflowLargerAdjustViewport(v,y,T.countRemoved)}}_reflowLargerAdjustViewport(v,y,k){const T=this.getNullCell(S.DEFAULT_ATTR_DATA);let j=k;for(;j-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<y&&this.lines.push(new S.BufferLine(v,T))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-k,0)}_reflowSmaller(v,y){const k=this.getNullCell(S.DEFAULT_ATTR_DATA),T=[];let j=0;for(let D=this.lines.length-1;D>=0;D--){let R=this.lines.get(D);if(!R||!R.isWrapped&&R.getTrimmedLength()<=v)continue;const N=[R];for(;R.isWrapped&&D>0;)R=this.lines.get(--D),N.unshift(R);const U=this.ybase+this.y;if(U>=D&&U<D+N.length)continue;const F=N[N.length-1].getTrimmedLength(),I=(0,A.reflowSmallerGetNewLineLengths)(N,this._cols,v),W=I.length-N.length;let Q;Q=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+W):Math.max(0,this.lines.length-this.lines.maxLength+W);const se=[];for(let L=0;L<W;L++){const V=this.getBlankLine(S.DEFAULT_ATTR_DATA,!0);se.push(V)}se.length>0&&(T.push({start:D+N.length+j,newLines:se}),j+=se.length),N.push(...se);let $=I.length-1,Y=I[$];Y===0&&($--,Y=I[$]);let M=N.length-W-1,H=F;for(;M>=0;){const L=Math.min(H,Y);if(N[$]===void 0)break;if(N[$].copyCellsFrom(N[M],H-L,Y-L,L,!0),Y-=L,Y===0&&($--,Y=I[$]),H-=L,H===0){M--;const V=Math.max(M,0);H=(0,A.getWrappedLineTrimmedLength)(N,V,this._cols)}}for(let L=0;L<N.length;L++)I[L]<v&&N[L].setCell(I[L],k);let z=W-Q;for(;z-- >0;)this.ybase===0?this.y<y-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+j)-y&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+W,this.ybase+y-1)}if(T.length>0){const D=[],R=[];for(let $=0;$<this.lines.length;$++)R.push(this.lines.get($));const N=this.lines.length;let U=N-1,F=0,I=T[F];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+j);let W=0;for(let $=Math.min(this.lines.maxLength-1,N+j-1);$>=0;$--)if(I&&I.start>U+W){for(let Y=I.newLines.length-1;Y>=0;Y--)this.lines.set($--,I.newLines[Y]);$++,D.push({index:U+1,amount:I.newLines.length}),W+=I.newLines.length,I=T[++F]}else this.lines.set($,R[U--]);let Q=0;for(let $=D.length-1;$>=0;$--)D[$].index+=Q,this.lines.onInsertEmitter.fire(D[$]),Q+=D[$].amount;const se=Math.max(0,N+j-this.lines.maxLength);se>0&&this.lines.onTrimEmitter.fire(se)}}translateBufferLineToString(v,y,k=0,T){const j=this.lines.get(v);return j?j.translateToString(y,k,T):""}getWrappedRangeForLine(v){let y=v,k=v;for(;y>0&&this.lines.get(y).isWrapped;)y--;for(;k+1<this.lines.length&&this.lines.get(k+1).isWrapped;)k++;return{first:y,last:k}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let y=0;y<this.markers.length;y++)this.markers[y].line===v&&(this.markers[y].dispose(),this.markers.splice(y--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){const y=new p.Marker(v);return this.markers.push(y),y.register(this.lines.onTrim((k=>{y.line-=k,y.line<0&&y.dispose()}))),y.register(this.lines.onInsert((k=>{y.line>=k.index&&(y.line+=k.amount)}))),y.register(this.lines.onDelete((k=>{y.line>=k.index&&y.line<k.index+k.amount&&y.dispose(),y.line>k.index&&(y.line-=k.amount)}))),y.register(y.onDispose((()=>this._removeMarker(y)))),y}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLine=c.DEFAULT_ATTR_DATA=void 0;const f=h(3734),x=h(511),g=h(643),S=h(482);c.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let A=0;class E{constructor(p,_,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*p);const y=_||x.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]);for(let k=0;k<p;++k)this.setCell(k,y);this.length=p}get(p){const _=this._data[3*p+0],v=2097151&_;return[this._data[3*p+1],2097152&_?this._combined[p]:v?(0,S.stringFromCodePoint)(v):"",_>>22,2097152&_?this._combined[p].charCodeAt(this._combined[p].length-1):v]}set(p,_){this._data[3*p+1]=_[g.CHAR_DATA_ATTR_INDEX],_[g.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[p]=_[1],this._data[3*p+0]=2097152|p|_[g.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*p+0]=_[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[g.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(p){return this._data[3*p+0]>>22}hasWidth(p){return 12582912&this._data[3*p+0]}getFg(p){return this._data[3*p+1]}getBg(p){return this._data[3*p+2]}hasContent(p){return 4194303&this._data[3*p+0]}getCodePoint(p){const _=this._data[3*p+0];return 2097152&_?this._combined[p].charCodeAt(this._combined[p].length-1):2097151&_}isCombined(p){return 2097152&this._data[3*p+0]}getString(p){const _=this._data[3*p+0];return 2097152&_?this._combined[p]:2097151&_?(0,S.stringFromCodePoint)(2097151&_):""}isProtected(p){return 536870912&this._data[3*p+2]}loadCell(p,_){return A=3*p,_.content=this._data[A+0],_.fg=this._data[A+1],_.bg=this._data[A+2],2097152&_.content&&(_.combinedData=this._combined[p]),268435456&_.bg&&(_.extended=this._extendedAttrs[p]),_}setCell(p,_){2097152&_.content&&(this._combined[p]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[p]=_.extended),this._data[3*p+0]=_.content,this._data[3*p+1]=_.fg,this._data[3*p+2]=_.bg}setCellFromCodePoint(p,_,v,y,k,T){268435456&k&&(this._extendedAttrs[p]=T),this._data[3*p+0]=_|v<<22,this._data[3*p+1]=y,this._data[3*p+2]=k}addCodepointToCell(p,_){let v=this._data[3*p+0];2097152&v?this._combined[p]+=(0,S.stringFromCodePoint)(_):(2097151&v?(this._combined[p]=(0,S.stringFromCodePoint)(2097151&v)+(0,S.stringFromCodePoint)(_),v&=-2097152,v|=2097152):v=_|4194304,this._data[3*p+0]=v)}insertCells(p,_,v,y){if((p%=this.length)&&this.getWidth(p-1)===2&&this.setCellFromCodePoint(p-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new f.ExtendedAttrs),_<this.length-p){const k=new x.CellData;for(let T=this.length-p-_-1;T>=0;--T)this.setCell(p+_+T,this.loadCell(p+T,k));for(let T=0;T<_;++T)this.setCell(p+T,v)}else for(let k=p;k<this.length;++k)this.setCell(k,v);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new f.ExtendedAttrs)}deleteCells(p,_,v,y){if(p%=this.length,_<this.length-p){const k=new x.CellData;for(let T=0;T<this.length-p-_;++T)this.setCell(p+T,this.loadCell(p+_+T,k));for(let T=this.length-_;T<this.length;++T)this.setCell(T,v)}else for(let k=p;k<this.length;++k)this.setCell(k,v);p&&this.getWidth(p-1)===2&&this.setCellFromCodePoint(p-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new f.ExtendedAttrs),this.getWidth(p)!==0||this.hasContent(p)||this.setCellFromCodePoint(p,0,1,y?.fg||0,y?.bg||0,y?.extended||new f.ExtendedAttrs)}replaceCells(p,_,v,y,k=!1){if(k)for(p&&this.getWidth(p-1)===2&&!this.isProtected(p-1)&&this.setCellFromCodePoint(p-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new f.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,y?.fg||0,y?.bg||0,y?.extended||new f.ExtendedAttrs);p<_&&p<this.length;)this.isProtected(p)||this.setCell(p,v),p++;else for(p&&this.getWidth(p-1)===2&&this.setCellFromCodePoint(p-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new f.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&this.setCellFromCodePoint(_,0,1,y?.fg||0,y?.bg||0,y?.extended||new f.ExtendedAttrs);p<_&&p<this.length;)this.setCell(p++,v)}resize(p,_){if(p===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const v=3*p;if(p>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{const y=new Uint32Array(v);y.set(this._data),this._data=y}for(let y=this.length;y<p;++y)this.setCell(y,_)}else{this._data=this._data.subarray(0,v);const y=Object.keys(this._combined);for(let T=0;T<y.length;T++){const j=parseInt(y[T],10);j>=p&&delete this._combined[j]}const k=Object.keys(this._extendedAttrs);for(let T=0;T<k.length;T++){const j=parseInt(k[T],10);j>=p&&delete this._extendedAttrs[j]}}return this.length=p,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const p=new Uint32Array(this._data.length);return p.set(this._data),this._data=p,1}return 0}fill(p,_=!1){if(_)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,p);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,p)}}copyFrom(p){this.length!==p.length?this._data=new Uint32Array(p._data):this._data.set(p._data),this.length=p.length,this._combined={};for(const _ in p._combined)this._combined[_]=p._combined[_];this._extendedAttrs={};for(const _ in p._extendedAttrs)this._extendedAttrs[_]=p._extendedAttrs[_];this.isWrapped=p.isWrapped}clone(){const p=new E(0);p._data=new Uint32Array(this._data),p.length=this.length;for(const _ in this._combined)p._combined[_]=this._combined[_];for(const _ in this._extendedAttrs)p._extendedAttrs[_]=this._extendedAttrs[_];return p.isWrapped=this.isWrapped,p}getTrimmedLength(){for(let p=this.length-1;p>=0;--p)if(4194303&this._data[3*p+0])return p+(this._data[3*p+0]>>22);return 0}getNoBgTrimmedLength(){for(let p=this.length-1;p>=0;--p)if(4194303&this._data[3*p+0]||50331648&this._data[3*p+2])return p+(this._data[3*p+0]>>22);return 0}copyCellsFrom(p,_,v,y,k){const T=p._data;if(k)for(let D=y-1;D>=0;D--){for(let R=0;R<3;R++)this._data[3*(v+D)+R]=T[3*(_+D)+R];268435456&T[3*(_+D)+2]&&(this._extendedAttrs[v+D]=p._extendedAttrs[_+D])}else for(let D=0;D<y;D++){for(let R=0;R<3;R++)this._data[3*(v+D)+R]=T[3*(_+D)+R];268435456&T[3*(_+D)+2]&&(this._extendedAttrs[v+D]=p._extendedAttrs[_+D])}const j=Object.keys(p._combined);for(let D=0;D<j.length;D++){const R=parseInt(j[D],10);R>=_&&(this._combined[R-_+v]=p._combined[R])}}translateToString(p=!1,_=0,v=this.length){p&&(v=Math.min(v,this.getTrimmedLength()));let y="";for(;_<v;){const k=this._data[3*_+0],T=2097151&k;y+=2097152&k?this._combined[_]:T?(0,S.stringFromCodePoint)(T):g.WHITESPACE_CELL_CHAR,_+=k>>22||1}return y}}c.BufferLine=E},4841:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getRangeLength=void 0,c.getRangeLength=function(h,f){if(h.start.y>h.end.y)throw new Error(`Buffer range end (${h.end.x}, ${h.end.y}) cannot be before start (${h.start.x}, ${h.start.y})`);return f*(h.end.y-h.start.y)+(h.end.x-h.start.x+1)}},4634:(d,c)=>{function h(f,x,g){if(x===f.length-1)return f[x].getTrimmedLength();const S=!f[x].hasContent(g-1)&&f[x].getWidth(g-1)===1,A=f[x+1].getWidth(0)===2;return S&&A?g-1:g}Object.defineProperty(c,"__esModule",{value:!0}),c.getWrappedLineTrimmedLength=c.reflowSmallerGetNewLineLengths=c.reflowLargerApplyNewLayout=c.reflowLargerCreateNewLayout=c.reflowLargerGetLinesToRemove=void 0,c.reflowLargerGetLinesToRemove=function(f,x,g,S,A){const E=[];for(let C=0;C<f.length-1;C++){let p=C,_=f.get(++p);if(!_.isWrapped)continue;const v=[f.get(C)];for(;p<f.length&&_.isWrapped;)v.push(_),_=f.get(++p);if(S>=C&&S<p){C+=v.length-1;continue}let y=0,k=h(v,y,x),T=1,j=0;for(;T<v.length;){const R=h(v,T,x),N=R-j,U=g-k,F=Math.min(N,U);v[y].copyCellsFrom(v[T],j,k,F,!1),k+=F,k===g&&(y++,k=0),j+=F,j===R&&(T++,j=0),k===0&&y!==0&&v[y-1].getWidth(g-1)===2&&(v[y].copyCellsFrom(v[y-1],g-1,k++,1,!1),v[y-1].setCell(g-1,A))}v[y].replaceCells(k,g,A);let D=0;for(let R=v.length-1;R>0&&(R>y||v[R].getTrimmedLength()===0);R--)D++;D>0&&(E.push(C+v.length-D),E.push(D)),C+=v.length-1}return E},c.reflowLargerCreateNewLayout=function(f,x){const g=[];let S=0,A=x[S],E=0;for(let C=0;C<f.length;C++)if(A===C){const p=x[++S];f.onDeleteEmitter.fire({index:C-E,amount:p}),C+=p-1,E+=p,A=x[++S]}else g.push(C);return{layout:g,countRemoved:E}},c.reflowLargerApplyNewLayout=function(f,x){const g=[];for(let S=0;S<x.length;S++)g.push(f.get(x[S]));for(let S=0;S<g.length;S++)f.set(S,g[S]);f.length=x.length},c.reflowSmallerGetNewLineLengths=function(f,x,g){const S=[],A=f.map(((_,v)=>h(f,v,x))).reduce(((_,v)=>_+v));let E=0,C=0,p=0;for(;p<A;){if(A-p<g){S.push(A-p);break}E+=g;const _=h(f,C,x);E>_&&(E-=_,C++);const v=f[C].getWidth(E-1)===2;v&&E--;const y=v?g-1:g;S.push(y),p+=y}return S},c.getWrappedLineTrimmedLength=h},5295:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferSet=void 0;const f=h(8460),x=h(844),g=h(9092);class S extends x.Disposable{constructor(E,C){super(),this._optionsService=E,this._bufferService=C,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new g.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new g.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(E){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(E),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(E,C){this._normal.resize(E,C),this._alt.resize(E,C),this.setupTabStops(E)}setupTabStops(E){this._normal.setupTabStops(E),this._alt.setupTabStops(E)}}c.BufferSet=S},511:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CellData=void 0;const f=h(482),x=h(643),g=h(3734);class S extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const C=new S;return C.setFromCharData(E),C}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[x.CHAR_DATA_ATTR_INDEX],this.bg=0;let C=!1;if(E[x.CHAR_DATA_CHAR_INDEX].length>2)C=!0;else if(E[x.CHAR_DATA_CHAR_INDEX].length===2){const p=E[x.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=p&&p<=56319){const _=E[x.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(p-55296)+_-56320+65536|E[x.CHAR_DATA_WIDTH_INDEX]<<22:C=!0}else C=!0}else this.content=E[x.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[x.CHAR_DATA_WIDTH_INDEX]<<22;C&&(this.combinedData=E[x.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[x.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.CellData=S},643:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WHITESPACE_CELL_CODE=c.WHITESPACE_CELL_WIDTH=c.WHITESPACE_CELL_CHAR=c.NULL_CELL_CODE=c.NULL_CELL_WIDTH=c.NULL_CELL_CHAR=c.CHAR_DATA_CODE_INDEX=c.CHAR_DATA_WIDTH_INDEX=c.CHAR_DATA_CHAR_INDEX=c.CHAR_DATA_ATTR_INDEX=c.DEFAULT_EXT=c.DEFAULT_ATTR=c.DEFAULT_COLOR=void 0,c.DEFAULT_COLOR=0,c.DEFAULT_ATTR=256|c.DEFAULT_COLOR<<9,c.DEFAULT_EXT=0,c.CHAR_DATA_ATTR_INDEX=0,c.CHAR_DATA_CHAR_INDEX=1,c.CHAR_DATA_WIDTH_INDEX=2,c.CHAR_DATA_CODE_INDEX=3,c.NULL_CELL_CHAR="",c.NULL_CELL_WIDTH=1,c.NULL_CELL_CODE=0,c.WHITESPACE_CELL_CHAR=" ",c.WHITESPACE_CELL_WIDTH=1,c.WHITESPACE_CELL_CODE=32},4863:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Marker=void 0;const f=h(8460),x=h(844);class g{get id(){return this._id}constructor(A){this.line=A,this.isDisposed=!1,this._disposables=[],this._id=g._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,x.disposeArray)(this._disposables),this._disposables.length=0)}register(A){return this._disposables.push(A),A}}c.Marker=g,g._nextId=1},7116:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_CHARSET=c.CHARSETS=void 0,c.CHARSETS={},c.DEFAULT_CHARSET=c.CHARSETS.B,c.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},c.CHARSETS.A={"#":""},c.CHARSETS.B=void 0,c.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},c.CHARSETS.C=c.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},c.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},c.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.E=c.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},c.CHARSETS.H=c.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(d,c)=>{var h,f,x;Object.defineProperty(c,"__esModule",{value:!0}),c.C1_ESCAPED=c.C1=c.C0=void 0,(function(g){g.NUL="\0",g.SOH="",g.STX="",g.ETX="",g.EOT="",g.ENQ="",g.ACK="",g.BEL="\x07",g.BS="\b",g.HT="	",g.LF=`
`,g.VT="\v",g.FF="\f",g.CR="\r",g.SO="",g.SI="",g.DLE="",g.DC1="",g.DC2="",g.DC3="",g.DC4="",g.NAK="",g.SYN="",g.ETB="",g.CAN="",g.EM="",g.SUB="",g.ESC="\x1B",g.FS="",g.GS="",g.RS="",g.US="",g.SP=" ",g.DEL=""})(h||(c.C0=h={})),(function(g){g.PAD="",g.HOP="",g.BPH="",g.NBH="",g.IND="",g.NEL="",g.SSA="",g.ESA="",g.HTS="",g.HTJ="",g.VTS="",g.PLD="",g.PLU="",g.RI="",g.SS2="",g.SS3="",g.DCS="",g.PU1="",g.PU2="",g.STS="",g.CCH="",g.MW="",g.SPA="",g.EPA="",g.SOS="",g.SGCI="",g.SCI="",g.CSI="",g.ST="",g.OSC="",g.PM="",g.APC=""})(f||(c.C1=f={})),(function(g){g.ST=`${h.ESC}\\`})(x||(c.C1_ESCAPED=x={}))},7399:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.evaluateKeyboardEvent=void 0;const f=h(2584),x={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};c.evaluateKeyboardEvent=function(g,S,A,E){const C={type:0,cancel:!1,key:void 0},p=(g.shiftKey?1:0)|(g.altKey?2:0)|(g.ctrlKey?4:0)|(g.metaKey?8:0);switch(g.keyCode){case 0:g.key==="UIKeyInputUpArrow"?C.key=S?f.C0.ESC+"OA":f.C0.ESC+"[A":g.key==="UIKeyInputLeftArrow"?C.key=S?f.C0.ESC+"OD":f.C0.ESC+"[D":g.key==="UIKeyInputRightArrow"?C.key=S?f.C0.ESC+"OC":f.C0.ESC+"[C":g.key==="UIKeyInputDownArrow"&&(C.key=S?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:if(g.altKey){C.key=f.C0.ESC+f.C0.DEL;break}C.key=f.C0.DEL;break;case 9:if(g.shiftKey){C.key=f.C0.ESC+"[Z";break}C.key=f.C0.HT,C.cancel=!0;break;case 13:C.key=g.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,C.cancel=!0;break;case 27:C.key=f.C0.ESC,g.altKey&&(C.key=f.C0.ESC+f.C0.ESC),C.cancel=!0;break;case 37:if(g.metaKey)break;p?(C.key=f.C0.ESC+"[1;"+(p+1)+"D",C.key===f.C0.ESC+"[1;3D"&&(C.key=f.C0.ESC+(A?"b":"[1;5D"))):C.key=S?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(g.metaKey)break;p?(C.key=f.C0.ESC+"[1;"+(p+1)+"C",C.key===f.C0.ESC+"[1;3C"&&(C.key=f.C0.ESC+(A?"f":"[1;5C"))):C.key=S?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(g.metaKey)break;p?(C.key=f.C0.ESC+"[1;"+(p+1)+"A",A||C.key!==f.C0.ESC+"[1;3A"||(C.key=f.C0.ESC+"[1;5A")):C.key=S?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(g.metaKey)break;p?(C.key=f.C0.ESC+"[1;"+(p+1)+"B",A||C.key!==f.C0.ESC+"[1;3B"||(C.key=f.C0.ESC+"[1;5B")):C.key=S?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:g.shiftKey||g.ctrlKey||(C.key=f.C0.ESC+"[2~");break;case 46:C.key=p?f.C0.ESC+"[3;"+(p+1)+"~":f.C0.ESC+"[3~";break;case 36:C.key=p?f.C0.ESC+"[1;"+(p+1)+"H":S?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:C.key=p?f.C0.ESC+"[1;"+(p+1)+"F":S?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:g.shiftKey?C.type=2:g.ctrlKey?C.key=f.C0.ESC+"[5;"+(p+1)+"~":C.key=f.C0.ESC+"[5~";break;case 34:g.shiftKey?C.type=3:g.ctrlKey?C.key=f.C0.ESC+"[6;"+(p+1)+"~":C.key=f.C0.ESC+"[6~";break;case 112:C.key=p?f.C0.ESC+"[1;"+(p+1)+"P":f.C0.ESC+"OP";break;case 113:C.key=p?f.C0.ESC+"[1;"+(p+1)+"Q":f.C0.ESC+"OQ";break;case 114:C.key=p?f.C0.ESC+"[1;"+(p+1)+"R":f.C0.ESC+"OR";break;case 115:C.key=p?f.C0.ESC+"[1;"+(p+1)+"S":f.C0.ESC+"OS";break;case 116:C.key=p?f.C0.ESC+"[15;"+(p+1)+"~":f.C0.ESC+"[15~";break;case 117:C.key=p?f.C0.ESC+"[17;"+(p+1)+"~":f.C0.ESC+"[17~";break;case 118:C.key=p?f.C0.ESC+"[18;"+(p+1)+"~":f.C0.ESC+"[18~";break;case 119:C.key=p?f.C0.ESC+"[19;"+(p+1)+"~":f.C0.ESC+"[19~";break;case 120:C.key=p?f.C0.ESC+"[20;"+(p+1)+"~":f.C0.ESC+"[20~";break;case 121:C.key=p?f.C0.ESC+"[21;"+(p+1)+"~":f.C0.ESC+"[21~";break;case 122:C.key=p?f.C0.ESC+"[23;"+(p+1)+"~":f.C0.ESC+"[23~";break;case 123:C.key=p?f.C0.ESC+"[24;"+(p+1)+"~":f.C0.ESC+"[24~";break;default:if(!g.ctrlKey||g.shiftKey||g.altKey||g.metaKey)if(A&&!E||!g.altKey||g.metaKey)!A||g.altKey||g.ctrlKey||g.shiftKey||!g.metaKey?g.key&&!g.ctrlKey&&!g.altKey&&!g.metaKey&&g.keyCode>=48&&g.key.length===1?C.key=g.key:g.key&&g.ctrlKey&&(g.key==="_"&&(C.key=f.C0.US),g.key==="@"&&(C.key=f.C0.NUL)):g.keyCode===65&&(C.type=1);else{const _=x[g.keyCode],v=_?.[g.shiftKey?1:0];if(v)C.key=f.C0.ESC+v;else if(g.keyCode>=65&&g.keyCode<=90){const y=g.ctrlKey?g.keyCode-64:g.keyCode+32;let k=String.fromCharCode(y);g.shiftKey&&(k=k.toUpperCase()),C.key=f.C0.ESC+k}else if(g.keyCode===32)C.key=f.C0.ESC+(g.ctrlKey?f.C0.NUL:" ");else if(g.key==="Dead"&&g.code.startsWith("Key")){let y=g.code.slice(3,4);g.shiftKey||(y=y.toLowerCase()),C.key=f.C0.ESC+y,C.cancel=!0}}else g.keyCode>=65&&g.keyCode<=90?C.key=String.fromCharCode(g.keyCode-64):g.keyCode===32?C.key=f.C0.NUL:g.keyCode>=51&&g.keyCode<=55?C.key=String.fromCharCode(g.keyCode-51+27):g.keyCode===56?C.key=f.C0.DEL:g.keyCode===219?C.key=f.C0.ESC:g.keyCode===220?C.key=f.C0.FS:g.keyCode===221&&(C.key=f.C0.GS)}return C}},482:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Utf8ToUtf32=c.StringToUtf32=c.utf32ToString=c.stringFromCodePoint=void 0,c.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},c.utf32ToString=function(h,f=0,x=h.length){let g="";for(let S=f;S<x;++S){let A=h[S];A>65535?(A-=65536,g+=String.fromCharCode(55296+(A>>10))+String.fromCharCode(A%1024+56320)):g+=String.fromCharCode(A)}return g},c.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,f){const x=h.length;if(!x)return 0;let g=0,S=0;if(this._interim){const A=h.charCodeAt(S++);56320<=A&&A<=57343?f[g++]=1024*(this._interim-55296)+A-56320+65536:(f[g++]=this._interim,f[g++]=A),this._interim=0}for(let A=S;A<x;++A){const E=h.charCodeAt(A);if(55296<=E&&E<=56319){if(++A>=x)return this._interim=E,g;const C=h.charCodeAt(A);56320<=C&&C<=57343?f[g++]=1024*(E-55296)+C-56320+65536:(f[g++]=E,f[g++]=C)}else E!==65279&&(f[g++]=E)}return g}},c.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,f){const x=h.length;if(!x)return 0;let g,S,A,E,C=0,p=0,_=0;if(this.interim[0]){let k=!1,T=this.interim[0];T&=(224&T)==192?31:(240&T)==224?15:7;let j,D=0;for(;(j=63&this.interim[++D])&&D<4;)T<<=6,T|=j;const R=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,N=R-D;for(;_<N;){if(_>=x)return 0;if(j=h[_++],(192&j)!=128){_--,k=!0;break}this.interim[D++]=j,T<<=6,T|=63&j}k||(R===2?T<128?_--:f[C++]=T:R===3?T<2048||T>=55296&&T<=57343||T===65279||(f[C++]=T):T<65536||T>1114111||(f[C++]=T)),this.interim.fill(0)}const v=x-4;let y=_;for(;y<x;){for(;!(!(y<v)||128&(g=h[y])||128&(S=h[y+1])||128&(A=h[y+2])||128&(E=h[y+3]));)f[C++]=g,f[C++]=S,f[C++]=A,f[C++]=E,y+=4;if(g=h[y++],g<128)f[C++]=g;else if((224&g)==192){if(y>=x)return this.interim[0]=g,C;if(S=h[y++],(192&S)!=128){y--;continue}if(p=(31&g)<<6|63&S,p<128){y--;continue}f[C++]=p}else if((240&g)==224){if(y>=x)return this.interim[0]=g,C;if(S=h[y++],(192&S)!=128){y--;continue}if(y>=x)return this.interim[0]=g,this.interim[1]=S,C;if(A=h[y++],(192&A)!=128){y--;continue}if(p=(15&g)<<12|(63&S)<<6|63&A,p<2048||p>=55296&&p<=57343||p===65279)continue;f[C++]=p}else if((248&g)==240){if(y>=x)return this.interim[0]=g,C;if(S=h[y++],(192&S)!=128){y--;continue}if(y>=x)return this.interim[0]=g,this.interim[1]=S,C;if(A=h[y++],(192&A)!=128){y--;continue}if(y>=x)return this.interim[0]=g,this.interim[1]=S,this.interim[2]=A,C;if(E=h[y++],(192&E)!=128){y--;continue}if(p=(7&g)<<18|(63&S)<<12|(63&A)<<6|63&E,p<65536||p>1114111)continue;f[C++]=p}}return C}}},225:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeV6=void 0;const h=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let x;c.UnicodeV6=class{constructor(){if(this.version="6",!x){x=new Uint8Array(65536),x.fill(1),x[0]=0,x.fill(0,1,32),x.fill(0,127,160),x.fill(2,4352,4448),x[9001]=2,x[9002]=2,x.fill(2,11904,42192),x[12351]=1,x.fill(2,44032,55204),x.fill(2,63744,64256),x.fill(2,65040,65050),x.fill(2,65072,65136),x.fill(2,65280,65377),x.fill(2,65504,65511);for(let g=0;g<h.length;++g)x.fill(0,h[g][0],h[g][1]+1)}}wcwidth(g){return g<32?0:g<127?1:g<65536?x[g]:(function(S,A){let E,C=0,p=A.length-1;if(S<A[0][0]||S>A[p][1])return!1;for(;p>=C;)if(E=C+p>>1,S>A[E][1])C=E+1;else{if(!(S<A[E][0]))return!0;p=E-1}return!1})(g,f)?0:g>=131072&&g<=196605||g>=196608&&g<=262141?2:1}}},5981:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WriteBuffer=void 0;const f=h(8460),x=h(844);class g extends x.Disposable{constructor(A){super(),this._action=A,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(A,E){if(E!==void 0&&this._syncCalls>E)return void(this._syncCalls=0);if(this._pendingData+=A.length,this._writeBuffer.push(A),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let C;for(this._isSyncWriting=!0;C=this._writeBuffer.shift();){this._action(C);const p=this._callbacks.shift();p&&p()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(A,E){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=A.length,this._writeBuffer.push(A),this._callbacks.push(E),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=A.length,this._writeBuffer.push(A),this._callbacks.push(E)}_innerWrite(A=0,E=!0){const C=A||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const p=this._writeBuffer[this._bufferOffset],_=this._action(p,E);if(_){const y=k=>Date.now()-C>=12?setTimeout((()=>this._innerWrite(0,k))):this._innerWrite(C,k);return void _.catch((k=>(queueMicrotask((()=>{throw k})),Promise.resolve(!1)))).then(y)}const v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=p.length,Date.now()-C>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}c.WriteBuffer=g},5941:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.toRgbString=c.parseColor=void 0;const h=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function x(g,S){const A=g.toString(16),E=A.length<2?"0"+A:A;switch(S){case 4:return A[0];case 8:return E;case 12:return(E+E).slice(0,3);default:return E+E}}c.parseColor=function(g){if(!g)return;let S=g.toLowerCase();if(S.indexOf("rgb:")===0){S=S.slice(4);const A=h.exec(S);if(A){const E=A[1]?15:A[4]?255:A[7]?4095:65535;return[Math.round(parseInt(A[1]||A[4]||A[7]||A[10],16)/E*255),Math.round(parseInt(A[2]||A[5]||A[8]||A[11],16)/E*255),Math.round(parseInt(A[3]||A[6]||A[9]||A[12],16)/E*255)]}}else if(S.indexOf("#")===0&&(S=S.slice(1),f.exec(S)&&[3,6,9,12].includes(S.length))){const A=S.length/3,E=[0,0,0];for(let C=0;C<3;++C){const p=parseInt(S.slice(A*C,A*C+A),16);E[C]=A===1?p<<4:A===2?p:A===3?p>>4:p>>8}return E}},c.toRgbString=function(g,S=16){const[A,E,C]=g;return`rgb:${x(A,S)}/${x(E,S)}/${x(C,S)}`}},5770:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PAYLOAD_LIMIT=void 0,c.PAYLOAD_LIMIT=1e7},6351:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DcsHandler=c.DcsParser=void 0;const f=h(482),x=h(8742),g=h(5770),S=[];c.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=S,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=S}registerHandler(E,C){this._handlers[E]===void 0&&(this._handlers[E]=[]);const p=this._handlers[E];return p.push(C),{dispose:()=>{const _=p.indexOf(C);_!==-1&&p.splice(_,1)}}}clearHandler(E){this._handlers[E]&&delete this._handlers[E]}setHandlerFallback(E){this._handlerFb=E}reset(){if(this._active.length)for(let E=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;E>=0;--E)this._active[E].unhook(!1);this._stack.paused=!1,this._active=S,this._ident=0}hook(E,C){if(this.reset(),this._ident=E,this._active=this._handlers[E]||S,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].hook(C);else this._handlerFb(this._ident,"HOOK",C)}put(E,C,p){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(E,C,p);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(E,C,p))}unhook(E,C=!0){if(this._active.length){let p=!1,_=this._active.length-1,v=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,p=C,v=this._stack.fallThrough,this._stack.paused=!1),!v&&p===!1){for(;_>=0&&(p=this._active[_].unhook(E),p!==!0);_--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,p;_--}for(;_>=0;_--)if(p=this._active[_].unhook(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,p}else this._handlerFb(this._ident,"UNHOOK",E);this._active=S,this._ident=0}};const A=new x.Params;A.addParam(0),c.DcsHandler=class{constructor(E){this._handler=E,this._data="",this._params=A,this._hitLimit=!1}hook(E){this._params=E.length>1||E.params[0]?E.clone():A,this._data="",this._hitLimit=!1}put(E,C,p){this._hitLimit||(this._data+=(0,f.utf32ToString)(E,C,p),this._data.length>g.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(E){let C=!1;if(this._hitLimit)C=!1;else if(E&&(C=this._handler(this._data,this._params),C instanceof Promise))return C.then((p=>(this._params=A,this._data="",this._hitLimit=!1,p)));return this._params=A,this._data="",this._hitLimit=!1,C}}},2015:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.EscapeSequenceParser=c.VT500_TRANSITION_TABLE=c.TransitionTable=void 0;const f=h(844),x=h(8742),g=h(6242),S=h(6351);class A{constructor(_){this.table=new Uint8Array(_)}setDefault(_,v){this.table.fill(_<<4|v)}add(_,v,y,k){this.table[v<<8|_]=y<<4|k}addMany(_,v,y,k){for(let T=0;T<_.length;T++)this.table[v<<8|_[T]]=y<<4|k}}c.TransitionTable=A;const E=160;c.VT500_TRANSITION_TABLE=(function(){const p=new A(4095),_=Array.apply(null,Array(256)).map(((D,R)=>R)),v=(D,R)=>_.slice(D,R),y=v(32,127),k=v(0,24);k.push(25),k.push.apply(k,v(28,32));const T=v(0,14);let j;for(j in p.setDefault(1,0),p.addMany(y,0,2,0),T)p.addMany([24,26,153,154],j,3,0),p.addMany(v(128,144),j,3,0),p.addMany(v(144,152),j,3,0),p.add(156,j,0,0),p.add(27,j,11,1),p.add(157,j,4,8),p.addMany([152,158,159],j,0,7),p.add(155,j,11,3),p.add(144,j,11,9);return p.addMany(k,0,3,0),p.addMany(k,1,3,1),p.add(127,1,0,1),p.addMany(k,8,0,8),p.addMany(k,3,3,3),p.add(127,3,0,3),p.addMany(k,4,3,4),p.add(127,4,0,4),p.addMany(k,6,3,6),p.addMany(k,5,3,5),p.add(127,5,0,5),p.addMany(k,2,3,2),p.add(127,2,0,2),p.add(93,1,4,8),p.addMany(y,8,5,8),p.add(127,8,5,8),p.addMany([156,27,24,26,7],8,6,0),p.addMany(v(28,32),8,0,8),p.addMany([88,94,95],1,0,7),p.addMany(y,7,0,7),p.addMany(k,7,0,7),p.add(156,7,0,0),p.add(127,7,0,7),p.add(91,1,11,3),p.addMany(v(64,127),3,7,0),p.addMany(v(48,60),3,8,4),p.addMany([60,61,62,63],3,9,4),p.addMany(v(48,60),4,8,4),p.addMany(v(64,127),4,7,0),p.addMany([60,61,62,63],4,0,6),p.addMany(v(32,64),6,0,6),p.add(127,6,0,6),p.addMany(v(64,127),6,0,0),p.addMany(v(32,48),3,9,5),p.addMany(v(32,48),5,9,5),p.addMany(v(48,64),5,0,6),p.addMany(v(64,127),5,7,0),p.addMany(v(32,48),4,9,5),p.addMany(v(32,48),1,9,2),p.addMany(v(32,48),2,9,2),p.addMany(v(48,127),2,10,0),p.addMany(v(48,80),1,10,0),p.addMany(v(81,88),1,10,0),p.addMany([89,90,92],1,10,0),p.addMany(v(96,127),1,10,0),p.add(80,1,11,9),p.addMany(k,9,0,9),p.add(127,9,0,9),p.addMany(v(28,32),9,0,9),p.addMany(v(32,48),9,9,12),p.addMany(v(48,60),9,8,10),p.addMany([60,61,62,63],9,9,10),p.addMany(k,11,0,11),p.addMany(v(32,128),11,0,11),p.addMany(v(28,32),11,0,11),p.addMany(k,10,0,10),p.add(127,10,0,10),p.addMany(v(28,32),10,0,10),p.addMany(v(48,60),10,8,10),p.addMany([60,61,62,63],10,0,11),p.addMany(v(32,48),10,9,12),p.addMany(k,12,0,12),p.add(127,12,0,12),p.addMany(v(28,32),12,0,12),p.addMany(v(32,48),12,9,12),p.addMany(v(48,64),12,0,11),p.addMany(v(64,127),12,12,13),p.addMany(v(64,127),10,12,13),p.addMany(v(64,127),9,12,13),p.addMany(k,13,13,13),p.addMany(y,13,13,13),p.add(127,13,0,13),p.addMany([27,156,24,26],13,14,0),p.add(E,0,2,0),p.add(E,8,5,8),p.add(E,6,0,6),p.add(E,11,0,11),p.add(E,13,13,13),p})();class C extends f.Disposable{constructor(_=c.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new x.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(v,y,k)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,y)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new g.OscParser),this._dcsParser=this.register(new S.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(_,v=[64,126]){let y=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(y=_.prefix.charCodeAt(0),y&&60>y||y>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let T=0;T<_.intermediates.length;++T){const j=_.intermediates.charCodeAt(T);if(32>j||j>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");y<<=8,y|=j}}if(_.final.length!==1)throw new Error("final must be a single byte");const k=_.final.charCodeAt(0);if(v[0]>k||k>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return y<<=8,y|=k,y}identToString(_){const v=[];for(;_;)v.push(String.fromCharCode(255&_)),_>>=8;return v.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,v){const y=this._identifier(_,[48,126]);this._escHandlers[y]===void 0&&(this._escHandlers[y]=[]);const k=this._escHandlers[y];return k.push(v),{dispose:()=>{const T=k.indexOf(v);T!==-1&&k.splice(T,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,v){this._executeHandlers[_.charCodeAt(0)]=v}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,v){const y=this._identifier(_);this._csiHandlers[y]===void 0&&(this._csiHandlers[y]=[]);const k=this._csiHandlers[y];return k.push(v),{dispose:()=>{const T=k.indexOf(v);T!==-1&&k.splice(T,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,v){return this._dcsParser.registerHandler(this._identifier(_),v)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,v){return this._oscParser.registerHandler(_,v)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,v,y,k,T){this._parseStack.state=_,this._parseStack.handlers=v,this._parseStack.handlerPos=y,this._parseStack.transition=k,this._parseStack.chunkPos=T}parse(_,v,y){let k,T=0,j=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(y===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const R=this._parseStack.handlers;let N=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(y===!1&&N>-1){for(;N>=0&&(k=R[N](this._params),k!==!0);N--)if(k instanceof Promise)return this._parseStack.handlerPos=N,k}this._parseStack.handlers=[];break;case 4:if(y===!1&&N>-1){for(;N>=0&&(k=R[N](),k!==!0);N--)if(k instanceof Promise)return this._parseStack.handlerPos=N,k}this._parseStack.handlers=[];break;case 6:if(T=_[this._parseStack.chunkPos],k=this._dcsParser.unhook(T!==24&&T!==26,y),k)return k;T===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(T=_[this._parseStack.chunkPos],k=this._oscParser.end(T!==24&&T!==26,y),k)return k;T===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let R=D;R<v;++R){switch(T=_[R],j=this._transitions.table[this.currentState<<8|(T<160?T:E)],j>>4){case 2:for(let W=R+1;;++W){if(W>=v||(T=_[W])<32||T>126&&T<E){this._printHandler(_,R,W),R=W-1;break}if(++W>=v||(T=_[W])<32||T>126&&T<E){this._printHandler(_,R,W),R=W-1;break}if(++W>=v||(T=_[W])<32||T>126&&T<E){this._printHandler(_,R,W),R=W-1;break}if(++W>=v||(T=_[W])<32||T>126&&T<E){this._printHandler(_,R,W),R=W-1;break}}break;case 3:this._executeHandlers[T]?this._executeHandlers[T]():this._executeHandlerFb(T),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:R,code:T,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const N=this._csiHandlers[this._collect<<8|T];let U=N?N.length-1:-1;for(;U>=0&&(k=N[U](this._params),k!==!0);U--)if(k instanceof Promise)return this._preserveStack(3,N,U,j,R),k;U<0&&this._csiHandlerFb(this._collect<<8|T,this._params),this.precedingCodepoint=0;break;case 8:do switch(T){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(T-48)}while(++R<v&&(T=_[R])>47&&T<60);R--;break;case 9:this._collect<<=8,this._collect|=T;break;case 10:const F=this._escHandlers[this._collect<<8|T];let I=F?F.length-1:-1;for(;I>=0&&(k=F[I](),k!==!0);I--)if(k instanceof Promise)return this._preserveStack(4,F,I,j,R),k;I<0&&this._escHandlerFb(this._collect<<8|T),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|T,this._params);break;case 13:for(let W=R+1;;++W)if(W>=v||(T=_[W])===24||T===26||T===27||T>127&&T<E){this._dcsParser.put(_,R,W),R=W-1;break}break;case 14:if(k=this._dcsParser.unhook(T!==24&&T!==26),k)return this._preserveStack(6,[],0,j,R),k;T===27&&(j|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let W=R+1;;W++)if(W>=v||(T=_[W])<32||T>127&&T<E){this._oscParser.put(_,R,W),R=W-1;break}break;case 6:if(k=this._oscParser.end(T!==24&&T!==26),k)return this._preserveStack(5,[],0,j,R),k;T===27&&(j|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&j}}}c.EscapeSequenceParser=C},6242:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OscHandler=c.OscParser=void 0;const f=h(5770),x=h(482),g=[];c.OscParser=class{constructor(){this._state=0,this._active=g,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(S,A){this._handlers[S]===void 0&&(this._handlers[S]=[]);const E=this._handlers[S];return E.push(A),{dispose:()=>{const C=E.indexOf(A);C!==-1&&E.splice(C,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}reset(){if(this._state===2)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].end(!1);this._stack.paused=!1,this._active=g,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||g,this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].start();else this._handlerFb(this._id,"START")}_put(S,A,E){if(this._active.length)for(let C=this._active.length-1;C>=0;C--)this._active[C].put(S,A,E);else this._handlerFb(this._id,"PUT",(0,x.utf32ToString)(S,A,E))}start(){this.reset(),this._state=1}put(S,A,E){if(this._state!==3){if(this._state===1)for(;A<E;){const C=S[A++];if(C===59){this._state=2,this._start();break}if(C<48||57<C)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+C-48}this._state===2&&E-A>0&&this._put(S,A,E)}}end(S,A=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let E=!1,C=this._active.length-1,p=!1;if(this._stack.paused&&(C=this._stack.loopPosition-1,E=A,p=this._stack.fallThrough,this._stack.paused=!1),!p&&E===!1){for(;C>=0&&(E=this._active[C].end(S),E!==!0);C--)if(E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=C,this._stack.fallThrough=!1,E;C--}for(;C>=0;C--)if(E=this._active[C].end(!1),E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=C,this._stack.fallThrough=!0,E}else this._handlerFb(this._id,"END",S);this._active=g,this._id=-1,this._state=0}}},c.OscHandler=class{constructor(S){this._handler=S,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(S,A,E){this._hitLimit||(this._data+=(0,x.utf32ToString)(S,A,E),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(S){let A=!1;if(this._hitLimit)A=!1;else if(S&&(A=this._handler(this._data),A instanceof Promise))return A.then((E=>(this._data="",this._hitLimit=!1,E)));return this._data="",this._hitLimit=!1,A}}},8742:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Params=void 0;const h=2147483647;class f{static fromArray(g){const S=new f;if(!g.length)return S;for(let A=Array.isArray(g[0])?1:0;A<g.length;++A){const E=g[A];if(Array.isArray(E))for(let C=0;C<E.length;++C)S.addSubParam(E[C]);else S.addParam(E)}return S}constructor(g=32,S=32){if(this.maxLength=g,this.maxSubParamsLength=S,S>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(g),this.length=0,this._subParams=new Int32Array(S),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(g),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const g=new f(this.maxLength,this.maxSubParamsLength);return g.params.set(this.params),g.length=this.length,g._subParams.set(this._subParams),g._subParamsLength=this._subParamsLength,g._subParamsIdx.set(this._subParamsIdx),g._rejectDigits=this._rejectDigits,g._rejectSubDigits=this._rejectSubDigits,g._digitIsSub=this._digitIsSub,g}toArray(){const g=[];for(let S=0;S<this.length;++S){g.push(this.params[S]);const A=this._subParamsIdx[S]>>8,E=255&this._subParamsIdx[S];E-A>0&&g.push(Array.prototype.slice.call(this._subParams,A,E))}return g}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(g){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=g>h?h:g}}addSubParam(g){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=g>h?h:g,this._subParamsIdx[this.length-1]++}}hasSubParams(g){return(255&this._subParamsIdx[g])-(this._subParamsIdx[g]>>8)>0}getSubParams(g){const S=this._subParamsIdx[g]>>8,A=255&this._subParamsIdx[g];return A-S>0?this._subParams.subarray(S,A):null}getSubParamsAll(){const g={};for(let S=0;S<this.length;++S){const A=this._subParamsIdx[S]>>8,E=255&this._subParamsIdx[S];E-A>0&&(g[S]=this._subParams.slice(A,E))}return g}addDigit(g){let S;if(this._rejectDigits||!(S=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const A=this._digitIsSub?this._subParams:this.params,E=A[S-1];A[S-1]=~E?Math.min(10*E+g,h):g}}c.Params=f},5741:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AddonManager=void 0,c.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let h=this._addons.length-1;h>=0;h--)this._addons[h].instance.dispose()}loadAddon(h,f){const x={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(x),f.dispose=()=>this._wrappedAddonDispose(x),f.activate(h)}_wrappedAddonDispose(h){if(h.isDisposed)return;let f=-1;for(let x=0;x<this._addons.length;x++)if(this._addons[x]===h){f=x;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");h.isDisposed=!0,h.dispose.apply(h.instance),this._addons.splice(f,1)}}},8771:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferApiView=void 0;const f=h(3785),x=h(511);c.BufferApiView=class{constructor(g,S){this._buffer=g,this.type=S}init(g){return this._buffer=g,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(g){const S=this._buffer.lines.get(g);if(S)return new f.BufferLineApiView(S)}getNullCell(){return new x.CellData}}},3785:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLineApiView=void 0;const f=h(511);c.BufferLineApiView=class{constructor(x){this._line=x}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(x,g){if(!(x<0||x>=this._line.length))return g?(this._line.loadCell(x,g),g):this._line.loadCell(x,new f.CellData)}translateToString(x,g,S){return this._line.translateToString(x,g,S)}}},8285:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferNamespaceApi=void 0;const f=h(8771),x=h(8460),g=h(844);class S extends g.Disposable{constructor(E){super(),this._core=E,this._onBufferChange=this.register(new x.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}c.BufferNamespaceApi=S},7975:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ParserApi=void 0,c.ParserApi=class{constructor(h){this._core=h}registerCsiHandler(h,f){return this._core.registerCsiHandler(h,(x=>f(x.toArray())))}addCsiHandler(h,f){return this.registerCsiHandler(h,f)}registerDcsHandler(h,f){return this._core.registerDcsHandler(h,((x,g)=>f(x,g.toArray())))}addDcsHandler(h,f){return this.registerDcsHandler(h,f)}registerEscHandler(h,f){return this._core.registerEscHandler(h,f)}addEscHandler(h,f){return this.registerEscHandler(h,f)}registerOscHandler(h,f){return this._core.registerOscHandler(h,f)}addOscHandler(h,f){return this.registerOscHandler(h,f)}}},7090:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeApi=void 0,c.UnicodeApi=class{constructor(h){this._core=h}register(h){this._core.unicodeService.register(h)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(h){this._core.unicodeService.activeVersion=h}}},744:function(d,c,h){var f=this&&this.__decorate||function(p,_,v,y){var k,T=arguments.length,j=T<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(p,_,v,y);else for(var D=p.length-1;D>=0;D--)(k=p[D])&&(j=(T<3?k(j):T>3?k(_,v,j):k(_,v))||j);return T>3&&j&&Object.defineProperty(_,v,j),j},x=this&&this.__param||function(p,_){return function(v,y){_(v,y,p)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferService=c.MINIMUM_ROWS=c.MINIMUM_COLS=void 0;const g=h(8460),S=h(844),A=h(5295),E=h(2585);c.MINIMUM_COLS=2,c.MINIMUM_ROWS=1;let C=c.BufferService=class extends S.Disposable{get buffer(){return this.buffers.active}constructor(p){super(),this.isUserScrolling=!1,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(p.rawOptions.cols||0,c.MINIMUM_COLS),this.rows=Math.max(p.rawOptions.rows||0,c.MINIMUM_ROWS),this.buffers=this.register(new A.BufferSet(p,this))}resize(p,_){this.cols=p,this.rows=_,this.buffers.resize(p,_),this._onResize.fire({cols:p,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(p,_=!1){const v=this.buffer;let y;y=this._cachedBlankLine,y&&y.length===this.cols&&y.getFg(0)===p.fg&&y.getBg(0)===p.bg||(y=v.getBlankLine(p,_),this._cachedBlankLine=y),y.isWrapped=_;const k=v.ybase+v.scrollTop,T=v.ybase+v.scrollBottom;if(v.scrollTop===0){const j=v.lines.isFull;T===v.lines.length-1?j?v.lines.recycle().copyFrom(y):v.lines.push(y.clone()):v.lines.splice(T+1,0,y.clone()),j?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{const j=T-k+1;v.lines.shiftElements(k+1,j-1,-1),v.lines.set(T,y.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(p,_,v){const y=this.buffer;if(p<0){if(y.ydisp===0)return;this.isUserScrolling=!0}else p+y.ydisp>=y.ybase&&(this.isUserScrolling=!1);const k=y.ydisp;y.ydisp=Math.max(Math.min(y.ydisp+p,y.ybase),0),k!==y.ydisp&&(_||this._onScroll.fire(y.ydisp))}};c.BufferService=C=f([x(0,E.IOptionsService)],C)},7994:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CharsetService=void 0,c.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(h){this.glevel=h,this.charset=this._charsets[h]}setgCharset(h,f){this._charsets[h]=f,this.glevel===h&&(this.charset=f)}}},1753:function(d,c,h){var f=this&&this.__decorate||function(y,k,T,j){var D,R=arguments.length,N=R<3?k:j===null?j=Object.getOwnPropertyDescriptor(k,T):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(y,k,T,j);else for(var U=y.length-1;U>=0;U--)(D=y[U])&&(N=(R<3?D(N):R>3?D(k,T,N):D(k,T))||N);return R>3&&N&&Object.defineProperty(k,T,N),N},x=this&&this.__param||function(y,k){return function(T,j){k(T,j,y)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreMouseService=void 0;const g=h(2585),S=h(8460),A=h(844),E={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:y=>y.button!==4&&y.action===1&&(y.ctrl=!1,y.alt=!1,y.shift=!1,!0)},VT200:{events:19,restrict:y=>y.action!==32},DRAG:{events:23,restrict:y=>y.action!==32||y.button!==3},ANY:{events:31,restrict:y=>!0}};function C(y,k){let T=(y.ctrl?16:0)|(y.shift?4:0)|(y.alt?8:0);return y.button===4?(T|=64,T|=y.action):(T|=3&y.button,4&y.button&&(T|=64),8&y.button&&(T|=128),y.action===32?T|=32:y.action!==0||k||(T|=3)),T}const p=String.fromCharCode,_={DEFAULT:y=>{const k=[C(y,!1)+32,y.col+32,y.row+32];return k[0]>255||k[1]>255||k[2]>255?"":`\x1B[M${p(k[0])}${p(k[1])}${p(k[2])}`},SGR:y=>{const k=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${C(y,!0)};${y.col};${y.row}${k}`},SGR_PIXELS:y=>{const k=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${C(y,!0)};${y.x};${y.y}${k}`}};let v=c.CoreMouseService=class extends A.Disposable{constructor(y,k){super(),this._bufferService=y,this._coreService=k,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new S.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const T of Object.keys(E))this.addProtocol(T,E[T]);for(const T of Object.keys(_))this.addEncoding(T,_[T]);this.reset()}addProtocol(y,k){this._protocols[y]=k}addEncoding(y,k){this._encodings[y]=k}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(y){if(!this._protocols[y])throw new Error(`unknown protocol "${y}"`);this._activeProtocol=y,this._onProtocolChange.fire(this._protocols[y].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(y){if(!this._encodings[y])throw new Error(`unknown encoding "${y}"`);this._activeEncoding=y}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(y){if(y.col<0||y.col>=this._bufferService.cols||y.row<0||y.row>=this._bufferService.rows||y.button===4&&y.action===32||y.button===3&&y.action!==32||y.button!==4&&(y.action===2||y.action===3)||(y.col++,y.row++,y.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,y,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(y))return!1;const k=this._encodings[this._activeEncoding](y);return k&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(k):this._coreService.triggerDataEvent(k,!0)),this._lastEvent=y,!0}explainEvents(y){return{down:!!(1&y),up:!!(2&y),drag:!!(4&y),move:!!(8&y),wheel:!!(16&y)}}_equalEvents(y,k,T){if(T){if(y.x!==k.x||y.y!==k.y)return!1}else if(y.col!==k.col||y.row!==k.row)return!1;return y.button===k.button&&y.action===k.action&&y.ctrl===k.ctrl&&y.alt===k.alt&&y.shift===k.shift}};c.CoreMouseService=v=f([x(0,g.IBufferService),x(1,g.ICoreService)],v)},6975:function(d,c,h){var f=this&&this.__decorate||function(v,y,k,T){var j,D=arguments.length,R=D<3?y:T===null?T=Object.getOwnPropertyDescriptor(y,k):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(v,y,k,T);else for(var N=v.length-1;N>=0;N--)(j=v[N])&&(R=(D<3?j(R):D>3?j(y,k,R):j(y,k))||R);return D>3&&R&&Object.defineProperty(y,k,R),R},x=this&&this.__param||function(v,y){return function(k,T){y(k,T,v)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreService=void 0;const g=h(1439),S=h(8460),A=h(844),E=h(2585),C=Object.freeze({insertMode:!1}),p=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let _=c.CoreService=class extends A.Disposable{constructor(v,y,k){super(),this._bufferService=v,this._logService=y,this._optionsService=k,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new S.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new S.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new S.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new S.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,g.clone)(C),this.decPrivateModes=(0,g.clone)(p)}reset(){this.modes=(0,g.clone)(C),this.decPrivateModes=(0,g.clone)(p)}triggerDataEvent(v,y=!1){if(this._optionsService.rawOptions.disableStdin)return;const k=this._bufferService.buffer;y&&this._optionsService.rawOptions.scrollOnUserInput&&k.ybase!==k.ydisp&&this._onRequestScrollToBottom.fire(),y&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,(()=>v.split("").map((T=>T.charCodeAt(0))))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,(()=>v.split("").map((y=>y.charCodeAt(0))))),this._onBinary.fire(v))}};c.CoreService=_=f([x(0,E.IBufferService),x(1,E.ILogService),x(2,E.IOptionsService)],_)},9074:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DecorationService=void 0;const f=h(8055),x=h(8460),g=h(844),S=h(6106);let A=0,E=0;class C extends g.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new S.SortedList((v=>v?.marker.line)),this._onDecorationRegistered=this.register(new x.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new x.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,g.toDisposable)((()=>this.reset())))}registerDecoration(v){if(v.marker.isDisposed)return;const y=new p(v);if(y){const k=y.marker.onDispose((()=>y.dispose()));y.onDispose((()=>{y&&(this._decorations.delete(y)&&this._onDecorationRemoved.fire(y),k.dispose())})),this._decorations.insert(y),this._onDecorationRegistered.fire(y)}return y}reset(){for(const v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,y,k){var T,j,D;let R=0,N=0;for(const U of this._decorations.getKeyIterator(y))R=(T=U.options.x)!==null&&T!==void 0?T:0,N=R+((j=U.options.width)!==null&&j!==void 0?j:1),v>=R&&v<N&&(!k||((D=U.options.layer)!==null&&D!==void 0?D:"bottom")===k)&&(yield U)}forEachDecorationAtCell(v,y,k,T){this._decorations.forEachByKey(y,(j=>{var D,R,N;A=(D=j.options.x)!==null&&D!==void 0?D:0,E=A+((R=j.options.width)!==null&&R!==void 0?R:1),v>=A&&v<E&&(!k||((N=j.options.layer)!==null&&N!==void 0?N:"bottom")===k)&&T(j)}))}}c.DecorationService=C;class p extends g.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new x.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new x.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.InstantiationService=c.ServiceCollection=void 0;const f=h(2585),x=h(8343);class g{constructor(...A){this._entries=new Map;for(const[E,C]of A)this.set(E,C)}set(A,E){const C=this._entries.get(A);return this._entries.set(A,E),C}forEach(A){for(const[E,C]of this._entries.entries())A(E,C)}has(A){return this._entries.has(A)}get(A){return this._entries.get(A)}}c.ServiceCollection=g,c.InstantiationService=class{constructor(){this._services=new g,this._services.set(f.IInstantiationService,this)}setService(S,A){this._services.set(S,A)}getService(S){return this._services.get(S)}createInstance(S,...A){const E=(0,x.getServiceDependencies)(S).sort(((_,v)=>_.index-v.index)),C=[];for(const _ of E){const v=this._services.get(_.id);if(!v)throw new Error(`[createInstance] ${S.name} depends on UNKNOWN service ${_.id}.`);C.push(v)}const p=E.length>0?E[0].index:A.length;if(A.length!==p)throw new Error(`[createInstance] First service dependency of ${S.name} at position ${p+1} conflicts with ${A.length} static arguments`);return new S(...A,...C)}}},7866:function(d,c,h){var f=this&&this.__decorate||function(p,_,v,y){var k,T=arguments.length,j=T<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(p,_,v,y);else for(var D=p.length-1;D>=0;D--)(k=p[D])&&(j=(T<3?k(j):T>3?k(_,v,j):k(_,v))||j);return T>3&&j&&Object.defineProperty(_,v,j),j},x=this&&this.__param||function(p,_){return function(v,y){_(v,y,p)}};Object.defineProperty(c,"__esModule",{value:!0}),c.traceCall=c.setTraceLogger=c.LogService=void 0;const g=h(844),S=h(2585),A={trace:S.LogLevelEnum.TRACE,debug:S.LogLevelEnum.DEBUG,info:S.LogLevelEnum.INFO,warn:S.LogLevelEnum.WARN,error:S.LogLevelEnum.ERROR,off:S.LogLevelEnum.OFF};let E,C=c.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(p){super(),this._optionsService=p,this._logLevel=S.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),E=this}_updateLogLevel(){this._logLevel=A[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(p){for(let _=0;_<p.length;_++)typeof p[_]=="function"&&(p[_]=p[_]())}_log(p,_,v){this._evalLazyOptionalParams(v),p.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...v)}trace(p,..._){var v,y;this._logLevel<=S.LogLevelEnum.TRACE&&this._log((y=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.trace.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.log,p,_)}debug(p,..._){var v,y;this._logLevel<=S.LogLevelEnum.DEBUG&&this._log((y=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.debug.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.log,p,_)}info(p,..._){var v,y;this._logLevel<=S.LogLevelEnum.INFO&&this._log((y=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.info.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.info,p,_)}warn(p,..._){var v,y;this._logLevel<=S.LogLevelEnum.WARN&&this._log((y=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.warn.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.warn,p,_)}error(p,..._){var v,y;this._logLevel<=S.LogLevelEnum.ERROR&&this._log((y=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.error.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.error,p,_)}};c.LogService=C=f([x(0,S.IOptionsService)],C),c.setTraceLogger=function(p){E=p},c.traceCall=function(p,_,v){if(typeof v.value!="function")throw new Error("not supported");const y=v.value;v.value=function(...k){if(E.logLevel!==S.LogLevelEnum.TRACE)return y.apply(this,k);E.trace(`GlyphRenderer#${y.name}(${k.map((j=>JSON.stringify(j))).join(", ")})`);const T=y.apply(this,k);return E.trace(`GlyphRenderer#${y.name} return`,T),T}}},7302:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OptionsService=c.DEFAULT_OPTIONS=void 0;const f=h(8460),x=h(844),g=h(6114);c.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:g.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const S=["normal","bold","100","200","300","400","500","600","700","800","900"];class A extends x.Disposable{constructor(C){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const p=Object.assign({},c.DEFAULT_OPTIONS);for(const _ in C)if(_ in p)try{const v=C[_];p[_]=this._sanitizeAndValidateOption(_,v)}catch(v){console.error(v)}this.rawOptions=p,this.options=Object.assign({},p),this._setupOptions()}onSpecificOptionChange(C,p){return this.onOptionChange((_=>{_===C&&p(this.rawOptions[C])}))}onMultipleOptionChange(C,p){return this.onOptionChange((_=>{C.indexOf(_)!==-1&&p()}))}_setupOptions(){const C=_=>{if(!(_ in c.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},p=(_,v)=>{if(!(_ in c.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);v=this._sanitizeAndValidateOption(_,v),this.rawOptions[_]!==v&&(this.rawOptions[_]=v,this._onOptionChange.fire(_))};for(const _ in this.rawOptions){const v={get:C.bind(this,_),set:p.bind(this,_)};Object.defineProperty(this.options,_,v)}}_sanitizeAndValidateOption(C,p){switch(C){case"cursorStyle":if(p||(p=c.DEFAULT_OPTIONS[C]),!(function(_){return _==="block"||_==="underline"||_==="bar"})(p))throw new Error(`"${p}" is not a valid value for ${C}`);break;case"wordSeparator":p||(p=c.DEFAULT_OPTIONS[C]);break;case"fontWeight":case"fontWeightBold":if(typeof p=="number"&&1<=p&&p<=1e3)break;p=S.includes(p)?p:c.DEFAULT_OPTIONS[C];break;case"cursorWidth":p=Math.floor(p);case"lineHeight":case"tabStopWidth":if(p<1)throw new Error(`${C} cannot be less than 1, value: ${p}`);break;case"minimumContrastRatio":p=Math.max(1,Math.min(21,Math.round(10*p)/10));break;case"scrollback":if((p=Math.min(p,4294967295))<0)throw new Error(`${C} cannot be less than 0, value: ${p}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(p<=0)throw new Error(`${C} cannot be less than or equal to 0, value: ${p}`);break;case"rows":case"cols":if(!p&&p!==0)throw new Error(`${C} must be numeric, value: ${p}`);break;case"windowsPty":p=p??{}}return p}}c.OptionsService=A},2660:function(d,c,h){var f=this&&this.__decorate||function(A,E,C,p){var _,v=arguments.length,y=v<3?E:p===null?p=Object.getOwnPropertyDescriptor(E,C):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(A,E,C,p);else for(var k=A.length-1;k>=0;k--)(_=A[k])&&(y=(v<3?_(y):v>3?_(E,C,y):_(E,C))||y);return v>3&&y&&Object.defineProperty(E,C,y),y},x=this&&this.__param||function(A,E){return function(C,p){E(C,p,A)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OscLinkService=void 0;const g=h(2585);let S=c.OscLinkService=class{constructor(A){this._bufferService=A,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(A){const E=this._bufferService.buffer;if(A.id===void 0){const k=E.addMarker(E.ybase+E.y),T={data:A,id:this._nextId++,lines:[k]};return k.onDispose((()=>this._removeMarkerFromLink(T,k))),this._dataByLinkId.set(T.id,T),T.id}const C=A,p=this._getEntryIdKey(C),_=this._entriesWithId.get(p);if(_)return this.addLineToLink(_.id,E.ybase+E.y),_.id;const v=E.addMarker(E.ybase+E.y),y={id:this._nextId++,key:this._getEntryIdKey(C),data:C,lines:[v]};return v.onDispose((()=>this._removeMarkerFromLink(y,v))),this._entriesWithId.set(y.key,y),this._dataByLinkId.set(y.id,y),y.id}addLineToLink(A,E){const C=this._dataByLinkId.get(A);if(C&&C.lines.every((p=>p.line!==E))){const p=this._bufferService.buffer.addMarker(E);C.lines.push(p),p.onDispose((()=>this._removeMarkerFromLink(C,p)))}}getLinkData(A){var E;return(E=this._dataByLinkId.get(A))===null||E===void 0?void 0:E.data}_getEntryIdKey(A){return`${A.id};;${A.uri}`}_removeMarkerFromLink(A,E){const C=A.lines.indexOf(E);C!==-1&&(A.lines.splice(C,1),A.lines.length===0&&(A.data.id!==void 0&&this._entriesWithId.delete(A.key),this._dataByLinkId.delete(A.id)))}};c.OscLinkService=S=f([x(0,g.IBufferService)],S)},8343:(d,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createDecorator=c.getServiceDependencies=c.serviceRegistry=void 0;const h="di$target",f="di$dependencies";c.serviceRegistry=new Map,c.getServiceDependencies=function(x){return x[f]||[]},c.createDecorator=function(x){if(c.serviceRegistry.has(x))return c.serviceRegistry.get(x);const g=function(S,A,E){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(C,p,_){p[h]===p?p[f].push({id:C,index:_}):(p[f]=[{id:C,index:_}],p[h]=p)})(g,S,E)};return g.toString=()=>x,c.serviceRegistry.set(x,g),g}},2585:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.IDecorationService=c.IUnicodeService=c.IOscLinkService=c.IOptionsService=c.ILogService=c.LogLevelEnum=c.IInstantiationService=c.ICharsetService=c.ICoreService=c.ICoreMouseService=c.IBufferService=void 0;const f=h(8343);var x;c.IBufferService=(0,f.createDecorator)("BufferService"),c.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),c.ICoreService=(0,f.createDecorator)("CoreService"),c.ICharsetService=(0,f.createDecorator)("CharsetService"),c.IInstantiationService=(0,f.createDecorator)("InstantiationService"),(function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"})(x||(c.LogLevelEnum=x={})),c.ILogService=(0,f.createDecorator)("LogService"),c.IOptionsService=(0,f.createDecorator)("OptionsService"),c.IOscLinkService=(0,f.createDecorator)("OscLinkService"),c.IUnicodeService=(0,f.createDecorator)("UnicodeService"),c.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(d,c,h)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeService=void 0;const f=h(8460),x=h(225);c.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const g=new x.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(g){if(!this._providers[g])throw new Error(`unknown Unicode version "${g}"`);this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)}register(g){this._providers[g.version]=g}wcwidth(g){return this._activeProvider.wcwidth(g)}getStringCellWidth(g){let S=0;const A=g.length;for(let E=0;E<A;++E){let C=g.charCodeAt(E);if(55296<=C&&C<=56319){if(++E>=A)return S+this.wcwidth(C);const p=g.charCodeAt(E);56320<=p&&p<=57343?C=1024*(C-55296)+p-56320+65536:S+=this.wcwidth(p)}S+=this.wcwidth(C)}return S}}}},n={};function l(d){var c=n[d];if(c!==void 0)return c.exports;var h=n[d]={exports:{}};return r[d].call(h.exports,h,h.exports,l),h.exports}var u={};return(()=>{var d=u;Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;const c=l(9042),h=l(3236),f=l(844),x=l(5741),g=l(8285),S=l(7975),A=l(7090),E=["cols","rows"];class C extends f.Disposable{constructor(_){super(),this._core=this.register(new h.Terminal(_)),this._addonManager=this.register(new x.AddonManager),this._publicOptions=Object.assign({},this._core.options);const v=k=>this._core.options[k],y=(k,T)=>{this._checkReadonlyOptions(k),this._core.options[k]=T};for(const k in this._core.options){const T={get:v.bind(this,k),set:y.bind(this,k)};Object.defineProperty(this._publicOptions,k,T)}}_checkReadonlyOptions(_){if(E.includes(_))throw new Error(`Option "${_}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new S.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new A.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new g.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const _=this._core.coreService.decPrivateModes;let v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:_.applicationCursorKeys,applicationKeypadMode:_.applicationKeypad,bracketedPasteMode:_.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:_.origin,reverseWraparoundMode:_.reverseWraparound,sendFocusMode:_.sendFocus,wraparoundMode:_.wraparound}}get options(){return this._publicOptions}set options(_){for(const v in _)this._publicOptions[v]=_[v]}blur(){this._core.blur()}focus(){this._core.focus()}resize(_,v){this._verifyIntegers(_,v),this._core.resize(_,v)}open(_){this._core.open(_)}attachCustomKeyEventHandler(_){this._core.attachCustomKeyEventHandler(_)}registerLinkProvider(_){return this._core.registerLinkProvider(_)}registerCharacterJoiner(_){return this._checkProposedApi(),this._core.registerCharacterJoiner(_)}deregisterCharacterJoiner(_){this._checkProposedApi(),this._core.deregisterCharacterJoiner(_)}registerMarker(_=0){return this._verifyIntegers(_),this._core.registerMarker(_)}registerDecoration(_){var v,y,k;return this._checkProposedApi(),this._verifyPositiveIntegers((v=_.x)!==null&&v!==void 0?v:0,(y=_.width)!==null&&y!==void 0?y:0,(k=_.height)!==null&&k!==void 0?k:0),this._core.registerDecoration(_)}hasSelection(){return this._core.hasSelection()}select(_,v,y){this._verifyIntegers(_,v,y),this._core.select(_,v,y)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(_,v){this._verifyIntegers(_,v),this._core.selectLines(_,v)}dispose(){super.dispose()}scrollLines(_){this._verifyIntegers(_),this._core.scrollLines(_)}scrollPages(_){this._verifyIntegers(_),this._core.scrollPages(_)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(_){this._verifyIntegers(_),this._core.scrollToLine(_)}clear(){this._core.clear()}write(_,v){this._core.write(_,v)}writeln(_,v){this._core.write(_),this._core.write(`\r
`,v)}paste(_){this._core.paste(_)}refresh(_,v){this._verifyIntegers(_,v),this._core.refresh(_,v)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(_){this._addonManager.loadAddon(this,_)}static get strings(){return c}_verifyIntegers(..._){for(const v of _)if(v===1/0||isNaN(v)||v%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(..._){for(const v of _)if(v&&(v===1/0||isNaN(v)||v%1!=0||v<0))throw new Error("This API only accepts positive integers")}}d.Terminal=C})(),u})()))})(jd)),jd.exports}var HT=UT(),Dd={exports:{}},w0;function IT(){return w0||(w0=1,(function(s,t){(function(r,n){s.exports=n()})(self,(()=>(()=>{var r={};return(()=>{var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(l){this._terminal=l}dispose(){}fit(){const l=this.proposeDimensions();if(!l||!this._terminal||isNaN(l.cols)||isNaN(l.rows))return;const u=this._terminal._core;this._terminal.rows===l.rows&&this._terminal.cols===l.cols||(u._renderService.clear(),this._terminal.resize(l.cols,l.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const l=this._terminal._core,u=l._renderService.dimensions;if(u.css.cell.width===0||u.css.cell.height===0)return;const d=this._terminal.options.scrollback===0?0:l.viewport.scrollBarWidth,c=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(c.getPropertyValue("height")),f=Math.max(0,parseInt(c.getPropertyValue("width"))),x=window.getComputedStyle(this._terminal.element),g=h-(parseInt(x.getPropertyValue("padding-top"))+parseInt(x.getPropertyValue("padding-bottom"))),S=f-(parseInt(x.getPropertyValue("padding-right"))+parseInt(x.getPropertyValue("padding-left")))-d;return{cols:Math.max(2,Math.floor(S/u.css.cell.width)),rows:Math.max(1,Math.floor(g/u.css.cell.height))}}}})(),r})()))})(Dd)),Dd.exports}var zT=IT();const $T=({webContainer:s})=>{const t=q.useRef(null),r=q.useRef(null);return q.useEffect(()=>{if(!t.current)return;const n=new HT.Terminal({convertEol:!0,cursorBlink:!0,theme:{background:"#0f0f10"}}),l=new zT.FitAddon;n.loadAddon(l),n.open(t.current),l.fit(),r.current=n;const u=()=>l.fit();return window.addEventListener("resize",u),()=>{n.dispose(),window.removeEventListener("resize",u)}},[]),q.useEffect(()=>{if(!s||!r.current)return;let n=null;return(async()=>{n=await s.spawn("jsh",{terminal:{cols:r.current.cols,rows:r.current.rows}}),n.output.pipeTo(new WritableStream({write(d){r.current.write(d)}}));const u=n.input.getWriter();r.current.onData(d=>{u.write(d)})})(),()=>{n&&n.kill()}},[s]),w.jsx("div",{ref:t,className:"h-full w-full min-h-[400px]"})},qT="https://stackblitz.com",FT=new Error;FT.stack="";const Nd={};let Il=null;const Ld={get editorOrigin(){return Il==null&&(Il=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??qT).origin),Il},set editorOrigin(s){Il=new URL(s).origin},setQueryParam(s,t){Nd[s]=t},get url(){const s=new URL(this.editorOrigin);s.pathname="/headless";for(const t in Nd)s.searchParams.set(t,Nd[t]);return s.searchParams.set("version","1.6.1"),s}};function WT(){let s,t;function r(){t=new Promise(n=>s=n)}return r(),{get promise(){return t},resolve(n){return s(n)},reset:r}}WT();var Ka;(function(s){s.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",s.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",s.ConsoleError="PREVIEW_CONSOLE_ERROR"})(Ka||(Ka={}));var KT=Object.defineProperty,VT=(s,t)=>{for(var r in t)KT(s,r,{get:t[r],enumerable:!0})},$i={};VT($i,{createEndpoint:()=>ob,expose:()=>Xf,proxy:()=>pb,proxyMarker:()=>Gf,releaseProxy:()=>lb,transfer:()=>fb,transferHandlers:()=>Yf,windowEndpoint:()=>QT,wrap:()=>hb});var Gf=Symbol("Comlink.proxy"),ob=Symbol("Comlink.endpoint"),lb=Symbol("Comlink.releaseProxy"),Sf=Symbol("Comlink.thrown"),cb=s=>typeof s=="object"&&s!==null||typeof s=="function",GT={canHandle:s=>cb(s)&&s[Gf],serialize(s){const{port1:t,port2:r}=new MessageChannel;return Xf(s,t),[r,[r]]},deserialize(s){return s.start(),hb(s)}},YT={canHandle:s=>cb(s)&&Sf in s,serialize({value:s}){let t;return s instanceof Error?t={isError:!0,value:{message:s.message,name:s.name,stack:s.stack}}:t={isError:!1,value:s},[t,[]]},deserialize(s){throw s.isError?Object.assign(new Error(s.value.message),s.value):s.value}},Yf=new Map([["proxy",GT],["throw",YT]]);function Xf(s,t=self){t.addEventListener("message",function r(n){if(!n||!n.data)return;const{id:l,type:u,path:d}=Object.assign({path:[]},n.data),c=(n.data.argumentList||[]).map(br);let h;try{const f=d.slice(0,-1).reduce((g,S)=>g[S],s),x=d.reduce((g,S)=>g[S],s);switch(u){case 0:h=x;break;case 1:f[d.slice(-1)[0]]=br(n.data.value),h=!0;break;case 2:h=x.apply(f,c);break;case 3:{const g=new x(...c);h=pb(g)}break;case 4:{const{port1:g,port2:S}=new MessageChannel;Xf(s,S),h=fb(g,[g])}break;case 5:h=void 0;break}}catch(f){h={value:f,[Sf]:0}}Promise.resolve(h).catch(f=>({value:f,[Sf]:0})).then(f=>{const[x,g]=Jf(f);t.postMessage(Object.assign(Object.assign({},x),{id:l}),g),u===5&&(t.removeEventListener("message",r),ub(t))})}),t.start&&t.start()}function XT(s){return s.constructor.name==="MessagePort"}function ub(s){XT(s)&&s.close()}function hb(s,t){return Cf(s,[],t)}function zl(s){if(s)throw new Error("Proxy has been released and is not useable")}function Cf(s,t=[],r=function(){}){let n=!1;const l=new Proxy(r,{get(u,d){if(zl(n),d===lb)return()=>vn(s,{type:5,path:t.map(c=>c.toString())}).then(()=>{ub(s),n=!0});if(d==="then"){if(t.length===0)return{then:()=>l};const c=vn(s,{type:0,path:t.map(h=>h.toString())}).then(br);return c.then.bind(c)}return Cf(s,[...t,d])},set(u,d,c){zl(n);const[h,f]=Jf(c);return vn(s,{type:1,path:[...t,d].map(x=>x.toString()),value:h},f).then(br)},apply(u,d,c){zl(n);const h=t[t.length-1];if(h===ob)return vn(s,{type:4}).then(br);if(h==="bind")return Cf(s,t.slice(0,-1));const[f,x]=S0(c);return vn(s,{type:2,path:t.map(g=>g.toString()),argumentList:f},x).then(br)},construct(u,d){zl(n);const[c,h]=S0(d);return vn(s,{type:3,path:t.map(f=>f.toString()),argumentList:c},h).then(br)}});return l}function JT(s){return Array.prototype.concat.apply([],s)}function S0(s){const t=s.map(Jf);return[t.map(r=>r[0]),JT(t.map(r=>r[1]))]}var db=new WeakMap;function fb(s,t){return db.set(s,t),s}function pb(s){return Object.assign(s,{[Gf]:!0})}function QT(s,t=self,r="*"){return{postMessage:(n,l)=>s.postMessage(n,r,l),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function Jf(s){for(const[t,r]of Yf)if(r.canHandle(s)){const[n,l]=r.serialize(s);return[{type:3,name:t,value:n},l]}return[{type:0,value:s},db.get(s)||[]]}function br(s){switch(s.type){case 3:return Yf.get(s.name).deserialize(s.value);case 0:return s.value}}function vn(s,t,r){return new Promise(n=>{const l=ZT();s.addEventListener("message",function u(d){!d.data||!d.data.id||d.data.id!==l||(s.removeEventListener("message",u),n(d.data))}),s.start&&s.start(),s.postMessage(Object.assign({id:l},t),r)})}function ZT(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const eO=[Ka.ConsoleError,Ka.UncaughtException,Ka.UnhandledRejection];function tO(s){return!(s==null||typeof s!="object"||!("type"in s)||!eO.includes(s.type))}function _n(s){const t=Object.create(null);return s?Object.assign(t,s):t}const iO=new TextDecoder("latin1");function mb(s){const t={d:{}};for(const r of Object.keys(s)){const n=s[r];if("file"in n){if("symlink"in n.file){t.d[r]={f:{l:n.file.symlink}};continue}const u=n.file.contents,d=typeof u=="string"?u:iO.decode(u),c=typeof u=="string"?{}:{b:!0};t.d[r]={f:{c:d,...c}};continue}const l=mb(n.directory);t.d[r]=l}return t}function gb(s){const t=_n();if("f"in s)throw new Error("It is not possible to export a single file in the JSON format.");if("d"in s)for(const r of Object.keys(s.d)){const n=s.d[r];"d"in n?t[r]=_n({directory:gb(n)}):"f"in n&&("c"in n.f?t[r]=_n({file:_n({contents:n.f.b?sO(n.f.c):n.f.c})}):"l"in n.f&&(t[r]=_n({file:_n({symlink:n.f.l})})))}return t}function sO(s){const t=new Uint8Array(s.length);for(let r=0;r<s.length;r++)t[r]=s[r].charCodeAt(0);return t}let $l=null,ql=null,Md={};const vb=new TextDecoder,rO=new TextEncoder;class ds{_instance;_runtimeInfo;fs;static _instance=null;static _teardownPromise=null;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(t,r,n,l){this._instance=t,this._runtimeInfo=l,this.fs=new uO(r)}async spawn(t,r,n){let l=[];Array.isArray(r)?l=r:n=r;let u,d=new ReadableStream;if(n?.output!==!1){const C=mO();u=C.push,d=C.stream}let c,h,f,x;const g=lc(Bd(u)),S=lc(Bd(c)),A=lc(Bd(f)),E=await this._instance.run({command:t,args:l,cwd:n?.cwd,env:n?.env,terminal:n?.terminal},S,A,g);return new cO(E,d,h,x)}async export(t,r){const n={format:r?.format??"json",includes:r?.includes,excludes:r?.excludes,external:!0},l=await this._instance.serialize(t,n);if(n.format==="json"){const u=JSON.parse(vb.decode(l));return gb(u)}return l}on(t,r){if(t==="preview-message"){const u=r;r=(d=>{tO(d)&&u(d)})}const{listener:n,subscribe:l}=gO(r);return l(this._instance.on(t,$i.proxy(n)))}mount(t,r){const n=t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):rO.encode(JSON.stringify(mb(t)));return this._instance.loadFiles($i.transfer(n,[n.buffer]),{mountPoints:r?.mountPoint})}setPreviewScript(t,r){return this._instance.setPreviewScript(t,r)}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener();const t=async()=>{try{await this.fs._teardown(),await this._instance.teardown()}finally{this._instance[$i.releaseProxy](),ds._instance===this&&(ds._instance=null)}};ds._teardownPromise=t()}static async boot(t={}){await this._teardownPromise,ds._teardownPromise=null;const{workdirName:r}=t;if(window.crossOriginIsolated&&t.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),r?.includes("/")||r===".."||r===".")throw new Error("workdirName should be a valid folder name");for(;$l;)await $l;if(ds._instance)throw new Error("Only a single WebContainer instance can be booted");const n=hO(t);$l=n.catch(()=>{});try{const l=await n;return ds._instance=l,l}finally{$l=null}}}const nO=1,aO=2;class oO{name;_type;constructor(t,r){this.name=t,this._type=r}isFile(){return this._type===nO}isDirectory(){return this._type===aO}}class lO{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(t,r,n,l){this._apiClient=t,this._path=r,this._options=n,this._listener=l,this._apiClient._watchers.add(this),this._wrappedListener=(u,d)=>{this._listener&&!this._closed&&this._listener(u,d)},this._apiClient._fs.watch(this._path,this._options,lc(this._wrappedListener)).then(u=>{if(this._watcher=u,this._closed)return this._teardown()}).catch(console.error)}async close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),await this._teardown())}async _teardown(){await this._watcher?.close().finally(()=>{this._watcher?.[$i.releaseProxy]()})}}class cO{output;input;exit;_process;stdout;stderr;constructor(t,r,n,l){this.output=r,this._process=t,this.input=new WritableStream({write:u=>{this._getProcess()?.write(u).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=n,this.stderr=l}kill(){this._process?.kill()}resize(t){this._getProcess()?.resize(t)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[$i.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class uO{_fs;_watchers=new Set([]);constructor(t){this._fs=t}rm(...t){return this._fs.rm(...t)}async readFile(t,r){return await this._fs.readFile(t,r)}async rename(t,r){return await this._fs.rename(t,r)}async writeFile(t,r,n){if(r instanceof Uint8Array){const l=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);r=$i.transfer(new Uint8Array(l),[l])}await this._fs.writeFile(t,r,n)}async readdir(t,r){const n=await this._fs.readdir(t,r);return fO(n)||pO(n)?n:n.map(u=>new oO(u.name,u["Symbol(type)"]))}async mkdir(t,r){return await this._fs.mkdir(t,r)}watch(t,r,n){return typeof r=="function"&&(n=r,r=null),new lO(this,t,r,n)}async _teardown(){this._fs[$i.releaseProxy](),await Promise.all([...this._watchers].map(t=>t.close()))}}async function hO(s){const{serverPromise:t}=dO(s),n=await(await t).build({host:window.location.host,version:"1.6.1",workdirName:s.workdirName,forwardPreviewErrors:s.forwardPreviewErrors}),[l,u,d]=await Promise.all([n.fs(),n.previewScript(),n.runtimeInfo()]);return new ds(n,l,u,d)}function Bd(s){if(s!=null)return t=>{t instanceof Uint8Array?s(vb.decode(t)):t==null&&s(null)}}function lc(s){if(s!=null)return $i.proxy(s)}function dO(s){if(ql!=null)return s.coep!==Md.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${s.coep}'`),console.warn(`First boot had 'coep: ${Md.coep}', new settings will not take effect!`)),{serverPromise:ql};s.coep&&Ld.setQueryParam("coep",s.coep),s.experimentalNode&&Ld.setQueryParam("experimental_node","1");const t=document.createElement("iframe");t.style.display="none",t.setAttribute("allow","cross-origin-isolated");const r=Ld.url;t.src=r.toString();const{origin:n}=r;return Md={...s},ql=new Promise(l=>{const u=d=>{if(d.origin!==n)return;const{data:c}=d;if(c.type==="init"){l($i.wrap(d.ports[0]));return}if(c.type==="warning"){console[c.level].call(console,c.message);return}};window.addEventListener("message",u)}),document.body.insertBefore(t,null),{serverPromise:ql}}function fO(s){return typeof s[0]=="string"}function pO(s){return s[0]instanceof Uint8Array}function mO(){let s=null;return{stream:new ReadableStream({start(n){s=n}}),push:n=>{n!=null?s?.enqueue(n):(s?.close(),s=null)}}}function gO(s){let t=!1,r=()=>{};return{subscribe(l){return l.then(u=>{r=u,t&&r()}),()=>{t=!0,r()}},listener:((...l)=>{t||s(...l)})}}let Pd=null;async function vO(){return Pd||(Pd=ds.boot()),Pd}const Cn="0.30.1";let C0=!1,Va,_b,Ef,yb,bb,xb;function _O(s,t={auto:!1}){if(C0)throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${s.kind}'\` before importing anything else from @anthropic-ai/sdk`);if(Va)throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${s.kind}'\` after \`import '@anthropic-ai/sdk/shims/${Va}'\``);C0=t.auto,Va=s.kind,_b=s.fetch,Ef=s.File,yb=s.ReadableStream,bb=s.getDefaultAgent,xb=s.fileFromPath}class yO{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function bO({manuallyImported:s}={}){const t=s?"You may need to use polyfills":"Add one of these imports before your first `import  from '@anthropic-ai/sdk'`:\n- `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)\n- `import '@anthropic-ai/sdk/shims/web'` (otherwise)\n";let r,n,l,u;try{r=fetch,n=Request,l=Response,u=Headers}catch(d){throw new Error(`this environment is missing the following Web Fetch API type: ${d.message}. ${t}`)}return{kind:"web",fetch:r,Request:n,Response:l,Headers:u,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(d,c)=>({...c,body:new yO(d)}),getDefaultAgent:d=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads")},isFsReadStream:d=>!1}}Va||_O(bO(),{auto:!0});class Ks{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let r=this.decodeText(t);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const n=Ks.NEWLINE_CHARS.has(r[r.length-1]||"");let l=r.split(Ks.NEWLINE_REGEXP);return n&&l.pop(),l.length===1&&!n?(this.buffer.push(l[0]),[]):(this.buffer.length>0&&(l=[this.buffer.join("")+l[0],...l.slice(1)],this.buffer=[]),n||(this.buffer=[l.pop()||""]),l)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new He(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new He(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new He("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}Ks.NEWLINE_CHARS=new Set([`
`,"\r"]);Ks.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class zi{constructor(t,r){this.iterator=t,this.controller=r}static fromSSEResponse(t,r){let n=!1;async function*l(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let u=!1;try{for await(const d of xO(t,r)){if(d.event==="completion")try{yield JSON.parse(d.data)}catch(c){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),c}if(d.event==="message_start"||d.event==="message_delta"||d.event==="message_stop"||d.event==="content_block_start"||d.event==="content_block_delta"||d.event==="content_block_stop")try{yield JSON.parse(d.data)}catch(c){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),c}if(d.event!=="ping"&&d.event==="error")throw Ht.generate(void 0,`SSE Error: ${d.data}`,d.data,Cb(t.headers))}u=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{u||r.abort()}}return new zi(l,r)}static fromReadableStream(t,r){let n=!1;async function*l(){const d=new Ks,c=Qf(t);for await(const h of c)for(const f of d.decode(h))yield f;for(const h of d.flush())yield h}async function*u(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let d=!1;try{for await(const c of l())d||c&&(yield JSON.parse(c));d=!0}catch(c){if(c instanceof Error&&c.name==="AbortError")return;throw c}finally{d||r.abort()}}return new zi(u,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],r=[],n=this.iterator(),l=u=>({next:()=>{if(u.length===0){const d=n.next();t.push(d),r.push(d)}return u.shift()}});return[new zi(()=>l(t),this.controller),new zi(()=>l(r),this.controller)]}toReadableStream(){const t=this;let r;const n=new TextEncoder;return new yb({async start(){r=t[Symbol.asyncIterator]()},async pull(l){try{const{value:u,done:d}=await r.next();if(d)return l.close();const c=n.encode(JSON.stringify(u)+`
`);l.enqueue(c)}catch(u){l.error(u)}},async cancel(){await r.return?.()}})}}async function*xO(s,t){if(!s.body)throw t.abort(),new He("Attempted to iterate over a response with no body");const r=new CO,n=new Ks,l=Qf(s.body);for await(const u of wO(l))for(const d of n.decode(u)){const c=r.decode(d);c&&(yield c)}for(const u of n.flush()){const d=r.decode(u);d&&(yield d)}}async function*wO(s){let t=new Uint8Array;for await(const r of s){if(r==null)continue;const n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let l=new Uint8Array(t.length+n.length);l.set(t),l.set(n,t.length),t=l;let u;for(;(u=SO(t))!==-1;)yield t.slice(0,u),t=t.slice(u)}t.length>0&&(yield t)}function SO(s){for(let n=0;n<s.length-2;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}class CO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(t),t.startsWith(":"))return null;let[r,n,l]=EO(t,":");return l.startsWith(" ")&&(l=l.substring(1)),r==="event"?this.event=l:r==="data"&&this.data.push(l),null}}function EO(s,t){const r=s.indexOf(t);return r!==-1?[s.substring(0,r),t,s.substring(r+t.length)]:[s,"",""]}function Qf(s){if(s[Symbol.asyncIterator])return s;const t=s.getReader();return{async next(){try{const r=await t.read();return r?.done&&t.releaseLock(),r}catch(r){throw t.releaseLock(),r}},async return(){const r=t.cancel();return t.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const kO=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function",AO=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&qc(s),qc=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function";async function RO(s,t,r){if(s=await s,AO(s))return s;if(kO(s)){const l=await s.blob();t||(t=new URL(s.url).pathname.split(/[\\/]/).pop()??"unknown_file");const u=qc(l)?[await l.arrayBuffer()]:[l];return new Ef(u,t,r)}const n=await TO(s);if(t||(t=jO(s)??"unknown_file"),!r?.type){const l=n[0]?.type;typeof l=="string"&&(r={...r,type:l})}return new Ef(n,t,r)}async function TO(s){let t=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)t.push(s);else if(qc(s))t.push(await s.arrayBuffer());else if(DO(s))for await(const r of s)t.push(r);else throw new Error(`Unexpected data type: ${typeof s}; constructor: ${s?.constructor?.name}; props: ${OO(s)}`);return t}function OO(s){return`[${Object.getOwnPropertyNames(s).map(r=>`"${r}"`).join(", ")}]`}function jO(s){return Ud(s.name)||Ud(s.filename)||Ud(s.path)?.split(/[\\/]/).pop()}const Ud=s=>{if(typeof s=="string")return s;if(typeof Buffer<"u"&&s instanceof Buffer)return String(s)},DO=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",E0=s=>s&&typeof s=="object"&&s.body&&s[Symbol.toStringTag]==="MultipartBody";var wb={},NO=function(s,t,r,n,l){if(typeof t=="function"?s!==t||!0:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(s,r),r},LO=function(s,t,r,n){if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(s):n?n.value:t.get(s)},Fl;async function Sb(s){const{response:t}=s;if(s.options.stream)return Rn("response",t.status,t.url,t.headers,t.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(t,s.controller):zi.fromSSEResponse(t,s.controller);if(t.status===204)return null;if(s.options.__binaryResponse)return t;const r=t.headers.get("content-type");if(r?.includes("application/json")||r?.includes("application/vnd.api+json")){const u=await t.json();return Rn("response",t.status,t.url,t.headers,u),u}const l=await t.text();return Rn("response",t.status,t.url,t.headers,l),l}class Fc extends Promise{constructor(t,r=Sb){super(n=>{n(null)}),this.responsePromise=t,this.parseResponse=r}_thenUnwrap(t){return new Fc(this.responsePromise,async r=>t(await this.parseResponse(r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,r){return this.parse().then(t,r)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class MO{constructor({baseURL:t,maxRetries:r=2,timeout:n=6e5,httpAgent:l,fetch:u}){this.baseURL=t,this.maxRetries=Hd("maxRetries",r),this.timeout=Hd("timeout",n),this.httpAgent=l,this.fetch=u??_b}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...zO(),...this.authHeaders(t)}}validateHeaders(t,r){}defaultIdempotencyKey(){return`stainless-node-retry-${KO()}`}get(t,r){return this.methodRequest("get",t,r)}post(t,r){return this.methodRequest("post",t,r)}patch(t,r){return this.methodRequest("patch",t,r)}put(t,r){return this.methodRequest("put",t,r)}delete(t,r){return this.methodRequest("delete",t,r)}methodRequest(t,r,n){return this.request(Promise.resolve(n).then(async l=>{const u=l&&qc(l?.body)?new DataView(await l.body.arrayBuffer()):l?.body instanceof DataView?l.body:l?.body instanceof ArrayBuffer?new DataView(l.body):l&&ArrayBuffer.isView(l?.body)?new DataView(l.body.buffer):l?.body;return{method:t,path:r,...l,body:u}}))}getAPIList(t,r,n){return this.requestAPIList(r,{method:"get",path:t,...n})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:r=0}={}){const{method:n,path:l,query:u,headers:d={}}=t,c=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:E0(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,h=this.calculateContentLength(c),f=this.buildURL(l,u);"timeout"in t&&Hd("timeout",t.timeout);const x=t.timeout??this.timeout,g=t.httpAgent??this.httpAgent??bb(f),S=x+1e3;typeof g?.options?.timeout=="number"&&S>(g.options.timeout??0)&&(g.options.timeout=S),this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=t.idempotencyKey);const A=this.buildHeaders({options:t,headers:d,contentLength:h,retryCount:r});return{req:{method:n,...c&&{body:c},headers:A,...g&&{agent:g},signal:t.signal??null},url:f,timeout:x}}buildHeaders({options:t,headers:r,contentLength:n,retryCount:l}){const u={};n&&(u["content-length"]=n);const d=this.defaultHeaders(t);return T0(u,d),T0(u,r),E0(t.body)&&Va!=="node"&&delete u["content-type"],O0(d,"x-stainless-retry-count")===void 0&&O0(r,"x-stainless-retry-count")===void 0&&(u["x-stainless-retry-count"]=String(l)),this.validateHeaders(u,r),u}async prepareOptions(t){}async prepareRequest(t,{url:r,options:n}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(r=>[...r])):{...t}:{}}makeStatusError(t,r,n,l){return Ht.generate(t,r,n,l)}request(t,r=null){return new Fc(this.makeRequest(t,r))}async makeRequest(t,r){const n=await t,l=n.maxRetries??this.maxRetries;r==null&&(r=l),await this.prepareOptions(n);const{req:u,url:d,timeout:c}=this.buildRequest(n,{retryCount:l-r});if(await this.prepareRequest(u,{url:d,options:n}),Rn("request",d,n,u.headers),n.signal?.aborted)throw new Di;const h=new AbortController,f=await this.fetchWithTimeout(d,u,c,h).catch(kf);if(f instanceof Error){if(n.signal?.aborted)throw new Di;if(r)return this.retryRequest(n,r);throw f.name==="AbortError"?new kb:new Wc({cause:f})}const x=Cb(f.headers);if(!f.ok){if(r&&this.shouldRetry(f)){const p=`retrying, ${r} attempts remaining`;return Rn(`response (error; ${p})`,f.status,d,x),this.retryRequest(n,r,x)}const g=await f.text().catch(p=>kf(p).message),S=$O(g),A=S?void 0:g;throw Rn(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,f.status,d,x,A),this.makeStatusError(f.status,S,A,x)}return{response:f,options:n,controller:h}}requestAPIList(t,r){const n=this.makeRequest(r,null);return new PO(this,n,t)}buildURL(t,r){const n=FO(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return bc(l)||(r={...l,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(t){return Object.entries(t).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new He(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,r,n,l){const{signal:u,...d}=r||{};u&&u.addEventListener("abort",()=>l.abort());const c=setTimeout(()=>l.abort(),n);return this.getRequestClient().fetch.call(void 0,t,{signal:l.signal,...d}).finally(()=>{clearTimeout(c)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const r=t.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,r,n){let l;const u=n?.["retry-after-ms"];if(u){const c=parseFloat(u);Number.isNaN(c)||(l=c)}const d=n?.["retry-after"];if(d&&!l){const c=parseFloat(d);Number.isNaN(c)?l=Date.parse(d)-Date.now():l=c*1e3}if(!(l&&0<=l&&l<60*1e3)){const c=t.maxRetries??this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(r,c)}return await WO(l),this.makeRequest(t,r-1)}calculateDefaultRetryTimeoutMillis(t,r){const u=r-t,d=Math.min(.5*Math.pow(2,u),8),c=1-Math.random()*.25;return d*c*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Cn}`}}class BO{constructor(t,r,n,l){Fl.set(this,void 0),NO(this,Fl,t),this.options=l,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new He("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in t&&typeof r.query=="object")r.query={...r.query,...t.params};else if("url"in t){const n=[...Object.entries(r.query||{}),...t.url.searchParams.entries()];for(const[l,u]of n)t.url.searchParams.set(l,u);r.query=void 0,r.path=t.url.toString()}return await LO(this,Fl,"f").requestAPIList(this.constructor,r)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Fl=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const r of t.getPaginatedItems())yield r}}class PO extends Fc{constructor(t,r,n){super(r,async l=>new n(t,l.response,await Sb(l),l.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const r of t)yield r}}const Cb=s=>new Proxy(Object.fromEntries(s.entries()),{get(t,r){const n=r.toString();return t[n.toLowerCase()]||t[n]}}),UO={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Wl=s=>typeof s=="object"&&s!==null&&!bc(s)&&Object.keys(s).every(t=>Eb(UO,t)),HO=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cn,"X-Stainless-OS":A0(Deno.build.os),"X-Stainless-Arch":k0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cn,"X-Stainless-OS":A0(process.platform),"X-Stainless-Arch":k0(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const s=IO();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function IO(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of s){const n=r.exec(navigator.userAgent);if(n){const l=n[1]||0,u=n[2]||0,d=n[3]||0;return{browser:t,version:`${l}.${u}.${d}`}}}return null}const k0=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",A0=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let R0;const zO=()=>R0??(R0=HO()),$O=s=>{try{return JSON.parse(s)}catch{return}},qO=new RegExp("^(?:[a-z]+:)?//","i"),FO=s=>qO.test(s),WO=s=>new Promise(t=>setTimeout(t,s)),Hd=(s,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new He(`${s} must be an integer`);if(t<0)throw new He(`${s} must be a positive integer`);return t},kf=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null)try{return new Error(JSON.stringify(s))}catch{}return new Error(String(s))},Id=s=>{if(typeof process<"u")return wb?.[s]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(s)?.trim()};function bc(s){if(!s)return!0;for(const t in s)return!1;return!0}function Eb(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function T0(s,t){for(const r in t){if(!Eb(t,r))continue;const n=r.toLowerCase();if(!n)continue;const l=t[r];l===null?delete s[n]:l!==void 0&&(s[n]=l)}}function Rn(s,...t){typeof process<"u"&&wb?.DEBUG==="true"&&console.log(`Anthropic:DEBUG:${s}`,...t)}const KO=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const t=Math.random()*16|0;return(s==="x"?t:t&3|8).toString(16)}),VO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",GO=s=>typeof s?.get=="function",O0=(s,t)=>{const r=t.toLowerCase();if(GO(s)){const n=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(l,u,d)=>u+d.toUpperCase());for(const l of[t,r,t.toUpperCase(),n]){const u=s.get(l);if(u)return u}}for(const[n,l]of Object.entries(s))if(n.toLowerCase()===r)return Array.isArray(l)?(l.length<=1||console.warn(`Received ${l.length} entries for the ${t} header, using the first entry.`),l[0]):l};class He extends Error{}class Ht extends He{constructor(t,r,n,l){super(`${Ht.makeMessage(t,r,n)}`),this.status=t,this.headers=l,this.request_id=l?.["request-id"],this.error=r}static makeMessage(t,r,n){const l=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return t&&l?`${t} ${l}`:t?`${t} status code (no body)`:l||"(no status code or body)"}static generate(t,r,n,l){if(!t)return new Wc({message:n,cause:kf(r)});const u=r;return t===400?new Ab(t,u,n,l):t===401?new Rb(t,u,n,l):t===403?new Tb(t,u,n,l):t===404?new Ob(t,u,n,l):t===409?new jb(t,u,n,l):t===422?new Db(t,u,n,l):t===429?new Nb(t,u,n,l):t>=500?new Lb(t,u,n,l):new Ht(t,u,n,l)}}class Di extends Ht{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class Wc extends Ht{constructor({message:t,cause:r}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}}class kb extends Wc{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Ab extends Ht{constructor(){super(...arguments),this.status=400}}class Rb extends Ht{constructor(){super(...arguments),this.status=401}}class Tb extends Ht{constructor(){super(...arguments),this.status=403}}class Ob extends Ht{constructor(){super(...arguments),this.status=404}}class jb extends Ht{constructor(){super(...arguments),this.status=409}}class Db extends Ht{constructor(){super(...arguments),this.status=422}}class Nb extends Ht{constructor(){super(...arguments),this.status=429}}class Lb extends Ht{}class Mb extends BO{constructor(t,r,n,l){super(t,r,n,l),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const r=Object.fromEntries(t.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){if(this.options.query?.before_id){const r=this.first_id;return r?{params:{before_id:r}}:null}const t=this.last_id;return t?{params:{after_id:t}}:null}}class Er{constructor(t){this._client=t}}class Zf{constructor(t,r){this.iterator=t,this.controller=r}async*decoder(){const t=new Ks;for await(const r of this.iterator)for(const n of t.decode(r))yield JSON.parse(n);for(const r of t.flush())yield JSON.parse(r)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(t,r){if(!t.body)throw r.abort(),new He("Attempted to iterate over a response with no body");return new Zf(Qf(t.body),r)}}class xc extends Er{create(t,r){const{betas:n,...l}=t;return this._client.post("/v1/messages/batches?beta=true",{body:l,...r,headers:{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),...r?.headers}})}retrieve(t,r={},n){if(Wl(r))return this.retrieve(t,{},r);const{betas:l}=r;return this._client.get(`/v1/messages/batches/${t}?beta=true`,{...n,headers:{"anthropic-beta":[...l??[],"message-batches-2024-09-24"].toString(),...n?.headers}})}list(t={},r){if(Wl(t))return this.list({},t);const{betas:n,...l}=t;return this._client.getAPIList("/v1/messages/batches?beta=true",ep,{query:l,...r,headers:{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),...r?.headers}})}cancel(t,r={},n){if(Wl(r))return this.cancel(t,{},r);const{betas:l}=r;return this._client.post(`/v1/messages/batches/${t}/cancel?beta=true`,{...n,headers:{"anthropic-beta":[...l??[],"message-batches-2024-09-24"].toString(),...n?.headers}})}async results(t,r={},n){if(Wl(r))return this.results(t,{},r);const l=await this.retrieve(t);if(!l.results_url)throw new He(`No batch \`results_url\`; Has it finished processing? ${l.processing_status} - ${l.id}`);const{betas:u}=r;return this._client.get(l.results_url,{...n,headers:{"anthropic-beta":[...u??[],"message-batches-2024-09-24"].toString(),...n?.headers},__binaryResponse:!0})._thenUnwrap((d,c)=>Zf.fromResponse(c.response,c.controller))}}class ep extends Mb{}(function(s){s.BetaMessageBatchesPage=ep})(xc||(xc={}));let wc=class extends Er{constructor(){super(...arguments),this.batches=new xc(this._client)}create(t,r){const{betas:n,...l}=t;return this._client.post("/v1/messages?beta=true",{body:l,timeout:this._client._options.timeout??6e5,...r,headers:{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0,...r?.headers},stream:t.stream??!1})}};(function(s){s.Batches=xc,s.BetaMessageBatchesPage=ep})(wc||(wc={}));const YO=s=>{let t=0,r=[];for(;t<s.length;){let n=s[t];if(n==="\\"){t++;continue}if(n==="{"){r.push({type:"brace",value:"{"}),t++;continue}if(n==="}"){r.push({type:"brace",value:"}"}),t++;continue}if(n==="["){r.push({type:"paren",value:"["}),t++;continue}if(n==="]"){r.push({type:"paren",value:"]"}),t++;continue}if(n===":"){r.push({type:"separator",value:":"}),t++;continue}if(n===","){r.push({type:"delimiter",value:","}),t++;continue}if(n==='"'){let c="",h=!1;for(n=s[++t];n!=='"';){if(t===s.length){h=!0;break}if(n==="\\"){if(t++,t===s.length){h=!0;break}c+=n+s[t],n=s[++t]}else c+=n,n=s[++t]}n=s[++t],h||r.push({type:"string",value:c});continue}if(n&&/\s/.test(n)){t++;continue}let u=/[0-9]/;if(n&&u.test(n)||n==="-"||n==="."){let c="";for(n==="-"&&(c+=n,n=s[++t]);n&&u.test(n)||n===".";)c+=n,n=s[++t];r.push({type:"number",value:c});continue}let d=/[a-z]/i;if(n&&d.test(n)){let c="";for(;n&&d.test(n)&&t!==s.length;)c+=n,n=s[++t];if(c=="true"||c=="false"||c==="null")r.push({type:"name",value:c});else{t++;continue}continue}t++}return r},En=s=>{if(s.length===0)return s;let t=s[s.length-1];switch(t.type){case"separator":return s=s.slice(0,s.length-1),En(s);case"number":let r=t.value[t.value.length-1];if(r==="."||r==="-")return s=s.slice(0,s.length-1),En(s);case"string":let n=s[s.length-2];if(n?.type==="delimiter")return s=s.slice(0,s.length-1),En(s);if(n?.type==="brace"&&n.value==="{")return s=s.slice(0,s.length-1),En(s);break;case"delimiter":return s=s.slice(0,s.length-1),En(s)}return s},XO=s=>{let t=[];return s.map(r=>{r.type==="brace"&&(r.value==="{"?t.push("}"):t.splice(t.lastIndexOf("}"),1)),r.type==="paren"&&(r.value==="["?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(r=>{r==="}"?s.push({type:"brace",value:"}"}):r==="]"&&s.push({type:"paren",value:"]"})}),s},JO=s=>{let t="";return s.map(r=>{r.type==="string"?t+='"'+r.value+'"':t+=r.value}),t},Bb=s=>JSON.parse(JO(XO(En(YO(s)))));var Gt=function(s,t,r,n,l){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?s!==t||!l:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?l.call(s,r):l?l.value=r:t.set(s,r),r},Me=function(s,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(s):n?n.value:t.get(s)},wi,$s,Kl,Vl,Ma,Ba,Gl,Pa,cs,Ua,Yl,Xl,yn,zd,j0,$d,qd,Fd,Wd,D0;const N0="__json_buf";class Sc{constructor(){wi.add(this),this.messages=[],this.receivedMessages=[],$s.set(this,void 0),this.controller=new AbortController,Kl.set(this,void 0),Vl.set(this,()=>{}),Ma.set(this,()=>{}),Ba.set(this,void 0),Gl.set(this,()=>{}),Pa.set(this,()=>{}),cs.set(this,{}),Ua.set(this,!1),Yl.set(this,!1),Xl.set(this,!1),yn.set(this,!1),$d.set(this,t=>{if(Gt(this,Yl,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Di),t instanceof Di)return Gt(this,Xl,!0,"f"),this._emit("abort",t);if(t instanceof He)return this._emit("error",t);if(t instanceof Error){const r=new He(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new He(String(t)))}),Gt(this,Kl,new Promise((t,r)=>{Gt(this,Vl,t,"f"),Gt(this,Ma,r,"f")}),"f"),Gt(this,Ba,new Promise((t,r)=>{Gt(this,Gl,t,"f"),Gt(this,Pa,r,"f")}),"f"),Me(this,Kl,"f").catch(()=>{}),Me(this,Ba,"f").catch(()=>{})}static fromReadableStream(t){const r=new Sc;return r._run(()=>r._fromReadableStream(t)),r}static createMessage(t,r,n){const l=new Sc;for(const u of r.messages)l._addPromptCachingBetaMessageParam(u);return l._run(()=>l._createPromptCachingBetaMessage(t,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),l}_run(t){t().then(()=>{this._emitFinal(),this._emit("end")},Me(this,$d,"f"))}_addPromptCachingBetaMessageParam(t){this.messages.push(t)}_addPromptCachingBetaMessage(t,r=!0){this.receivedMessages.push(t),r&&this._emit("message",t)}async _createPromptCachingBetaMessage(t,r,n){const l=n?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort())),Me(this,wi,"m",qd).call(this);const u=await t.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const d of u)Me(this,wi,"m",Fd).call(this,d);if(u.controller.signal?.aborted)throw new Di;Me(this,wi,"m",Wd).call(this)}_connected(){this.ended||(Me(this,Vl,"f").call(this),this._emit("connect"))}get ended(){return Me(this,Ua,"f")}get errored(){return Me(this,Yl,"f")}get aborted(){return Me(this,Xl,"f")}abort(){this.controller.abort()}on(t,r){return(Me(this,cs,"f")[t]||(Me(this,cs,"f")[t]=[])).push({listener:r}),this}off(t,r){const n=Me(this,cs,"f")[t];if(!n)return this;const l=n.findIndex(u=>u.listener===r);return l>=0&&n.splice(l,1),this}once(t,r){return(Me(this,cs,"f")[t]||(Me(this,cs,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,n)=>{Gt(this,yn,!0,"f"),t!=="error"&&this.once("error",n),this.once(t,r)})}async done(){Gt(this,yn,!0,"f"),await Me(this,Ba,"f")}get currentMessage(){return Me(this,$s,"f")}async finalMessage(){return await this.done(),Me(this,wi,"m",zd).call(this)}async finalText(){return await this.done(),Me(this,wi,"m",j0).call(this)}_emit(t,...r){if(Me(this,Ua,"f"))return;t==="end"&&(Gt(this,Ua,!0,"f"),Me(this,Gl,"f").call(this));const n=Me(this,cs,"f")[t];if(n&&(Me(this,cs,"f")[t]=n.filter(l=>!l.once),n.forEach(({listener:l})=>l(...r))),t==="abort"){const l=r[0];!Me(this,yn,"f")&&!n?.length&&Promise.reject(l),Me(this,Ma,"f").call(this,l),Me(this,Pa,"f").call(this,l),this._emit("end");return}if(t==="error"){const l=r[0];!Me(this,yn,"f")&&!n?.length&&Promise.reject(l),Me(this,Ma,"f").call(this,l),Me(this,Pa,"f").call(this,l),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalPromptCachingBetaMessage",Me(this,wi,"m",zd).call(this))}async _fromReadableStream(t,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Me(this,wi,"m",qd).call(this),this._connected();const l=zi.fromReadableStream(t,this.controller);for await(const u of l)Me(this,wi,"m",Fd).call(this,u);if(l.controller.signal?.aborted)throw new Di;Me(this,wi,"m",Wd).call(this)}[($s=new WeakMap,Kl=new WeakMap,Vl=new WeakMap,Ma=new WeakMap,Ba=new WeakMap,Gl=new WeakMap,Pa=new WeakMap,cs=new WeakMap,Ua=new WeakMap,Yl=new WeakMap,Xl=new WeakMap,yn=new WeakMap,$d=new WeakMap,wi=new WeakSet,zd=function(){if(this.receivedMessages.length===0)throw new He("stream ended without producing a PromptCachingBetaMessage with role=assistant");return this.receivedMessages.at(-1)},j0=function(){if(this.receivedMessages.length===0)throw new He("stream ended without producing a PromptCachingBetaMessage with role=assistant");const r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new He("stream ended without producing a content block with type=text");return r.join(" ")},qd=function(){this.ended||Gt(this,$s,void 0,"f")},Fd=function(r){if(this.ended)return;const n=Me(this,wi,"m",D0).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{const l=n.content.at(-1);r.delta.type==="text_delta"&&l.type==="text"?this._emit("text",r.delta.text,l.text||""):r.delta.type==="input_json_delta"&&l.type==="tool_use"&&l.input&&this._emit("inputJson",r.delta.partial_json,l.input);break}case"message_stop":{this._addPromptCachingBetaMessageParam(n),this._addPromptCachingBetaMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Gt(this,$s,n,"f");break}}},Wd=function(){if(this.ended)throw new He("stream has ended, this shouldn't happen");const r=Me(this,$s,"f");if(!r)throw new He("request ended without sending any chunks");return Gt(this,$s,void 0,"f"),r},D0=function(r){let n=Me(this,$s,"f");if(r.type==="message_start"){if(n)throw new He(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new He(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{const l=n.content.at(r.index);if(l?.type==="text"&&r.delta.type==="text_delta")l.text+=r.delta.text;else if(l?.type==="tool_use"&&r.delta.type==="input_json_delta"){let u=l[N0]||"";u+=r.delta.partial_json,Object.defineProperty(l,N0,{value:u,enumerable:!1,writable:!0}),u&&(l.input=Bb(u))}return n}case"content_block_stop":return n}},Symbol.asyncIterator)](){const t=[],r=[];let n=!1;return this.on("streamEvent",l=>{const u=r.shift();u?u.resolve(l):t.push(l)}),this.on("end",()=>{n=!0;for(const l of r)l.resolve(void 0);r.length=0}),this.on("abort",l=>{n=!0;for(const u of r)u.reject(l);r.length=0}),this.on("error",l=>{n=!0;for(const u of r)u.reject(l);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((u,d)=>r.push({resolve:u,reject:d})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new zi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}let Cc=class extends Er{create(t,r){const{betas:n,...l}=t;return this._client.post("/v1/messages?beta=prompt_caching",{body:l,timeout:this._client._options.timeout??6e5,...r,headers:{"anthropic-beta":[...n??[],"prompt-caching-2024-07-31"].toString(),...r?.headers},stream:t.stream??!1})}stream(t,r){return Sc.createMessage(this,t,r)}};Cc||(Cc={});class Ec extends Er{constructor(){super(...arguments),this.messages=new Cc(this._client)}}(function(s){s.Messages=Cc})(Ec||(Ec={}));class kc extends Er{constructor(){super(...arguments),this.messages=new wc(this._client),this.promptCaching=new Ec(this._client)}}(function(s){s.Messages=wc,s.PromptCaching=Ec})(kc||(kc={}));class Ac extends Er{create(t,r){return this._client.post("/v1/complete",{body:t,timeout:this._client._options.timeout??6e5,...r,stream:t.stream??!1})}}Ac||(Ac={});var Yt=function(s,t,r,n,l){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?s!==t||!l:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?l.call(s,r):l?l.value=r:t.set(s,r),r},Be=function(s,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(s):n?n.value:t.get(s)},Si,qs,Jl,Ql,Ha,Ia,Zl,za,us,$a,ec,tc,bn,Kd,L0,Vd,Gd,Yd,Xd,M0;const B0="__json_buf";class Rc{constructor(){Si.add(this),this.messages=[],this.receivedMessages=[],qs.set(this,void 0),this.controller=new AbortController,Jl.set(this,void 0),Ql.set(this,()=>{}),Ha.set(this,()=>{}),Ia.set(this,void 0),Zl.set(this,()=>{}),za.set(this,()=>{}),us.set(this,{}),$a.set(this,!1),ec.set(this,!1),tc.set(this,!1),bn.set(this,!1),Vd.set(this,t=>{if(Yt(this,ec,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Di),t instanceof Di)return Yt(this,tc,!0,"f"),this._emit("abort",t);if(t instanceof He)return this._emit("error",t);if(t instanceof Error){const r=new He(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new He(String(t)))}),Yt(this,Jl,new Promise((t,r)=>{Yt(this,Ql,t,"f"),Yt(this,Ha,r,"f")}),"f"),Yt(this,Ia,new Promise((t,r)=>{Yt(this,Zl,t,"f"),Yt(this,za,r,"f")}),"f"),Be(this,Jl,"f").catch(()=>{}),Be(this,Ia,"f").catch(()=>{})}static fromReadableStream(t){const r=new Rc;return r._run(()=>r._fromReadableStream(t)),r}static createMessage(t,r,n){const l=new Rc;for(const u of r.messages)l._addMessageParam(u);return l._run(()=>l._createMessage(t,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),l}_run(t){t().then(()=>{this._emitFinal(),this._emit("end")},Be(this,Vd,"f"))}_addMessageParam(t){this.messages.push(t)}_addMessage(t,r=!0){this.receivedMessages.push(t),r&&this._emit("message",t)}async _createMessage(t,r,n){const l=n?.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort())),Be(this,Si,"m",Gd).call(this);const u=await t.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const d of u)Be(this,Si,"m",Yd).call(this,d);if(u.controller.signal?.aborted)throw new Di;Be(this,Si,"m",Xd).call(this)}_connected(){this.ended||(Be(this,Ql,"f").call(this),this._emit("connect"))}get ended(){return Be(this,$a,"f")}get errored(){return Be(this,ec,"f")}get aborted(){return Be(this,tc,"f")}abort(){this.controller.abort()}on(t,r){return(Be(this,us,"f")[t]||(Be(this,us,"f")[t]=[])).push({listener:r}),this}off(t,r){const n=Be(this,us,"f")[t];if(!n)return this;const l=n.findIndex(u=>u.listener===r);return l>=0&&n.splice(l,1),this}once(t,r){return(Be(this,us,"f")[t]||(Be(this,us,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,n)=>{Yt(this,bn,!0,"f"),t!=="error"&&this.once("error",n),this.once(t,r)})}async done(){Yt(this,bn,!0,"f"),await Be(this,Ia,"f")}get currentMessage(){return Be(this,qs,"f")}async finalMessage(){return await this.done(),Be(this,Si,"m",Kd).call(this)}async finalText(){return await this.done(),Be(this,Si,"m",L0).call(this)}_emit(t,...r){if(Be(this,$a,"f"))return;t==="end"&&(Yt(this,$a,!0,"f"),Be(this,Zl,"f").call(this));const n=Be(this,us,"f")[t];if(n&&(Be(this,us,"f")[t]=n.filter(l=>!l.once),n.forEach(({listener:l})=>l(...r))),t==="abort"){const l=r[0];!Be(this,bn,"f")&&!n?.length&&Promise.reject(l),Be(this,Ha,"f").call(this,l),Be(this,za,"f").call(this,l),this._emit("end");return}if(t==="error"){const l=r[0];!Be(this,bn,"f")&&!n?.length&&Promise.reject(l),Be(this,Ha,"f").call(this,l),Be(this,za,"f").call(this,l),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Be(this,Si,"m",Kd).call(this))}async _fromReadableStream(t,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Be(this,Si,"m",Gd).call(this),this._connected();const l=zi.fromReadableStream(t,this.controller);for await(const u of l)Be(this,Si,"m",Yd).call(this,u);if(l.controller.signal?.aborted)throw new Di;Be(this,Si,"m",Xd).call(this)}[(qs=new WeakMap,Jl=new WeakMap,Ql=new WeakMap,Ha=new WeakMap,Ia=new WeakMap,Zl=new WeakMap,za=new WeakMap,us=new WeakMap,$a=new WeakMap,ec=new WeakMap,tc=new WeakMap,bn=new WeakMap,Vd=new WeakMap,Si=new WeakSet,Kd=function(){if(this.receivedMessages.length===0)throw new He("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},L0=function(){if(this.receivedMessages.length===0)throw new He("stream ended without producing a Message with role=assistant");const r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new He("stream ended without producing a content block with type=text");return r.join(" ")},Gd=function(){this.ended||Yt(this,qs,void 0,"f")},Yd=function(r){if(this.ended)return;const n=Be(this,Si,"m",M0).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{const l=n.content.at(-1);r.delta.type==="text_delta"&&l.type==="text"?this._emit("text",r.delta.text,l.text||""):r.delta.type==="input_json_delta"&&l.type==="tool_use"&&l.input&&this._emit("inputJson",r.delta.partial_json,l.input);break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Yt(this,qs,n,"f");break}}},Xd=function(){if(this.ended)throw new He("stream has ended, this shouldn't happen");const r=Be(this,qs,"f");if(!r)throw new He("request ended without sending any chunks");return Yt(this,qs,void 0,"f"),r},M0=function(r){let n=Be(this,qs,"f");if(r.type==="message_start"){if(n)throw new He(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new He(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{const l=n.content.at(r.index);if(l?.type==="text"&&r.delta.type==="text_delta")l.text+=r.delta.text;else if(l?.type==="tool_use"&&r.delta.type==="input_json_delta"){let u=l[B0]||"";u+=r.delta.partial_json,Object.defineProperty(l,B0,{value:u,enumerable:!1,writable:!0}),u&&(l.input=Bb(u))}return n}case"content_block_stop":return n}},Symbol.asyncIterator)](){const t=[],r=[];let n=!1;return this.on("streamEvent",l=>{const u=r.shift();u?u.resolve(l):t.push(l)}),this.on("end",()=>{n=!0;for(const l of r)l.resolve(void 0);r.length=0}),this.on("abort",l=>{n=!0;for(const u of r)u.reject(l);r.length=0}),this.on("error",l=>{n=!0;for(const u of r)u.reject(l);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((u,d)=>r.push({resolve:u,reject:d})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new zi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Tc extends Er{create(t,r){return t.model in P0&&console.warn(`The model '${t.model}' is deprecated and will reach end-of-life on ${P0[t.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),this._client.post("/v1/messages",{body:t,timeout:this._client._options.timeout??6e5,...r,stream:t.stream??!1})}stream(t,r){return Rc.createMessage(this,t,r)}}const P0={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024"};Tc||(Tc={});var Pb;class ot extends MO{constructor({baseURL:t=Id("ANTHROPIC_BASE_URL"),apiKey:r=Id("ANTHROPIC_API_KEY")??null,authToken:n=Id("ANTHROPIC_AUTH_TOKEN")??null,...l}={}){const u={apiKey:r,authToken:n,...l,baseURL:t||"https://api.anthropic.com"};if(!u.dangerouslyAllowBrowser&&VO())throw new He(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });

TODO: link!
`);super({baseURL:u.baseURL,timeout:u.timeout??6e5,httpAgent:u.httpAgent,maxRetries:u.maxRetries,fetch:u.fetch}),this.completions=new Ac(this),this.messages=new Tc(this),this.beta=new kc(this),this._options=u,this.apiKey=r,this.authToken=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01",...this._options.defaultHeaders}}validateHeaders(t,r){if(!(this.apiKey&&t["x-api-key"])&&r["x-api-key"]!==null&&!(this.authToken&&t.authorization)&&r.authorization!==null)throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(t){const r=this.apiKeyAuth(t),n=this.bearerAuth(t);return r!=null&&!bc(r)?r:n!=null&&!bc(n)?n:{}}apiKeyAuth(t){return this.apiKey==null?{}:{"X-Api-Key":this.apiKey}}bearerAuth(t){return this.authToken==null?{}:{Authorization:`Bearer ${this.authToken}`}}}Pb=ot;ot.Anthropic=Pb;ot.HUMAN_PROMPT=`

Human:`;ot.AI_PROMPT=`

Assistant:`;ot.DEFAULT_TIMEOUT=6e5;ot.AnthropicError=He;ot.APIError=Ht;ot.APIConnectionError=Wc;ot.APIConnectionTimeoutError=kb;ot.APIUserAbortError=Di;ot.NotFoundError=Ob;ot.ConflictError=jb;ot.RateLimitError=Nb;ot.BadRequestError=Ab;ot.AuthenticationError=Rb;ot.InternalServerError=Lb;ot.PermissionDeniedError=Tb;ot.UnprocessableEntityError=Db;ot.toFile=RO;ot.fileFromPath=xb;const{HUMAN_PROMPT:Tj,AI_PROMPT:Oj}=ot;(function(s){s.Page=Mb,s.Completions=Ac,s.Messages=Tc,s.Beta=kc})(ot||(ot={}));const QO=[{name:"run_command",description:"Run a shell command in the terminal. Use this to execute code, install packages, or run scripts.",input_schema:{type:"object",properties:{command:{type:"string",description:"The command line to execute"}},required:["command"]}},{name:"read_file",description:"Read the contents of a file.",input_schema:{type:"object",properties:{path:{type:"string",description:"The path to the file to read"}},required:["path"]}},{name:"write_to_file",description:"Write content to a file. Overwrites existing files.",input_schema:{type:"object",properties:{path:{type:"string",description:"The path to the file"},content:{type:"string",description:"The content to write"}},required:["path","content"]}},{name:"list_dir",description:"List files in a directory.",input_schema:{type:"object",properties:{path:{type:"string",description:"The directory path (default .)"}}}}];async function U0(s,t){return await new ot({apiKey:t.apiKey,dangerouslyAllowBrowser:!0}).messages.create({model:"claude-3-5-sonnet-20241022",max_tokens:4096,messages:s,tools:QO,system:`You are an expert AI Coding Agent running directly in the user's browser via WebContainers.
You have access to a full Node.js environment.
You can run shell commands, read/write files, and install dependencies.
When asked to build something, you should:
1. Plan the structure.
2. Create files using write_to_file.
3. Install dependencies using run_command (npm install ...).
4. Run the code using run_command (node ...).
5. Use list_dir to see what files exist.

Always output the output of your commands to the user using the tool results.
`})}async function ZO(s,t){const{name:r,input:n}=s;let l="",u=!1;try{if(r==="run_command"){const d=await t.webContainer.spawn("sh",["-c",n.command]);let c="";d.output.pipeTo(new WritableStream({write(f){c+=f,t.onLog(f)}}));const h=await d.exit;l=c+`
Exit code: ${h}`,h!==0&&(u=!0)}else r==="read_file"?l=await t.webContainer.fs.readFile(n.path,"utf-8"):r==="write_to_file"?(await t.webContainer.fs.writeFile(n.path,n.content),l=`Successfully wrote to ${n.path}`):r==="list_dir"?l=(await t.webContainer.fs.readdir(n.path||".")).join(`
`):(l=`Unknown tool: ${r}`,u=!0)}catch(d){l=`Error executing ${r}: ${d.message}`,u=!0}return{type:"tool_result",tool_use_id:s.id,content:l,is_error:u}}function ej({skill:s,onClose:t}){const[r,n]=q.useState(""),[l,u]=q.useState(!1),[d,c]=q.useState([]),[h,f]=q.useState(null),[x,g]=q.useState(localStorage.getItem("anthropic_api_key")||""),[S,A]=q.useState([]),[E,C]=q.useState("chat"),[p,_]=q.useState([]);q.useEffect(()=>{(async()=>{try{const R=await vO();f(R),v(R)}catch(R){console.error("Failed to boot WebContainer",R)}})()},[]),q.useEffect(()=>{},[s]);const v=async D=>{try{const R=await D.fs.readdir(".");_(R)}catch(R){console.error("Error listing files",R)}},y=D=>{const R=D.target.value;g(R),localStorage.setItem("anthropic_api_key",R)},k=async D=>{if(!(!D.target.files||!h)){u(!0);try{for(const R of D.target.files){const N=await R.arrayBuffer();await h.fs.writeFile(R.name,new Uint8Array(N)),c(U=>[...U,{role:"assistant",content:`Uploaded file: ${R.name}`}])}await v(h)}catch(R){c(N=>[...N,{role:"assistant",content:`Upload failed: ${R.message}`}])}finally{u(!1)}}},T=async()=>{if(!r.trim()||!x||!h)return;const D={role:"user",content:r};c(U=>[...U,D]),n(""),u(!0),C("chat");const R=S.length===0?`[Skill Context: ${s.name} - ${s.description}]
${r}`:r,N=[...S,{role:"user",content:R}];A(N);try{const U={webContainer:h,apiKey:x,onLog:Q=>{}};let F=N,I=await U0(F,U);for(;I.stop_reason==="tool_use";){const Q=I.content.find(se=>se.type==="tool_use");if(Q&&Q.type==="tool_use"){const se={role:"assistant",content:I.content};F=[...F,se],c(Y=>[...Y,{role:"assistant",content:`Executing: ${Q.name}...`}]),C("terminal");const $=await ZO(Q,U);["write_to_file","run_command"].includes(Q.name)&&v(h),F=[...F,{role:"user",content:[$]}],I=await U0(F,U)}else break}const W=I.content.find(Q=>Q.type==="text");if(W&&W.type==="text"){const Q={role:"assistant",content:W.text};c(se=>[...se,Q]),A([...F,{role:"assistant",content:I.content}])}}catch(U){console.error(U),c(F=>[...F,{role:"assistant",content:`Error: ${U.message}`}])}finally{u(!1)}},j=D=>{D.key==="Enter"&&(D.metaKey||D.ctrlKey)&&T()};return w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:w.jsxs("div",{className:"bg-white rounded-xl w-full max-w-6xl h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[w.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-2xl shadow-sm",children:s.icon}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.name}),w.jsx("p",{className:"text-sm text-gray-500 flex items-center gap-2",children:h?w.jsx("span",{className:"text-green-600 flex items-center gap-1",children:" Environment Ready"}):w.jsx("span",{className:"text-amber-600 flex items-center gap-1",children:" Booting Environment..."})})]})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("input",{type:"password",placeholder:"Anthropic API Key",className:"bg-white text-xs p-2 rounded border border-gray-300 focus:border-pink-500 outline-none w-48 shadow-sm",value:x,onChange:y}),w.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:w.jsx(gs,{className:"w-6 h-6"})})]})]}),w.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[w.jsxs("div",{className:`w-1/2 flex flex-col border-r border-gray-200 transition-all ${E!=="chat"?"hidden md:flex":"flex"}`,children:[w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/50",children:[d.length===0&&w.jsxs("div",{className:"text-center mt-20 opacity-50",children:[w.jsx(Hf,{className:"w-12 h-12 mx-auto mb-2 text-pink-400"}),w.jsx("p",{children:"Enter your API Key and start the task."}),w.jsx("p",{className:"text-sm mt-2",children:"You can upload files or just ask questions."})]}),d.map((D,R)=>w.jsx("div",{className:`flex ${D.role==="user"?"justify-end":"justify-start"}`,children:w.jsx("div",{className:`max-w-[90%] p-3 rounded-lg text-sm shadow-sm ${D.role==="user"?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-800"}`,children:w.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:D.content})})},R)),l&&w.jsxs("div",{className:"text-gray-500 text-xs flex items-center gap-2 p-2",children:[w.jsx(pc,{className:"w-3 h-3 animate-spin"})," Agent is working..."]})]}),w.jsxs("div",{className:"p-4 bg-white border-t border-gray-200",children:[w.jsxs("div",{className:"relative",children:[w.jsx("textarea",{value:r,onChange:D=>n(D.target.value),onKeyDown:j,placeholder:"What should the agent do?",rows:3,disabled:!h||!x||l,className:"w-full pl-4 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 resize-none bg-gray-50 focus:bg-white transition-colors"}),w.jsx("button",{onClick:T,disabled:l||!r.trim()||!x,className:"absolute right-2 bottom-2 p-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg hover:shadow-lg disabled:opacity-50 disabled:shadow-none transition-all",children:w.jsx(vk,{className:"w-4 h-4"})})]}),w.jsxs("div",{className:"flex justify-between items-center mt-2 px-1",children:[w.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-500 cursor-pointer hover:text-pink-600 transition-colors",children:[w.jsx(zf,{className:"w-4 h-4"}),w.jsx("span",{children:"Upload File"}),w.jsx("input",{type:"file",className:"hidden",multiple:!0,onChange:k})]}),w.jsx("span",{className:"text-xs text-gray-400",children:"Cmd + Enter to send"})]})]})]}),w.jsxs("div",{className:`w-1/2 flex flex-col bg-[#0f0f10] ${E!=="terminal"&&E!=="files"?"hidden md:flex":"flex"}`,children:[w.jsxs("div",{className:"flex border-b border-gray-800",children:[w.jsxs("button",{onClick:()=>C("terminal"),className:`px-4 py-2 text-xs font-medium flex items-center gap-2 ${E==="terminal"?"text-white border-b-2 border-pink-500 bg-gray-900":"text-gray-500 hover:text-gray-300"}`,children:[w.jsx(If,{className:"w-3 h-3"})," Terminal"]}),w.jsxs("button",{onClick:()=>C("files"),className:`px-4 py-2 text-xs font-medium flex items-center gap-2 ${E==="files"?"text-white border-b-2 border-pink-500 bg-gray-900":"text-gray-500 hover:text-gray-300"}`,children:[w.jsx(H_,{className:"w-3 h-3"})," Files (",p.length,")"]})]}),w.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[w.jsx("div",{className:`absolute inset-0 ${E==="terminal"||E==="chat"?"block":"hidden"}`,children:h?w.jsx($T,{webContainer:h}):w.jsx("div",{className:"text-gray-600 p-4 text-sm font-mono",children:"Terminal Waiting..."})}),w.jsx("div",{className:`absolute inset-0 p-4 overflow-y-auto ${E==="files"?"block":"hidden"}`,children:p.length===0?w.jsx("div",{className:"text-gray-600 text-sm italic",children:"No files in virtual system."}):w.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(D=>w.jsxs("div",{className:"p-2 bg-gray-900 rounded border border-gray-800 text-gray-300 text-xs font-mono flex items-center gap-2",children:[w.jsx(H_,{className:"w-4 h-4 text-blue-400"}),D]},D))})})]})]})]})]})})}function tj({user:s,cart:t,onToggleCart:r,onOpenAuth:n,onOpenCart:l,onOpenDocs:u}){const[d,c]=q.useState(""),[h,f]=q.useState(null),x=()=>{document.getElementById("search-input")?.focus(),document.getElementById("skills-grid")?.scrollIntoView({behavior:"smooth"})},g=()=>{document.getElementById("categories-section")?.scrollIntoView({behavior:"smooth"})};return w.jsxs(ff,{onOpenAuth:n,onOpenCart:l,user:s,cartCount:t.size,onNavFind:x,onNavCd:g,onNavMan:u,children:[w.jsx(jk,{onOpenDocs:u}),w.jsx(Mk,{onSelectCategory:S=>{f(S),c(""),document.getElementById("skills-grid")?.scrollIntoView({behavior:"smooth"})}}),w.jsx(Nk,{searchQuery:d,setSearchQuery:c,categoryFilter:h,setCategoryFilter:f,cart:t,onToggleCart:r,user:s,onOpenAuth:n}),w.jsx(Pk,{}),w.jsx(Hk,{})]})}function ij(){const s=ro(),[t,r]=q.useState(!1),[n,l]=q.useState(!1),[u,d]=q.useState(!1),[c,h]=q.useState(null),[f,x]=q.useState(new Set),[g,S]=q.useState(null);q.useEffect(()=>{Tn.auth.getSession().then(({data:{session:v}})=>{h(v?.user??null)});const{data:{subscription:_}}=Tn.auth.onAuthStateChange((v,y)=>{h(y?.user??null)});return()=>_.unsubscribe()},[]);const A=_=>{x(v=>{const y=new Set(v);return y.has(_)?y.delete(_):y.add(_),y})},E=_=>{x(v=>{const y=new Set(v);return y.delete(_),y})},C=()=>x(new Set),p=()=>{if(!c){r(!0);return}to.filter(v=>f.has(v.id)).forEach(v=>{St.getSkills().find(k=>k.name===v.name&&k.origin==="store")||St.saveSkill({name:v.name,description:v.description,category:v.category,icon:v.icon,color:v.color,config:{capabilities:[],systemPrompt:"",parameters:v.config,tools:[]},origin:"store",status:"active",sourceFiles:[],installCommand:v.installCommand})}),x(new Set),l(!1),s("/skills/library")};return w.jsxs(w.Fragment,{children:[w.jsxs(r1,{children:[w.jsx(mr,{path:"/",element:w.jsx(tj,{user:c,cart:f,onToggleCart:A,onOpenAuth:()=>r(!0),onOpenCart:()=>l(!0),onOpenDocs:()=>d(!0)})}),w.jsx(mr,{path:"/skills/create",element:w.jsx(ff,{onOpenAuth:()=>r(!0),onOpenCart:()=>l(!0),user:c,cartCount:f.size,onNavFind:()=>{s("/"),setTimeout(()=>{document.getElementById("search-input")?.focus(),document.getElementById("skills-grid")?.scrollIntoView({behavior:"smooth"})},100)},onNavCd:()=>{s("/"),setTimeout(()=>{document.getElementById("categories-section")?.scrollIntoView({behavior:"smooth"})},100)},onNavMan:()=>d(!0),children:w.jsx(BT,{onComplete:()=>{s("/skills/library")},onCancel:()=>s("/")})})}),w.jsx(mr,{path:"/skills/library",element:w.jsx(ff,{onOpenAuth:()=>r(!0),onOpenCart:()=>l(!0),user:c,cartCount:f.size,onNavFind:()=>{s("/"),setTimeout(()=>{document.getElementById("search-input")?.focus(),document.getElementById("skills-grid")?.scrollIntoView({behavior:"smooth"})},100)},onNavCd:()=>{s("/"),setTimeout(()=>{document.getElementById("categories-section")?.scrollIntoView({behavior:"smooth"})},100)},onNavMan:()=>d(!0),children:w.jsx(PT,{onCreateNew:()=>s("/skills/create"),onUseSkill:_=>S(_),onBack:()=>s("/")})})}),w.jsx(mr,{path:"/auth/callback",element:w.jsx(zk,{})}),w.jsx(mr,{path:"/index.html",element:w.jsx(d_,{to:"/",replace:!0})}),w.jsx(mr,{path:"*",element:w.jsx(d_,{to:"/",replace:!0})})]}),w.jsx(Ik,{isOpen:t,onClose:()=>r(!1)}),w.jsx($k,{isOpen:n,onClose:()=>l(!1),cartIds:f,onRemove:E,onClear:C,onPurchase:p}),w.jsx(qk,{isOpen:u,onClose:()=>d(!1)}),g&&w.jsx(ej,{skill:g,onClose:()=>S(null)})]})}function sj(){return w.jsx(R1,{basename:"/TacitLayer/",children:w.jsx(ij,{})})}"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(s=>{for(const t of s)t.active&&t.active.scriptURL.includes("coi-serviceworker.js")&&(console.warn("Found zombie service worker in main.tsx, killing it:",t.active.scriptURL),t.unregister().then(()=>{console.log("Zombie killed, reloading..."),window.location.reload()}))});oS.createRoot(document.getElementById("root")).render(w.jsx(H0.StrictMode,{children:w.jsx(sj,{})}));
